{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Client/Views/index.js","webpack:///./src/Client/Views/Widgets/index.js","webpack:///./src/Client/Views/Widgets/Widget.js","webpack:///./src/Client/Views/Widgets/Dropdown.js","webpack:///./src/Client/Views/Widgets/Chips.js","webpack:///./src/Client/Views/Widgets/Input.js","webpack:///./src/Client/Views/Modals/index.js","webpack:///./src/Client/Views/Modals/Modal.js","webpack:///./src/Client/Views/Modals/ConfirmModal.js","webpack:///./src/Client/Views/Modals/DateModal.js","webpack:///./src/Client/Views/Modals/IconModal.js","webpack:///./src/Client/Views/Modals/IframeModal.js","webpack:///./src/Client/Views/Modals/MediaBrowser.js","webpack:///./src/Client/Views/Modals/MediaUploader.js","webpack:///./src/Client/Views/Modals/PublishingSettingsModal.js","webpack:///./src/Client/Views/Editors/index.js","webpack:///./src/Client/Views/Editors/ConnectionEditor.js","webpack:///./src/Client/Views/Editors/ContentEditor.js","webpack:///./src/Client/Views/Editors/FormEditor.js","webpack:///./src/Client/Views/Editors/JSONEditor.js","webpack:///./node_modules/js-beautify/js/index.js","webpack:///./node_modules/js-beautify/js/lib/beautify.js","webpack:///./node_modules/js-beautify/js/lib/beautify-css.js","webpack:///./node_modules/js-beautify/js/lib/beautify-html.js","webpack:///./src/Client/Views/Editors/MediaViewer.js","webpack:///./src/Client/Views/Editors/UserEditor.js","webpack:///./src/Client/Views/Editors/SchemaEditor.js","webpack:///./src/Client/Views/Editors/ContentSchemaEditor.js","webpack:///./src/Client/Views/Editors/FieldSchemaEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/index.js","webpack:///./src/Client/Views/Editors/FieldEditors/FieldEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/ArrayEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/BooleanEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/ContentReferenceEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/ContentSchemaReferenceEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/DateEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/DropdownEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/LanguageEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/MediaReferenceEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/NumberEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/ResourceReferenceEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/RichTextEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/StringEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/StructEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/TagsEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/UrlEditor.js","webpack:///./src/Client/Views/Navigation/index.js","webpack:///./src/Client/Views/Navigation/NavbarMain.js","webpack:///./src/Client/Templates/Navigation/NavbarMain.js","webpack:///./src/Client/Views/Navigation/MainMenu.js","webpack:///./src/Client/Views/Navigation/NavbarPane.js","webpack:///./src/Client/Views/Navigation/ConnectionPane.js","webpack:///./src/Client/Views/Navigation/ContentPane.js","webpack:///./src/Client/Views/Navigation/FormsPane.js","webpack:///./src/Client/Views/Navigation/MediaPane.js","webpack:///./src/Client/Views/Navigation/SchemaPane.js","webpack:///./src/Client/Views/Dashboard/index.js","webpack:///./src/Client/Views/Dashboard/BackupEditor.js","webpack:///./src/Client/Views/Dashboard/InfoEditor.js","webpack:///./src/Client/Views/Dashboard/LanguageEditor.js","webpack:///./src/Client/Views/Dashboard/MigrationEditor.js","webpack:///./src/Client/Views/Dashboard/ProjectEditor.js","webpack:///./src/Client/Views/Dashboard/SyncEditor.js"],"names":["require","namespace","add","Widget","params","isAsync","fetch","message","notifier","element","querySelector","parentElement","removeChild","_","div","class","append","innerHTML","Crisp","View","module","exports","Dropdown","optionsUrl","HashBrown","Helpers","RequestHelper","request","then","options","optionIcons","label","iconKey","labelKey","key","value","optionLabel","toString","valueKey","Array","isArray","optionValue","isDisabled","disabledOptions","disabledKey","disabledValue","disabledOptionValue","sortedOptions","Object","keys","sort","sanityCheck","icon","placeholder","getFlattenedOptions","useMultiple","labels","indexOf","push","join","btnOptions","querySelectorAll","i","length","dataset","hasValue","classList","toggle","setTimeout","isChecked","checked","bounds","getBoundingClientRect","isAtRight","right","window","innerWidth","isAtBottom","bottom","innerHeight","newValue","foundValue","splice","updateSelectedClasses","divValue","getValueLabel","onChange","query","toLowerCase","isMatch","isOpen","trigger","useTypeAhead","focus","updatePositionClasses","title","tooltip","input","type","click","e","currentTarget","if","span","on","onTypeahead","each","optionIcon","getOptionIcon","reverseKeys","button","onChangeInternal","useClearButton","Views","Widgets","Chips","useArray","useObject","k","item","disabled","pattern","newKey","replace","newObject","Input","config","name","step","min","max","nextElementSibling","for","guid","id","form","onSubmit","multiple","directory","useDirectory","names","files","btnBrowse","btnSubmit","Math","round","size","preventDefault","FormData","textarea","Modal","actions","group","getAll","modal","remove","autoFetch","document","body","appendChild","isActive","spinner","action","onClick","close","h4","isBlocking","header","renderHeader","renderBody","footer","renderFooter","hasTransitionedIn","className","$element","find","before","addEventListener","pop","which","ConfirmModal","Modals","DateModal","days","months","hours","minutes","Date","isNaN","getDate","year","month","getFullYear","getDay","getMonth","setMonth","getDays","day","thisDate","getTime","now","isCurrent","setDate","getHours","setHours","getMinutes","setMinutes","icons","IconModal","style","display","onSearch","IframeModal","iframe","src","url","MediaBrowser","onClickOK","onload","contentWindow","MediaHelper","initMediaPickerMode","onPickMedia","onChangeResource","UI","errorModal","resources","reloadResource","Navigation","NavbarMain","reload","location","host","ProjectHelper","currentProject","currentEnvironment","MediaUploader","checkMediaProvider","catch","numFiles","file","isImage","isVideo","reader","FileReader","setLoading","html","img","target","result","readAsDataURL","video","URL","createObjectURL","controls","debug","log","content","apiPath","replaceId","uploadedIds","uploadFile","ids","Promise","reject","Error","folder","resolve","queue","slice","putNextMediaIntoTree","onSuccess","onChangeFile","newFiles","PublishingSettingsModal","model","prop","language","JSON","parse","stringify","getSettings","governedBy","governor","ContentHelper","getContentByIdSync","applyToChildren","connections","connectionId","ConnectionEditor","hash","$saveBtn","toggleClass","isProvider","ConnectionHelper","setMediaProvider","getMediaProvider","connection","processor","alias","Editors","ProcessorEditors","editor","fileExtension","deployer","DeployerEditors","do","paths","media","Models","Connection","isLocked","renderMediaProviderEditor","renderTitleEditor","renderUrlEditor","renderProcessorSettingsEditor","renderDeployerSettingsEditor","onClickAdvanced","onClickSave","ContentEditor","dirty","followingField","field","rect","actionRect","top","height","lastScrollPos","scrollTop","saveAction","val","postSaveUrl","setContent","iframeModal","callback","fieldEditorReadyCallbacks","registeredCallback","restoreScrollPos","delay","newScrollPos","fieldValue","fieldDefinition","$keyActions","compiledSchema","SchemaHelper","getFieldSchemaWithParentConfigs","schemaId","fieldEditor","getFieldEditor","editorId","fieldSchema","isEmpty","checkRecursive","object","fieldEditorInstance","description","schema","getObject","multilingual","tabId","fieldDefinitions","fieldValues","tabFieldDefinitions","noTabAssigned","tabs","isMetaTab","thisTabAssigned","fieldSanityCheck","renderField","_multilingual","tab","activeTab","Router","defaultTabId","tabName","renderFields","fields","properties","onScroll","remoteUrl","contentUrl","getConnectionByIdSync","$","empty","isPublished","a","href","select","option","Content","contentSchema","getSchemaWithParentFields","renderEditor","renderButtons","onFieldEditorsReady","get","charAt","toUpperCase","FieldEditors","FormEditor","navbar","inputs","allowedOrigin","newOrigin","newTitle","redirect","newUrl","appendRedirect","types","view","onClickRemoveInput","renderPreview","required","checkDuplicates","onClickAddInput","$preview","confirmModal","entries","environmentUrl","$content","postUrl","protocol","hostname","renderEntries","readonly","copyToClipboard","previousElementSibling","renderAllowedOriginEditor","renderRedirectEditor","renderInputsEditor","beautify","js_beautify","JSONEditor","$error","hide","modelUrl","attr","children","show","fromModel","isValid","check","v","getSchemaByIdSync","invalidSchemas","r","schemas","b","invalidConnections","c","recurse","obj","failMessage","getDoc","getValue","onClickBasic","CodeMirror","fromTextArea","lineNumbers","mode","json","viewportMargin","tabSize","lineWrapping","indentUnit","indentWithTabs","theme","getCookie","setValue","onChangeText","get_beautify","css_beautify","html_beautify","js","css","define","values","o","TypeError","p","prototype","hasOwnProperty","call","mergeOpts","allOptions","targetType","finalOpts","js_source_text","acorn","nonASCIIwhitespace","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","RegExp","nonASCIIidentifier","newline","lineBreak","source","allLineBreaks","isIdentifierStart","code","test","String","fromCharCode","isIdentifierChar","in_array","what","arr","trim","s","ltrim","sanitizeOperatorPosition","opPosition","OPERATOR_POSITION","before_newline","validPositionValues","after_newline","preserve_newline","OPERATOR_POSITION_BEFORE_OR_PRESERVE","MODE","BlockStatement","Statement","ObjectLiteral","ArrayLiteral","ForInitializer","Conditional","Expression","Beautifier","output","tokens","token_pos","Tokenizer","current_token","last_type","last_last_text","indent_string","flags","previous_flags","flag_store","prefix","handlers","opt","baseIndentString","handle_start_expr","handle_end_expr","handle_start_block","handle_end_block","handle_word","handle_semicolon","handle_string","handle_equals","handle_operator","handle_comma","handle_block_comment","handle_comment","handle_dot","handle_unknown","handle_eof","create_flags","flags_base","next_indent_level","indentation_level","just_added_newline","line_indent_level","next_flags","parent","last_text","last_word","declaration_statement","declaration_assignment","multiline_frame","inline_frame","if_block","else_block","do_block","do_while","import_block","in_case_statement","in_case","case_body","start_line_index","get_line_number","ternary_depth","brace_style","braces_on_own_line","undefined","brace_style_split","split","brace_preserve_inline","indent_size","parseInt","indent_char","eol","preserve_newlines","break_chained_methods","max_preserve_newlines","space_in_paren","space_in_empty_paren","jslint_happy","space_after_anon_function","keep_array_indentation","space_before_conditional","unescape_strings","wrap_line_length","e4x","end_with_newline","comma_first","operator_position","test_output_raw","indent_with_tabs","match","preindent_index","substring","Output","raw","set_mode","sweet_code","tokenizer","tokenize","get_token","text","get_code","handle_whitespace_and_comments","local_token","preserve_statement_flags","newlines","keep_whitespace","is_array","temp_token","h","comments_before","print_newline","j","split_linebreaks","out","idx","newline_restricted_tokens","allow_wrap_or_preserved_newline","force_linewrap","shouldPreserveOrForce","wanted_newline","operatorLogicApplies","positionable_operators","shouldPrintOperatorNewline","proposed_line_length","current_line","get_character_count","space_before_token","force_newline","next_token","restore_mode","add_new_line","print_token_line_indentation","whitespace_before","set_indent","print_token","printable_token","add_raw_token","previous_line","last","popped","is_empty","add_token","indent","deindent","is_expression","remove_redundant_indentation","start_of_object_property","start_of_statement","all_lines_start_with","lines","line","each_line_matches_indent","len","is_special_word","word","offset","index","next_mode","line_starters","second_token","empty_braces","empty_anonymous_function","check_token","opened","just_added_blankline","isGeneratorAsterisk","isUnary","space_before","space_after","in_ternary","isColon","isTernaryColon","isOtherColon","directives","preserve","javadoc","starless","lastIndent","lastIndentLength","OutputLine","_character_count","_indent_count","_items","_empty","level","baseIndentLength","indent_length","remove_indent","indent_cache","add_outputline","token","x","add_space_before_token","frame","output_length","eat_newlines","InputScanner","_input","_input_length","_position","back","hasNext","next","peek","peekCharCode","charCodeAt","lastIndex","testChar","pattern_match","exec","Token","comments_after","input_string","opts","whitespace","digit","digit_bin","digit_oct","digit_hex","punct","concat","reserved_words","block_comment_pattern","comment_pattern","directives_block_pattern","directive_pattern","directives_end_ignore_pattern","template_pattern","n_newlines","whitespace_before_token","in_html_comment","token_values","open","open_stack","comments","tokenize_next","get_directives","directive_match","resulting_string","whitespace_on_this_line","last_token","allow_decimal","allow_e","local_digit","comment","comment_match","ignore","startXmlRegExp","sep","esc","has_char_escapes","in_char_class","xmlRegExp","xmlStr","rootTag","isCurlyRoot","depth","isEndTag","tagName","isSingletonTag","parse_string","delimiter","allow_unescaped_newlines","start_sub","current_char","unescape_string","sharp","template_match","escaped","input_scan","matched","beautifier","source_text","newlinesFromLastWSEat","indentSize","indentCharacter","selectorSeparatorNewline","selector_separator_newline","newline_between_rules","space_around_combinator","space_around_selector_separator","whiteRe","pos","ch","parenLevel","skipWhitespace","prev_pos","eatWhitespace","eatString","endChars","start","peekString","endChar","str","preserve_newlines_local","print","newLine","eatComment","singleLine","lookBack","foundNestedPseudoClass","openParen","basebaseIndentString","singleIndent","indentLevel","nestedLevel","outdent","singleSpace","_lastCharWhitespace","keepWhitespace","preserveSingleSpace","isAfterSpace","insideRule","insidePropertyValue","enteringConditionalGroup","top_ch","last_top_ch","isAfterNewline","variableOrRule","NESTED_AT_RULE","CONDITIONAL_GROUP_RULE","sweetCode","rtrim","style_html","html_source","multi_parser","indent_inner_html","indent_body_inner_html","indent_head_inner_html","indent_character","unformatted","content_unformatted","indent_handlebars","wrap_attributes","wrap_attributes_indent_size","is_wrap_attributes_force","is_wrap_attributes_force_expand_multiline","is_wrap_attributes_force_aligned","extra_liners","max_char","substr","Parser","current_mode","tags","parentcount","parent1","tag_type","token_text","token_type","indent_content","Utils","single_token","void_elements","is_whitespace","n","traverse_whitespace","input_char","space_or_wrap","line_char_count","print_indentation","get_content","handlebarsStarted","peek3","get_tag","get_contents_to","reg_match","reg_array","end_script","record_tag","tag","indent_level","retrieve_tag","temp_parent","indent_to_tag","space","first_attr","has_wrapped_attrs","tag_start","tag_end","tag_start_char","orig_pos","orig_line_char_count","is_tag_closed","tail","get_unformatted","wrapped","indentAttrs","force_first_attr_wrap","is_only_attribute","alignment_size","count","get_comment","tag_complete","tag_index","tag_offset","tag_check","is_unformatted","search","start_pos","tokenMatcher","newToken","doesNotMatch","orig_tag","delimiterMatcher","tag_name_type","get_full_indent","next_tag","printer","js_source","force","print_token_raw","unindent","t","tag_name","tag_extracted_from_last_output","foundIfOnCurrentLine","lastCheckedOutput","_beautifier","script_indent_level","indent_scripts","indentation","Child_options","child_options","white","_level","reindent","requireamd","MediaViewer","Media","mediaSrc","getContentTypeHeader","isAudio","audio","UserEditor","fullName","username","email","customRequest","projects","newUserObject","newPassword","password","project","getScopes","scopes","password1","password2","isLongEnough","$passwordWarning","isAdmin","renderUserNameEditor","renderFullNameEditor","renderEmailEditor","renderPasswordEditor","currentUserIsAdmin","hidePermissions","renderAdminEditor","hasScope","giveScope","removeScope","settings","info","renderScopesEditor","SchemaEditor","jsonEditor","getIcon","newIcon","isVertical","renderIconEditor","parentSchemaId","newParent","parentSchema","ContentSchemaEditor","allTabs","parentTabs","getParentTabs","parentProperties","getAllSchemasSync","allowedChildSchemas","defaultTabEditor","getAllTabs","newTabs","renderFieldProperties","$tabs","$fieldProperties","$parentFieldProperties","currentTab","getParentProperties","fieldKey","newProperties","UIHelper","fieldSortableObject","parents","isValidTab","$field","renderConfigEditor","newField","FieldSchemaEditor","useTypeahead","newEditor","renderFieldConfigEditor","FieldEditor","renderKeyActions","ArrayEditor","useGrid","UHashBrown","IHelper","fieldSortableArray","newArray","from","forEach","allowedSchemas","items","schemaBindings","newItems","minItems","diff","maxItems","editorClass","editorInstance","prepend","filter","newSchemaId","getItemLabel","messageModal","BooleanEditor","ContentReferenceEditor","allowedContent","areRulesDefined","isContentAllowed","getDropdownOptions","ContentSchemaReferenceEditor","getParentSchema","contentEditor","thisContent","parentId","parentContent","contentSchemas","isNative","DateEditor","toISOString","date","formatDate","onClickOpen","onClickRemove","DropdownEditor","LanguageEditor","LanguageHelper","getLanguagesSync","MediaReferenceEditor","getMediaByIdSync","NumberEditor","parseFloat","$input","isSlider","ResourceReferenceEditor","resource","resourceKeys","singularResourceName","RichTextEditor","marked","silentChange","activeView","mediaBrowser","getMediaById","wysiwyg","insertHtml","replaceSelection","markdown","toMarkdown","getTabContent","Infinity","CKEDITOR","removePlugins","toolbarGroups","groups","extraPlugins","removeButtons","removeDialogTabs","getData","stripStyle","attributes","dataProcessor","dataFilter","addRules","elements","h1","h2","h3","h5","h6","section","hr","aside","ul","li","blockquote","setData","onClickTab","onClickInsertMedia","initHtmlEditor","initMarkdownEditor","initWYSIWYGEditor","isMarkdownDisabled","StringEditor","isMultiLine","StructEditor","keySchema","isSilent","struct","fieldSchemaId","compiledFieldSchema","parentStruct","labelOptions","newLabel","newStruct","TagsEditor","UrlEditor","contentId","nodes","getAllParents","node","getSlug","sameUrls","thatUrl","isMatchWithNumber","lastIndexOf","isSameUrl","generateUrl","$titleInput","regenerate","fetchFromTitle","iterate","reverse","template","tabPanes","ContentPane","init","MediaPane","FormsPane","ConnectionPane","SchemaPane","$pane","pane","innerText","sortingMethod","applySorting","err","data","route","stopPropagation","tabRoute","state","buttons","panes","scroll","routingPath","mediaFolder","save","restore","createDate","itemPath","shortPath","path","languageTitle","showTab","$item","performSort","updateDate","container","$nestedChildren","appendTo","queueItem","parentDirAttr","parentDirAttrKey","parentDirAttrValue","parentDirSelector","$parentDir","createDir","dirNames","finalDirName","dirName","prevFinalDirName","$dir","onClickToggleChildren","parentDirExtraAttr","$prevDir","dirContextMenu","context","currentUser","User","current","hasConnectionsScope","hasSchemasScope","hasSettingsScope","nav","sortingOptions","default","alphaAsc","alphaDesc","dateAsc","dateDesc","onChangeFilter","onChangeSorting","getItems","getItemName","getItemIcon","getItemRoutingPath","isDirectory","isItemDirectory","hasRemote","sync","isRemote","getItemContextMenu","itemContextMenu","hierarchy","applyHierarchy","paneContextMenu","MainMenu","newLanguage","localStorage","setItem","topic","languages","languageDropdown","notify","onChangeLanguage","userDropdown","helpDropdown","onClickQuestion","NavbarPane","addTabButton","newIndex","reset","newPath","off","onChangeDirectory","$container","containerIndex","$parentItem","onChangeSortIndex","canCreateDirectory","newConnection","connectionEditor","pullId","pushId","addClass","currentUserHasScope","addTabPane","menu","isSyncEnabled","SettingsHelper","getCachedSettings","enabled","onClickOpenInNewTab","onClickRemoveConnection","onClickCopyItemId","onClickPushConnection","onClickPullConnection","onClickNewConnection","onClickRefreshResource","getContentById","asSibling","getSchemaById","sortIndex","getNewSortIndex","schemaReference","pickFirstSchema","apiUrl","newContent","publishing","renderPublishingModal","shouldUnpublish","settingsSanityCheck","unpublishConnection","shouldDeleteChildren","getPropertyValue","setPropertyValue","setContentById","onClickRename","onClickNewContent","onClickMoveItem","onClickRemoveContent","onClickContentPublishing","onClickPushContent","onClickPullContent","newFormId","forms","onClickRemoveForm","onClickPushForm","onClickPullForm","onClickNewForm","newFolder","mediaViewer","onClickUploadMedia","onClickRenameMedia","onClickRemoveMedia","onClickReplaceMedia","newSchema","schemaEditor","onClickNewSchema","onClickRemoveSchema","onClickPushSchema","onClickPullSchema","BackupEditor","uploadModal","formData","ajax","processData","contentType","success","submit","timestamp","Project","backups","backup","onClickRestoreBackup","ReqestHelper","onClickDeleteBackup","onClickUploadBackup","onClickCreateBackup","InfoEditor","setSettings","newName","setLanguages","HashBown","getLanguageOptions","MigrationEditor","environments","to","getToOptions","environment","ProjectEditor","$btn","environmentName","Dashboard","newInfo","SyncEditor","projectId","newSettings","languageCount","userCount","users","onClickInfo","onClickLanguages","onClickBackups","onClickSync","onClickMigrate","onClickRemoveEnvironment","onClickAddEnvironment","onClickApply","alert","tokenModal","renderEnabledSwitch","renderTokenEditor","renderProjectIdEditor"],"mappings":"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","file":"views.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 227);\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views\n */\nrequire('./Widgets');\nrequire('./Modals');\nrequire('./Editors');\nrequire('./Navigation');\nrequire('./Dashboard');\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Widgets\n */\nnamespace('Views.Widgets')\n.add(require('./Widget'))\n.add(require('./Dropdown'))\n.add(require('./Chips'))\n.add(require('./Input'));\n","'use strict';\n\n/**\n * A standard widget\n *\n * @memberof HashBrown.Client.Views.Widgets\n */\nclass Widget extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        if(!params.isAsync) {\n            this.fetch();\n        }\n    }\n\n    /**\n     * Adds a notifying message\n     *\n     * @param {String} message\n     */\n    notify(message) {\n        let notifier = this.element.querySelector('.widget__notifier');\n\n        if(!message) {\n            if(notifier) { \n                notifier.parentElement.removeChild(notifier);\n            }\n\n            return;\n        }\n\n        if(!notifier) {\n            notifier = _.div({class: 'widget__notifier'}, message);\n\n            _.append(this.element, notifier);\n        }\n\n        notifier.innerHTML = message;\n    }\n}\n\nmodule.exports = Widget;\n","'use strict';\n\n/**\n * A multi purpose dropdown\n *\n * @memberof HashBrown.Client.Views.Widgets\n */\nclass Dropdown extends HashBrown.Views.Widgets.Widget {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        if(params.optionsUrl) {\n            params.isAsync = true;\n            \n            HashBrown.Helpers.RequestHelper.request('get', params.optionsUrl)\n            .then((options) => {\n                this.options = options;\n\n                this.fetch();\n            });\n        }\n                \n        super(params);\n\n        this.optionIcons = {};\n    }\n   \n    /**\n     * Gets option icon\n     *\n     * @param {String} label\n     *\n     * @returns {String} Icon\n     */\n    getOptionIcon(label) {\n        if(!this.iconKey || !this.labelKey || !this.options) { return ''; }\n        \n        for(let key in this.options) {\n            let value = this.options[key];\n\n            let optionLabel = this.labelKey ? value[this.labelKey] : value;\n           \n            if(typeof optionLabel !== 'string') { \n                optionLabel = optionLabel ? optionLabel.toString() : '';\n            }\n        \n            if(optionLabel === label) {\n                return value[this.iconKey] || '';\n            }\n        }\n\n        return '';\n    }\n\n    /**\n     * Converts options into a flattened structure\n     *\n     * @returns {Object} Options\n     */\n    getFlattenedOptions() {\n        if(!this.labelKey && !this.valueKey && this.options && !Array.isArray(this.options)) { return this.options; }\n        \n        let options = {};\n\n        for(let key in this.options) {\n            let value = this.options[key];\n\n            let optionLabel = this.labelKey ? value[this.labelKey] : value;\n            let optionValue = this.valueKey ? value[this.valueKey] : value;\n           \n            if(typeof optionValue !== 'string') { \n                optionValue = optionValue ? optionValue.toString() : '';\n            }\n            \n            if(typeof optionLabel !== 'string') { \n                optionLabel = optionLabel ? optionLabel.toString() : '';\n            }\n\n            // Check for disabled options\n            let isDisabled = false;\n\n            if(this.disabledOptions && Array.isArray(this.disabledOptions)) {\n                for(let disabledKey in this.disabledOptions) {\n                    let disabledValue = this.disabledOptions[disabledKey];\n                    let disabledOptionValue = this.valueKey ? disabledValue[this.valueKey] : disabledValue;\n                   \n                    if(typeof disabledOptionValue !== 'string') { \n                        disabledOptionValue = disabledOptionValue.toString();\n                    }\n               \n                    if(optionValue === disabledOptionValue) {\n                        isDisabled = true;\n                        break;\n                    }\n                }\n            }\n\n            if(isDisabled) { continue; }\n\n            options[optionLabel] = optionValue;\n        }\n\n        // Sort options alphabetically\n        let sortedOptions = {};\n\n        for(let label of Object.keys(options).sort()) {\n            sortedOptions[options[label]] = label;\n        }\n\n        return sortedOptions;\n    }\n\n    /**\n     * Gets the current value label\n     *\n     * @returns {String} Value label\n     */\n    getValueLabel() {\n        this.sanityCheck();\n       \n        if(this.icon) {\n            return '<span class=\"widget--dropdown__value__tool-icon fa fa-' + this.icon + '\"></span>';\n        }\n\n        let label = this.placeholder || '(none)';\n        let options = this.getFlattenedOptions();\n\n        if(this.useMultiple) {\n            let labels = [];\n\n            for(let key in options) {\n                let value = options[key];\n\n                if(value && this.value.indexOf(key) > -1) {\n                    labels.push(value);\n                }\n            }\n\n            label = labels.join(', ');\n\n        } else {\n            label = options[this.value] === 0 ? '0' : options[this.value] || label;\n        \n        }\n\n        return label;\n    }\n\n    /**\n     * Performs a sanity check of the value\n     */\n    sanityCheck() {\n        if(this.useMultiple && !Array.isArray(this.value)) {\n            this.value = [];\n        } else if(!this.useMultiple && Array.isArray(this.value)) {\n            this.value = null;\n        }\n    }\n\n    /**\n     * Updates all selected classes\n     */\n    updateSelectedClasses() {\n        let btnOptions = this.element.querySelectorAll('.widget--dropdown__option');\n\n        if(!btnOptions) { return; }\n        \n        for(let i = 0; i < btnOptions.length; i++) {\n            let value = btnOptions[i].dataset.value;\n            let hasValue = Array.isArray(this.value) ? this.value.indexOf(value) > -1 : this.value === value;\n\n            btnOptions[i].classList.toggle('selected', hasValue);\n        }\n    }\n\n    /**\n     * Updates all position classes\n     */\n    updatePositionClasses() {\n        setTimeout(() => {\n            let toggle = this.element.querySelector('.widget--dropdown__toggle');\n            let isChecked = toggle.checked;\n            \n            toggle.checked = true;\n\n            let bounds = this.element.querySelector('.widget--dropdown__options').getBoundingClientRect();\n            \n            toggle.checked = isChecked;\n\n            let isAtRight = bounds.right >= window.innerWidth - 10;\n            let isAtBottom = bounds.bottom >= window.innerHeight - 10;\n\n            this.element.classList.toggle('right', isAtRight);\n            this.element.classList.toggle('bottom', isAtBottom);\n        }, 1);\n    }\n\n    /**\n     * Event: Change value\n     *\n     * @param {Object} newValue\n     */\n    onChangeInternal(newValue) {\n        this.sanityCheck();\n\n        // Change multiple value\n        if(this.useMultiple) {\n            // First check if value was already selected, remove if found\n            let foundValue = false;\n            \n            for(let i in this.value) {\n                if(this.value[i] === newValue) {\n                    this.value.splice(i, 1);\n                    foundValue = true;\n                    break;\n                }\n            }\n\n            // If value was not selected, add it\n            if(!foundValue) {\n                if(!newValue) {\n                    this.value = [];\n                } else {\n                    this.value.push(newValue);\n                }\n            }\n\n        // Change single value\n        } else {\n            this.value = newValue;\n        }\n\n        // Update classes\n        this.updateSelectedClasses();\n       \n        // Update value label\n        let divValue = this.element.querySelector('.widget--dropdown__value');\n\n        if(divValue) {\n            divValue.innerHTML = this.getValueLabel();\n        }\n\n        // Cancel\n        this.toggle(false);\n\n        // The value is a function, execute it and return\n        if(typeof this.value === 'function') {\n            this.value();\n            return;\n        }\n\n        // Change event\n        if(typeof this.onChange === 'function') {\n            this.onChange(this.value);\n        }\n    }\n\n    /**\n     * Event: Typeahead\n     *\n     * @param {String} query\n     */\n    onTypeahead(query) {\n        let btnOptions = this.element.querySelectorAll('.widget--dropdown__option');\n\n        if(!btnOptions) { return; }\n        \n        query = (query || '').toLowerCase();\n\n        for(let i = 0; i < btnOptions.length; i++) {\n            let value = btnOptions[i].innerHTML.toLowerCase();\n            let isMatch = query.length < 2 || value.indexOf(query) > -1;\n\n            btnOptions[i].classList.toggle('hidden', !isMatch);\n        }\n    }\n\n    /**\n     * Toggles open/closed\n     *\n     * @param {Boolean} isOpen\n     */\n    toggle(isOpen) {\n        let toggle = this.element.querySelector('.widget--dropdown__toggle');\n        \n        if(typeof isOpen === 'undefined') {\n            isOpen = !toggle.checked;\n        }\n\n        toggle.checked = isOpen;\n\n        if(!isOpen) {\n            this.trigger('cancel');\n        } else {\n            if(this.useTypeAhead) {\n                this.element.querySelector('.widget--dropdown__typeahead').focus();\n            }\n        }\n        \n        this.updatePositionClasses();\n        this.updateSelectedClasses();\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({title: this.tooltip, class: 'widget widget--dropdown dropdown' + (this.icon ? ' has-icon' : '')},\n            // Value\n            _.div({class: 'widget--dropdown__value'}, this.getValueLabel()),\n            \n            // Toggle\n            _.input({class: 'widget--dropdown__toggle', type: 'checkbox'})\n                .click((e) => {\n                    this.toggle(e.currentTarget.checked);     \n                }),\n            \n            // Typeahead input\n            _.if(this.useTypeAhead,\n                _.span({class: 'widget--dropdown__typeahead__icon fa fa-search'}),\n                _.input({class: 'widget--dropdown__typeahead', type: 'text'})\n                    .on('input', (e) => { this.onTypeahead(e.currentTarget.value); })\n            ),\n\n            // Dropdown options\n            _.div({class: 'widget--dropdown__options'},\n                _.each(this.getFlattenedOptions(), (optionValue, optionLabel) => {\n                    let optionIcon = this.getOptionIcon(optionLabel);\n\n                    // Reverse keys option\n                    if(this.reverseKeys) {\n                        let key = optionLabel;\n                        let value = optionValue;\n\n                        optionValue = key;\n                        optionLabel = value;\n                    }\n\n                    if(!optionValue || optionValue === '---') {\n                        return _.div({class: 'widget--dropdown__separator'}, optionLabel);\n                    }\n\n                    return _.button({class: 'widget--dropdown__option', 'data-value': optionValue}, \n                        _.if(optionIcon, \n                            _.span({class: 'widget--dropdown__option__icon fa fa-' + optionIcon})\n                        ),\n                        optionLabel\n                    ).click((e) => {\n                        this.onChangeInternal(optionValue);\n                    });\n                })\n            ),\n\n            // Clear button\n            _.if(this.useClearButton,\n                _.button({class: 'widget--dropdown__clear fa fa-remove', title: 'Clear selection'})\n                    .click((e) => {\n                    this.onChangeInternal(null);\n                })\n            )\n        );\n    }\n}\n\nmodule.exports = Dropdown;\n","'use strict';\n\n/**\n * A group of chips\n *\n * @memberof HashBrown.Client.Views.Widgets\n */\nclass Chips extends HashBrown.Views.Widgets.Widget {\n    /**\n     * Event: Change\n     */\n    onChangeInternal() {\n        if(typeof this.onChange !== 'function') { return; }\n\n        this.onChange(this.value);\n    }\n    \n    /**\n     * Pre render\n     */\n    prerender() {\n        // Array check\n        // NOTE: Array is the default mode for this widget\n        if(this.useArray === true || typeof this.useArray === 'undefined') {\n            // Check format\n            if(!this.value || !Array.isArray(this.value)) {\n                this.value = [];\n            }\n            \n            if(!this.disabledValue || !Array.isArray(this.disabledValue)) {\n                this.disabledValue = [];\n            }\n\n            // Check empty values\n            for(let i = this.value.length - 1; i >= 0; i--) {\n                if(!this.value[i]) {\n                    this.value.splice(i, 1);\n                }\n            }\n            \n            // Check for empty values or duplicates in disabled value\n            for(let i = this.disabledValue.length - 1; i >= 0; i--) {\n                if(!this.disabledValue[i] || this.value.indexOf(this.disabledValue[i]) > -1) {\n                    this.disabledValue.splice(i, 1);\n                }\n            }\n\n        // Object check\n        } else if(this.useArray === false || this.useObject === true) {\n            // Check format\n            if(!this.value || Array.isArray(this.value) || typeof this.value !== 'object') {\n                this.value = {};\n            }\n\n            if(!this.disabledValue || Array.isArray(this.disabledValue) || typeof this.disabledValue !== 'object') {\n                this.disabledValue = {};\n            }\n\n            // Check empty values\n            for(let k in this.value) {\n                if(!k || !this.value[k]) {\n                    delete this.value[k];\n                }\n            }\n            \n            // Check for empty values or duplicates in disabled value\n            for(let k in this.disabledValue) {\n                if(!k || !this.disabledValue[k] || this.value[k]) {\n                    delete this.value[k];\n                }\n            }\n        }\n    }\n    \n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'widget widget--chips'},\n            _.each(this.disabledValue, (i, item) => {\n                return _.div({class: 'widget--chips__chip'},\n                    _.input({class: 'widget--chips__chip__input', disabled: true, value: item})\n                );\n            }),\n            _.each(this.value, (i, item) => {\n                return _.div({class: 'widget--chips__chip'},\n                    _.if(this.useObject === true || this.useArray === false || this.valueKey,\n                        _.input({class: 'widget--chips__chip__input', title: 'The key', type: 'text', value: item[this.valueKey] || i, pattern: '.{1,}'})\n                            .on('change', (e) => {\n                                if(this.valueKey) {\n                                    item[this.valueKey] = e.currentTarget.value || '';\n\n                                } else {\n                                    i = e.currentTarget.value || '';\n\n                                    this.value[i] = item;\n                                }\n                       \n                                this.onChangeInternal();\n                            }),\n                    ),\n                    _.input({class: 'widget--chips__chip__input', title: 'The label', type: 'text', value: this.labelKey ? item[this.labelKey] : item, pattern: '.{1,}'})\n                        .on('change', (e) => {\n                            if(this.labelKey) {\n                                item[this.labelKey] = e.currentTarget.value || '';\n                            } else {\n                                this.value[i] = e.currentTarget.value || '';\n                            }\n                   \n                            this.onChangeInternal();\n                        }),\n                    _.button({class: 'widget--chips__chip__remove fa fa-remove', title: 'Remove item'})\n                        .click(() => {\n                            this.value.splice(i, 1);\n\n                            this.onChangeInternal();\n\n                            this.fetch();\n                        })\n                );\n            }),\n            _.button({class: 'widget widget--button round widget--chips__add fa fa-plus', title: 'Add item'})\n                .click(() => {\n                    let newValue = this.placeholder || 'New item';\n                    let newKey = newValue.toLowerCase().replace(/[^a-zA-Z]/g, '');\n\n\n                    if(this.useObject === true || this.useArray === false) {\n                        this.value[newKey] = newValue;\n                    \n                    } else if (this.valueKey && this.labelKey) {\n                        let newObject = {};\n\n                        newObject[this.valueKey] = newKey;\n                        newObject[this.labelKey] = newValue;\n                        \n                        this.value.push(newObject);\n                    \n                    } else {\n                        this.value.push(newValue);\n                    \n                    }\n\n                    this.onChangeInternal();\n\n                    this.fetch();\n                })\n        );\n    }\n}\n\nmodule.exports = Chips;\n","'use strict';\n\n/**\n * A versatile input widget\n *\n * @memberof HashBrown.Client.Views.Widgets\n */\nclass Input extends HashBrown.Views.Widgets.Widget {\n    /**\n     * Event: Change value\n     *\n     * @param {Anything} newValue\n     */\n    onChangeInternal(newValue) {\n        this.value = newValue;\n\n        if(typeof this.onChange !== 'function') { return; }\n\n        this.onChange(this.value);\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        let config = {\n            placeholder: this.placeholder,\n            title: this.tooltip,\n            type: this.type || 'text',\n            class: 'widget widget--input ' + (this.type || 'text'),\n            value: this.value,\n            name: this.name\n        };\n\n        if(this.type === 'number' || this.type === 'range') {\n            config.step = this.step || 'any';\n            config.min = this.min;\n            config.max = this.max;\n        }\n\n        switch(this.type) {\n            case 'range':\n                return _.div({class: config.class, title: config.title},\n                    _.input({class: 'widget--input__range-input', type: 'range', value: this.value, min: config.min, max: config.max, step: config.step})\n                        .on('input', (e) => {\n                            this.onChangeInternal(e.currentTarget.value);\n\n                            e.currentTarget.nextElementSibling.innerHTML = e.currentTarget.value;\n                        }),\n                    _.div({class: 'widget--input__range-extra'}, this.value)\n                );\n\n            case 'checkbox':\n                return _.div({class: config.class, title: config.title},\n                    _.if(config.placeholder,\n                        _.label({for: 'checkbox-' + this.guid, class: 'widget--input__checkbox-label'}, config.placeholder)\n                    ),\n                    _.input({id: 'checkbox-' + this.guid, class: 'widget--input__checkbox-input', type: 'checkbox', checked: this.value})\n                        .on('change', (e) => {\n                            this.onChangeInternal(e.currentTarget.checked);\n                        }),\n                    _.div({class: 'widget--input__checkbox-background'}),\n                    _.div({class: 'widget--input__checkbox-switch'})\n                );\n      \n            case 'file':\n                return _.form({class: config.class + (typeof this.onSubmit === 'function' ? ' widget-group' : ''), title: config.title},\n                    _.label({for: 'file-' + this.guid, class: 'widget--input__file-browse widget widget--button expanded'}, this.placeholder || 'Browse...'), \n                    _.input({id: 'file-' + this.guid, class: 'widget--input__file-input', type: 'file', name: this.name || 'file', multiple: this.useMultiple, directory: this.useDirectory})\n                        .on('change', (e) => {\n                            let names = [];\n                            let files = e.currentTarget.files;\n\n                            let btnBrowse = e.currentTarget.parentElement.querySelector('.widget--input__file-browse');\n                            let btnSubmit = e.currentTarget.parentElement.querySelector('.widget--input__file-submit');\n\n                            if(btnSubmit) {\n                                btnSubmit.classList.toggle('disabled', !files || files.length < 1);\n                            }\n\n                            this.onChangeInternal(files);\n\n                            if(files && files.length > 0) {\n                                for(let i = 0; i < files.length; i++) {\n                                    names.push(files[i].name + ' (' + Math.round(files[i].size / 1000) + 'kb)');\n                                }\n                            }\n\n                            if(names.length > 0) {\n                                btnBrowse.innerHTML = names.join(', ');\n\n                            } else {\n                                btnBrowse.innerHTML = this.placeholder || 'Browse...';\n                            }\n                        }),\n                    _.if(typeof this.onSubmit === 'function',\n                        _.button({class: 'widget widget--button widget--input__file-submit disabled', type: 'submit', title: 'Upload file'},\n                            _.span({class: 'fa fa-upload'}),\n                            'Upload'\n                        )\n                    )\n                ).on('submit', (e) => {\n                    e.preventDefault();\n\n                    let input = e.currentTarget.querySelector('.widget--input__file-input');\n\n                    if(!input || !input.files || input.files.length < 1) { return; }\n\n                    if(typeof this.onSubmit !== 'function') { return; }\n\n                    this.onSubmit(new FormData(e.currentTarget), input.files);\n                });\n            \n            case 'textarea':\n                return _.textarea(config, config.value)\n                    .on('input', (e) => {\n                        this.onChangeInternal(e.currentTarget.value);\n                    });\n\n            default:\n                return _.input(config)\n                    .on('input', (e) => {\n                        this.onChangeInternal(e.currentTarget.value);\n                    });\n        }\n    }\n}\n\nmodule.exports = Input;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Modals\n */\nnamespace('Views.Modals')\n.add(require('./Modal'))\n.add(require('./ConfirmModal'))\n.add(require('./DateModal'))\n.add(require('./IconModal'))\n.add(require('./IframeModal'))\n.add(require('./MediaBrowser'))\n.add(require('./MediaUploader'))\n.add(require('./PublishingSettingsModal'));\n","'use strict';\n\n/**\n * A generic modal\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass Modal extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params = params || {};\n\n        if(typeof params.actions === 'undefined') {\n            params.actions = [];\n        }\n\n        super(params);\n\n        // If this belongs to a group, find existing modals and append instead\n        if(this.group) {\n            for(let modal of Crisp.View.getAll('Modal')) {\n                if(modal.group !== this.group || modal === this) { continue; }\n\n                modal.append(this);\n\n                this.remove();\n                break;\n            }\n        }\n\n        if(this.autoFetch !== false) {\n            this.fetch();\n        }\n       \n        document.body.appendChild(this.element);\n    }\n   \n    /**\n     * Toggles the loading state\n     *\n     * @param {Boolean} isActive\n     */\n    setLoading(isActive) {\n        let spinner = this.element.querySelector('.widget--spinner');\n\n        spinner.classList.toggle('hidden', !isActive);\n    }\n\n    /**\n     * Close this modal\n     *\n     */\n    close() {\n        this.element.classList.toggle('in', false);\n\n        setTimeout(() => {\n            this.remove();\n        }, 500);\n    }\n\n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return this.body;\n    }\n    \n    /**\n     * Renders the modal footer\n     *\n     * @returns {HTMLElement} Footer\n     */\n    renderFooter() {\n        if(this.actions === false) { return; }\n\n        if(this.actions && this.actions.length > 0) {\n            return _.each(this.actions, (i, action) => {\n                return _.button({class: 'widget widget--button ' + (action.class || '')}, action.label)\n                    .click(() => {\n                        if(typeof action.onClick !== 'function') {\n                            return this.close();\n                        }\n\n                        if(action.onClick() !== false) {\n                            this.close();\n                        }\n                    });\n            });\n        }\n\n        return _.button({class: 'widget widget--button'}, 'OK')\n            .click(() => {\n                this.close();\n\n                this.trigger('ok');\n            });\n    }\n    \n    /**\n     * Renders the modal header\n     *\n     * @returns {HTMLElement} Header\n     */\n    renderHeader() {\n        if(!this.title) { return; }\n\n        return [\n            _.h4({class: 'modal__title'}, this.title),\n            _.if(!this.isBlocking,\n                _.button({class: 'modal__close fa fa-close'})\n                    .click(() => { this.close(); })\n            )\n        ];\n    }\n\n    /**\n     * Renders this modal\n     */\n    template() {\n        let header = this.renderHeader();\n        let body = this.renderBody();\n        let footer = this.renderFooter();\n\n        if(!this.hasTransitionedIn) {\n            setTimeout(() => {\n                this.hasTransitionedIn = true;\n                this.element.classList.toggle('in', true);\n            }, 50);\n        }\n        \n        return _.div({class: 'modal' + (this.hasTransitionedIn ? ' in' : '') + (this.group ? ' ' + this.group : '') + (this.className ? ' modal--' + this.className : '')},\n            _.div({class: 'modal__dialog'},\n                _.div({class: 'widget--spinner embedded hidden'},\n                    _.div({class: 'widget--spinner__image fa fa-refresh'})\n                ),\n                _.if(header,\n                    _.div({class: 'modal__header'},\n                        header\n                    )\n                ),\n                _.if(body,\n                    _.div({class: 'modal__body'},\n                        body \n                    )\n                ),\n                _.if(footer && !this.isBlocking,\n                    _.div({class: 'modal__footer'},\n                        footer\n                    )\n                )\n            )\n        );\n    }\n\n    /**\n     * Appends another modal to this modal\n     *\n     * @param {Modal} modal\n     */\n    append(modal) {\n        this.$element.find('.modal__footer').before(_.div({class: 'modal__body'}, modal.renderBody()));\n    }\n}\n\n// Modal key events\ndocument.addEventListener('keyup', (e) => {\n    let modal = Crisp.View.getAll(Modal).pop();\n    \n    if(!modal) { return; }\n\n    switch(e.which) {\n        case 27: // Escape\n            if(modal.element.querySelector('.modal__close')) {\n                modal.close();\n            }\n            break;\n\n        case 13: // Enter\n            if((!modal.actions || modal.actions.length === 0) && modal.renderFooter === Modal.renderFooter) {\n                modal.close();\n                modal.trigger('ok');\n            } else if(modal.actions.length === 1) {\n                modal.close();\n                modal.actions[0].onClick();\n            }\n            break;\n    }\n});\n\nmodule.exports = Modal;\n","'use strict';\n\n/**\n * A modal for confirming actions\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass ConfirmModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Post render\n     */\n    postrender() {\n        this.element.classList.toggle('modal--confirm', true);\n    }\n\n    /**\n     * Render header\n     */\n    renderHeader() {\n        return _.h4({class: 'modal--date__header__title'}, this.title);\n    }\n    \n    /**\n     * Renders the modal footer\n     *\n     * @returns {HTMLElement} Footer\n     */\n    renderFooter() {\n        return [\n            _.button({class: 'widget widget--button standard'}, 'Cancel')\n                .click(() => {\n                    this.trigger('cancel');\n\n                    this.close();\n                }),\n            _.button({class: 'widget widget--button warning'}, this.type || 'OK')\n                .click(() => {\n                    this.trigger('ok');\n\n                    this.close();\n                })\n        ];\n    }\n\n    /**\n     * Render body\n     */\n    renderBody() {\n        return this.body;\n    }\n}\n\nmodule.exports = ConfirmModal;\n","'use strict';\n\n/**\n * A modal for picking dates\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass DateModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params.className = 'date';\n\n        super(params);\n    }\n    \n    /**\n     * Pre render\n     */\n    prerender() {\n        this.days = [ 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun' ];\n        this.months = [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ];\n        this.hours = [ '00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23' ];\n        this.minutes = [ '00', '05', '10', '15', '20', '25', '30', '35', '40', '45', '50', '55' ];\n\n        // Sanity check\n        this.value = this.value ? new Date(this.value) : new Date();\n\n        if(isNaN(this.value.getDate())) {\n            this.value = new Date();\n        }\n    }\n\n    /**\n     * Gets days in current month and year\n     *\n     * @param {Number} year\n     * @param {Number} month\n     *\n     * @returns {Array} Days\n     */\n    getDays(year, month) {\n        let max = new Date(year, month, 0).getDate();\n        let days = [];\n\n        while(days.length < max) {\n            days[days.length] = days.length + 1;\n        }\n\n        return days;\n    }\n\n    /**\n     * Render header\n     */\n    renderHeader() {\n        return [\n            _.div({class: 'modal--date__header__year'}, this.value.getFullYear().toString()),\n            _.div({class: 'modal--date__header__day'}, this.days[this.value.getDay()] + ', ' + this.months[this.value.getMonth()] + ' ' + this.value.getDate()),\n            _.button({class: 'modal__close fa fa-close'})\n                .click(() => { this.close(); })\n        ];\n    }\n    \n    /**\n     * Renders the modal footer\n     *\n     * @returns {HTMLElement} Footer\n     */\n    renderFooter() {\n        return _.button({class: 'widget widget--button'}, 'OK')\n            .click(() => {\n                this.trigger('change', this.value);\n\n                this.close();\n            });\n    }\n\n    /**\n     * Render body\n     */\n    renderBody() {\n        return [\n            _.div({class: 'modal--date__body__nav'},\n                _.button({class: 'modal--date__body__nav__left fa fa-arrow-left'})\n                    .click(() => {\n                        this.value.setMonth(this.value.getMonth() - 1);\n                        \n                        this.fetch();\n                    }),\n                _.div({class: 'modal--date__body__nav__month-year'},\n                    this.months[this.value.getMonth()] + ' ' + this.value.getFullYear()\n                ),\n                _.button({class: 'modal--date__body__nav__left fa fa-arrow-right'})\n                    .click(() => {\n                        this.value.setMonth(this.value.getMonth() + 1);\n                        \n                        this.fetch();\n                    })\n            ),\n            _.div({class: 'modal--date__body__weekdays'},\n                _.span({class: 'modal--date__body__weekday'}, 'M'),\n                _.span({class: 'modal--date__body__weekday'}, 'T'),\n                _.span({class: 'modal--date__body__weekday'}, 'W'),\n                _.span({class: 'modal--date__body__weekday'}, 'T'),\n                _.span({class: 'modal--date__body__weekday'}, 'F'),\n                _.span({class: 'modal--date__body__weekday'}, 'S'),\n                _.span({class: 'modal--date__body__weekday'}, 'S')\n            ),\n            _.div({class: 'modal--date__body__days'},\n                _.each(this.getDays(this.value.getFullYear(), this.value.getMonth() + 1), (i, day) => {\n                    let thisDate = new Date(this.value.getTime());\n                    let now = new Date();\n\n                    let isCurrent =\n                        now.getFullYear() == this.value.getFullYear() &&\n                        now.getMonth() == this.value.getMonth() &&\n                        now.getDate() == day;\n                    \n                    let isActive = this.value.getDate() == day;\n\n                    thisDate.setDate(day);\n\n                    return _.button({class: 'modal--date__body__day' + (isCurrent ? ' current' : '') + (isActive ? ' active' : '')}, day)\n                        .click(() => {\n                            this.value.setDate(day);\n\n                            this.fetch();\n                        });\n                })\n            ),\n            _.div({class: 'modal--date__body__time'},\n                _.input({class: 'modal--date__body__time__number', type: 'number', min: 0, max: 23, value: this.value.getHours()})\n                    .on('change', (e) => {\n                        this.value.setHours(e.currentTarget.value);\n                    }),\n                _.div({class: 'modal--date__body__time__separator'}, ':'),\n                _.input({class: 'modal--date__body__time__number', type: 'number', min: 0, max: 59, value: this.value.getMinutes()})\n                    .on('change', (e) => {\n                        this.value.setMinutes(e.currentTarget.value);\n                    })\n            )\n        ];\n    }\n}\n\nmodule.exports = DateModal;\n","'use strict';\n\nconst icons = require('../../icons.json').icons;\n\n/**\n * A modal for picking icons\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass IconModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params = params || {};\n        params.title = params.title || 'Pick an icon';\n        params.actions = false;\n\n        super(params);\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        this.element.classList.toggle('modal--icon', true);\n    }\n\n    /**\n     * Event: Search\n     *\n     * @param {String} query\n     */\n    onSearch(query) {\n        let icons = this.element.querySelectorAll('.modal--icon__icon');\n\n        if(!icons) { return; }\n\n        for(let i = 0; i < icons.length; i++) {\n            if(query.length < 3 || icons[i].title.indexOf(query) > -1) {\n                icons[i].style.display = 'block';\n            } else {\n                icons[i].style.display = 'none';\n            }\n        }\n    }\n\n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return [\n            _.input({type: 'text', class: 'widget widget--input text modal--icon__search', placeholder: 'Search for icons'})\n                .on('input', (e) => {\n                    this.onSearch(e.currentTarget.value);\n                }),\n            _.div({class: 'modal--icon__icons'},\n                _.each(icons, (i, icon) => {\n                    return _.button({class: 'modal--icon__icon widget widget--button fa fa-' + icon, title: icon})\n                    .click(() => {\n                        this.trigger('change', icon); \n\n                        this.close();\n                    });\n                })\n            )\n        ];\n    }\n}\n\nmodule.exports = IconModal;\n","'use strict';\n\n/**\n * A modal for showng iframes\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass IframeModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Post render\n     */\n    postrender() {\n        this.element.classList.toggle('modal--iframe', true);\n    }\n\n    /**\n     * Render body\n     */\n    renderBody() {\n        return _.iframe({class: 'modal--iframe__iframe', src: this.url});\n    }\n}\n\nmodule.exports = IframeModal;\n","'use strict';\n\n/**\n * A browser modal for Media objects\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass MediaBrowser extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params = params || {};\n\n        params.className = 'media-browser';\n        params.title = 'Pick media'; \n\n        params.actions = [\n            {\n                label: 'OK',\n                onClick: () => {\n                    this.onClickOK();\n                }\n            }\n        ];\n        \n        super(params);\n\n        // Init the media picker mode inside the iframe\n        let iframe = this.$element.find('iframe')[0];\n            \n        iframe.onload = () => {    \n            iframe.contentWindow.HashBrown.Helpers.MediaHelper.initMediaPickerMode(\n                (id) => { this.onPickMedia(id); },\n                () => { this.onChangeResource(); },\n                (e) => { UI.errorModal(e); },\n                resources\n            );\n        };\n    }\n\n    /**\n     * Event: Pick Media\n     *\n     * @param {string} id\n     */\n    onPickMedia(id) {\n        this.value = id;\n    }\n\n    /** \n     * Event: Click OK\n     */\n    onClickOK() {\n        if(this.value) {\n            this.trigger('select', this.value);\n        }\n\n        this.close();\n    }\n    \n    /** \n     * Event: Click cancel\n     */\n    onClickCancel() {\n        this.close();\n    }\n\n    /**\n     * Event: Change resource\n     */\n    onChangeResource() {\n        HashBrown.Helpers.RequestHelper.reloadResource('media')\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        });\n    }\n\n    /**\n     * Render body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return _.iframe({src: '//' + location.host  + '/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/#/media/' + (this.value || '')});\n    }\n}\n\nmodule.exports = MediaBrowser;\n","'use strict';\n\n/**\n * A modal for uploading Media objects\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass MediaUploader extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params.className = 'media-uploader';\n        params.title = 'Upload a file';\n        params.actions = false;\n\n        super(params);\n\n        HashBrown.Helpers.MediaHelper.checkMediaProvider()\n        .catch((e) => {\n            UI.errorModal(e);\n\n            this.close();\n        });\n    }\n\n    /**\n     * Event: Change file\n     */\n    onChangeFile(files) {\n        let numFiles = files ? files.length : 1;\n       \n        // In the case of a single file selected \n        if(numFiles == 1) {\n            let file = files[0];\n\n            let isImage =\n                file.type == 'image/png' ||\n                file.type == 'image/jpeg' ||\n                file.type == 'image/gif';\n\n            let isVideo =\n                file.type == 'video/mpeg' ||\n                file.type == 'video/mp4' ||\n                file.type == 'video/quicktime' ||\n                file.type == 'video/x-matroska';\n\n            if(isImage) {\n                let reader = new FileReader();\n               \n                this.setLoading(true);\n\n                reader.onload = (e) => {\n                    this.$element.find('.modal--media-uploader__preview').html(\n                        _.img({src: e.target.result})\n                    );\n\n\n                    this.setLoading(false);\n                }\n                \n                reader.readAsDataURL(file);\n            }\n                    \n            if(isVideo) {\n                this.$element.find('.modal--media-uploader__preview').html(\n                    _.video({src: window.URL.createObjectURL(file), controls: 'controls'})\n                );\n            }\n\n            debug.log('Previewing data of file type ' + file.type + '...', this);\n        \n        // Multiple files selected\n        } else if(numFiles > 1) {\n            this.$element.find('.media-preview').html(\n                '(Multiple files selected)'\n            );\n        \n        // No files selected\n        } else if(numFiles == 0) {\n            this.$element.find('.media-preview').html(\n                '(No files selected)'\n            );\n        }\n    }\n    \n    /**\n     * Event: Submit\n     *\n     * @param {FormData} content\n     * @param {Array} files\n     */\n    onSubmit(content, files) {\n        if(!content || !files || files.length < 1) { return; }\n\n        this.setLoading(true);\n\n        let type = files[0].type;\n        let apiPath = 'media/' + (this.replaceId ? 'replace/' + this.replaceId : 'new');\n        let uploadedIds = [];\n\n        // First upload the Media files\n        return HashBrown.Helpers.RequestHelper.uploadFile(apiPath, type, content)\n\n        // Then update the Media tree\n        .then((ids) => {\n            uploadedIds = ids;\n\n            if(!uploadedIds || uploadedIds.length < 1) {\n                return Promise.reject(new Error('File upload failed'));\n            }\n\n            if(!this.folder || this.folder === '/') {\n                return Promise.resolve();\n            }\n\n            let queue = uploadedIds.slice(0);\n\n            let putNextMediaIntoTree = () => {\n                let id = queue.pop();\n\n                if(!id) { return Promise.resolve(); }\n\n                return HashBrown.Helpers.RequestHelper.request('post', 'media/tree/' + id, {\n                    id: id,\n                    folder: this.folder\n                })\n                .then(() => {\n                    return putNextMediaIntoTree();\n                });\n            };\n\n            return putNextMediaIntoTree();\n        })\n\n        // Then reload the Media resource\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('media');\n        })\n\n        // Then update the UI and trigger the success callback\n        .then(() => {\n            this.setLoading(false);\n\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            if(typeof this.onSuccess === 'function') {\n                this.onSuccess(uploadedIds);\n            }\n            \n            this.close();\n        })\n        .catch((e) => {\n            UI.errorModal(e);\n\n            this.setLoading(false);  \n        });\n    }\n\n    /**\n     * Render body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return [\n            _.div({class: 'modal--media-uploader__preview'}),\n            new HashBrown.Views.Widgets.Input({\n                type: 'file',\n                name: 'media',\n                useMultiple: !this.replaceId,\n                onChange: (newValue) => {\n                    this.onChangeFile(newValue);\n                },\n                onSubmit: (newValue, newFiles) => {\n                    this.onSubmit(newValue, newFiles);\n                }\n            }).$element\n        ];\n    }\n}\n\nmodule.exports = MediaUploader;\n","'use strict';\n\n/**\n * A dialog for editing publishing settings for Content nodes\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass PublishingSettingsModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params.title = 'Publishing settings for \"' + params.model.prop('title', window.language) + '\"';\n        params.actions = [\n            {\n                label: 'OK',\n                onClick: () => {\n                    this.trigger('change', this.value);\n                }\n            }\n        ];\n\n        params.value = JSON.parse(JSON.stringify(params.model.getSettings('publishing'))) || {};\n        \n        super(params);\n    }\n\n    /**\n     * Renders the body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        if(this.value.governedBy) {\n            let governor = HashBrown.Helpers.ContentHelper.getContentByIdSync(this.value.governedBy);\n\n            return _.div({class: 'widget widget--label'},\n                '(Settings inherited from <a href=\"#/content/' + governor.id + '\">' + governor.prop('title', window.language) + '</a>)'\n            );\n        \n        } else {\n            return _.div({class: 'settings-publishing'},\n                // Apply to children switch\n                _.div({class: 'widget-group'},      \n                    _.label({class: 'widget widget--label'}, 'Apply to children'),\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'checkbox',\n                        value: this.value.applyToChildren === true,\n                        onChange: (newValue) => {\n                            this.value.applyToChildren = newValue;   \n                        }\n                    }).$element\n                ),\n\n                // Connection picker\n                _.div({class: 'widget-group'},      \n                    _.label({class: 'widget widget--label'}, 'Connection'),\n                    new HashBrown.Views.Widgets.Dropdown({\n                        options: resources.connections,\n                        value: this.value.connectionId,\n                        valueKey: 'id',\n                        labelKey: 'title',\n                        useClearButton: true,\n                        onChange: (newValue) => {\n                            this.value.connectionId = newValue;\n                        }\n                    }).$element\n                )\n            );\n        }\n    }\n}\n\nmodule.exports = PublishingSettingsModal;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Editors\n */\nnamespace('Views.Editors')\n.add(require('./ConnectionEditor'))\n.add(require('./ContentEditor'))\n.add(require('./FormEditor'))\n.add(require('./JSONEditor'))\n.add(require('./MediaViewer'))\n.add(require('./UserEditor'))\n.add(require('./SchemaEditor'))\n.add(require('./ContentSchemaEditor'))\n.add(require('./FieldSchemaEditor'))\n\nnamespace('Views.Editors.DeployerEditors');\nnamespace('Views.Editors.ProcessorEditors');\n\nrequire('./FieldEditors')\n","'use strict';\n\n/**\n * The editor for Connections\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass ConnectionEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click advanced. Routes to the JSON editor\n     */\n    onClickAdvanced() {\n        location.hash = '/connections/json/' + this.model.id;\n    }\n\n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        this.$saveBtn.toggleClass('saving', true);\n\n        HashBrown.Helpers.RequestHelper.request('post', 'connections/' + this.model.id, this.model)\n        .then(() => {\n            this.$saveBtn.toggleClass('saving', false);\n       \n            location.reload(); \n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Renders the Media provider editor\n     */\n    renderMediaProviderEditor() {\n        let input = new HashBrown.Views.Widgets.Input({\n            value: false,\n            type: 'checkbox',\n            onChange: (isProvider) => {\n                HashBrown.Helpers.ConnectionHelper.setMediaProvider(isProvider ? this.model.id : null)\n                .catch(UI.errorModal);\n            }\n        });\n\n        // Set the value\n        input.$element.toggleClass('working', true);\n\n        HashBrown.Helpers.ConnectionHelper.getMediaProvider()\n        .then((connection) => {\n            if(connection && connection.id === this.model.id) {\n                input.value = true;\n                input.fetch();\n            }\n        \n            input.$element.toggleClass('working', false);\n        });\n\n        return input.$element;\n    }\n\n    /**\n     * Renders the title editor\n     */\n    renderTitleEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.title,\n            onChange: (newValue) => {\n                this.model.title = newValue;\n            }\n        }).$element;\n    }\n    \n    /**\n     * Renders the URL editor\n     */\n    renderUrlEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.url,\n            onChange: (newValue) => {\n                this.model.url = newValue;\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders the processing settings editor\n     */\n    renderProcessorSettingsEditor() {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Type'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Dropdown({\n                        value: this.model.processor.alias,\n                        optionsUrl: 'connections/processors', \n                        valueKey: 'alias',\n                        labelKey: 'name',\n                        placeholder: 'Type',\n                        onChange: (newValue) => {\n                            this.model.processor.alias = newValue;\n\n                            this.fetch();\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'},\n                    _.div({class: 'editor__field__key__label'}, 'File extension'),\n                    _.div({class: 'editor__field__key__description'}, 'A file extension such as .json or .xml')\n                ),\n                _.each(HashBrown.Views.Editors.ProcessorEditors, (name, editor) => {\n                    if(editor.alias !== this.model.processor.alias) { return; }\n                        \n                    return new editor({\n                        model: this.model.processor\n                    }).$element;\n                }),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        value: this.model.processor.fileExtension,\n                        onChange: (newValue) => {\n                            this.model.processor.fileExtension = newValue;\n                        }\n                    })\n                )\n            )\n        ];\n    }\n    \n    /**\n     * Renders the deployment settings editor\n     */\n    renderDeployerSettingsEditor() {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Type'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Dropdown({\n                        value: this.model.deployer.alias,\n                        optionsUrl: 'connections/deployers', \n                        valueKey: 'alias',\n                        labelKey: 'name',\n                        placeholder: 'Type',\n                        onChange: (newValue) => {\n                            this.model.deployer.alias = newValue;\n\n                            this.fetch();\n                        }\n                    }).$element\n                )\n            ),\n            _.each(HashBrown.Views.Editors.DeployerEditors, (name, editor) => {\n                if(editor.alias !== this.model.deployer.alias) { return; }\n                    \n                return new editor({\n                    model: this.model.deployer\n                }).$element;\n            }),\n            _.do(() => {\n                if(!this.model.deployer || !this.model.deployer.paths) { return; }\n                \n                return _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Paths'),\n                        _.div({class: 'editor__field__key__description'}, 'Where to send the individual resources')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Content'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    value: this.model.deployer.paths.content,\n                                    onChange: (newValue) => {\n                                        this.model.deployer.paths.content = newValue;\n                                    }\n                                })\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Media'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    value: this.model.deployer.paths.media,\n                                    onChange: (newValue) => {\n                                        this.model.deployer.paths.media = newValue;\n                                    }\n                                })\n                            )\n                        )\n                    )\n                );\n            })\n        ];\n    }\n\n    /**\n     * Prerender\n     */\n    prerender() {\n        if(this.model instanceof HashBrown.Models.Connection === false) {\n            this.model = new HashBrown.Models.Connection(this.model);\n        }\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--connection' + (this.model.isLocked ? ' locked' : '')},\n            _.div({class: 'editor__header'},\n                _.span({class: 'editor__header__icon fa fa-exchange'}),\n                _.h4({class: 'editor__header__title'}, this.model.title)\n            ),\n            _.div({class: 'editor__body'},\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'}, 'Is Media provider'),\n                    _.div({class: 'editor__field__value'},\n                        this.renderMediaProviderEditor()\n                    )\n                ),\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'}, 'Title'),\n                    _.div({class: 'editor__field__value'},\n                        this.renderTitleEditor()\n                    )\n                ),\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'}, 'URL'),\n                    _.div({class: 'editor__field__value'},\n                        this.renderUrlEditor()\n                    )\n                ),\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Processor'),\n                        _.div({class: 'editor__field__key__description'}, 'Which format to deploy Content in')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        this.renderProcessorSettingsEditor()\n                    )\n                ),\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Deployer'),\n                        _.div({class: 'editor__field__key__description'}, 'How to transfer data to and from the website\\'s server')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        this.renderDeployerSettingsEditor()\n                    )\n                )\n            ),\n            _.div({class: 'editor__footer'}, \n                _.div({class: 'editor__footer__buttons'},\n                    _.button({class: 'widget widget--button embedded'},\n                        'Advanced'\n                    ).click(() => { this.onClickAdvanced(); }),\n                    _.if(!this.model.isLocked, \n                        this.$saveBtn = _.button({class: 'widget widget--button editor__footer__buttons__save'},\n                            _.span({class: 'widget--button__text-default'}, 'Save '),\n                            _.span({class: 'widget--button__text-working'}, 'Saving ')\n                        ).click(() => { this.onClickSave(); })\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = ConnectionEditor;\n","'use strict';\n\n/**\n * The editor view for Content objects\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass ContentEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        this.dirty = false;\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Scroll\n     */\n    onScroll(e) {\n        let followingField;\n\n        // Look for field labels that are close to the top of the viewport and make them follow\n        this.$element.find('.editor__body__tab.active > .editor__field > .editor__field__key').each((i, field) => {\n            field.classList.remove('following');\n           \n            let rect = field.getBoundingClientRect();\n            let actions = field.querySelector('.editor__field__key__actions');\n            let actionRect;\n\n            if(actions) { \n                actionRect = actions.getBoundingClientRect();\n            }\n\n            if(\n                rect.top <= 40 &&\n                actionRect && rect.bottom >= (actionRect.height + 60) &&\n                (!followingField || followingField.getBoundingClientRect().top < rect.top)\n            ) {\n                followingField = field;\n            }\n        });\n\n        if(followingField) {\n            followingField.classList.add('following');\n        }\n       \n        // Cache the last scroll position\n        this.lastScrollPos = this.$element.find('.editor__body')[0].scrollTop; \n    }\n\n    /**\n     * Event: Click advanced. Routes to the JSON editor\n     */\n    onClickAdvanced() {\n        location.hash = '/content/json/' + this.model.id;\n    }\n\n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        let saveAction = this.$element.find('.editor__footer__buttons select').val();\n        let postSaveUrl;\n\n        let setContent = () => {\n            // Use publishing API\n            if(this.model.getSettings('publishing').connectionId) {\n                // Unpublish\n                if(saveAction === 'unpublish') {\n                    return HashBrown.Helpers.RequestHelper.request('post', 'content/unpublish', this.model);\n\n                // Publish\n                } else if(saveAction === 'publish') {\n                    return HashBrown.Helpers.RequestHelper.request('post', 'content/publish', this.model);\n                \n                // Preview\n                } else if(saveAction === 'preview') {\n                    return HashBrown.Helpers.RequestHelper.request('post', 'content/preview', this.model);\n\n                }\n            }\n\n            // Just save normally\n            return HashBrown.Helpers.RequestHelper.request('post', 'content/' + this.model.id, this.model);\n        }\n\n        this.$saveBtn.toggleClass('working', true);\n\n        // Save content to database\n        setContent()\n        .then((url) => {\n            postSaveUrl = url;\n            \n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n        .then(() => {\n            this.$saveBtn.toggleClass('working', false);\n            \n            this.reload();\n            \n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            this.dirty = false;\n\n            if(saveAction === 'preview') {\n                UI.iframeModal(\n                    'Preview',\n                    postSaveUrl\n                );\n            }\n        })\n        .catch((e) => {\n            this.$saveBtn.toggleClass('working', false);\n            UI.errorModal(e);\n        });\n    }\n\n    /**\n     * Reload this view\n     */\n    reload() {\n        this.lastScrollPos = this.$element.find('.editor__body')[0].scrollTop; \n\n        this.model = null;\n\n        this.fetch();\n    }\n\n    /**\n     * Binds event to fire when field editors are ready\n     * Or fires them if no callback was passed\n     *\n     * @param {Function} callback\n     */\n    onFieldEditorsReady(callback) {\n        if(!this.fieldEditorReadyCallbacks) {\n            this.fieldEditorReadyCallbacks = [];\n        }\n\n        if(callback) {\n            this.fieldEditorReadyCallbacks.push(callback);\n\n        } else {\n            for(let registeredCallback of this.fieldEditorReadyCallbacks) {\n                registeredCallback();\n            }\n\n            this.fieldEditorReadyCallbacks = [];\n        }\n\n        this.restoreScrollPos();\n    }\n\n    /**\n     * Restores the scroll position\n     *\n     * @param {Number} delay\n     */\n    restoreScrollPos(delay) {\n        let newScrollPos = this.lastScrollPos || 0;\n\n        setTimeout(() => {\n            this.$element.find('.editor__body')[0].scrollTop = newScrollPos;\n        }, delay || 0);\n    }\n\n    /**\n     * Static version of the restore scroll position method\n     *\n     * @param {Number} delay\n     */\n    static restoreScrollPos(delay) {\n        let editor = Crisp.View.get('ContentEditor');\n\n        if(editor) {\n            editor.restoreScrollPos(delay);\n        }\n    }\n\n    /**\n     * Gets a field editor for a Schema\n     *\n     * @param {string} editorId\n     *\n     * @returns {View} Field editor\n     */\n    static getFieldEditor(editorId) {\n        if(!editorId) { return; }\n\n        // Backwards compatible check\n        editorId = editorId.charAt(0).toUpperCase() + editorId.slice(1);\n        \n        if(editorId.indexOf('Editor') < 0) {\n            editorId += 'Editor';\n        }\n\n        return HashBrown.Views.Editors.FieldEditors[editorId];\n    }\n\n    /**\n     * Renders a field view\n     *\n     * @param {Object} fieldValue The field value to inject into the field editor\n     * @param {FieldSchema} fieldDefinition The field definition\n     * @param {Function} onChange The change event\n     * @param {HTMLElement} keyActions The key content container\n     *\n     * @return {Object} element\n     */\n    renderField(fieldValue, fieldDefinition, onChange, $keyActions) {\n        let compiledSchema = HashBrown.Helpers.SchemaHelper.getFieldSchemaWithParentConfigs(fieldDefinition.schemaId);\n\n        if(!compiledSchema) {\n            return debug.log('No FieldSchema found for Schema id \"' + fieldDefinition.schemaId + '\"', this);\n        }\n\n        let fieldEditor = ContentEditor.getFieldEditor(compiledSchema.editorId);\n          \n        if(!fieldEditor) {\n            return debug.log('No field editor by id \"' + fieldSchema.editorId + '\" found', this);\n        }\n\n        // Get the config\n        let config;\n\n        // If the field has a config, check recursively if it's empty\n        // If it isn't, use this config\n        if(fieldDefinition.config) {\n            let isEmpty = true;\n            let checkRecursive = (object) => {\n                if(!object) { return; }\n\n                // We consider a config not empty, if it has a value that is not an object\n                // Remember, null is of type 'object' too\n                if(typeof object !== 'object') { return isEmpty = false; }\n\n                for(let k in object) {\n                    checkRecursive(object[k]);\n                }\n            };\n\n            checkRecursive(fieldDefinition.config);\n\n            if(!isEmpty) {\n                config = fieldDefinition.config;\n            }\n        }\n\n        // If no config was found, and the Schema has one, use it\n        if(!config && compiledSchema.config) {\n            config = compiledSchema.config;\n        }\n\n        // If still no config was found, assign a placeholder\n        if(!config) {\n            config = {};\n        }\n\n        // Instantiate the field editor\n        let fieldEditorInstance = new fieldEditor({\n            value: fieldValue,\n            disabled: fieldDefinition.disabled || false,\n            config: config,\n            description: fieldDefinition.description || '',\n            schema: compiledSchema.getObject(),\n            multilingual: fieldDefinition.multilingual === true,\n            $keyActions: $keyActions\n        });\n\n        fieldEditorInstance.on('change', (newValue) => {\n            if(this.model.isLocked) { return; }\n            \n            this.dirty = true;\n\n            onChange(newValue);\n        });\n\n        fieldEditorInstance.on('silentchange', (newValue) => {\n            if(this.model.isLocked) { return; }\n            \n            onChange(newValue);\n        });\n\n        return fieldEditorInstance.$element;\n    }\n\n    /**\n     * Renders fields\n     *\n     * @param {String} tabId The tab for which to render the fields\n     * @param {Object} fieldDefinitions The set of field definitions to render\n     * @param {Object} fieldValues The set of field values to inject into the field editor\n     *\n     * @returns {Array} A list of HTMLElements to render\n     */\n    renderFields(tabId, fieldDefinitions, fieldValues) {\n        let tabFieldDefinitions = {};\n\n        // Map out field definitions to render\n        // This is necessary because we're only rendering the fields for the specified tab\n        for(let key in fieldDefinitions) {\n            let fieldDefinition = fieldDefinitions[key];\n\n            let noTabAssigned = !this.schema.tabs[fieldDefinition.tabId];\n            let isMetaTab = tabId === 'meta';\n            let thisTabAssigned = fieldDefinition.tabId === tabId;\n\n            // Don't include \"properties\" field, if this is the meta tab\n            if(isMetaTab && key === 'properties') {\n                continue;\n            }\n\n            if((noTabAssigned && isMetaTab) || thisTabAssigned) {\n                tabFieldDefinitions[key] = fieldDefinition;\n            }\n        }\n\n        // Render all fields\n        return _.each(tabFieldDefinitions, (key, fieldDefinition) => {\n            // Field value sanity check\n            fieldValues[key] = HashBrown.Helpers.ContentHelper.fieldSanityCheck(fieldValues[key], fieldDefinition);\n\n            // Render the field actions container\n            let $keyActions;\n\n            return _.div({class: 'editor__field', 'data-key': key},\n                // Render the label and icon\n                _.div({class: 'editor__field__key', title: fieldDefinition.description || ''},\n                    _.div({class: 'editor__field__key__label'}, fieldDefinition.label || key),\n                    _.if(fieldDefinition.description,\n                        _.div({class: 'editor__field__key__description'}, fieldDefinition.description)\n                    ),\n                    $keyActions = _.div({class: 'editor__field__key__actions'})\n                ),\n\n                // Render the field editor\n                this.renderField(\n                    // If the field definition is set to multilingual, pass value from object\n                    fieldDefinition.multilingual ? fieldValues[key][window.language] : fieldValues[key],\n\n                    // Pass the field definition\n                    fieldDefinition,\n\n                    // On change function\n                    (newValue) => {\n                        // If field definition is set to multilingual, assign flag and value onto object...\n                        if(fieldDefinition.multilingual) {\n                            fieldValues[key]._multilingual = true;\n                            fieldValues[key][window.language] = newValue;\n\n                        // ...if not, assign the value directly\n                        } else {\n                            fieldValues[key] = newValue;\n                        }\n                    },\n\n                    // Pass the key actions container, so the field editor can populate it\n                    $keyActions\n                )\n            );\n        });\n    }\n\n    /**\n     * Event: Click tab\n     *\n     * @param {String} tab\n     */\n    onClickTab(tab) {\n    }\n\n    /**\n     * Renders the editor\n     *\n     * @param {Content} content\n     * @param {ContentSchema} schema\n     *\n     * @return {Object} element\n     */\n    renderEditor(content, schema) {\n        let activeTab = Crisp.Router.params.tab || schema.defaultTabId || 'meta';\n\n        // Render editor\n        return [\n            _.div({class: 'editor__header'}, \n                _.each(schema.tabs, (tabId, tabName) => {\n                    return _.button({class: 'editor__header__tab' + (tabId === activeTab ? ' active' : '')}, tabName)\n                        .click(() => {\n                            location.hash = '/content/' + Crisp.Router.params.id + '/' + tabId;\n\n                            this.fetch();\n                        });\n                }),\n                _.button({'data-id': 'meta', class: 'editor__header__tab' + ('meta' === activeTab ? ' active' : '')}, 'Meta')\n                    .click(() => {\n                        location.hash = '/content/' + Crisp.Router.params.id + '/meta';\n\n                        this.fetch();\n                    })\n            ),\n            _.div({class: 'editor__body'},\n                // Render content properties\n                _.each(schema.tabs, (tabId, tabName) => {\n                    if(tabId !== activeTab) { return; }\n\n                    return _.div({class: 'editor__body__tab active'},\n                        this.renderFields(tabId, schema.fields.properties, content.properties)\n                    );\n                }),\n\n                // Render meta properties\n                _.if(activeTab === 'meta',\n                    _.div({class: 'editor__body__tab' + ('meta' === activeTab ? 'active' : ''), 'data-id': 'meta'},\n                        this.renderFields('meta', schema.fields, content),\n                        this.renderFields('meta', schema.fields.properties, content.properties)\n                    )\n                )\n            ).on('scroll', (e) => {\n                this.onScroll(e);\n            }),\n            _.div({class: 'editor__footer'})\n        ];\n    }\n\n    /**\n     * Renders the action buttons\n     */\n    renderButtons() {\n        let remoteUrl;\n        let connectionId = this.model.getSettings('publishing').connectionId;\n        let connection;\n\n        // Construct the remote URL, if a Connection is set up for publishing\n        let contentUrl = this.model.properties.url;\n\n        if(connectionId) {\n            connection = HashBrown.Helpers.ConnectionHelper.getConnectionByIdSync(connectionId);\n                \n            if(connection && connection.url && contentUrl) {\n                // Language versioning\n                if(contentUrl instanceof Object) {\n                    contentUrl = contentUrl[window.language];\n                }\n\n                // Construct remote URL\n                if(contentUrl && contentUrl !== '//') {\n                    remoteUrl = connection.url + contentUrl;\n                    remoteUrl = remoteUrl.replace(/\\/\\//g, '/').replace(':/', '://');\n\n                } else {\n                    contentUrl = null;\n                \n                }\n            }\n        }\n            \n        _.append($('.editor__footer').empty(),\n            _.div({class: 'editor__footer__message'},\n                _.do(() => {\n                    if(!connection) {\n                        return 'No Connection is assigned for publishing'   ;\n                    }\n                    \n                    if(connection && !connection.url) {\n                        return 'No remote URL is defined in the <a href=\"#/connections/' + connection.id + '\">\"' + connection.title + '\"</a> Connection';\n                    }\n                    \n                    if(connection && connection.url && !contentUrl) {\n                        return 'Content without a URL may not be visible after publishing';\n                    }\n                })\n            ),\n\n            _.div({class: 'editor__footer__buttons'},\n                // JSON editor\n                _.button({class: 'widget widget--button condensed embedded'},\n                    'Advanced'\n                ).click(() => { this.onClickAdvanced(); }),\n\n                // View remote\n                _.if(this.model.isPublished && remoteUrl,\n                    _.a({target: '_blank', href: remoteUrl, class: 'widget widget--button condensed embedded'}, 'View')\n                ),\n\n                _.if(!this.model.isLocked,\n                    // Save & publish\n                    _.div({class: 'widget widget-group'},\n                        this.$saveBtn = _.button({class: 'widget widget--button'},\n                            _.span({class: 'widget--button__text-default'}, 'Save'),\n                            _.span({class: 'widget--button__text-working'}, 'Saving')\n                        ).click(() => { this.onClickSave(); }),\n                        _.if(connection,\n                            _.span({class: 'widget widget--button widget-group__separator'}, '&'),\n                            _.select({class: 'widget widget--select'},\n                                _.option({value: 'publish'}, 'Publish'),\n                                _.option({value: 'preview'}, 'Preview'),\n                                _.if(this.model.isPublished, \n                                    _.option({value: 'unpublish'}, 'Unpublish')\n                                ),\n                                _.option({value: ''}, '(No action)')\n                            ).val('publish')\n                        )\n                    )\n                )\n            )\n        );\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        // Make sure the model data is using the Content model\n        if(this.model instanceof HashBrown.Models.Content === false) {\n            this.model = new HashBrown.Models.Content(this.model);\n        }\n    }\n\n    /**\n     * Render this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--content' + (this.model.isLocked ? ' locked' : '')});\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        // Fetch information\n        let contentSchema;\n\n        return HashBrown.Helpers.SchemaHelper.getSchemaWithParentFields(this.model.schemaId)\n        .then((schema) => {\n            contentSchema = schema;\n\n            this.schema = contentSchema;\n\n            this.$element.html(\n                this.renderEditor(this.model, contentSchema)\n            );\n           \n            this.renderButtons();\n\n            this.onFieldEditorsReady();\n        })\n        .catch((e) => {\n            UI.errorModal(e, () => { location.hash = '/content/json/' + this.model.id; });\n        });\n    }\n}\n\nmodule.exports = ContentEditor;\n","'use strict';\n\n/**\n * The editor for Forms\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass FormEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n        \n        this.fetch();\n    }\n    \n    /**\n     * Event: Click advanced. Routes to the JSON editor\n     */\n    onClickAdvanced() {\n        location.hash = location.hash.replace('/forms/', '/forms/json/');\n    }\n\n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        this.$saveBtn.toggleClass('working', true);\n\n        HashBrown.Helpers.RequestHelper.request('post', 'forms/' + this.model.id, this.model)\n        .then(() => {\n            debug.log('Saved form \"' + this.model.id + '\"', this);\n            this.$saveBtn.toggleClass('working', false);\n        \n            return HashBrown.Helpers.RequestHelper.reloadResource('forms');\n        })\n        .then(() => {\n            let navbar = Crisp.View.get('NavbarMain');\n            \n            navbar.reload();\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click add input\n     */\n    onClickAddInput() {\n        if(!this.model.inputs['newinput']) {\n            this.model.inputs['newinput'] = { type: 'text' };\n        }\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click remove input\n     *\n     * @param {String} key\n     */\n    onClickRemoveInput(key) {\n        delete this.model.inputs[key];\n\n        this.fetch();\n    }\n    \n    /**\n     * Renders the allowed origin editor\n     *\n     * @return {Object} element\n     */\n    renderAllowedOriginEditor() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Input({\n                value: this.model.allowedOrigin,\n                tooltip: 'The allowed origin from which entries to this form can be posted',\n                onChange: (newOrigin) => {\n                    this.model.allowedOrigin = newOrigin;\n                }\n            }).$element\n        );\n    }\n\n    /**\n     * Renders the title editor\n     *\n     * @return {Object} element\n     */\n    renderTitleEditor() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Input({\n                value: this.model.title,\n                tooltip: 'The title of the form',\n                onChange: (newTitle) => {\n                    this.model.title = newTitle;\n                }\n            }).$element\n        );\n    }\n    \n    /**\n     * Renders the redirect editor\n     *\n     * @return {Object} element\n     */\n    renderRedirectEditor() {\n        return _.div({class: 'editor__field__value'},\n            _.div({class: 'widget-group'},\n                new HashBrown.Views.Widgets.Input({\n                    value: this.model.redirect,\n                    tooltip: 'The URL that the user will be redirected to after submitting the form entry',\n                    onChange: (newUrl) => {\n                        this.model.redirect = newUrl;\n                    }\n                }).$element,\n                new HashBrown.Views.Widgets.Input({\n                    value: this.model.appendRedirect,\n                    placeholder: 'Append',\n                    type: 'checkbox',\n                    tooltip: 'If ticked, the redirect URL will be appended to that of the origin',\n                    onChange: (newValue) => {\n                        this.model.appendRedirect = newValue;\n                    }\n                }).$element\n            )\n        );\n    }\n\n    /**\n     * Renders the inputs editor\n     *\n     * @return {Object} element\n     */\n    renderInputsEditor() {\n        let types = [\n            'checkbox',\n            'hidden',\n            'number',\n            'select',\n            'text'\n        ];\n\n        return _.div({class: 'editor__field__value segmented'},\n            _.each(this.model.inputs, (key, input) => {\n                return _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__actions'},\n                        _.button({class: 'editor__field__action editor__field__action--remove', title: 'Remove field'})\n                            .click(() => { view.onClickRemoveInput(key); })\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Name'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    value: key,\n                                    onChange: (newValue) => {\n                                        delete this.model.inputs[key];\n\n                                        key = newValue;\n\n                                        this.model.inputs[key] = input;\n                                    }\n                                }).$element\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Type'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Dropdown({\n                                    value: input.type,\n                                    options: types,\n                                    onChange: (newValue) => {\n                                        input.type = newValue;\n\n                                        this.fetch();\n                                    }\n                                }).$element\n                            )\n                        ),\n                        _.if(input.type == 'select',\n                            _.div({class: 'editor__field'},\n                                _.div({class: 'editor__field__key'}, 'Select options'),\n                                _.div({class: 'editor__field__value'},\n                                    new HashBrown.Views.Widgets.Chips({\n                                        value: input.options || [],\n                                        onChange: (newValue) => {\n                                            input.options = newValue;\n\n                                            this.renderPreview();\n                                        }\n                                    }).$element\n                                )\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Required'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    type: 'checkbox',\n                                    value: input.required === true,\n                                    onChange: (newValue) => {\n                                        input.required = newValue;\n                                    }\n                                }).$element\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Check duplicates'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    type: 'checkbox',\n                                    value: input.checkDuplicates === true,\n                                    onChange: (newValue) => {\n                                        input.checkDuplicates = newValue;\n                                    }\n                                }).$element\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Pattern'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    value: input.pattern,\n                                    onChange: (newValue) => {\n                                        input.pattern = newValue;\n                                    }\n                                }).$element\n                            )\n                        )\n                    )\n                );\n            }),\n            _.button({class: 'widget widget--button round editor__field__add fa fa-plus', title: 'Add an input'})\n                .on('click', () => { this.onClickAddInput(); })\n        );\n    }\n\n    /**\n     * Renders a preview\n     *\n     * @return {Object} element\n     */\n    renderPreview() {\n        let $preview = this.$element.find('.editor--form__preview');\n\n        _.append($preview.empty(),\n            _.each(this.model.inputs, (key, input) => {\n                if(input.type === 'select') {\n                    return new HashBrown.Views.Widgets.Dropdown({\n                        options: input.options || []\n                    }).$element\n                } else {\n                    return _.input({class: 'widget widget--input ' + (input.type || 'text'), placeholder: key, type: input.type, name: key, pattern: input.pattern, required: input.required === true});\n                }\n            })\n        );\n    }\n\n    /**\n     * Renders all entries\n     *\n     * @return {Object} element\n     */\n    renderEntries() {\n        return _.div({class: 'editor__field__value'},\n            _.div({class: 'widget-group'},\n                _.button({class: 'widget widget--button low warning'}, 'Clear').click(() => {\n                    UI.confirmModal('Clear', 'Clear \"' + this.model.title + '\"', 'Are you sure you want to clear all entries?', () => {\n                        HashBrown.Helpers.RequestHelper.request('post', 'forms/clear/' + this.model.id)\n                        .then(() => {\n                            this.model.entries = [];\n                        })\n                        .catch(UI.errorModal);\n                    });\n                }),\n                _.button({class: 'widget widget--button low'}, 'Get .csv').click(() => {\n                    location = HashBrown.Helpers.RequestHelper.environmentUrl('forms/' + this.model.id + '/entries');\n                })\n            )\n        );\n    }\n\n    /**\n     * Renders a single field\n     *\n     * @return {HTMLElement} Element\n     */\n    renderField(label, $content, className) {\n        return _.div({class: 'editor__field'},\n            _.div({class: 'editor__field__key'},\n                label\n            ),\n            $content\n        );\n    }\n        \n    /**\n     * Renders all fields\n     *\n     * @return {Object} element\n     */\n    renderFields() {\n        let $element = _.div({class: 'editor__body'});\n        let postUrl = location.protocol + '//' + location.hostname + '/api/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/forms/' + this.model.id + '/submit';\n        \n        return _.div({class: 'editor__body'},\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Entries (' + this.model.entries.length + ')'),\n                _.div({class: 'editor__field__value'},\n                    this.renderEntries()\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'POST URL'),\n                _.div({class: 'editor__field__value'},\n                    _.div({class: 'widget-group'},\n                        _.input({readonly: 'readonly', class: 'widget widget--input text', type: 'text', value: postUrl}),\n                        _.button({class: 'widget widget--button small fa fa-copy', title: 'Copy POST URL'})\n                            .click((e) => {\n                                copyToClipboard(e.currentTarget.previousElementSibling.value);\n                            })\n                    )\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Title'),\n                _.div({class: 'editor__field__value'},\n                    this.renderTitleEditor()\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Allowed origin'),\n                _.div({class: 'editor__field__value'},\n                    this.renderAllowedOriginEditor() \n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Redirect URL'),\n                _.div({class: 'editor__field__value'},\n                    this.renderRedirectEditor() \n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Inputs'),\n                _.div({class: 'editor__field__value'},\n                    this.renderInputsEditor()\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Preview'),\n                _.div({class: 'editor__field__value'},\n                    _.div({class: 'editor--form__preview'})\n                )\n            )\n        );\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        this.renderPreview();\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--form' + (this.model.isLocked ? ' locked' : '')},\n            _.div({class: 'editor__header'},\n                _.span({class: 'editor__header__icon fa fa-wpforms'}),\n                _.h4({class: 'editor__header__title'}, this.model.title)\n            ),\n            this.renderFields(),\n            _.div({class: 'editor__footer'}, \n                _.div({class: 'editor__footer__buttons'},\n                    _.button({class: 'widget widget--button embedded'},\n                        'Advanced'\n                    ).click(() => { this.onClickAdvanced(); }),\n                    _.if(!this.model.isLocked,\n                        this.$saveBtn = _.button({class: 'widget widget--button'},\n                            _.span({class: 'widget--button__text-default'}, 'Save '),\n                            _.span({class: 'widget--button__text-working'}, 'Saving ')\n                        ).click(() => { this.onClickSave(); })\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = FormEditor;\n","'use strict';\n\nconst beautify = require('js-beautify').js_beautify;\n\n/**\n * A basic JSON editor for any object\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass JSONEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        this.$error = _.div({class: 'editor__footer__error'},\n            _.div({class: 'editor__footer__error__heading'}),\n            _.div({class: 'editor__footer__error__body'})\n        ).hide();\n\n        if(!this.model && !this.modelUrl) {\n            this.modelUrl = HashBrown.Helpers.RequestHelper.environmentUrl(this.apiPath);\n        }\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click basic. Returns to the regular editor\n     */\n    onClickBasic() {\n        let url = $('.navbar-main__pane__item.active > a').attr('href');\n    \n        if(url) {\n            location = url;\n        } else {\n            debug.log('Invalid url \"' + url + '\"', this);\n        }\n    }\n\n    /**\n     * Event: Click save. Posts the model to the apiPath\n     */\n    onClickSave() {\n        let view = this;\n        \n        this.$saveBtn.toggleClass('working', true);\n\n        if(this.debug()) {\n            HashBrown.Helpers.RequestHelper.request('post', this.apiPath, this.model)\n            .then(() => {\n                this.$saveBtn.toggleClass('working', false);\n            })\n            .catch(UI.errorModal);\n       \n        } else {\n            UI.errorModal('Unable to save', 'Please refer to the error prompt for details');\n\n        }\n    }\n\n    /**\n     * Event: Click beautify button\n     */\n    onClickBeautify() {\n        try {\n            this.value = beautify(this.value);\n            this.$element.find('textarea').val(this.value);\n        \n        } catch(e) {\n            this.$error.children('.editor__footer__error__heading').html('JSON error');\n            this.$error.children('.editor__footer__error__body').html(e);\n            this.$error.show();\n\n        }\n    }\n\n    /**\n     * Debug the JSON string\n     *\n     * @param {Boolean} fromModel\n     */\n    debug(fromModel) {\n        let isValid = true;\n        \n        // Function for checking model integrity\n        let check = (k, v) => {\n            if(!v) { return; }\n\n            switch(k) {\n                case 'schemaId': case 'parentSchemaId':\n                    if(HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(v)) {\n                        return;\n                    }\n\n                    return 'Schema \"' + v + '\" not found';\n               \n                case 'schemaBindings': case 'allowedSchemas': case 'allowedChildSchemas':\n                    let invalidSchemas = v.slice(0);\n                    \n                    for(let r in resources.schemas) {\n                        let schema = resources.schemas[r];\n                        \n                        for(let b = invalidSchemas.length - 1; b >= 0; b--) {\n                            if(schema.id == invalidSchemas[b]) {\n                                invalidSchemas.splice(b, 1);\n                            }\n                        }   \n                    }\n\n                    if(invalidSchemas.length > 0) {\n                        if(invalidSchemas.length == 1) {\n                            return 'Schema \"' + invalidSchemas[0] + '\" not found';\n                        } else {\n                            return 'Schemas \"' + invalidSchemas.join(', ') + '\" not found';\n                        }\n                    }\n\n                    break;\n                    \n                case 'connections':\n                    let invalidConnections = v.slice(0);\n                    \n                    for(let r in resources.connections) {\n                        let connection = resources.connections[r];\n\n                        for(let c = invalidConnections.length - 1; c >= 0; c--) {\n                            if(connection.id == invalidConnections[c]) {\n                                invalidConnections.splice(c, 1);\n                            }\n                        }   \n                    }\n\n                    if(invalidConnections.length > 0) {\n                        if(invalidConnections.length == 1) {\n                            return 'Connection \"' + invalidConnections[0] + '\" not found';\n                        } else {\n                            return 'Connections \"' + invalidConnections.join(', ') + '\" not found';\n                        }\n                    }\n\n                    break;\n            }\n\n            return;\n        };\n\n        // Function for recursing through object\n        let recurse = (obj) => {\n            if(obj instanceof Object) {\n                for(let k in obj) {\n                    let v = obj[k];\n\n                    let failMessage = check(k, v);\n                    \n                    if(failMessage) {\n                        this.$error.children('.editor__footer__error__heading').html('Input error');\n                        this.$error.children('.editor__footer__error__body').html(failMessage);\n                        this.$error.show();\n                    \n                        isValid = false;\n                    };\n\n                    recurse(v);\n                }\n            }\n        };\n        \n        // Hide error message initially\n        this.$error.hide();\n\n        // Syntax check\n        try {\n            if(!fromModel) {\n                this.model = JSON.parse(this.value);\n            }\n            \n            // Sanity check\n            recurse(this.model);\n\n        } catch(e) {\n            this.$error.children('.editor__footer__error__heading').html('Syntax error');\n            this.$error.children('.editor__footer__error__body').html(e);\n            this.$error.show();\n\n            isValid = false;\n        }\n\n        this.isValid = isValid;\n\n        return isValid;\n    }\n\n    /**\n     * Event: Change text. Make sure the value is up to date\n     */\n    onChangeText() {\n        this.value = this.editor.getDoc().getValue();\n\n        if(this.debug()) {\n            this.trigger('change', this.model);\n        }\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        // Debug once before entering into the code editor\n        // This allows for backward compatibility adjustments to happen first\n        this.debug(true);\n\n        // Convert the model to a string value\n        this.value = beautify(JSON.stringify(this.model));\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--json'},\n            _.div({class: 'editor__header'}, \n                _.span({class: 'editor__header__icon fa fa-code'}),\n                _.h4({class: 'editor__header__title'}, Crisp.Router.params.id)\n            ),\n            _.div({class: 'editor__body'},\n                _.textarea(),\n            ),\n            _.div({class: 'editor__footer'}, \n                this.$error,\n                _.div({class: 'editor__footer__buttons'},\n                    _.button({class: 'widget widget--button embedded'},\n                        'Basic'\n                    ).click(() => { this.onClickBasic(); }),\n                    _.if(!this.model.isLocked,\n                        this.$saveBtn = _.button({class: 'widget widget--button'},\n                            _.span({class: 'widget--button__text-default'}, 'Save'),\n                            _.span({class: 'widget--button__text-working'}, 'Saving')\n                        ).click(() => { this.onClickSave(); })\n                    )\n                )\n            )\n        );\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        setTimeout(() => {\n            this.editor = CodeMirror.fromTextArea(this.element.querySelector('textarea'), {\n                lineNumbers: true,\n                mode: {\n                    name: 'javascript',\n                    json: true\n                },\n                viewportMargin: 10,\n                tabSize: 4,\n                lineWrapping: false,\n                indentUnit: 4,\n                indentWithTabs: true,\n                theme: getCookie('cmtheme') || 'default',\n                value: this.value\n            });\n\n            this.editor.getDoc().setValue(this.value);\n\n            this.editor.on('change', () => { this.onChangeText(); });\n\n            this.onChangeText();\n        }, 1);\n    }\n}\n\nmodule.exports = JSONEditor;\n","/*\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2017 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n*/\n\n/**\nThe following batches are equivalent:\n\nvar beautify_js = require('js-beautify');\nvar beautify_js = require('js-beautify').js;\nvar beautify_js = require('js-beautify').js_beautify;\n\nvar beautify_css = require('js-beautify').css;\nvar beautify_css = require('js-beautify').css_beautify;\n\nvar beautify_html = require('js-beautify').html;\nvar beautify_html = require('js-beautify').html_beautify;\n\nAll methods returned accept two arguments, the source string and an options object.\n**/\n\nfunction get_beautify(js_beautify, css_beautify, html_beautify) {\n    // the default is js\n    var beautify = function(src, config) {\n        return js_beautify.js_beautify(src, config);\n    };\n\n    // short aliases\n    beautify.js = js_beautify.js_beautify;\n    beautify.css = css_beautify.css_beautify;\n    beautify.html = html_beautify.html_beautify;\n\n    // legacy aliases\n    beautify.js_beautify = js_beautify.js_beautify;\n    beautify.css_beautify = css_beautify.css_beautify;\n    beautify.html_beautify = html_beautify.html_beautify;\n\n    return beautify;\n}\n\nif (typeof define === \"function\" && define.amd) {\n    // Add support for AMD ( https://github.com/amdjs/amdjs-api/wiki/AMD#defineamd-property- )\n    define([\n        \"./lib/beautify\",\n        \"./lib/beautify-css\",\n        \"./lib/beautify-html\"\n    ], function(js_beautify, css_beautify, html_beautify) {\n        return get_beautify(js_beautify, css_beautify, html_beautify);\n    });\n} else {\n    (function(mod) {\n        var js_beautify = require('./lib/beautify');\n        var css_beautify = require('./lib/beautify-css');\n        var html_beautify = require('./lib/beautify-html');\n\n        mod.exports = get_beautify(js_beautify, css_beautify, html_beautify);\n\n    })(module);\n}","/*jshint curly:true, eqeqeq:true, laxbreak:true, noempty:false */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2017 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n JS Beautifier\n---------------\n\n\n  Written by Einar Lielmanis, <einar@jsbeautifier.org>\n      http://jsbeautifier.org/\n\n  Originally converted to javascript by Vital, <vital76@gmail.com>\n  \"End braces on own line\" added by Chris J. Shull, <chrisjshull@gmail.com>\n  Parsing improvements for brace-less statements by Liam Newman <bitwiseman@gmail.com>\n\n\n  Usage:\n    js_beautify(js_source_text);\n    js_beautify(js_source_text, options);\n\n  The options are:\n    indent_size (default 4)          - indentation size,\n    indent_char (default space)      - character to indent with,\n    preserve_newlines (default true) - whether existing line breaks should be preserved,\n    max_preserve_newlines (default unlimited) - maximum number of line breaks to be preserved in one chunk,\n\n    jslint_happy (default false) - if true, then jslint-stricter mode is enforced.\n\n            jslint_happy        !jslint_happy\n            ---------------------------------\n            function ()         function()\n\n            switch () {         switch() {\n            case 1:               case 1:\n              break;                break;\n            }                   }\n\n    space_after_anon_function (default false) - should the space before an anonymous function's parens be added, \"function()\" vs \"function ()\",\n          NOTE: This option is overriden by jslint_happy (i.e. if jslint_happy is true, space_after_anon_function is true by design)\n\n    brace_style (default \"collapse\") - \"collapse\" | \"expand\" | \"end-expand\" | \"none\" | any of the former + \",preserve-inline\"\n            put braces on the same line as control statements (default), or put braces on own line (Allman / ANSI style), or just put end braces on own line, or attempt to keep them where they are.\n            preserve-inline will try to preserve inline blocks of curly braces\n\n    space_before_conditional (default true) - should the space before conditional statement be added, \"if(true)\" vs \"if (true)\",\n\n    unescape_strings (default false) - should printable characters in strings encoded in \\xNN notation be unescaped, \"example\" vs \"\\x65\\x78\\x61\\x6d\\x70\\x6c\\x65\"\n\n    wrap_line_length (default unlimited) - lines should wrap at next opportunity after this number of characters.\n          NOTE: This is not a hard limit. Lines will continue until a point where a newline would\n                be preserved if it were present.\n\n    end_with_newline (default false)  - end output with a newline\n\n\n    e.g\n\n    js_beautify(js_source_text, {\n      'indent_size': 1,\n      'indent_char': '\\t'\n    });\n\n*/\n\n// Object.values polyfill found here:\n// http://tokenposts.blogspot.com.au/2012/04/javascript-objectkeys-browser.html\nif (!Object.values) {\n    Object.values = function(o) {\n        if (o !== Object(o)) {\n            throw new TypeError('Object.values called on a non-object');\n        }\n        var k = [],\n            p;\n        for (p in o) {\n            if (Object.prototype.hasOwnProperty.call(o, p)) {\n                k.push(o[p]);\n            }\n        }\n        return k;\n    };\n}\n\n(function() {\n\n    function mergeOpts(allOptions, targetType) {\n        var finalOpts = {};\n        var name;\n\n        for (name in allOptions) {\n            if (name !== targetType) {\n                finalOpts[name] = allOptions[name];\n            }\n        }\n\n        //merge in the per type settings for the targetType\n        if (targetType in allOptions) {\n            for (name in allOptions[targetType]) {\n                finalOpts[name] = allOptions[targetType][name];\n            }\n        }\n        return finalOpts;\n    }\n\n    function js_beautify(js_source_text, options) {\n\n        var acorn = {};\n        (function(exports) {\n            /* jshint curly: false */\n            // This section of code is taken from acorn.\n            //\n            // Acorn was written by Marijn Haverbeke and released under an MIT\n            // license. The Unicode regexps (for identifiers and whitespace) were\n            // taken from [Esprima](http://esprima.org) by Ariya Hidayat.\n            //\n            // Git repositories for Acorn are available at\n            //\n            //     http://marijnhaverbeke.nl/git/acorn\n            //     https://github.com/marijnh/acorn.git\n\n            // ## Character categories\n\n            // Big ugly regular expressions that match characters in the\n            // whitespace, identifier, and identifier-start categories. These\n            // are only applied when a character is found to actually have a\n            // code point above 128.\n\n            var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/; // jshint ignore:line\n            var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n            var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n            var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n            var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\n            // Whether a single character denotes a newline.\n\n            exports.newline = /[\\n\\r\\u2028\\u2029]/;\n\n            // Matches a whole line break (where CRLF is considered a single\n            // line break). Used to count lines.\n\n            // in javascript, these two differ\n            // in python they are the same, different methods are called on them\n            exports.lineBreak = new RegExp('\\r\\n|' + exports.newline.source);\n            exports.allLineBreaks = new RegExp(exports.lineBreak.source, 'g');\n\n\n            // Test whether a given character code starts an identifier.\n\n            exports.isIdentifierStart = function(code) {\n                // permit $ (36) and @ (64). @ is used in ES7 decorators.\n                if (code < 65) return code === 36 || code === 64;\n                // 65 through 91 are uppercase letters.\n                if (code < 91) return true;\n                // permit _ (95).\n                if (code < 97) return code === 95;\n                // 97 through 123 are lowercase letters.\n                if (code < 123) return true;\n                return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n            };\n\n            // Test whether a given character is part of an identifier.\n\n            exports.isIdentifierChar = function(code) {\n                if (code < 48) return code === 36;\n                if (code < 58) return true;\n                if (code < 65) return false;\n                if (code < 91) return true;\n                if (code < 97) return code === 95;\n                if (code < 123) return true;\n                return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n            };\n        })(acorn);\n        /* jshint curly: true */\n\n        function in_array(what, arr) {\n            for (var i = 0; i < arr.length; i += 1) {\n                if (arr[i] === what) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        function trim(s) {\n            return s.replace(/^\\s+|\\s+$/g, '');\n        }\n\n        function ltrim(s) {\n            return s.replace(/^\\s+/g, '');\n        }\n\n        // function rtrim(s) {\n        //     return s.replace(/\\s+$/g, '');\n        // }\n\n        function sanitizeOperatorPosition(opPosition) {\n            opPosition = opPosition || OPERATOR_POSITION.before_newline;\n\n            var validPositionValues = Object.values(OPERATOR_POSITION);\n\n            if (!in_array(opPosition, validPositionValues)) {\n                throw new Error(\"Invalid Option Value: The option 'operator_position' must be one of the following values\\n\" +\n                    validPositionValues +\n                    \"\\nYou passed in: '\" + opPosition + \"'\");\n            }\n\n            return opPosition;\n        }\n\n        var OPERATOR_POSITION = {\n            before_newline: 'before-newline',\n            after_newline: 'after-newline',\n            preserve_newline: 'preserve-newline',\n        };\n\n        var OPERATOR_POSITION_BEFORE_OR_PRESERVE = [OPERATOR_POSITION.before_newline, OPERATOR_POSITION.preserve_newline];\n\n        var MODE = {\n            BlockStatement: 'BlockStatement', // 'BLOCK'\n            Statement: 'Statement', // 'STATEMENT'\n            ObjectLiteral: 'ObjectLiteral', // 'OBJECT',\n            ArrayLiteral: 'ArrayLiteral', //'[EXPRESSION]',\n            ForInitializer: 'ForInitializer', //'(FOR-EXPRESSION)',\n            Conditional: 'Conditional', //'(COND-EXPRESSION)',\n            Expression: 'Expression' //'(EXPRESSION)'\n        };\n\n        function Beautifier(js_source_text, options) {\n            \"use strict\";\n            var output;\n            var tokens = [],\n                token_pos;\n            var Tokenizer;\n            var current_token;\n            var last_type, last_last_text, indent_string;\n            var flags, previous_flags, flag_store;\n            var prefix;\n\n            var handlers, opt;\n            var baseIndentString = '';\n\n            handlers = {\n                'TK_START_EXPR': handle_start_expr,\n                'TK_END_EXPR': handle_end_expr,\n                'TK_START_BLOCK': handle_start_block,\n                'TK_END_BLOCK': handle_end_block,\n                'TK_WORD': handle_word,\n                'TK_RESERVED': handle_word,\n                'TK_SEMICOLON': handle_semicolon,\n                'TK_STRING': handle_string,\n                'TK_EQUALS': handle_equals,\n                'TK_OPERATOR': handle_operator,\n                'TK_COMMA': handle_comma,\n                'TK_BLOCK_COMMENT': handle_block_comment,\n                'TK_COMMENT': handle_comment,\n                'TK_DOT': handle_dot,\n                'TK_UNKNOWN': handle_unknown,\n                'TK_EOF': handle_eof\n            };\n\n            function create_flags(flags_base, mode) {\n                var next_indent_level = 0;\n                if (flags_base) {\n                    next_indent_level = flags_base.indentation_level;\n                    if (!output.just_added_newline() &&\n                        flags_base.line_indent_level > next_indent_level) {\n                        next_indent_level = flags_base.line_indent_level;\n                    }\n                }\n\n                var next_flags = {\n                    mode: mode,\n                    parent: flags_base,\n                    last_text: flags_base ? flags_base.last_text : '', // last token text\n                    last_word: flags_base ? flags_base.last_word : '', // last 'TK_WORD' passed\n                    declaration_statement: false,\n                    declaration_assignment: false,\n                    multiline_frame: false,\n                    inline_frame: false,\n                    if_block: false,\n                    else_block: false,\n                    do_block: false,\n                    do_while: false,\n                    import_block: false,\n                    in_case_statement: false, // switch(..){ INSIDE HERE }\n                    in_case: false, // we're on the exact line with \"case 0:\"\n                    case_body: false, // the indented case-action block\n                    indentation_level: next_indent_level,\n                    line_indent_level: flags_base ? flags_base.line_indent_level : next_indent_level,\n                    start_line_index: output.get_line_number(),\n                    ternary_depth: 0\n                };\n                return next_flags;\n            }\n\n            // Some interpreters have unexpected results with foo = baz || bar;\n            options = options ? options : {};\n\n            // Allow the setting of language/file-type specific options\n            // with inheritance of overall settings\n            options = mergeOpts(options, 'js');\n\n            opt = {};\n\n            // compatibility, re\n            if (options.brace_style === \"expand-strict\") { //graceful handling of deprecated option\n                options.brace_style = \"expand\";\n            } else if (options.brace_style === \"collapse-preserve-inline\") { //graceful handling of deprecated option\n                options.brace_style = \"collapse,preserve-inline\";\n            } else if (options.braces_on_own_line !== undefined) { //graceful handling of deprecated option\n                options.brace_style = options.braces_on_own_line ? \"expand\" : \"collapse\";\n            } else if (!options.brace_style) //Nothing exists to set it\n            {\n                options.brace_style = \"collapse\";\n            }\n\n\n            var brace_style_split = options.brace_style.split(/[^a-zA-Z0-9_\\-]+/);\n            opt.brace_style = brace_style_split[0];\n            opt.brace_preserve_inline = brace_style_split[1] ? brace_style_split[1] : false;\n\n            opt.indent_size = options.indent_size ? parseInt(options.indent_size, 10) : 4;\n            opt.indent_char = options.indent_char ? options.indent_char : ' ';\n            opt.eol = options.eol ? options.eol : 'auto';\n            opt.preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines;\n            opt.break_chained_methods = (options.break_chained_methods === undefined) ? false : options.break_chained_methods;\n            opt.max_preserve_newlines = (options.max_preserve_newlines === undefined) ? 0 : parseInt(options.max_preserve_newlines, 10);\n            opt.space_in_paren = (options.space_in_paren === undefined) ? false : options.space_in_paren;\n            opt.space_in_empty_paren = (options.space_in_empty_paren === undefined) ? false : options.space_in_empty_paren;\n            opt.jslint_happy = (options.jslint_happy === undefined) ? false : options.jslint_happy;\n            opt.space_after_anon_function = (options.space_after_anon_function === undefined) ? false : options.space_after_anon_function;\n            opt.keep_array_indentation = (options.keep_array_indentation === undefined) ? false : options.keep_array_indentation;\n            opt.space_before_conditional = (options.space_before_conditional === undefined) ? true : options.space_before_conditional;\n            opt.unescape_strings = (options.unescape_strings === undefined) ? false : options.unescape_strings;\n            opt.wrap_line_length = (options.wrap_line_length === undefined) ? 0 : parseInt(options.wrap_line_length, 10);\n            opt.e4x = (options.e4x === undefined) ? false : options.e4x;\n            opt.end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline;\n            opt.comma_first = (options.comma_first === undefined) ? false : options.comma_first;\n            opt.operator_position = sanitizeOperatorPosition(options.operator_position);\n\n            // For testing of beautify ignore:start directive\n            opt.test_output_raw = (options.test_output_raw === undefined) ? false : options.test_output_raw;\n\n            // force opt.space_after_anon_function to true if opt.jslint_happy\n            if (opt.jslint_happy) {\n                opt.space_after_anon_function = true;\n            }\n\n            if (options.indent_with_tabs) {\n                opt.indent_char = '\\t';\n                opt.indent_size = 1;\n            }\n\n            if (opt.eol === 'auto') {\n                opt.eol = '\\n';\n                if (js_source_text && acorn.lineBreak.test(js_source_text || '')) {\n                    opt.eol = js_source_text.match(acorn.lineBreak)[0];\n                }\n            }\n\n            opt.eol = opt.eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n');\n\n            //----------------------------------\n            indent_string = '';\n            while (opt.indent_size > 0) {\n                indent_string += opt.indent_char;\n                opt.indent_size -= 1;\n            }\n\n            var preindent_index = 0;\n            if (js_source_text && js_source_text.length) {\n                while ((js_source_text.charAt(preindent_index) === ' ' ||\n                        js_source_text.charAt(preindent_index) === '\\t')) {\n                    baseIndentString += js_source_text.charAt(preindent_index);\n                    preindent_index += 1;\n                }\n                js_source_text = js_source_text.substring(preindent_index);\n            }\n\n            last_type = 'TK_START_BLOCK'; // last token type\n            last_last_text = ''; // pre-last token text\n            output = new Output(indent_string, baseIndentString);\n\n            // If testing the ignore directive, start with output disable set to true\n            output.raw = opt.test_output_raw;\n\n\n            // Stack of parsing/formatting states, including MODE.\n            // We tokenize, parse, and output in an almost purely a forward-only stream of token input\n            // and formatted output.  This makes the beautifier less accurate than full parsers\n            // but also far more tolerant of syntax errors.\n            //\n            // For example, the default mode is MODE.BlockStatement. If we see a '{' we push a new frame of type\n            // MODE.BlockStatement on the the stack, even though it could be object literal.  If we later\n            // encounter a \":\", we'll switch to to MODE.ObjectLiteral.  If we then see a \";\",\n            // most full parsers would die, but the beautifier gracefully falls back to\n            // MODE.BlockStatement and continues on.\n            flag_store = [];\n            set_mode(MODE.BlockStatement);\n\n            this.beautify = function() {\n\n                /*jshint onevar:true */\n                var sweet_code;\n                Tokenizer = new tokenizer(js_source_text, opt, indent_string);\n                tokens = Tokenizer.tokenize();\n                token_pos = 0;\n\n                current_token = get_token();\n                while (current_token) {\n                    handlers[current_token.type]();\n\n                    last_last_text = flags.last_text;\n                    last_type = current_token.type;\n                    flags.last_text = current_token.text;\n\n                    token_pos += 1;\n                    current_token = get_token();\n                }\n\n                sweet_code = output.get_code();\n                if (opt.end_with_newline) {\n                    sweet_code += '\\n';\n                }\n\n                if (opt.eol !== '\\n') {\n                    sweet_code = sweet_code.replace(/[\\n]/g, opt.eol);\n                }\n\n                return sweet_code;\n            };\n\n            function handle_whitespace_and_comments(local_token, preserve_statement_flags) {\n                var newlines = local_token.newlines;\n                var keep_whitespace = opt.keep_array_indentation && is_array(flags.mode);\n                var temp_token = current_token;\n\n                for (var h = 0; h < local_token.comments_before.length; h++) {\n                    // The cleanest handling of inline comments is to treat them as though they aren't there.\n                    // Just continue formatting and the behavior should be logical.\n                    // Also ignore unknown tokens.  Again, this should result in better behavior.\n                    current_token = local_token.comments_before[h];\n                    handle_whitespace_and_comments(current_token, preserve_statement_flags);\n                    handlers[current_token.type](preserve_statement_flags);\n                }\n                current_token = temp_token;\n\n                if (keep_whitespace) {\n                    for (var i = 0; i < newlines; i += 1) {\n                        print_newline(i > 0, preserve_statement_flags);\n                    }\n                } else {\n                    if (opt.max_preserve_newlines && newlines > opt.max_preserve_newlines) {\n                        newlines = opt.max_preserve_newlines;\n                    }\n\n                    if (opt.preserve_newlines) {\n                        if (local_token.newlines > 1) {\n                            print_newline(false, preserve_statement_flags);\n                            for (var j = 1; j < newlines; j += 1) {\n                                print_newline(true, preserve_statement_flags);\n                            }\n                        }\n                    }\n                }\n\n            }\n\n            // we could use just string.split, but\n            // IE doesn't like returning empty strings\n            function split_linebreaks(s) {\n                //return s.split(/\\x0d\\x0a|\\x0a/);\n\n                s = s.replace(acorn.allLineBreaks, '\\n');\n                var out = [],\n                    idx = s.indexOf(\"\\n\");\n                while (idx !== -1) {\n                    out.push(s.substring(0, idx));\n                    s = s.substring(idx + 1);\n                    idx = s.indexOf(\"\\n\");\n                }\n                if (s.length) {\n                    out.push(s);\n                }\n                return out;\n            }\n\n            var newline_restricted_tokens = ['break', 'continue', 'return', 'throw'];\n\n            function allow_wrap_or_preserved_newline(force_linewrap) {\n                force_linewrap = (force_linewrap === undefined) ? false : force_linewrap;\n\n                // Never wrap the first token on a line\n                if (output.just_added_newline()) {\n                    return;\n                }\n\n                var shouldPreserveOrForce = (opt.preserve_newlines && current_token.wanted_newline) || force_linewrap;\n                var operatorLogicApplies = in_array(flags.last_text, Tokenizer.positionable_operators) || in_array(current_token.text, Tokenizer.positionable_operators);\n\n                if (operatorLogicApplies) {\n                    var shouldPrintOperatorNewline = (\n                            in_array(flags.last_text, Tokenizer.positionable_operators) &&\n                            in_array(opt.operator_position, OPERATOR_POSITION_BEFORE_OR_PRESERVE)\n                        ) ||\n                        in_array(current_token.text, Tokenizer.positionable_operators);\n                    shouldPreserveOrForce = shouldPreserveOrForce && shouldPrintOperatorNewline;\n                }\n\n                if (shouldPreserveOrForce) {\n                    print_newline(false, true);\n                } else if (opt.wrap_line_length) {\n                    if (last_type === 'TK_RESERVED' && in_array(flags.last_text, newline_restricted_tokens)) {\n                        // These tokens should never have a newline inserted\n                        // between them and the following expression.\n                        return;\n                    }\n                    var proposed_line_length = output.current_line.get_character_count() + current_token.text.length +\n                        (output.space_before_token ? 1 : 0);\n                    if (proposed_line_length >= opt.wrap_line_length) {\n                        print_newline(false, true);\n                    }\n                }\n            }\n\n            function print_newline(force_newline, preserve_statement_flags) {\n                if (!preserve_statement_flags) {\n                    if (flags.last_text !== ';' && flags.last_text !== ',' && flags.last_text !== '=' && last_type !== 'TK_OPERATOR') {\n                        var next_token = get_token(1);\n                        while (flags.mode === MODE.Statement &&\n                            !(flags.if_block && next_token && next_token.type === 'TK_RESERVED' && next_token.text === 'else') &&\n                            !flags.do_block) {\n                            restore_mode();\n                        }\n                    }\n                }\n\n                if (output.add_new_line(force_newline)) {\n                    flags.multiline_frame = true;\n                }\n            }\n\n            function print_token_line_indentation() {\n                if (output.just_added_newline()) {\n                    if (opt.keep_array_indentation && is_array(flags.mode) && current_token.wanted_newline) {\n                        output.current_line.push(current_token.whitespace_before);\n                        output.space_before_token = false;\n                    } else if (output.set_indent(flags.indentation_level)) {\n                        flags.line_indent_level = flags.indentation_level;\n                    }\n                }\n            }\n\n            function print_token(printable_token) {\n                if (output.raw) {\n                    output.add_raw_token(current_token);\n                    return;\n                }\n\n                if (opt.comma_first && last_type === 'TK_COMMA' &&\n                    output.just_added_newline()) {\n                    if (output.previous_line.last() === ',') {\n                        var popped = output.previous_line.pop();\n                        // if the comma was already at the start of the line,\n                        // pull back onto that line and reprint the indentation\n                        if (output.previous_line.is_empty()) {\n                            output.previous_line.push(popped);\n                            output.trim(true);\n                            output.current_line.pop();\n                            output.trim();\n                        }\n\n                        // add the comma in front of the next token\n                        print_token_line_indentation();\n                        output.add_token(',');\n                        output.space_before_token = true;\n                    }\n                }\n\n                printable_token = printable_token || current_token.text;\n                print_token_line_indentation();\n                output.add_token(printable_token);\n            }\n\n            function indent() {\n                flags.indentation_level += 1;\n            }\n\n            function deindent() {\n                if (flags.indentation_level > 0 &&\n                    ((!flags.parent) || flags.indentation_level > flags.parent.indentation_level)) {\n                    flags.indentation_level -= 1;\n\n                }\n            }\n\n            function set_mode(mode) {\n                if (flags) {\n                    flag_store.push(flags);\n                    previous_flags = flags;\n                } else {\n                    previous_flags = create_flags(null, mode);\n                }\n\n                flags = create_flags(previous_flags, mode);\n            }\n\n            function is_array(mode) {\n                return mode === MODE.ArrayLiteral;\n            }\n\n            function is_expression(mode) {\n                return in_array(mode, [MODE.Expression, MODE.ForInitializer, MODE.Conditional]);\n            }\n\n            function restore_mode() {\n                if (flag_store.length > 0) {\n                    previous_flags = flags;\n                    flags = flag_store.pop();\n                    if (previous_flags.mode === MODE.Statement) {\n                        output.remove_redundant_indentation(previous_flags);\n                    }\n                }\n            }\n\n            function start_of_object_property() {\n                return flags.parent.mode === MODE.ObjectLiteral && flags.mode === MODE.Statement && (\n                    (flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set'])));\n            }\n\n            function start_of_statement() {\n                if (\n                    (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const']) && current_token.type === 'TK_WORD') ||\n                    (last_type === 'TK_RESERVED' && flags.last_text === 'do') ||\n                    (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['return', 'throw']) && !current_token.wanted_newline) ||\n                    (last_type === 'TK_RESERVED' && flags.last_text === 'else' &&\n                        !(current_token.type === 'TK_RESERVED' && current_token.text === 'if' && !current_token.comments_before.length)) ||\n                    (last_type === 'TK_END_EXPR' && (previous_flags.mode === MODE.ForInitializer || previous_flags.mode === MODE.Conditional)) ||\n                    (last_type === 'TK_WORD' && flags.mode === MODE.BlockStatement &&\n                        !flags.in_case &&\n                        !(current_token.text === '--' || current_token.text === '++') &&\n                        last_last_text !== 'function' &&\n                        current_token.type !== 'TK_WORD' && current_token.type !== 'TK_RESERVED') ||\n                    (flags.mode === MODE.ObjectLiteral && (\n                        (flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set']))))\n                ) {\n\n                    set_mode(MODE.Statement);\n                    indent();\n\n                    handle_whitespace_and_comments(current_token, true);\n\n                    // Issue #276:\n                    // If starting a new statement with [if, for, while, do], push to a new line.\n                    // if (a) if (b) if(c) d(); else e(); else f();\n                    if (!start_of_object_property()) {\n                        allow_wrap_or_preserved_newline(\n                            current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['do', 'for', 'if', 'while']));\n                    }\n\n                    return true;\n                }\n                return false;\n            }\n\n            function all_lines_start_with(lines, c) {\n                for (var i = 0; i < lines.length; i++) {\n                    var line = trim(lines[i]);\n                    if (line.charAt(0) !== c) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n\n            function each_line_matches_indent(lines, indent) {\n                var i = 0,\n                    len = lines.length,\n                    line;\n                for (; i < len; i++) {\n                    line = lines[i];\n                    // allow empty lines to pass through\n                    if (line && line.indexOf(indent) !== 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n\n            function is_special_word(word) {\n                return in_array(word, ['case', 'return', 'do', 'if', 'throw', 'else']);\n            }\n\n            function get_token(offset) {\n                var index = token_pos + (offset || 0);\n                return (index < 0 || index >= tokens.length) ? null : tokens[index];\n            }\n\n            function handle_start_expr() {\n                // The conditional starts the statement if appropriate.\n                if (!start_of_statement()) {\n                    handle_whitespace_and_comments(current_token);\n                }\n\n                var next_mode = MODE.Expression;\n                if (current_token.text === '[') {\n\n                    if (last_type === 'TK_WORD' || flags.last_text === ')') {\n                        // this is array index specifier, break immediately\n                        // a[x], fn()[x]\n                        if (last_type === 'TK_RESERVED' && in_array(flags.last_text, Tokenizer.line_starters)) {\n                            output.space_before_token = true;\n                        }\n                        set_mode(next_mode);\n                        print_token();\n                        indent();\n                        if (opt.space_in_paren) {\n                            output.space_before_token = true;\n                        }\n                        return;\n                    }\n\n                    next_mode = MODE.ArrayLiteral;\n                    if (is_array(flags.mode)) {\n                        if (flags.last_text === '[' ||\n                            (flags.last_text === ',' && (last_last_text === ']' || last_last_text === '}'))) {\n                            // ], [ goes to new line\n                            // }, [ goes to new line\n                            if (!opt.keep_array_indentation) {\n                                print_newline();\n                            }\n                        }\n                    }\n\n                } else {\n                    if (last_type === 'TK_RESERVED' && flags.last_text === 'for') {\n                        next_mode = MODE.ForInitializer;\n                    } else if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['if', 'while'])) {\n                        next_mode = MODE.Conditional;\n                    } else {\n                        // next_mode = MODE.Expression;\n                    }\n                }\n\n                if (flags.last_text === ';' || last_type === 'TK_START_BLOCK') {\n                    print_newline();\n                } else if (last_type === 'TK_END_EXPR' || last_type === 'TK_START_EXPR' || last_type === 'TK_END_BLOCK' || flags.last_text === '.') {\n                    // TODO: Consider whether forcing this is required.  Review failing tests when removed.\n                    allow_wrap_or_preserved_newline(current_token.wanted_newline);\n                    // do nothing on (( and )( and ][ and ]( and .(\n                } else if (!(last_type === 'TK_RESERVED' && current_token.text === '(') && last_type !== 'TK_WORD' && last_type !== 'TK_OPERATOR') {\n                    output.space_before_token = true;\n                } else if ((last_type === 'TK_RESERVED' && (flags.last_word === 'function' || flags.last_word === 'typeof')) ||\n                    (flags.last_text === '*' &&\n                        (in_array(last_last_text, ['function', 'yield']) ||\n                            (flags.mode === MODE.ObjectLiteral && in_array(last_last_text, ['{', ',']))))) {\n                    // function() vs function ()\n                    // yield*() vs yield* ()\n                    // function*() vs function* ()\n                    if (opt.space_after_anon_function) {\n                        output.space_before_token = true;\n                    }\n                } else if (last_type === 'TK_RESERVED' && (in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === 'catch')) {\n                    if (opt.space_before_conditional) {\n                        output.space_before_token = true;\n                    }\n                }\n\n                // Should be a space between await and an IIFE\n                if (current_token.text === '(' && last_type === 'TK_RESERVED' && flags.last_word === 'await') {\n                    output.space_before_token = true;\n                }\n\n                // Support of this kind of newline preservation.\n                // a = (b &&\n                //     (c || d));\n                if (current_token.text === '(') {\n                    if (last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n                        if (!start_of_object_property()) {\n                            allow_wrap_or_preserved_newline();\n                        }\n                    }\n                }\n\n                // Support preserving wrapped arrow function expressions\n                // a.b('c',\n                //     () => d.e\n                // )\n                if (current_token.text === '(' && last_type !== 'TK_WORD' && last_type !== 'TK_RESERVED') {\n                    allow_wrap_or_preserved_newline();\n                }\n\n                set_mode(next_mode);\n                print_token();\n                if (opt.space_in_paren) {\n                    output.space_before_token = true;\n                }\n\n                // In all cases, if we newline while inside an expression it should be indented.\n                indent();\n            }\n\n            function handle_end_expr() {\n                // statements inside expressions are not valid syntax, but...\n                // statements must all be closed when their container closes\n                while (flags.mode === MODE.Statement) {\n                    restore_mode();\n                }\n\n                handle_whitespace_and_comments(current_token);\n\n                if (flags.multiline_frame) {\n                    allow_wrap_or_preserved_newline(current_token.text === ']' && is_array(flags.mode) && !opt.keep_array_indentation);\n                }\n\n                if (opt.space_in_paren) {\n                    if (last_type === 'TK_START_EXPR' && !opt.space_in_empty_paren) {\n                        // () [] no inner space in empty parens like these, ever, ref #320\n                        output.trim();\n                        output.space_before_token = false;\n                    } else {\n                        output.space_before_token = true;\n                    }\n                }\n                if (current_token.text === ']' && opt.keep_array_indentation) {\n                    print_token();\n                    restore_mode();\n                } else {\n                    restore_mode();\n                    print_token();\n                }\n                output.remove_redundant_indentation(previous_flags);\n\n                // do {} while () // no statement required after\n                if (flags.do_while && previous_flags.mode === MODE.Conditional) {\n                    previous_flags.mode = MODE.Expression;\n                    flags.do_block = false;\n                    flags.do_while = false;\n\n                }\n            }\n\n            function handle_start_block() {\n                handle_whitespace_and_comments(current_token);\n\n                // Check if this is should be treated as a ObjectLiteral\n                var next_token = get_token(1);\n                var second_token = get_token(2);\n                if (second_token && (\n                        (in_array(second_token.text, [':', ',']) && in_array(next_token.type, ['TK_STRING', 'TK_WORD', 'TK_RESERVED'])) ||\n                        (in_array(next_token.text, ['get', 'set', '...']) && in_array(second_token.type, ['TK_WORD', 'TK_RESERVED']))\n                    )) {\n                    // We don't support TypeScript,but we didn't break it for a very long time.\n                    // We'll try to keep not breaking it.\n                    if (!in_array(last_last_text, ['class', 'interface'])) {\n                        set_mode(MODE.ObjectLiteral);\n                    } else {\n                        set_mode(MODE.BlockStatement);\n                    }\n                } else if (last_type === 'TK_OPERATOR' && flags.last_text === '=>') {\n                    // arrow function: (param1, paramN) => { statements }\n                    set_mode(MODE.BlockStatement);\n                } else if (in_array(last_type, ['TK_EQUALS', 'TK_START_EXPR', 'TK_COMMA', 'TK_OPERATOR']) ||\n                    (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['return', 'throw', 'import', 'default']))\n                ) {\n                    // Detecting shorthand function syntax is difficult by scanning forward,\n                    //     so check the surrounding context.\n                    // If the block is being returned, imported, export default, passed as arg,\n                    //     assigned with = or assigned in a nested object, treat as an ObjectLiteral.\n                    set_mode(MODE.ObjectLiteral);\n                } else {\n                    set_mode(MODE.BlockStatement);\n                }\n\n                var empty_braces = !next_token.comments_before.length && next_token.text === '}';\n                var empty_anonymous_function = empty_braces && flags.last_word === 'function' &&\n                    last_type === 'TK_END_EXPR';\n\n                if (opt.brace_preserve_inline) // check for inline, set inline_frame if so\n                {\n                    // search forward for a newline wanted inside this block\n                    var index = 0;\n                    var check_token = null;\n                    flags.inline_frame = true;\n                    do {\n                        index += 1;\n                        check_token = get_token(index);\n                        if (check_token.wanted_newline) {\n                            flags.inline_frame = false;\n                            break;\n                        }\n                    } while (check_token.type !== 'TK_EOF' &&\n                        !(check_token.type === 'TK_END_BLOCK' && check_token.opened === current_token));\n                }\n\n                if ((opt.brace_style === \"expand\" ||\n                        (opt.brace_style === \"none\" && current_token.wanted_newline)) &&\n                    !flags.inline_frame) {\n                    if (last_type !== 'TK_OPERATOR' &&\n                        (empty_anonymous_function ||\n                            last_type === 'TK_EQUALS' ||\n                            (last_type === 'TK_RESERVED' && is_special_word(flags.last_text) && flags.last_text !== 'else'))) {\n                        output.space_before_token = true;\n                    } else {\n                        print_newline(false, true);\n                    }\n                } else { // collapse || inline_frame\n                    if (is_array(previous_flags.mode) && (last_type === 'TK_START_EXPR' || last_type === 'TK_COMMA')) {\n                        if (last_type === 'TK_COMMA' || opt.space_in_paren) {\n                            output.space_before_token = true;\n                        }\n\n                        if (last_type === 'TK_COMMA' || (last_type === 'TK_START_EXPR' && flags.inline_frame)) {\n                            allow_wrap_or_preserved_newline();\n                            previous_flags.multiline_frame = previous_flags.multiline_frame || flags.multiline_frame;\n                            flags.multiline_frame = false;\n                        }\n                    }\n                    if (last_type !== 'TK_OPERATOR' && last_type !== 'TK_START_EXPR') {\n                        if (last_type === 'TK_START_BLOCK' && !flags.inline_frame) {\n                            print_newline();\n                        } else {\n                            output.space_before_token = true;\n                        }\n                    }\n                }\n                print_token();\n                indent();\n            }\n\n            function handle_end_block() {\n                // statements must all be closed when their container closes\n                handle_whitespace_and_comments(current_token);\n\n                while (flags.mode === MODE.Statement) {\n                    restore_mode();\n                }\n\n                var empty_braces = last_type === 'TK_START_BLOCK';\n\n                if (flags.inline_frame && !empty_braces) { // try inline_frame (only set if opt.braces-preserve-inline) first\n                    output.space_before_token = true;\n                } else if (opt.brace_style === \"expand\") {\n                    if (!empty_braces) {\n                        print_newline();\n                    }\n                } else {\n                    // skip {}\n                    if (!empty_braces) {\n                        if (is_array(flags.mode) && opt.keep_array_indentation) {\n                            // we REALLY need a newline here, but newliner would skip that\n                            opt.keep_array_indentation = false;\n                            print_newline();\n                            opt.keep_array_indentation = true;\n\n                        } else {\n                            print_newline();\n                        }\n                    }\n                }\n                restore_mode();\n                print_token();\n            }\n\n            function handle_word() {\n                if (current_token.type === 'TK_RESERVED') {\n                    if (in_array(current_token.text, ['set', 'get']) && flags.mode !== MODE.ObjectLiteral) {\n                        current_token.type = 'TK_WORD';\n                    } else if (in_array(current_token.text, ['as', 'from']) && !flags.import_block) {\n                        current_token.type = 'TK_WORD';\n                    } else if (flags.mode === MODE.ObjectLiteral) {\n                        var next_token = get_token(1);\n                        if (next_token.text === ':') {\n                            current_token.type = 'TK_WORD';\n                        }\n                    }\n                }\n\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                    if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const']) && current_token.type === 'TK_WORD') {\n                        flags.declaration_statement = true;\n                    }\n                } else if (current_token.wanted_newline && !is_expression(flags.mode) &&\n                    (last_type !== 'TK_OPERATOR' || (flags.last_text === '--' || flags.last_text === '++')) &&\n                    last_type !== 'TK_EQUALS' &&\n                    (opt.preserve_newlines || !(last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const', 'set', 'get'])))) {\n                    handle_whitespace_and_comments(current_token);\n                    print_newline();\n                } else {\n                    handle_whitespace_and_comments(current_token);\n                }\n\n                if (flags.do_block && !flags.do_while) {\n                    if (current_token.type === 'TK_RESERVED' && current_token.text === 'while') {\n                        // do {} ## while ()\n                        output.space_before_token = true;\n                        print_token();\n                        output.space_before_token = true;\n                        flags.do_while = true;\n                        return;\n                    } else {\n                        // do {} should always have while as the next word.\n                        // if we don't see the expected while, recover\n                        print_newline();\n                        flags.do_block = false;\n                    }\n                }\n\n                // if may be followed by else, or not\n                // Bare/inline ifs are tricky\n                // Need to unwind the modes correctly: if (a) if (b) c(); else d(); else e();\n                if (flags.if_block) {\n                    if (!flags.else_block && (current_token.type === 'TK_RESERVED' && current_token.text === 'else')) {\n                        flags.else_block = true;\n                    } else {\n                        while (flags.mode === MODE.Statement) {\n                            restore_mode();\n                        }\n                        flags.if_block = false;\n                        flags.else_block = false;\n                    }\n                }\n\n                if (current_token.type === 'TK_RESERVED' && (current_token.text === 'case' || (current_token.text === 'default' && flags.in_case_statement))) {\n                    print_newline();\n                    if (flags.case_body || opt.jslint_happy) {\n                        // switch cases following one another\n                        deindent();\n                        flags.case_body = false;\n                    }\n                    print_token();\n                    flags.in_case = true;\n                    flags.in_case_statement = true;\n                    return;\n                }\n\n                if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n                    if (!start_of_object_property()) {\n                        allow_wrap_or_preserved_newline();\n                    }\n                }\n\n                if (current_token.type === 'TK_RESERVED' && current_token.text === 'function') {\n                    if (in_array(flags.last_text, ['}', ';']) ||\n                        (output.just_added_newline() && !(in_array(flags.last_text, ['(', '[', '{', ':', '=', ',']) || last_type === 'TK_OPERATOR'))) {\n                        // make sure there is a nice clean space of at least one blank line\n                        // before a new function definition\n                        if (!output.just_added_blankline() && !current_token.comments_before.length) {\n                            print_newline();\n                            print_newline(true);\n                        }\n                    }\n                    if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\n                        if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set', 'new', 'return', 'export', 'async'])) {\n                            output.space_before_token = true;\n                        } else if (last_type === 'TK_RESERVED' && flags.last_text === 'default' && last_last_text === 'export') {\n                            output.space_before_token = true;\n                        } else {\n                            print_newline();\n                        }\n                    } else if (last_type === 'TK_OPERATOR' || flags.last_text === '=') {\n                        // foo = function\n                        output.space_before_token = true;\n                    } else if (!flags.multiline_frame && (is_expression(flags.mode) || is_array(flags.mode))) {\n                        // (function\n                    } else {\n                        print_newline();\n                    }\n\n                    print_token();\n                    flags.last_word = current_token.text;\n                    return;\n                }\n\n                prefix = 'NONE';\n\n                if (last_type === 'TK_END_BLOCK') {\n\n                    if (previous_flags.inline_frame) {\n                        prefix = 'SPACE';\n                    } else if (!(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally', 'from']))) {\n                        prefix = 'NEWLINE';\n                    } else {\n                        if (opt.brace_style === \"expand\" ||\n                            opt.brace_style === \"end-expand\" ||\n                            (opt.brace_style === \"none\" && current_token.wanted_newline)) {\n                            prefix = 'NEWLINE';\n                        } else {\n                            prefix = 'SPACE';\n                            output.space_before_token = true;\n                        }\n                    }\n                } else if (last_type === 'TK_SEMICOLON' && flags.mode === MODE.BlockStatement) {\n                    // TODO: Should this be for STATEMENT as well?\n                    prefix = 'NEWLINE';\n                } else if (last_type === 'TK_SEMICOLON' && is_expression(flags.mode)) {\n                    prefix = 'SPACE';\n                } else if (last_type === 'TK_STRING') {\n                    prefix = 'NEWLINE';\n                } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD' ||\n                    (flags.last_text === '*' &&\n                        (in_array(last_last_text, ['function', 'yield']) ||\n                            (flags.mode === MODE.ObjectLiteral && in_array(last_last_text, ['{', ',']))))) {\n                    prefix = 'SPACE';\n                } else if (last_type === 'TK_START_BLOCK') {\n                    if (flags.inline_frame) {\n                        prefix = 'SPACE';\n                    } else {\n                        prefix = 'NEWLINE';\n                    }\n                } else if (last_type === 'TK_END_EXPR') {\n                    output.space_before_token = true;\n                    prefix = 'NEWLINE';\n                }\n\n                if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\n                    if (flags.inline_frame || flags.last_text === 'else' || flags.last_text === 'export') {\n                        prefix = 'SPACE';\n                    } else {\n                        prefix = 'NEWLINE';\n                    }\n\n                }\n\n                if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally'])) {\n                    if ((!(last_type === 'TK_END_BLOCK' && previous_flags.mode === MODE.BlockStatement) ||\n                            opt.brace_style === \"expand\" ||\n                            opt.brace_style === \"end-expand\" ||\n                            (opt.brace_style === \"none\" && current_token.wanted_newline)) &&\n                        !flags.inline_frame) {\n                        print_newline();\n                    } else {\n                        output.trim(true);\n                        var line = output.current_line;\n                        // If we trimmed and there's something other than a close block before us\n                        // put a newline back in.  Handles '} // comment' scenario.\n                        if (line.last() !== '}') {\n                            print_newline();\n                        }\n                        output.space_before_token = true;\n                    }\n                } else if (prefix === 'NEWLINE') {\n                    if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n                        // no newline between 'return nnn'\n                        output.space_before_token = true;\n                    } else if (last_type !== 'TK_END_EXPR') {\n                        if ((last_type !== 'TK_START_EXPR' || !(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['var', 'let', 'const']))) && flags.last_text !== ':') {\n                            // no need to force newline on 'var': for (var x = 0...)\n                            if (current_token.type === 'TK_RESERVED' && current_token.text === 'if' && flags.last_text === 'else') {\n                                // no newline for } else if {\n                                output.space_before_token = true;\n                            } else {\n                                print_newline();\n                            }\n                        }\n                    } else if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\n                        print_newline();\n                    }\n                } else if (flags.multiline_frame && is_array(flags.mode) && flags.last_text === ',' && last_last_text === '}') {\n                    print_newline(); // }, in lists get a newline treatment\n                } else if (prefix === 'SPACE') {\n                    output.space_before_token = true;\n                }\n                print_token();\n                flags.last_word = current_token.text;\n\n                if (current_token.type === 'TK_RESERVED') {\n                    if (current_token.text === 'do') {\n                        flags.do_block = true;\n                    } else if (current_token.text === 'if') {\n                        flags.if_block = true;\n                    } else if (current_token.text === 'import') {\n                        flags.import_block = true;\n                    } else if (flags.import_block && current_token.type === 'TK_RESERVED' && current_token.text === 'from') {\n                        flags.import_block = false;\n                    }\n                }\n            }\n\n            function handle_semicolon() {\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                    // Semicolon can be the start (and end) of a statement\n                    output.space_before_token = false;\n                } else {\n                    handle_whitespace_and_comments(current_token);\n                }\n\n                var next_token = get_token(1);\n                while (flags.mode === MODE.Statement &&\n                    !(flags.if_block && next_token && next_token.type === 'TK_RESERVED' && next_token.text === 'else') &&\n                    !flags.do_block) {\n                    restore_mode();\n                }\n\n                // hacky but effective for the moment\n                if (flags.import_block) {\n                    flags.import_block = false;\n                }\n                print_token();\n            }\n\n            function handle_string() {\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                    // One difference - strings want at least a space before\n                    output.space_before_token = true;\n                } else {\n                    handle_whitespace_and_comments(current_token);\n                    if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD' || flags.inline_frame) {\n                        output.space_before_token = true;\n                    } else if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n                        if (!start_of_object_property()) {\n                            allow_wrap_or_preserved_newline();\n                        }\n                    } else {\n                        print_newline();\n                    }\n                }\n                print_token();\n            }\n\n            function handle_equals() {\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                } else {\n                    handle_whitespace_and_comments(current_token);\n                }\n\n                if (flags.declaration_statement) {\n                    // just got an '=' in a var-line, different formatting/line-breaking, etc will now be done\n                    flags.declaration_assignment = true;\n                }\n                output.space_before_token = true;\n                print_token();\n                output.space_before_token = true;\n            }\n\n            function handle_comma() {\n                handle_whitespace_and_comments(current_token, true);\n\n                print_token();\n                output.space_before_token = true;\n                if (flags.declaration_statement) {\n                    if (is_expression(flags.parent.mode)) {\n                        // do not break on comma, for(var a = 1, b = 2)\n                        flags.declaration_assignment = false;\n                    }\n\n                    if (flags.declaration_assignment) {\n                        flags.declaration_assignment = false;\n                        print_newline(false, true);\n                    } else if (opt.comma_first) {\n                        // for comma-first, we want to allow a newline before the comma\n                        // to turn into a newline after the comma, which we will fixup later\n                        allow_wrap_or_preserved_newline();\n                    }\n                } else if (flags.mode === MODE.ObjectLiteral ||\n                    (flags.mode === MODE.Statement && flags.parent.mode === MODE.ObjectLiteral)) {\n                    if (flags.mode === MODE.Statement) {\n                        restore_mode();\n                    }\n\n                    if (!flags.inline_frame) {\n                        print_newline();\n                    }\n                } else if (opt.comma_first) {\n                    // EXPR or DO_BLOCK\n                    // for comma-first, we want to allow a newline before the comma\n                    // to turn into a newline after the comma, which we will fixup later\n                    allow_wrap_or_preserved_newline();\n                }\n            }\n\n            function handle_operator() {\n                var isGeneratorAsterisk = current_token.text === '*' &&\n                    ((last_type === 'TK_RESERVED' && in_array(flags.last_text, ['function', 'yield'])) ||\n                        (in_array(last_type, ['TK_START_BLOCK', 'TK_COMMA', 'TK_END_BLOCK', 'TK_SEMICOLON']))\n                    );\n                var isUnary = in_array(current_token.text, ['-', '+']) && (\n                    in_array(last_type, ['TK_START_BLOCK', 'TK_START_EXPR', 'TK_EQUALS', 'TK_OPERATOR']) ||\n                    in_array(flags.last_text, Tokenizer.line_starters) ||\n                    flags.last_text === ','\n                );\n\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                } else {\n                    var preserve_statement_flags = !isGeneratorAsterisk;\n                    handle_whitespace_and_comments(current_token, preserve_statement_flags);\n                }\n\n                if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n                    // \"return\" had a special handling in TK_WORD. Now we need to return the favor\n                    output.space_before_token = true;\n                    print_token();\n                    return;\n                }\n\n                // hack for actionscript's import .*;\n                if (current_token.text === '*' && last_type === 'TK_DOT') {\n                    print_token();\n                    return;\n                }\n\n                if (current_token.text === '::') {\n                    // no spaces around exotic namespacing syntax operator\n                    print_token();\n                    return;\n                }\n\n                // Allow line wrapping between operators when operator_position is\n                //   set to before or preserve\n                if (last_type === 'TK_OPERATOR' && in_array(opt.operator_position, OPERATOR_POSITION_BEFORE_OR_PRESERVE)) {\n                    allow_wrap_or_preserved_newline();\n                }\n\n                if (current_token.text === ':' && flags.in_case) {\n                    flags.case_body = true;\n                    indent();\n                    print_token();\n                    print_newline();\n                    flags.in_case = false;\n                    return;\n                }\n\n                var space_before = true;\n                var space_after = true;\n                var in_ternary = false;\n                if (current_token.text === ':') {\n                    if (flags.ternary_depth === 0) {\n                        // Colon is invalid javascript outside of ternary and object, but do our best to guess what was meant.\n                        space_before = false;\n                    } else {\n                        flags.ternary_depth -= 1;\n                        in_ternary = true;\n                    }\n                } else if (current_token.text === '?') {\n                    flags.ternary_depth += 1;\n                }\n\n                // let's handle the operator_position option prior to any conflicting logic\n                if (!isUnary && !isGeneratorAsterisk && opt.preserve_newlines && in_array(current_token.text, Tokenizer.positionable_operators)) {\n                    var isColon = current_token.text === ':';\n                    var isTernaryColon = (isColon && in_ternary);\n                    var isOtherColon = (isColon && !in_ternary);\n\n                    switch (opt.operator_position) {\n                        case OPERATOR_POSITION.before_newline:\n                            // if the current token is : and it's not a ternary statement then we set space_before to false\n                            output.space_before_token = !isOtherColon;\n\n                            print_token();\n\n                            if (!isColon || isTernaryColon) {\n                                allow_wrap_or_preserved_newline();\n                            }\n\n                            output.space_before_token = true;\n                            return;\n\n                        case OPERATOR_POSITION.after_newline:\n                            // if the current token is anything but colon, or (via deduction) it's a colon and in a ternary statement,\n                            //   then print a newline.\n\n                            output.space_before_token = true;\n\n                            if (!isColon || isTernaryColon) {\n                                if (get_token(1).wanted_newline) {\n                                    print_newline(false, true);\n                                } else {\n                                    allow_wrap_or_preserved_newline();\n                                }\n                            } else {\n                                output.space_before_token = false;\n                            }\n\n                            print_token();\n\n                            output.space_before_token = true;\n                            return;\n\n                        case OPERATOR_POSITION.preserve_newline:\n                            if (!isOtherColon) {\n                                allow_wrap_or_preserved_newline();\n                            }\n\n                            // if we just added a newline, or the current token is : and it's not a ternary statement,\n                            //   then we set space_before to false\n                            space_before = !(output.just_added_newline() || isOtherColon);\n\n                            output.space_before_token = space_before;\n                            print_token();\n                            output.space_before_token = true;\n                            return;\n                    }\n                }\n\n                if (isGeneratorAsterisk) {\n                    allow_wrap_or_preserved_newline();\n                    space_before = false;\n                    var next_token = get_token(1);\n                    space_after = next_token && in_array(next_token.type, ['TK_WORD', 'TK_RESERVED']);\n                } else if (current_token.text === '...') {\n                    allow_wrap_or_preserved_newline();\n                    space_before = last_type === 'TK_START_BLOCK';\n                    space_after = false;\n                } else if (in_array(current_token.text, ['--', '++', '!', '~']) || isUnary) {\n                    // unary operators (and binary +/- pretending to be unary) special cases\n\n                    space_before = false;\n                    space_after = false;\n\n                    // http://www.ecma-international.org/ecma-262/5.1/#sec-7.9.1\n                    // if there is a newline between -- or ++ and anything else we should preserve it.\n                    if (current_token.wanted_newline && (current_token.text === '--' || current_token.text === '++')) {\n                        print_newline(false, true);\n                    }\n\n                    if (flags.last_text === ';' && is_expression(flags.mode)) {\n                        // for (;; ++i)\n                        //        ^^^\n                        space_before = true;\n                    }\n\n                    if (last_type === 'TK_RESERVED') {\n                        space_before = true;\n                    } else if (last_type === 'TK_END_EXPR') {\n                        space_before = !(flags.last_text === ']' && (current_token.text === '--' || current_token.text === '++'));\n                    } else if (last_type === 'TK_OPERATOR') {\n                        // a++ + ++b;\n                        // a - -b\n                        space_before = in_array(current_token.text, ['--', '-', '++', '+']) && in_array(flags.last_text, ['--', '-', '++', '+']);\n                        // + and - are not unary when preceeded by -- or ++ operator\n                        // a-- + b\n                        // a * +b\n                        // a - -b\n                        if (in_array(current_token.text, ['+', '-']) && in_array(flags.last_text, ['--', '++'])) {\n                            space_after = true;\n                        }\n                    }\n\n\n                    if (((flags.mode === MODE.BlockStatement && !flags.inline_frame) || flags.mode === MODE.Statement) &&\n                        (flags.last_text === '{' || flags.last_text === ';')) {\n                        // { foo; --i }\n                        // foo(); --bar;\n                        print_newline();\n                    }\n                }\n\n                output.space_before_token = output.space_before_token || space_before;\n                print_token();\n                output.space_before_token = space_after;\n            }\n\n            function handle_block_comment(preserve_statement_flags) {\n                if (output.raw) {\n                    output.add_raw_token(current_token);\n                    if (current_token.directives && current_token.directives.preserve === 'end') {\n                        // If we're testing the raw output behavior, do not allow a directive to turn it off.\n                        output.raw = opt.test_output_raw;\n                    }\n                    return;\n                }\n\n                if (current_token.directives) {\n                    print_newline(false, preserve_statement_flags);\n                    print_token();\n                    if (current_token.directives.preserve === 'start') {\n                        output.raw = true;\n                    }\n                    print_newline(false, true);\n                    return;\n                }\n\n                // inline block\n                if (!acorn.newline.test(current_token.text) && !current_token.wanted_newline) {\n                    output.space_before_token = true;\n                    print_token();\n                    output.space_before_token = true;\n                    return;\n                }\n\n                var lines = split_linebreaks(current_token.text);\n                var j; // iterator for this case\n                var javadoc = false;\n                var starless = false;\n                var lastIndent = current_token.whitespace_before;\n                var lastIndentLength = lastIndent.length;\n\n                // block comment starts with a new line\n                print_newline(false, preserve_statement_flags);\n                if (lines.length > 1) {\n                    javadoc = all_lines_start_with(lines.slice(1), '*');\n                    starless = each_line_matches_indent(lines.slice(1), lastIndent);\n                }\n\n                // first line always indented\n                print_token(lines[0]);\n                for (j = 1; j < lines.length; j++) {\n                    print_newline(false, true);\n                    if (javadoc) {\n                        // javadoc: reformat and re-indent\n                        print_token(' ' + ltrim(lines[j]));\n                    } else if (starless && lines[j].length > lastIndentLength) {\n                        // starless: re-indent non-empty content, avoiding trim\n                        print_token(lines[j].substring(lastIndentLength));\n                    } else {\n                        // normal comments output raw\n                        output.add_token(lines[j]);\n                    }\n                }\n\n                // for comments of more than one line, make sure there's a new line after\n                print_newline(false, preserve_statement_flags);\n            }\n\n            function handle_comment(preserve_statement_flags) {\n                if (current_token.wanted_newline) {\n                    print_newline(false, preserve_statement_flags);\n                } else {\n                    output.trim(true);\n                }\n\n                output.space_before_token = true;\n                print_token();\n                print_newline(false, preserve_statement_flags);\n            }\n\n            function handle_dot() {\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                } else {\n                    handle_whitespace_and_comments(current_token, true);\n                }\n\n                if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n                    output.space_before_token = true;\n                } else {\n                    // allow preserved newlines before dots in general\n                    // force newlines on dots after close paren when break_chained - for bar().baz()\n                    allow_wrap_or_preserved_newline(flags.last_text === ')' && opt.break_chained_methods);\n                }\n\n                print_token();\n            }\n\n            function handle_unknown(preserve_statement_flags) {\n                print_token();\n\n                if (current_token.text[current_token.text.length - 1] === '\\n') {\n                    print_newline(false, preserve_statement_flags);\n                }\n            }\n\n            function handle_eof() {\n                // Unwind any open statements\n                while (flags.mode === MODE.Statement) {\n                    restore_mode();\n                }\n                handle_whitespace_and_comments(current_token);\n            }\n        }\n\n\n        function OutputLine(parent) {\n            var _character_count = 0;\n            // use indent_count as a marker for lines that have preserved indentation\n            var _indent_count = -1;\n\n            var _items = [];\n            var _empty = true;\n\n            this.set_indent = function(level) {\n                _character_count = parent.baseIndentLength + level * parent.indent_length;\n                _indent_count = level;\n            };\n\n            this.get_character_count = function() {\n                return _character_count;\n            };\n\n            this.is_empty = function() {\n                return _empty;\n            };\n\n            this.last = function() {\n                if (!this._empty) {\n                    return _items[_items.length - 1];\n                } else {\n                    return null;\n                }\n            };\n\n            this.push = function(input) {\n                _items.push(input);\n                _character_count += input.length;\n                _empty = false;\n            };\n\n            this.pop = function() {\n                var item = null;\n                if (!_empty) {\n                    item = _items.pop();\n                    _character_count -= item.length;\n                    _empty = _items.length === 0;\n                }\n                return item;\n            };\n\n            this.remove_indent = function() {\n                if (_indent_count > 0) {\n                    _indent_count -= 1;\n                    _character_count -= parent.indent_length;\n                }\n            };\n\n            this.trim = function() {\n                while (this.last() === ' ') {\n                    _items.pop();\n                    _character_count -= 1;\n                }\n                _empty = _items.length === 0;\n            };\n\n            this.toString = function() {\n                var result = '';\n                if (!this._empty) {\n                    if (_indent_count >= 0) {\n                        result = parent.indent_cache[_indent_count];\n                    }\n                    result += _items.join('');\n                }\n                return result;\n            };\n        }\n\n        function Output(indent_string, baseIndentString) {\n            baseIndentString = baseIndentString || '';\n            this.indent_cache = [baseIndentString];\n            this.baseIndentLength = baseIndentString.length;\n            this.indent_length = indent_string.length;\n            this.raw = false;\n\n            var lines = [];\n            this.baseIndentString = baseIndentString;\n            this.indent_string = indent_string;\n            this.previous_line = null;\n            this.current_line = null;\n            this.space_before_token = false;\n\n            this.add_outputline = function() {\n                this.previous_line = this.current_line;\n                this.current_line = new OutputLine(this);\n                lines.push(this.current_line);\n            };\n\n            // initialize\n            this.add_outputline();\n\n\n            this.get_line_number = function() {\n                return lines.length;\n            };\n\n            // Using object instead of string to allow for later expansion of info about each line\n            this.add_new_line = function(force_newline) {\n                if (this.get_line_number() === 1 && this.just_added_newline()) {\n                    return false; // no newline on start of file\n                }\n\n                if (force_newline || !this.just_added_newline()) {\n                    if (!this.raw) {\n                        this.add_outputline();\n                    }\n                    return true;\n                }\n\n                return false;\n            };\n\n            this.get_code = function() {\n                var sweet_code = lines.join('\\n').replace(/[\\r\\n\\t ]+$/, '');\n                return sweet_code;\n            };\n\n            this.set_indent = function(level) {\n                // Never indent your first output indent at the start of the file\n                if (lines.length > 1) {\n                    while (level >= this.indent_cache.length) {\n                        this.indent_cache.push(this.indent_cache[this.indent_cache.length - 1] + this.indent_string);\n                    }\n\n                    this.current_line.set_indent(level);\n                    return true;\n                }\n                this.current_line.set_indent(0);\n                return false;\n            };\n\n            this.add_raw_token = function(token) {\n                for (var x = 0; x < token.newlines; x++) {\n                    this.add_outputline();\n                }\n                this.current_line.push(token.whitespace_before);\n                this.current_line.push(token.text);\n                this.space_before_token = false;\n            };\n\n            this.add_token = function(printable_token) {\n                this.add_space_before_token();\n                this.current_line.push(printable_token);\n            };\n\n            this.add_space_before_token = function() {\n                if (this.space_before_token && !this.just_added_newline()) {\n                    this.current_line.push(' ');\n                }\n                this.space_before_token = false;\n            };\n\n            this.remove_redundant_indentation = function(frame) {\n                // This implementation is effective but has some issues:\n                //     - can cause line wrap to happen too soon due to indent removal\n                //           after wrap points are calculated\n                // These issues are minor compared to ugly indentation.\n\n                if (frame.multiline_frame ||\n                    frame.mode === MODE.ForInitializer ||\n                    frame.mode === MODE.Conditional) {\n                    return;\n                }\n\n                // remove one indent from each line inside this section\n                var index = frame.start_line_index;\n\n                var output_length = lines.length;\n                while (index < output_length) {\n                    lines[index].remove_indent();\n                    index++;\n                }\n            };\n\n            this.trim = function(eat_newlines) {\n                eat_newlines = (eat_newlines === undefined) ? false : eat_newlines;\n\n                this.current_line.trim(indent_string, baseIndentString);\n\n                while (eat_newlines && lines.length > 1 &&\n                    this.current_line.is_empty()) {\n                    lines.pop();\n                    this.current_line = lines[lines.length - 1];\n                    this.current_line.trim();\n                }\n\n                this.previous_line = lines.length > 1 ? lines[lines.length - 2] : null;\n            };\n\n            this.just_added_newline = function() {\n                return this.current_line.is_empty();\n            };\n\n            this.just_added_blankline = function() {\n                if (this.just_added_newline()) {\n                    if (lines.length === 1) {\n                        return true; // start of the file and newline = blank\n                    }\n\n                    var line = lines[lines.length - 2];\n                    return line.is_empty();\n                }\n                return false;\n            };\n        }\n\n        var InputScanner = function(input) {\n            var _input = input;\n            var _input_length = _input.length;\n            var _position = 0;\n\n            this.back = function() {\n                _position -= 1;\n            };\n\n            this.hasNext = function() {\n                return _position < _input_length;\n            };\n\n            this.next = function() {\n                var val = null;\n                if (this.hasNext()) {\n                    val = _input.charAt(_position);\n                    _position += 1;\n                }\n                return val;\n            };\n\n            this.peek = function(index) {\n                var val = null;\n                index = index || 0;\n                index += _position;\n                if (index >= 0 && index < _input_length) {\n                    val = _input.charAt(index);\n                }\n                return val;\n            };\n\n            this.peekCharCode = function(index) {\n                var val = 0;\n                index = index || 0;\n                index += _position;\n                if (index >= 0 && index < _input_length) {\n                    val = _input.charCodeAt(index);\n                }\n                return val;\n            };\n\n            this.test = function(pattern, index) {\n                index = index || 0;\n                pattern.lastIndex = _position + index;\n                return pattern.test(_input);\n            };\n\n            this.testChar = function(pattern, index) {\n                var val = this.peek(index);\n                return val !== null && pattern.test(val);\n            };\n\n            this.match = function(pattern) {\n                pattern.lastIndex = _position;\n                var pattern_match = pattern.exec(_input);\n                if (pattern_match && pattern_match.index === _position) {\n                    _position += pattern_match[0].length;\n                } else {\n                    pattern_match = null;\n                }\n                return pattern_match;\n            };\n        };\n\n        var Token = function(type, text, newlines, whitespace_before, parent) {\n            this.type = type;\n            this.text = text;\n\n            // comments_before are\n            // comments that have a new line before them\n            // and may or may not have a newline after\n            // this is a set of comments before\n            this.comments_before = /* inline comment*/ [];\n\n\n            this.comments_after = []; // no new line before and newline after\n            this.newlines = newlines || 0;\n            this.wanted_newline = newlines > 0;\n            this.whitespace_before = whitespace_before || '';\n            this.parent = parent || null;\n            this.opened = null;\n            this.directives = null;\n        };\n\n        function tokenizer(input_string, opts) {\n\n            var whitespace = \"\\n\\r\\t \".split('');\n            var digit = /[0-9]/;\n            var digit_bin = /[01]/;\n            var digit_oct = /[01234567]/;\n            var digit_hex = /[0123456789abcdefABCDEF]/;\n\n            this.positionable_operators = '!= !== % & && * ** + - / : < << <= == === > >= >> >>> ? ^ | ||'.split(' ');\n            var punct = this.positionable_operators.concat(\n                // non-positionable operators - these do not follow operator position settings\n                '! %= &= *= **= ++ += , -- -= /= :: <<= = => >>= >>>= ^= |= ~ ...'.split(' '));\n\n            // words which should always start on new line.\n            this.line_starters = 'continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export'.split(',');\n            var reserved_words = this.line_starters.concat(['do', 'in', 'of', 'else', 'get', 'set', 'new', 'catch', 'finally', 'typeof', 'yield', 'async', 'await', 'from', 'as']);\n\n            //  /* ... */ comment ends with nearest */ or end of file\n            var block_comment_pattern = /([\\s\\S]*?)((?:\\*\\/)|$)/g;\n\n            // comment ends just before nearest linefeed or end of file\n            var comment_pattern = /([^\\n\\r\\u2028\\u2029]*)/g;\n\n            var directives_block_pattern = /\\/\\* beautify( \\w+[:]\\w+)+ \\*\\//g;\n            var directive_pattern = / (\\w+)[:](\\w+)/g;\n            var directives_end_ignore_pattern = /([\\s\\S]*?)((?:\\/\\*\\sbeautify\\signore:end\\s\\*\\/)|$)/g;\n\n            var template_pattern = /((<\\?php|<\\?=)[\\s\\S]*?\\?>)|(<%[\\s\\S]*?%>)/g;\n\n            var n_newlines, whitespace_before_token, in_html_comment, tokens;\n            var input;\n\n            this.tokenize = function() {\n                input = new InputScanner(input_string);\n                in_html_comment = false;\n                tokens = [];\n\n                var next, last;\n                var token_values;\n                var open = null;\n                var open_stack = [];\n                var comments = [];\n\n                while (!(last && last.type === 'TK_EOF')) {\n                    token_values = tokenize_next();\n                    next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token);\n                    while (next.type === 'TK_COMMENT' || next.type === 'TK_BLOCK_COMMENT' || next.type === 'TK_UNKNOWN') {\n                        if (next.type === 'TK_BLOCK_COMMENT') {\n                            next.directives = token_values[2];\n                        }\n                        comments.push(next);\n                        token_values = tokenize_next();\n                        next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token);\n                    }\n\n                    if (comments.length) {\n                        next.comments_before = comments;\n                        comments = [];\n                    }\n\n                    if (next.type === 'TK_START_BLOCK' || next.type === 'TK_START_EXPR') {\n                        next.parent = last;\n                        open_stack.push(open);\n                        open = next;\n                    } else if ((next.type === 'TK_END_BLOCK' || next.type === 'TK_END_EXPR') &&\n                        (open && (\n                            (next.text === ']' && open.text === '[') ||\n                            (next.text === ')' && open.text === '(') ||\n                            (next.text === '}' && open.text === '{')))) {\n                        next.parent = open.parent;\n                        next.opened = open;\n\n                        open = open_stack.pop();\n                    }\n\n                    tokens.push(next);\n                    last = next;\n                }\n\n                return tokens;\n            };\n\n            function get_directives(text) {\n                if (!text.match(directives_block_pattern)) {\n                    return null;\n                }\n\n                var directives = {};\n                directive_pattern.lastIndex = 0;\n                var directive_match = directive_pattern.exec(text);\n\n                while (directive_match) {\n                    directives[directive_match[1]] = directive_match[2];\n                    directive_match = directive_pattern.exec(text);\n                }\n\n                return directives;\n            }\n\n            function tokenize_next() {\n                var resulting_string;\n                var whitespace_on_this_line = [];\n\n                n_newlines = 0;\n                whitespace_before_token = '';\n\n                var c = input.next();\n\n                if (c === null) {\n                    return ['', 'TK_EOF'];\n                }\n\n                var last_token;\n                if (tokens.length) {\n                    last_token = tokens[tokens.length - 1];\n                } else {\n                    // For the sake of tokenizing we can pretend that there was on open brace to start\n                    last_token = new Token('TK_START_BLOCK', '{');\n                }\n\n                while (in_array(c, whitespace)) {\n\n                    if (acorn.newline.test(c)) {\n                        if (!(c === '\\n' && input.peek(-2) === '\\r')) {\n                            n_newlines += 1;\n                            whitespace_on_this_line = [];\n                        }\n                    } else {\n                        whitespace_on_this_line.push(c);\n                    }\n\n                    c = input.next();\n\n                    if (c === null) {\n                        return ['', 'TK_EOF'];\n                    }\n                }\n\n                if (whitespace_on_this_line.length) {\n                    whitespace_before_token = whitespace_on_this_line.join('');\n                }\n\n                if (digit.test(c) || (c === '.' && input.testChar(digit))) {\n                    var allow_decimal = true;\n                    var allow_e = true;\n                    var local_digit = digit;\n\n                    if (c === '0' && input.testChar(/[XxOoBb]/)) {\n                        // switch to hex/oct/bin number, no decimal or e, just hex/oct/bin digits\n                        allow_decimal = false;\n                        allow_e = false;\n                        if (input.testChar(/[Bb]/)) {\n                            local_digit = digit_bin;\n                        } else if (input.testChar(/[Oo]/)) {\n                            local_digit = digit_oct;\n                        } else {\n                            local_digit = digit_hex;\n                        }\n                        c += input.next();\n                    } else if (c === '.') {\n                        // Already have a decimal for this literal, don't allow another\n                        allow_decimal = false;\n                    } else {\n                        // we know this first loop will run.  It keeps the logic simpler.\n                        c = '';\n                        input.back();\n                    }\n\n                    // Add the digits\n                    while (input.testChar(local_digit)) {\n                        c += input.next();\n\n                        if (allow_decimal && input.peek() === '.') {\n                            c += input.next();\n                            allow_decimal = false;\n                        }\n\n                        // a = 1.e-7 is valid, so we test for . then e in one loop\n                        if (allow_e && input.testChar(/[Ee]/)) {\n                            c += input.next();\n\n                            if (input.testChar(/[+-]/)) {\n                                c += input.next();\n                            }\n\n                            allow_e = false;\n                            allow_decimal = false;\n                        }\n                    }\n\n                    return [c, 'TK_WORD'];\n                }\n\n                if (acorn.isIdentifierStart(input.peekCharCode(-1))) {\n                    if (input.hasNext()) {\n                        while (acorn.isIdentifierChar(input.peekCharCode())) {\n                            c += input.next();\n                            if (!input.hasNext()) {\n                                break;\n                            }\n                        }\n                    }\n\n                    if (!(last_token.type === 'TK_DOT' ||\n                            (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['set', 'get']))) &&\n                        in_array(c, reserved_words)) {\n                        if (c === 'in' || c === 'of') { // hack for 'in' and 'of' operators\n                            return [c, 'TK_OPERATOR'];\n                        }\n                        return [c, 'TK_RESERVED'];\n                    }\n\n                    return [c, 'TK_WORD'];\n                }\n\n                if (c === '(' || c === '[') {\n                    return [c, 'TK_START_EXPR'];\n                }\n\n                if (c === ')' || c === ']') {\n                    return [c, 'TK_END_EXPR'];\n                }\n\n                if (c === '{') {\n                    return [c, 'TK_START_BLOCK'];\n                }\n\n                if (c === '}') {\n                    return [c, 'TK_END_BLOCK'];\n                }\n\n                if (c === ';') {\n                    return [c, 'TK_SEMICOLON'];\n                }\n\n                if (c === '/') {\n                    var comment = '';\n                    var comment_match;\n                    // peek for comment /* ... */\n                    if (input.peek() === '*') {\n                        input.next();\n                        comment_match = input.match(block_comment_pattern);\n                        comment = '/*' + comment_match[0];\n                        var directives = get_directives(comment);\n                        if (directives && directives.ignore === 'start') {\n                            comment_match = input.match(directives_end_ignore_pattern);\n                            comment += comment_match[0];\n                        }\n                        comment = comment.replace(acorn.allLineBreaks, '\\n');\n                        return [comment, 'TK_BLOCK_COMMENT', directives];\n                    }\n                    // peek for comment // ...\n                    if (input.peek() === '/') {\n                        input.next();\n                        comment_match = input.match(comment_pattern);\n                        comment = '//' + comment_match[0];\n                        return [comment, 'TK_COMMENT'];\n                    }\n\n                }\n\n                var startXmlRegExp = /<()([-a-zA-Z:0-9_.]+|{[\\s\\S]+?}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+{[\\s\\S]+?}|\\s+[-a-zA-Z:0-9_.]+|\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{[\\s\\S]+?}))*\\s*(\\/?)\\s*>/g;\n\n                if (c === '`' || c === \"'\" || c === '\"' || // string\n                    (\n                        (c === '/') || // regexp\n                        (opts.e4x && c === \"<\" && input.test(startXmlRegExp, -1)) // xml\n                    ) && ( // regex and xml can only appear in specific locations during parsing\n                        (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['return', 'case', 'throw', 'else', 'do', 'typeof', 'yield'])) ||\n                        (last_token.type === 'TK_END_EXPR' && last_token.text === ')' &&\n                            last_token.parent && last_token.parent.type === 'TK_RESERVED' && in_array(last_token.parent.text, ['if', 'while', 'for'])) ||\n                        (in_array(last_token.type, ['TK_COMMENT', 'TK_START_EXPR', 'TK_START_BLOCK',\n                            'TK_END_BLOCK', 'TK_OPERATOR', 'TK_EQUALS', 'TK_EOF', 'TK_SEMICOLON', 'TK_COMMA'\n                        ]))\n                    )) {\n\n                    var sep = c,\n                        esc = false,\n                        has_char_escapes = false;\n\n                    resulting_string = c;\n\n                    if (sep === '/') {\n                        //\n                        // handle regexp\n                        //\n                        var in_char_class = false;\n                        while (input.hasNext() &&\n                            ((esc || in_char_class || input.peek() !== sep) &&\n                                !input.testChar(acorn.newline))) {\n                            resulting_string += input.peek();\n                            if (!esc) {\n                                esc = input.peek() === '\\\\';\n                                if (input.peek() === '[') {\n                                    in_char_class = true;\n                                } else if (input.peek() === ']') {\n                                    in_char_class = false;\n                                }\n                            } else {\n                                esc = false;\n                            }\n                            input.next();\n                        }\n                    } else if (opts.e4x && sep === '<') {\n                        //\n                        // handle e4x xml literals\n                        //\n\n                        var xmlRegExp = /[\\s\\S]*?<(\\/?)([-a-zA-Z:0-9_.]+|{[\\s\\S]+?}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+{[\\s\\S]+?}|\\s+[-a-zA-Z:0-9_.]+|\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{[\\s\\S]+?}))*\\s*(\\/?)\\s*>/g;\n                        input.back();\n                        var xmlStr = '';\n                        var match = input.match(startXmlRegExp);\n                        if (match) {\n                            // Trim root tag to attempt to\n                            var rootTag = match[2].replace(/^{\\s+/, '{').replace(/\\s+}$/, '}');\n                            var isCurlyRoot = rootTag.indexOf('{') === 0;\n                            var depth = 0;\n                            while (match) {\n                                var isEndTag = !!match[1];\n                                var tagName = match[2];\n                                var isSingletonTag = (!!match[match.length - 1]) || (tagName.slice(0, 8) === \"![CDATA[\");\n                                if (!isSingletonTag &&\n                                    (tagName === rootTag || (isCurlyRoot && tagName.replace(/^{\\s+/, '{').replace(/\\s+}$/, '}')))) {\n                                    if (isEndTag) {\n                                        --depth;\n                                    } else {\n                                        ++depth;\n                                    }\n                                }\n                                xmlStr += match[0];\n                                if (depth <= 0) {\n                                    break;\n                                }\n                                match = input.match(xmlRegExp);\n                            }\n                            // if we didn't close correctly, keep unformatted.\n                            if (!match) {\n                                xmlStr += input.match(/[\\s\\S]*/g)[0];\n                            }\n                            xmlStr = xmlStr.replace(acorn.allLineBreaks, '\\n');\n                            return [xmlStr, \"TK_STRING\"];\n                        }\n                    } else {\n                        //\n                        // handle string\n                        //\n                        var parse_string = function(delimiter, allow_unescaped_newlines, start_sub) {\n                            // Template strings can travers lines without escape characters.\n                            // Other strings cannot\n                            var current_char;\n                            while (input.hasNext()) {\n                                current_char = input.peek();\n                                if (!(esc || (current_char !== delimiter &&\n                                        (allow_unescaped_newlines || !acorn.newline.test(current_char))))) {\n                                    break;\n                                }\n\n                                // Handle \\r\\n linebreaks after escapes or in template strings\n                                if ((esc || allow_unescaped_newlines) && acorn.newline.test(current_char)) {\n                                    if (current_char === '\\r' && input.peek(1) === '\\n') {\n                                        input.next();\n                                        current_char = input.peek();\n                                    }\n                                    resulting_string += '\\n';\n                                } else {\n                                    resulting_string += current_char;\n                                }\n\n                                if (esc) {\n                                    if (current_char === 'x' || current_char === 'u') {\n                                        has_char_escapes = true;\n                                    }\n                                    esc = false;\n                                } else {\n                                    esc = current_char === '\\\\';\n                                }\n\n                                input.next();\n\n                                if (start_sub && resulting_string.indexOf(start_sub, resulting_string.length - start_sub.length) !== -1) {\n                                    if (delimiter === '`') {\n                                        parse_string('}', allow_unescaped_newlines, '`');\n                                    } else {\n                                        parse_string('`', allow_unescaped_newlines, '${');\n                                    }\n\n                                    if (input.hasNext()) {\n                                        resulting_string += input.next();\n                                    }\n                                }\n                            }\n                        };\n\n                        if (sep === '`') {\n                            parse_string('`', true, '${');\n                        } else {\n                            parse_string(sep);\n                        }\n                    }\n\n                    if (has_char_escapes && opts.unescape_strings) {\n                        resulting_string = unescape_string(resulting_string);\n                    }\n\n                    if (input.peek() === sep) {\n                        resulting_string += sep;\n                        input.next();\n\n                        if (sep === '/') {\n                            // regexps may have modifiers /regexp/MOD , so fetch those, too\n                            // Only [gim] are valid, but if the user puts in garbage, do what we can to take it.\n                            while (input.hasNext() && acorn.isIdentifierStart(input.peekCharCode())) {\n                                resulting_string += input.next();\n                            }\n                        }\n                    }\n                    return [resulting_string, 'TK_STRING'];\n                }\n\n                if (c === '#') {\n\n                    if (tokens.length === 0 && input.peek() === '!') {\n                        // shebang\n                        resulting_string = c;\n                        while (input.hasNext() && c !== '\\n') {\n                            c = input.next();\n                            resulting_string += c;\n                        }\n                        return [trim(resulting_string) + '\\n', 'TK_UNKNOWN'];\n                    }\n\n\n\n                    // Spidermonkey-specific sharp variables for circular references\n                    // https://developer.mozilla.org/En/Sharp_variables_in_JavaScript\n                    // http://mxr.mozilla.org/mozilla-central/source/js/src/jsscan.cpp around line 1935\n                    var sharp = '#';\n                    if (input.hasNext() && input.testChar(digit)) {\n                        do {\n                            c = input.next();\n                            sharp += c;\n                        } while (input.hasNext() && c !== '#' && c !== '=');\n                        if (c === '#') {\n                            //\n                        } else if (input.peek() === '[' && input.peek(1) === ']') {\n                            sharp += '[]';\n                            input.next();\n                            input.next();\n                        } else if (input.peek() === '{' && input.peek(1) === '}') {\n                            sharp += '{}';\n                            input.next();\n                            input.next();\n                        }\n                        return [sharp, 'TK_WORD'];\n                    }\n                }\n\n                if (c === '<' && (input.peek() === '?' || input.peek() === '%')) {\n                    input.back();\n                    var template_match = input.match(template_pattern);\n                    if (template_match) {\n                        c = template_match[0];\n                        c = c.replace(acorn.allLineBreaks, '\\n');\n                        return [c, 'TK_STRING'];\n                    }\n                }\n\n                if (c === '<' && input.match(/\\!--/g)) {\n                    c = '<!--';\n                    while (input.hasNext() && !input.testChar(acorn.newline)) {\n                        c += input.next();\n                    }\n                    in_html_comment = true;\n                    return [c, 'TK_COMMENT'];\n                }\n\n                if (c === '-' && in_html_comment && input.match(/->/g)) {\n                    in_html_comment = false;\n                    return ['-->', 'TK_COMMENT'];\n                }\n\n                if (c === '.') {\n                    if (input.peek() === '.' && input.peek(1) === '.') {\n                        c += input.next() + input.next();\n                        return [c, 'TK_OPERATOR'];\n                    }\n                    return [c, 'TK_DOT'];\n                }\n\n                if (in_array(c, punct)) {\n                    while (input.hasNext() && in_array(c + input.peek(), punct)) {\n                        c += input.next();\n                        if (!input.hasNext()) {\n                            break;\n                        }\n                    }\n\n                    if (c === ',') {\n                        return [c, 'TK_COMMA'];\n                    } else if (c === '=') {\n                        return [c, 'TK_EQUALS'];\n                    } else {\n                        return [c, 'TK_OPERATOR'];\n                    }\n                }\n\n                return [c, 'TK_UNKNOWN'];\n            }\n\n\n            function unescape_string(s) {\n                // You think that a regex would work for this\n                // return s.replace(/\\\\x([0-9a-f]{2})/gi, function(match, val) {\n                //         return String.fromCharCode(parseInt(val, 16));\n                //     })\n                // However, dealing with '\\xff', '\\\\xff', '\\\\\\xff' makes this more fun.\n                var out = '',\n                    escaped = 0;\n\n                var input_scan = new InputScanner(s);\n                var matched = null;\n\n                while (input_scan.hasNext()) {\n                    // Keep any whitespace, non-slash characters\n                    // also keep slash pairs.\n                    matched = input_scan.match(/([\\s]|[^\\\\]|\\\\\\\\)+/g);\n\n                    if (matched) {\n                        out += matched[0];\n                    }\n\n                    if (input_scan.peek() === '\\\\') {\n                        input_scan.next();\n                        if (input_scan.peek() === 'x') {\n                            matched = input_scan.match(/x([0-9A-Fa-f]{2})/g);\n                        } else if (input_scan.peek() === 'u') {\n                            matched = input_scan.match(/u([0-9A-Fa-f]{4})/g);\n                        } else {\n                            out += '\\\\';\n                            if (input_scan.hasNext()) {\n                                out += input_scan.next();\n                            }\n                            continue;\n                        }\n\n                        // If there's some error decoding, return the original string\n                        if (!matched) {\n                            return s;\n                        }\n\n                        escaped = parseInt(matched[1], 16);\n\n                        if (escaped > 0x7e && escaped <= 0xff && matched[0].indexOf('x') === 0) {\n                            // we bail out on \\x7f..\\xff,\n                            // leaving whole string escaped,\n                            // as it's probably completely binary\n                            return s;\n                        } else if (escaped >= 0x00 && escaped < 0x20) {\n                            // leave 0x00...0x1f escaped\n                            out += '\\\\' + matched[0];\n                            continue;\n                        } else if (escaped === 0x22 || escaped === 0x27 || escaped === 0x5c) {\n                            // single-quote, apostrophe, backslash - escape these\n                            out += '\\\\' + String.fromCharCode(escaped);\n                        } else {\n                            out += String.fromCharCode(escaped);\n                        }\n                    }\n                }\n\n                return out;\n            }\n        }\n\n        var beautifier = new Beautifier(js_source_text, options);\n        return beautifier.beautify();\n\n    }\n\n    if (typeof define === \"function\" && define.amd) {\n        // Add support for AMD ( https://github.com/amdjs/amdjs-api/wiki/AMD#defineamd-property- )\n        define([], function() {\n            return { js_beautify: js_beautify };\n        });\n    } else if (typeof exports !== \"undefined\") {\n        // Add support for CommonJS. Just put this file somewhere on your require.paths\n        // and you will be able to `var js_beautify = require(\"beautify\").js_beautify`.\n        exports.js_beautify = js_beautify;\n    } else if (typeof window !== \"undefined\") {\n        // If we're running a web page and don't have either of the above, add our one global\n        window.js_beautify = js_beautify;\n    } else if (typeof global !== \"undefined\") {\n        // If we don't even have window, try global.\n        global.js_beautify = js_beautify;\n    }\n\n}());","/*jshint curly:true, eqeqeq:true, laxbreak:true, noempty:false */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2017 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n\n CSS Beautifier\n---------------\n\n    Written by Harutyun Amirjanyan, (amirjanyan@gmail.com)\n\n    Based on code initially developed by: Einar Lielmanis, <einar@jsbeautifier.org>\n        http://jsbeautifier.org/\n\n    Usage:\n        css_beautify(source_text);\n        css_beautify(source_text, options);\n\n    The options are (default in brackets):\n        indent_size (4)                          indentation size,\n        indent_char (space)                      character to indent with,\n        preserve_newlines (default false)       - whether existing line breaks should be preserved,\n        selector_separator_newline (true)       - separate selectors with newline or\n                                                  not (e.g. \"a,\\nbr\" or \"a, br\")\n        end_with_newline (false)                - end with a newline\n        newline_between_rules (true)            - add a new line after every css rule\n        space_around_selector_separator (false) - ensure space around selector separators:\n                                                  '>', '+', '~' (e.g. \"a>b\" -> \"a > b\")\n    e.g\n\n    css_beautify(css_source_text, {\n      'indent_size': 1,\n      'indent_char': '\\t',\n      'selector_separator': ' ',\n      'end_with_newline': false,\n      'newline_between_rules': true,\n      'space_around_selector_separator': true\n    });\n*/\n\n// http://www.w3.org/TR/CSS21/syndata.html#tokenization\n// http://www.w3.org/TR/css3-syntax/\n\n(function() {\n\n    function mergeOpts(allOptions, targetType) {\n        var finalOpts = {};\n        var name;\n\n        for (name in allOptions) {\n            if (name !== targetType) {\n                finalOpts[name] = allOptions[name];\n            }\n        }\n\n\n        //merge in the per type settings for the targetType\n        if (targetType in allOptions) {\n            for (name in allOptions[targetType]) {\n                finalOpts[name] = allOptions[targetType][name];\n            }\n        }\n        return finalOpts;\n    }\n\n    var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/;\n    var allLineBreaks = new RegExp(lineBreak.source, 'g');\n\n    function css_beautify(source_text, options) {\n        options = options || {};\n\n        // Allow the setting of language/file-type specific options\n        // with inheritance of overall settings\n        options = mergeOpts(options, 'css');\n\n        source_text = source_text || '';\n\n        var newlinesFromLastWSEat = 0;\n        var indentSize = options.indent_size ? parseInt(options.indent_size, 10) : 4;\n        var indentCharacter = options.indent_char || ' ';\n        var preserve_newlines = (options.preserve_newlines === undefined) ? false : options.preserve_newlines;\n        var selectorSeparatorNewline = (options.selector_separator_newline === undefined) ? true : options.selector_separator_newline;\n        var end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline;\n        var newline_between_rules = (options.newline_between_rules === undefined) ? true : options.newline_between_rules;\n        var space_around_combinator = (options.space_around_combinator === undefined) ? false : options.space_around_combinator;\n        space_around_combinator = space_around_combinator || ((options.space_around_selector_separator === undefined) ? false : options.space_around_selector_separator);\n        var eol = options.eol ? options.eol : 'auto';\n\n        if (options.indent_with_tabs) {\n            indentCharacter = '\\t';\n            indentSize = 1;\n        }\n\n        if (eol === 'auto') {\n            eol = '\\n';\n            if (source_text && lineBreak.test(source_text || '')) {\n                eol = source_text.match(lineBreak)[0];\n            }\n        }\n\n        eol = eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n');\n\n        // HACK: newline parsing inconsistent. This brute force normalizes the input.\n        source_text = source_text.replace(allLineBreaks, '\\n');\n\n        // tokenizer\n        var whiteRe = /^\\s+$/;\n\n        var pos = -1,\n            ch;\n        var parenLevel = 0;\n\n        function next() {\n            ch = source_text.charAt(++pos);\n            return ch || '';\n        }\n\n        function peek(skipWhitespace) {\n            var result = '';\n            var prev_pos = pos;\n            if (skipWhitespace) {\n                eatWhitespace();\n            }\n            result = source_text.charAt(pos + 1) || '';\n            pos = prev_pos - 1;\n            next();\n            return result;\n        }\n\n        function eatString(endChars) {\n            var start = pos;\n            while (next()) {\n                if (ch === \"\\\\\") {\n                    next();\n                } else if (endChars.indexOf(ch) !== -1) {\n                    break;\n                } else if (ch === \"\\n\") {\n                    break;\n                }\n            }\n            return source_text.substring(start, pos + 1);\n        }\n\n        function peekString(endChar) {\n            var prev_pos = pos;\n            var str = eatString(endChar);\n            pos = prev_pos - 1;\n            next();\n            return str;\n        }\n\n        function eatWhitespace(preserve_newlines_local) {\n            var result = 0;\n            while (whiteRe.test(peek())) {\n                next();\n                if (ch === '\\n' && preserve_newlines_local && preserve_newlines) {\n                    print.newLine(true);\n                    result++;\n                }\n            }\n            newlinesFromLastWSEat = result;\n            return result;\n        }\n\n        function skipWhitespace() {\n            var result = '';\n            if (ch && whiteRe.test(ch)) {\n                result = ch;\n            }\n            while (whiteRe.test(next())) {\n                result += ch;\n            }\n            return result;\n        }\n\n        function eatComment(singleLine) {\n            var start = pos;\n            singleLine = peek() === \"/\";\n            next();\n            while (next()) {\n                if (!singleLine && ch === \"*\" && peek() === \"/\") {\n                    next();\n                    break;\n                } else if (singleLine && ch === \"\\n\") {\n                    return source_text.substring(start, pos);\n                }\n            }\n\n            return source_text.substring(start, pos) + ch;\n        }\n\n\n        function lookBack(str) {\n            return source_text.substring(pos - str.length, pos).toLowerCase() ===\n                str;\n        }\n\n        // Nested pseudo-class if we are insideRule\n        // and the next special character found opens\n        // a new block\n        function foundNestedPseudoClass() {\n            var openParen = 0;\n            for (var i = pos + 1; i < source_text.length; i++) {\n                var ch = source_text.charAt(i);\n                if (ch === \"{\") {\n                    return true;\n                } else if (ch === '(') {\n                    // pseudoclasses can contain ()\n                    openParen += 1;\n                } else if (ch === ')') {\n                    if (openParen === 0) {\n                        return false;\n                    }\n                    openParen -= 1;\n                } else if (ch === \";\" || ch === \"}\") {\n                    return false;\n                }\n            }\n            return false;\n        }\n\n        // printer\n        var basebaseIndentString = source_text.match(/^[\\t ]*/)[0];\n        var singleIndent = new Array(indentSize + 1).join(indentCharacter);\n        var indentLevel = 0;\n        var nestedLevel = 0;\n\n        function indent() {\n            indentLevel++;\n            basebaseIndentString += singleIndent;\n        }\n\n        function outdent() {\n            indentLevel--;\n            basebaseIndentString = basebaseIndentString.slice(0, -indentSize);\n        }\n\n        var print = {};\n        print[\"{\"] = function(ch) {\n            print.singleSpace();\n            output.push(ch);\n            if (!eatWhitespace(true)) {\n                print.newLine();\n            }\n        };\n        print[\"}\"] = function(newline) {\n            if (newline) {\n                print.newLine();\n            }\n            output.push('}');\n            if (!eatWhitespace(true)) {\n                print.newLine();\n            }\n        };\n\n        print._lastCharWhitespace = function() {\n            return whiteRe.test(output[output.length - 1]);\n        };\n\n        print.newLine = function(keepWhitespace) {\n            if (output.length) {\n                if (!keepWhitespace && output[output.length - 1] !== '\\n') {\n                    print.trim();\n                } else if (output[output.length - 1] === basebaseIndentString) {\n                    output.pop();\n                }\n                output.push('\\n');\n\n                if (basebaseIndentString) {\n                    output.push(basebaseIndentString);\n                }\n            }\n        };\n        print.singleSpace = function() {\n            if (output.length && !print._lastCharWhitespace()) {\n                output.push(' ');\n            }\n        };\n\n        print.preserveSingleSpace = function() {\n            if (isAfterSpace) {\n                print.singleSpace();\n            }\n        };\n\n        print.trim = function() {\n            while (print._lastCharWhitespace()) {\n                output.pop();\n            }\n        };\n\n\n        var output = [];\n        /*_____________________--------------------_____________________*/\n\n        var insideRule = false;\n        var insidePropertyValue = false;\n        var enteringConditionalGroup = false;\n        var top_ch = '';\n        var last_top_ch = '';\n\n        while (true) {\n            var whitespace = skipWhitespace();\n            var isAfterSpace = whitespace !== '';\n            var isAfterNewline = whitespace.indexOf('\\n') !== -1;\n            last_top_ch = top_ch;\n            top_ch = ch;\n\n            if (!ch) {\n                break;\n            } else if (ch === '/' && peek() === '*') { /* css comment */\n                var header = indentLevel === 0;\n\n                if (isAfterNewline || header) {\n                    print.newLine();\n                }\n\n                output.push(eatComment());\n                print.newLine();\n                if (header) {\n                    print.newLine(true);\n                }\n            } else if (ch === '/' && peek() === '/') { // single line comment\n                if (!isAfterNewline && last_top_ch !== '{') {\n                    print.trim();\n                }\n                print.singleSpace();\n                output.push(eatComment());\n                print.newLine();\n            } else if (ch === '@') {\n                print.preserveSingleSpace();\n\n                // deal with less propery mixins @{...}\n                if (peek() === '{') {\n                    output.push(eatString('}'));\n                } else {\n                    output.push(ch);\n\n                    // strip trailing space, if present, for hash property checks\n                    var variableOrRule = peekString(\": ,;{}()[]/='\\\"\");\n\n                    if (variableOrRule.match(/[ :]$/)) {\n                        // we have a variable or pseudo-class, add it and insert one space before continuing\n                        next();\n                        variableOrRule = eatString(\": \").replace(/\\s$/, '');\n                        output.push(variableOrRule);\n                        print.singleSpace();\n                    }\n\n                    variableOrRule = variableOrRule.replace(/\\s$/, '');\n\n                    // might be a nesting at-rule\n                    if (variableOrRule in css_beautify.NESTED_AT_RULE) {\n                        nestedLevel += 1;\n                        if (variableOrRule in css_beautify.CONDITIONAL_GROUP_RULE) {\n                            enteringConditionalGroup = true;\n                        }\n                    }\n                }\n            } else if (ch === '#' && peek() === '{') {\n                print.preserveSingleSpace();\n                output.push(eatString('}'));\n            } else if (ch === '{') {\n                if (peek(true) === '}') {\n                    eatWhitespace();\n                    next();\n                    print.singleSpace();\n                    output.push(\"{\");\n                    print['}'](false);\n                    if (newlinesFromLastWSEat < 2 && newline_between_rules && indentLevel === 0) {\n                        print.newLine(true);\n                    }\n                } else {\n                    indent();\n                    print[\"{\"](ch);\n                    // when entering conditional groups, only rulesets are allowed\n                    if (enteringConditionalGroup) {\n                        enteringConditionalGroup = false;\n                        insideRule = (indentLevel > nestedLevel);\n                    } else {\n                        // otherwise, declarations are also allowed\n                        insideRule = (indentLevel >= nestedLevel);\n                    }\n                }\n            } else if (ch === '}') {\n                outdent();\n                print[\"}\"](true);\n                insideRule = false;\n                insidePropertyValue = false;\n                if (nestedLevel) {\n                    nestedLevel--;\n                }\n                if (newlinesFromLastWSEat < 2 && newline_between_rules && indentLevel === 0) {\n                    print.newLine(true);\n                }\n            } else if (ch === \":\") {\n                eatWhitespace();\n                if ((insideRule || enteringConditionalGroup) &&\n                    !(lookBack(\"&\") || foundNestedPseudoClass()) &&\n                    !lookBack(\"(\")) {\n                    // 'property: value' delimiter\n                    // which could be in a conditional group query\n                    output.push(':');\n                    if (!insidePropertyValue) {\n                        insidePropertyValue = true;\n                        print.singleSpace();\n                    }\n                } else {\n                    // sass/less parent reference don't use a space\n                    // sass nested pseudo-class don't use a space\n\n                    // preserve space before pseudoclasses/pseudoelements, as it means \"in any child\"\n                    if (lookBack(\" \") && output[output.length - 1] !== \" \") {\n                        output.push(\" \");\n                    }\n                    if (peek() === \":\") {\n                        // pseudo-element\n                        next();\n                        output.push(\"::\");\n                    } else {\n                        // pseudo-class\n                        output.push(':');\n                    }\n                }\n            } else if (ch === '\"' || ch === '\\'') {\n                print.preserveSingleSpace();\n                output.push(eatString(ch));\n            } else if (ch === ';') {\n                insidePropertyValue = false;\n                output.push(ch);\n                if (!eatWhitespace(true)) {\n                    print.newLine();\n                }\n            } else if (ch === '(') { // may be a url\n                if (lookBack(\"url\")) {\n                    output.push(ch);\n                    eatWhitespace();\n                    if (next()) {\n                        if (ch !== ')' && ch !== '\"' && ch !== '\\'') {\n                            output.push(eatString(')'));\n                        } else {\n                            pos--;\n                        }\n                    }\n                } else {\n                    parenLevel++;\n                    print.preserveSingleSpace();\n                    output.push(ch);\n                    eatWhitespace();\n                }\n            } else if (ch === ')') {\n                output.push(ch);\n                parenLevel--;\n            } else if (ch === ',') {\n                output.push(ch);\n                if (!eatWhitespace(true) && selectorSeparatorNewline && !insidePropertyValue && parenLevel < 1) {\n                    print.newLine();\n                } else {\n                    print.singleSpace();\n                }\n            } else if ((ch === '>' || ch === '+' || ch === '~') &&\n                !insidePropertyValue && parenLevel < 1) {\n                //handle combinator spacing\n                if (space_around_combinator) {\n                    print.singleSpace();\n                    output.push(ch);\n                    print.singleSpace();\n                } else {\n                    output.push(ch);\n                    eatWhitespace();\n                    // squash extra whitespace\n                    if (ch && whiteRe.test(ch)) {\n                        ch = '';\n                    }\n                }\n            } else if (ch === ']') {\n                output.push(ch);\n            } else if (ch === '[') {\n                print.preserveSingleSpace();\n                output.push(ch);\n            } else if (ch === '=') { // no whitespace before or after\n                eatWhitespace();\n                output.push('=');\n                if (whiteRe.test(ch)) {\n                    ch = '';\n                }\n            } else {\n                print.preserveSingleSpace();\n                output.push(ch);\n            }\n        }\n\n\n        var sweetCode = '';\n        if (basebaseIndentString) {\n            sweetCode += basebaseIndentString;\n        }\n\n        sweetCode += output.join('').replace(/[\\r\\n\\t ]+$/, '');\n\n        // establish end_with_newline\n        if (end_with_newline) {\n            sweetCode += '\\n';\n        }\n\n        if (eol !== '\\n') {\n            sweetCode = sweetCode.replace(/[\\n]/g, eol);\n        }\n\n        return sweetCode;\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/At-rule\n    css_beautify.NESTED_AT_RULE = {\n        \"@page\": true,\n        \"@font-face\": true,\n        \"@keyframes\": true,\n        // also in CONDITIONAL_GROUP_RULE below\n        \"@media\": true,\n        \"@supports\": true,\n        \"@document\": true\n    };\n    css_beautify.CONDITIONAL_GROUP_RULE = {\n        \"@media\": true,\n        \"@supports\": true,\n        \"@document\": true\n    };\n\n    /*global define */\n    if (typeof define === \"function\" && define.amd) {\n        // Add support for AMD ( https://github.com/amdjs/amdjs-api/wiki/AMD#defineamd-property- )\n        define([], function() {\n            return {\n                css_beautify: css_beautify\n            };\n        });\n    } else if (typeof exports !== \"undefined\") {\n        // Add support for CommonJS. Just put this file somewhere on your require.paths\n        // and you will be able to `var html_beautify = require(\"beautify\").html_beautify`.\n        exports.css_beautify = css_beautify;\n    } else if (typeof window !== \"undefined\") {\n        // If we're running a web page and don't have either of the above, add our one global\n        window.css_beautify = css_beautify;\n    } else if (typeof global !== \"undefined\") {\n        // If we don't even have window, try global.\n        global.css_beautify = css_beautify;\n    }\n\n}());","/*jshint curly:true, eqeqeq:true, laxbreak:true, noempty:false */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2017 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n\n Style HTML\n---------------\n\n  Written by Nochum Sossonko, (nsossonko@hotmail.com)\n\n  Based on code initially developed by: Einar Lielmanis, <einar@jsbeautifier.org>\n    http://jsbeautifier.org/\n\n  Usage:\n    style_html(html_source);\n\n    style_html(html_source, options);\n\n  The options are:\n    indent_inner_html (default false)   indent <head> and <body> sections,\n    indent_size (default 4)           indentation size,\n    indent_char (default space)       character to indent with,\n    wrap_line_length (default 250)            -  maximum amount of characters per line (0 = disable)\n    brace_style (default \"collapse\") - \"collapse\" | \"expand\" | \"end-expand\" | \"none\"\n            put braces on the same line as control statements (default), or put braces on own line (Allman / ANSI style), or just put end braces on own line, or attempt to keep them where they are.\n    unformatted (defaults to inline tags) - list of tags, that shouldn't be reformatted\n    content_unformatted (defaults to pre tag) - list of tags, that its content shouldn't be reformatted\n    indent_scripts (default normal)  - \"keep\"|\"separate\"|\"normal\"\n    preserve_newlines (default true) - whether existing line breaks before elements should be preserved\n                                        Only works before elements, not inside tags or for text.\n    max_preserve_newlines (default unlimited) - maximum number of line breaks to be preserved in one chunk\n    indent_handlebars (default false) - format and indent {{#foo}} and {{/foo}}\n    end_with_newline (false)          - end with a newline\n    extra_liners (default [head,body,/html]) -List of tags that should have an extra newline before them.\n\n    e.g.\n\n    style_html(html_source, {\n      'indent_inner_html': false,\n      'indent_size': 2,\n      'indent_char': ' ',\n      'wrap_line_length': 78,\n      'brace_style': 'expand',\n      'preserve_newlines': true,\n      'max_preserve_newlines': 5,\n      'indent_handlebars': false,\n      'extra_liners': ['/html']\n    });\n*/\n\n(function() {\n\n    // function trim(s) {\n    //     return s.replace(/^\\s+|\\s+$/g, '');\n    // }\n\n    function ltrim(s) {\n        return s.replace(/^\\s+/g, '');\n    }\n\n    function rtrim(s) {\n        return s.replace(/\\s+$/g, '');\n    }\n\n    function mergeOpts(allOptions, targetType) {\n        var finalOpts = {};\n        var name;\n\n        for (name in allOptions) {\n            if (name !== targetType) {\n                finalOpts[name] = allOptions[name];\n            }\n        }\n\n        //merge in the per type settings for the targetType\n        if (targetType in allOptions) {\n            for (name in allOptions[targetType]) {\n                finalOpts[name] = allOptions[targetType][name];\n            }\n        }\n        return finalOpts;\n    }\n\n    var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/;\n    var allLineBreaks = new RegExp(lineBreak.source, 'g');\n\n    function style_html(html_source, options, js_beautify, css_beautify) {\n        //Wrapper function to invoke all the necessary constructors and deal with the output.\n\n        var multi_parser,\n            indent_inner_html,\n            indent_body_inner_html,\n            indent_head_inner_html,\n            indent_size,\n            indent_character,\n            wrap_line_length,\n            brace_style,\n            unformatted,\n            content_unformatted,\n            preserve_newlines,\n            max_preserve_newlines,\n            indent_handlebars,\n            wrap_attributes,\n            wrap_attributes_indent_size,\n            is_wrap_attributes_force,\n            is_wrap_attributes_force_expand_multiline,\n            is_wrap_attributes_force_aligned,\n            end_with_newline,\n            extra_liners,\n            eol;\n\n        options = options || {};\n\n        // Allow the setting of language/file-type specific options\n        // with inheritance of overall settings\n        options = mergeOpts(options, 'html');\n\n        // backwards compatibility to 1.3.4\n        if ((options.wrap_line_length === undefined || parseInt(options.wrap_line_length, 10) === 0) &&\n            (options.max_char !== undefined && parseInt(options.max_char, 10) !== 0)) {\n            options.wrap_line_length = options.max_char;\n        }\n\n        indent_inner_html = (options.indent_inner_html === undefined) ? false : options.indent_inner_html;\n        indent_body_inner_html = (options.indent_body_inner_html === undefined) ? true : options.indent_body_inner_html;\n        indent_head_inner_html = (options.indent_head_inner_html === undefined) ? true : options.indent_head_inner_html;\n        indent_size = (options.indent_size === undefined) ? 4 : parseInt(options.indent_size, 10);\n        indent_character = (options.indent_char === undefined) ? ' ' : options.indent_char;\n        brace_style = (options.brace_style === undefined) ? 'collapse' : options.brace_style;\n        wrap_line_length = parseInt(options.wrap_line_length, 10) === 0 ? 32786 : parseInt(options.wrap_line_length || 250, 10);\n        unformatted = options.unformatted || [\n            // https://www.w3.org/TR/html5/dom.html#phrasing-content\n            'a', 'abbr', 'area', 'audio', 'b', 'bdi', 'bdo', 'br', 'button', 'canvas', 'cite',\n            'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'i', 'iframe', 'img',\n            'input', 'ins', 'kbd', 'keygen', 'label', 'map', 'mark', 'math', 'meter', 'noscript',\n            'object', 'output', 'progress', 'q', 'ruby', 's', 'samp', /* 'script', */ 'select', 'small',\n            'span', 'strong', 'sub', 'sup', 'svg', 'template', 'textarea', 'time', 'u', 'var',\n            'video', 'wbr', 'text',\n            // prexisting - not sure of full effect of removing, leaving in\n            'acronym', 'address', 'big', 'dt', 'ins', 'strike', 'tt',\n        ];\n        content_unformatted = options.content_unformatted || [\n            'pre',\n        ];\n        preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines;\n        max_preserve_newlines = preserve_newlines ?\n            (isNaN(parseInt(options.max_preserve_newlines, 10)) ? 32786 : parseInt(options.max_preserve_newlines, 10)) :\n            0;\n        indent_handlebars = (options.indent_handlebars === undefined) ? false : options.indent_handlebars;\n        wrap_attributes = (options.wrap_attributes === undefined) ? 'auto' : options.wrap_attributes;\n        wrap_attributes_indent_size = (isNaN(parseInt(options.wrap_attributes_indent_size, 10))) ? indent_size : parseInt(options.wrap_attributes_indent_size, 10);\n        is_wrap_attributes_force = wrap_attributes.substr(0, 'force'.length) === 'force';\n        is_wrap_attributes_force_expand_multiline = (wrap_attributes === 'force-expand-multiline');\n        is_wrap_attributes_force_aligned = (wrap_attributes === 'force-aligned');\n        end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline;\n        extra_liners = (typeof options.extra_liners === 'object') && options.extra_liners ?\n            options.extra_liners.concat() : (typeof options.extra_liners === 'string') ?\n            options.extra_liners.split(',') : 'head,body,/html'.split(',');\n        eol = options.eol ? options.eol : 'auto';\n\n        if (options.indent_with_tabs) {\n            indent_character = '\\t';\n            indent_size = 1;\n        }\n\n        if (eol === 'auto') {\n            eol = '\\n';\n            if (html_source && lineBreak.test(html_source || '')) {\n                eol = html_source.match(lineBreak)[0];\n            }\n        }\n\n        eol = eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n');\n\n        // HACK: newline parsing inconsistent. This brute force normalizes the input.\n        html_source = html_source.replace(allLineBreaks, '\\n');\n\n        function Parser() {\n\n            this.pos = 0; //Parser position\n            this.token = '';\n            this.current_mode = 'CONTENT'; //reflects the current Parser mode: TAG/CONTENT\n            this.tags = { //An object to hold tags, their position, and their parent-tags, initiated with default values\n                parent: 'parent1',\n                parentcount: 1,\n                parent1: ''\n            };\n            this.tag_type = '';\n            this.token_text = this.last_token = this.last_text = this.token_type = '';\n            this.newlines = 0;\n            this.indent_content = indent_inner_html;\n            this.indent_body_inner_html = indent_body_inner_html;\n            this.indent_head_inner_html = indent_head_inner_html;\n\n            this.Utils = { //Uilities made available to the various functions\n                whitespace: \"\\n\\r\\t \".split(''),\n\n                single_token: options.void_elements || [\n                    // HTLM void elements - aka self-closing tags - aka singletons\n                    // https://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\n                    'area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'keygen',\n                    'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr',\n                    // NOTE: Optional tags - are not understood.\n                    // https://www.w3.org/TR/html5/syntax.html#optional-tags\n                    // The rules for optional tags are too complex for a simple list\n                    // Also, the content of these tags should still be indented in many cases.\n                    // 'li' is a good exmple.\n\n                    // Doctype and xml elements\n                    '!doctype', '?xml',\n                    // ?php tag\n                    '?php',\n                    // other tags that were in this list, keeping just in case\n                    'basefont', 'isindex'\n                ],\n                extra_liners: extra_liners, //for tags that need a line of whitespace before them\n                in_array: function(what, arr) {\n                    for (var i = 0; i < arr.length; i++) {\n                        if (what === arr[i]) {\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n            };\n\n            // Return true if the given text is composed entirely of whitespace.\n            this.is_whitespace = function(text) {\n                for (var n = 0; n < text.length; n++) {\n                    if (!this.Utils.in_array(text.charAt(n), this.Utils.whitespace)) {\n                        return false;\n                    }\n                }\n                return true;\n            };\n\n            this.traverse_whitespace = function() {\n                var input_char = '';\n\n                input_char = this.input.charAt(this.pos);\n                if (this.Utils.in_array(input_char, this.Utils.whitespace)) {\n                    this.newlines = 0;\n                    while (this.Utils.in_array(input_char, this.Utils.whitespace)) {\n                        if (preserve_newlines && input_char === '\\n' && this.newlines <= max_preserve_newlines) {\n                            this.newlines += 1;\n                        }\n\n                        this.pos++;\n                        input_char = this.input.charAt(this.pos);\n                    }\n                    return true;\n                }\n                return false;\n            };\n\n            // Append a space to the given content (string array) or, if we are\n            // at the wrap_line_length, append a newline/indentation.\n            // return true if a newline was added, false if a space was added\n            this.space_or_wrap = function(content) {\n                if (this.line_char_count >= this.wrap_line_length) { //insert a line when the wrap_line_length is reached\n                    this.print_newline(false, content);\n                    this.print_indentation(content);\n                    return true;\n                } else {\n                    this.line_char_count++;\n                    content.push(' ');\n                    return false;\n                }\n            };\n\n            this.get_content = function() { //function to capture regular content between tags\n                var input_char = '',\n                    content = [],\n                    handlebarsStarted = 0;\n\n                while (this.input.charAt(this.pos) !== '<' || handlebarsStarted === 2) {\n                    if (this.pos >= this.input.length) {\n                        return content.length ? content.join('') : ['', 'TK_EOF'];\n                    }\n\n                    if (handlebarsStarted < 2 && this.traverse_whitespace()) {\n                        this.space_or_wrap(content);\n                        continue;\n                    }\n\n                    input_char = this.input.charAt(this.pos);\n\n                    if (indent_handlebars) {\n                        if (input_char === '{') {\n                            handlebarsStarted += 1;\n                        } else if (handlebarsStarted < 2) {\n                            handlebarsStarted = 0;\n                        }\n\n                        if (input_char === '}' && handlebarsStarted > 0) {\n                            if (handlebarsStarted-- === 0) {\n                                break;\n                            }\n                        }\n                        // Handlebars parsing is complicated.\n                        // {{#foo}} and {{/foo}} are formatted tags.\n                        // {{something}} should get treated as content, except:\n                        // {{else}} specifically behaves like {{#if}} and {{/if}}\n                        var peek3 = this.input.substr(this.pos, 3);\n                        if (peek3 === '{{#' || peek3 === '{{/') {\n                            // These are tags and not content.\n                            break;\n                        } else if (peek3 === '{{!') {\n                            return [this.get_tag(), 'TK_TAG_HANDLEBARS_COMMENT'];\n                        } else if (this.input.substr(this.pos, 2) === '{{') {\n                            if (this.get_tag(true) === '{{else}}') {\n                                break;\n                            }\n                        }\n                    }\n\n                    this.pos++;\n                    this.line_char_count++;\n                    content.push(input_char); //letter at-a-time (or string) inserted to an array\n                }\n                return content.length ? content.join('') : '';\n            };\n\n            this.get_contents_to = function(name) { //get the full content of a script or style to pass to js_beautify\n                if (this.pos === this.input.length) {\n                    return ['', 'TK_EOF'];\n                }\n                var content = '';\n                var reg_match = new RegExp('</' + name + '\\\\s*>', 'igm');\n                reg_match.lastIndex = this.pos;\n                var reg_array = reg_match.exec(this.input);\n                var end_script = reg_array ? reg_array.index : this.input.length; //absolute end of script\n                if (this.pos < end_script) { //get everything in between the script tags\n                    content = this.input.substring(this.pos, end_script);\n                    this.pos = end_script;\n                }\n                return content;\n            };\n\n            this.record_tag = function(tag) { //function to record a tag and its parent in this.tags Object\n                if (this.tags[tag + 'count']) { //check for the existence of this tag type\n                    this.tags[tag + 'count']++;\n                    this.tags[tag + this.tags[tag + 'count']] = this.indent_level; //and record the present indent level\n                } else { //otherwise initialize this tag type\n                    this.tags[tag + 'count'] = 1;\n                    this.tags[tag + this.tags[tag + 'count']] = this.indent_level; //and record the present indent level\n                }\n                this.tags[tag + this.tags[tag + 'count'] + 'parent'] = this.tags.parent; //set the parent (i.e. in the case of a div this.tags.div1parent)\n                this.tags.parent = tag + this.tags[tag + 'count']; //and make this the current parent (i.e. in the case of a div 'div1')\n            };\n\n            this.retrieve_tag = function(tag) { //function to retrieve the opening tag to the corresponding closer\n                if (this.tags[tag + 'count']) { //if the openener is not in the Object we ignore it\n                    var temp_parent = this.tags.parent; //check to see if it's a closable tag.\n                    while (temp_parent) { //till we reach '' (the initial value);\n                        if (tag + this.tags[tag + 'count'] === temp_parent) { //if this is it use it\n                            break;\n                        }\n                        temp_parent = this.tags[temp_parent + 'parent']; //otherwise keep on climbing up the DOM Tree\n                    }\n                    if (temp_parent) { //if we caught something\n                        this.indent_level = this.tags[tag + this.tags[tag + 'count']]; //set the indent_level accordingly\n                        this.tags.parent = this.tags[temp_parent + 'parent']; //and set the current parent\n                    }\n                    delete this.tags[tag + this.tags[tag + 'count'] + 'parent']; //delete the closed tags parent reference...\n                    delete this.tags[tag + this.tags[tag + 'count']]; //...and the tag itself\n                    if (this.tags[tag + 'count'] === 1) {\n                        delete this.tags[tag + 'count'];\n                    } else {\n                        this.tags[tag + 'count']--;\n                    }\n                }\n            };\n\n            this.indent_to_tag = function(tag) {\n                // Match the indentation level to the last use of this tag, but don't remove it.\n                if (!this.tags[tag + 'count']) {\n                    return;\n                }\n                var temp_parent = this.tags.parent;\n                while (temp_parent) {\n                    if (tag + this.tags[tag + 'count'] === temp_parent) {\n                        break;\n                    }\n                    temp_parent = this.tags[temp_parent + 'parent'];\n                }\n                if (temp_parent) {\n                    this.indent_level = this.tags[tag + this.tags[tag + 'count']];\n                }\n            };\n\n            this.get_tag = function(peek) { //function to get a full tag and parse its type\n                var input_char = '',\n                    content = [],\n                    comment = '',\n                    space = false,\n                    first_attr = true,\n                    has_wrapped_attrs = false,\n                    tag_start, tag_end,\n                    tag_start_char,\n                    orig_pos = this.pos,\n                    orig_line_char_count = this.line_char_count,\n                    is_tag_closed = false,\n                    tail;\n\n                peek = peek !== undefined ? peek : false;\n\n                do {\n                    if (this.pos >= this.input.length) {\n                        if (peek) {\n                            this.pos = orig_pos;\n                            this.line_char_count = orig_line_char_count;\n                        }\n                        return content.length ? content.join('') : ['', 'TK_EOF'];\n                    }\n\n                    input_char = this.input.charAt(this.pos);\n                    this.pos++;\n\n                    if (this.Utils.in_array(input_char, this.Utils.whitespace)) { //don't want to insert unnecessary space\n                        space = true;\n                        continue;\n                    }\n\n                    if (input_char === \"'\" || input_char === '\"') {\n                        input_char += this.get_unformatted(input_char);\n                        space = true;\n                    }\n\n                    if (input_char === '=') { //no space before =\n                        space = false;\n                    }\n                    tail = this.input.substr(this.pos - 1);\n                    if (is_wrap_attributes_force_expand_multiline && has_wrapped_attrs && !is_tag_closed && (input_char === '>' || input_char === '/')) {\n                        if (tail.match(/^\\/?\\s*>/)) {\n                            space = false;\n                            is_tag_closed = true;\n                            this.print_newline(false, content);\n                            this.print_indentation(content);\n                        }\n                    }\n                    if (content.length && content[content.length - 1] !== '=' && input_char !== '>' && space) {\n                        //no space after = or before >\n                        var wrapped = this.space_or_wrap(content);\n                        var indentAttrs = wrapped && input_char !== '/' && !is_wrap_attributes_force;\n                        space = false;\n\n                        if (is_wrap_attributes_force && input_char !== '/') {\n                            var force_first_attr_wrap = false;\n                            if (is_wrap_attributes_force_expand_multiline && first_attr) {\n                                var is_only_attribute = tail.match(/^\\S*(=\"([^\"]|\\\\\")*\")?\\s*\\/?\\s*>/) !== null;\n                                force_first_attr_wrap = !is_only_attribute;\n                            }\n                            if (!first_attr || force_first_attr_wrap) {\n                                this.print_newline(false, content);\n                                this.print_indentation(content);\n                                indentAttrs = true;\n                            }\n                        }\n                        if (indentAttrs) {\n                            has_wrapped_attrs = true;\n\n                            //indent attributes an auto, forced, or forced-align line-wrap\n                            var alignment_size = wrap_attributes_indent_size;\n                            if (is_wrap_attributes_force_aligned) {\n                                alignment_size = content.indexOf(' ') + 1;\n                            }\n\n                            for (var count = 0; count < alignment_size; count++) {\n                                // only ever further indent with spaces since we're trying to align characters\n                                content.push(' ');\n                            }\n                        }\n                        if (first_attr) {\n                            for (var i = 0; i < content.length; i++) {\n                                if (content[i] === ' ') {\n                                    first_attr = false;\n                                    break;\n                                }\n                            }\n                        }\n                    }\n\n                    if (indent_handlebars && tag_start_char === '<') {\n                        // When inside an angle-bracket tag, put spaces around\n                        // handlebars not inside of strings.\n                        if ((input_char + this.input.charAt(this.pos)) === '{{') {\n                            input_char += this.get_unformatted('}}');\n                            if (content.length && content[content.length - 1] !== ' ' && content[content.length - 1] !== '<') {\n                                input_char = ' ' + input_char;\n                            }\n                            space = true;\n                        }\n                    }\n\n                    if (input_char === '<' && !tag_start_char) {\n                        tag_start = this.pos - 1;\n                        tag_start_char = '<';\n                    }\n\n                    if (indent_handlebars && !tag_start_char) {\n                        if (content.length >= 2 && content[content.length - 1] === '{' && content[content.length - 2] === '{') {\n                            if (input_char === '#' || input_char === '/' || input_char === '!') {\n                                tag_start = this.pos - 3;\n                            } else {\n                                tag_start = this.pos - 2;\n                            }\n                            tag_start_char = '{';\n                        }\n                    }\n\n                    this.line_char_count++;\n                    content.push(input_char); //inserts character at-a-time (or string)\n\n                    if (content[1] && (content[1] === '!' || content[1] === '?' || content[1] === '%')) { //if we're in a comment, do something special\n                        // We treat all comments as literals, even more than preformatted tags\n                        // we just look for the appropriate close tag\n                        content = [this.get_comment(tag_start)];\n                        break;\n                    }\n\n                    if (indent_handlebars && content[1] && content[1] === '{' && content[2] && content[2] === '!') { //if we're in a comment, do something special\n                        // We treat all comments as literals, even more than preformatted tags\n                        // we just look for the appropriate close tag\n                        content = [this.get_comment(tag_start)];\n                        break;\n                    }\n\n                    if (indent_handlebars && tag_start_char === '{' && content.length > 2 && content[content.length - 2] === '}' && content[content.length - 1] === '}') {\n                        break;\n                    }\n                } while (input_char !== '>');\n\n                var tag_complete = content.join('');\n                var tag_index;\n                var tag_offset;\n\n                // must check for space first otherwise the tag could have the first attribute included, and\n                // then not un-indent correctly\n                if (tag_complete.indexOf(' ') !== -1) { //if there's whitespace, thats where the tag name ends\n                    tag_index = tag_complete.indexOf(' ');\n                } else if (tag_complete.indexOf('\\n') !== -1) { //if there's a line break, thats where the tag name ends\n                    tag_index = tag_complete.indexOf('\\n');\n                } else if (tag_complete.charAt(0) === '{') {\n                    tag_index = tag_complete.indexOf('}');\n                } else { //otherwise go with the tag ending\n                    tag_index = tag_complete.indexOf('>');\n                }\n                if (tag_complete.charAt(0) === '<' || !indent_handlebars) {\n                    tag_offset = 1;\n                } else {\n                    tag_offset = tag_complete.charAt(2) === '#' ? 3 : 2;\n                }\n                var tag_check = tag_complete.substring(tag_offset, tag_index).toLowerCase();\n                if (tag_complete.charAt(tag_complete.length - 2) === '/' ||\n                    this.Utils.in_array(tag_check, this.Utils.single_token)) { //if this tag name is a single tag type (either in the list or has a closing /)\n                    if (!peek) {\n                        this.tag_type = 'SINGLE';\n                    }\n                } else if (indent_handlebars && tag_complete.charAt(0) === '{' && tag_check === 'else') {\n                    if (!peek) {\n                        this.indent_to_tag('if');\n                        this.tag_type = 'HANDLEBARS_ELSE';\n                        this.indent_content = true;\n                        this.traverse_whitespace();\n                    }\n                } else if (this.is_unformatted(tag_check, unformatted) ||\n                    this.is_unformatted(tag_check, content_unformatted)) {\n                    // do not reformat the \"unformatted\" or \"content_unformatted\" tags\n                    comment = this.get_unformatted('</' + tag_check + '>', tag_complete); //...delegate to get_unformatted function\n                    content.push(comment);\n                    tag_end = this.pos - 1;\n                    this.tag_type = 'SINGLE';\n                } else if (tag_check === 'script' &&\n                    (tag_complete.search('type') === -1 ||\n                        (tag_complete.search('type') > -1 &&\n                            tag_complete.search(/\\b(text|application|dojo)\\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\\+)?json|method|aspect)/) > -1))) {\n                    if (!peek) {\n                        this.record_tag(tag_check);\n                        this.tag_type = 'SCRIPT';\n                    }\n                } else if (tag_check === 'style' &&\n                    (tag_complete.search('type') === -1 ||\n                        (tag_complete.search('type') > -1 && tag_complete.search('text/css') > -1))) {\n                    if (!peek) {\n                        this.record_tag(tag_check);\n                        this.tag_type = 'STYLE';\n                    }\n                } else if (tag_check.charAt(0) === '!') { //peek for <! comment\n                    // for comments content is already correct.\n                    if (!peek) {\n                        this.tag_type = 'SINGLE';\n                        this.traverse_whitespace();\n                    }\n                } else if (!peek) {\n                    if (tag_check.charAt(0) === '/') { //this tag is a double tag so check for tag-ending\n                        this.retrieve_tag(tag_check.substring(1)); //remove it and all ancestors\n                        this.tag_type = 'END';\n                    } else { //otherwise it's a start-tag\n                        this.record_tag(tag_check); //push it on the tag stack\n                        if (tag_check.toLowerCase() !== 'html') {\n                            this.indent_content = true;\n                        }\n                        this.tag_type = 'START';\n                    }\n\n                    // Allow preserving of newlines after a start or end tag\n                    if (this.traverse_whitespace()) {\n                        this.space_or_wrap(content);\n                    }\n\n                    if (this.Utils.in_array(tag_check, this.Utils.extra_liners)) { //check if this double needs an extra line\n                        this.print_newline(false, this.output);\n                        if (this.output.length && this.output[this.output.length - 2] !== '\\n') {\n                            this.print_newline(true, this.output);\n                        }\n                    }\n                }\n\n                if (peek) {\n                    this.pos = orig_pos;\n                    this.line_char_count = orig_line_char_count;\n                }\n\n                return content.join(''); //returns fully formatted tag\n            };\n\n            this.get_comment = function(start_pos) { //function to return comment content in its entirety\n                // this is will have very poor perf, but will work for now.\n                var comment = '',\n                    delimiter = '>',\n                    matched = false;\n\n                this.pos = start_pos;\n                var input_char = this.input.charAt(this.pos);\n                this.pos++;\n\n                while (this.pos <= this.input.length) {\n                    comment += input_char;\n\n                    // only need to check for the delimiter if the last chars match\n                    if (comment.charAt(comment.length - 1) === delimiter.charAt(delimiter.length - 1) &&\n                        comment.indexOf(delimiter) !== -1) {\n                        break;\n                    }\n\n                    // only need to search for custom delimiter for the first few characters\n                    if (!matched && comment.length < 10) {\n                        if (comment.indexOf('<![if') === 0) { //peek for <![if conditional comment\n                            delimiter = '<![endif]>';\n                            matched = true;\n                        } else if (comment.indexOf('<![cdata[') === 0) { //if it's a <[cdata[ comment...\n                            delimiter = ']]>';\n                            matched = true;\n                        } else if (comment.indexOf('<![') === 0) { // some other ![ comment? ...\n                            delimiter = ']>';\n                            matched = true;\n                        } else if (comment.indexOf('<!--') === 0) { // <!-- comment ...\n                            delimiter = '-->';\n                            matched = true;\n                        } else if (comment.indexOf('{{!--') === 0) { // {{!-- handlebars comment\n                            delimiter = '--}}';\n                            matched = true;\n                        } else if (comment.indexOf('{{!') === 0) { // {{! handlebars comment\n                            if (comment.length === 5 && comment.indexOf('{{!--') === -1) {\n                                delimiter = '}}';\n                                matched = true;\n                            }\n                        } else if (comment.indexOf('<?') === 0) { // {{! handlebars comment\n                            delimiter = '?>';\n                            matched = true;\n                        } else if (comment.indexOf('<%') === 0) { // {{! handlebars comment\n                            delimiter = '%>';\n                            matched = true;\n                        }\n                    }\n\n                    input_char = this.input.charAt(this.pos);\n                    this.pos++;\n                }\n\n                return comment;\n            };\n\n            function tokenMatcher(delimiter) {\n                var token = '';\n\n                var add = function(str) {\n                    var newToken = token + str.toLowerCase();\n                    token = newToken.length <= delimiter.length ? newToken : newToken.substr(newToken.length - delimiter.length, delimiter.length);\n                };\n\n                var doesNotMatch = function() {\n                    return token.indexOf(delimiter) === -1;\n                };\n\n                return {\n                    add: add,\n                    doesNotMatch: doesNotMatch\n                };\n            }\n\n            this.get_unformatted = function(delimiter, orig_tag) { //function to return unformatted content in its entirety\n                if (orig_tag && orig_tag.toLowerCase().indexOf(delimiter) !== -1) {\n                    return '';\n                }\n                var input_char = '';\n                var content = '';\n                var space = true;\n\n                var delimiterMatcher = tokenMatcher(delimiter);\n\n                do {\n\n                    if (this.pos >= this.input.length) {\n                        return content;\n                    }\n\n                    input_char = this.input.charAt(this.pos);\n                    this.pos++;\n\n                    if (this.Utils.in_array(input_char, this.Utils.whitespace)) {\n                        if (!space) {\n                            this.line_char_count--;\n                            continue;\n                        }\n                        if (input_char === '\\n' || input_char === '\\r') {\n                            content += '\\n';\n                            /*  Don't change tab indention for unformatted blocks.  If using code for html editing, this will greatly affect <pre> tags if they are specified in the 'unformatted array'\n                for (var i=0; i<this.indent_level; i++) {\n                  content += this.indent_string;\n                }\n                space = false; //...and make sure other indentation is erased\n                */\n                            this.line_char_count = 0;\n                            continue;\n                        }\n                    }\n                    content += input_char;\n                    delimiterMatcher.add(input_char);\n                    this.line_char_count++;\n                    space = true;\n\n                    if (indent_handlebars && input_char === '{' && content.length && content.charAt(content.length - 2) === '{') {\n                        // Handlebars expressions in strings should also be unformatted.\n                        content += this.get_unformatted('}}');\n                        // Don't consider when stopping for delimiters.\n                    }\n                } while (delimiterMatcher.doesNotMatch());\n\n                return content;\n            };\n\n            this.get_token = function() { //initial handler for token-retrieval\n                var token;\n\n                if (this.last_token === 'TK_TAG_SCRIPT' || this.last_token === 'TK_TAG_STYLE') { //check if we need to format javascript\n                    var type = this.last_token.substr(7);\n                    token = this.get_contents_to(type);\n                    if (typeof token !== 'string') {\n                        return token;\n                    }\n                    return [token, 'TK_' + type];\n                }\n                if (this.current_mode === 'CONTENT') {\n                    token = this.get_content();\n                    if (typeof token !== 'string') {\n                        return token;\n                    } else {\n                        return [token, 'TK_CONTENT'];\n                    }\n                }\n\n                if (this.current_mode === 'TAG') {\n                    token = this.get_tag();\n                    if (typeof token !== 'string') {\n                        return token;\n                    } else {\n                        var tag_name_type = 'TK_TAG_' + this.tag_type;\n                        return [token, tag_name_type];\n                    }\n                }\n            };\n\n            this.get_full_indent = function(level) {\n                level = this.indent_level + level || 0;\n                if (level < 1) {\n                    return '';\n                }\n\n                return Array(level + 1).join(this.indent_string);\n            };\n\n            this.is_unformatted = function(tag_check, unformatted) {\n                //is this an HTML5 block-level link?\n                if (!this.Utils.in_array(tag_check, unformatted)) {\n                    return false;\n                }\n\n                if (tag_check.toLowerCase() !== 'a' || !this.Utils.in_array('a', unformatted)) {\n                    return true;\n                }\n\n                //at this point we have an  tag; is its first child something we want to remain\n                //unformatted?\n                var next_tag = this.get_tag(true /* peek. */ );\n\n                // test next_tag to see if it is just html tag (no external content)\n                var tag = (next_tag || \"\").match(/^\\s*<\\s*\\/?([a-z]*)\\s*[^>]*>\\s*$/);\n\n                // if next_tag comes back but is not an isolated tag, then\n                // let's treat the 'a' tag as having content\n                // and respect the unformatted option\n                if (!tag || this.Utils.in_array(tag[1], unformatted)) {\n                    return true;\n                } else {\n                    return false;\n                }\n            };\n\n            this.printer = function(js_source, indent_character, indent_size, wrap_line_length, brace_style) { //handles input/output and some other printing functions\n\n                this.input = js_source || ''; //gets the input for the Parser\n\n                // HACK: newline parsing inconsistent. This brute force normalizes the input.\n                this.input = this.input.replace(/\\r\\n|[\\r\\u2028\\u2029]/g, '\\n');\n\n                this.output = [];\n                this.indent_character = indent_character;\n                this.indent_string = '';\n                this.indent_size = indent_size;\n                this.brace_style = brace_style;\n                this.indent_level = 0;\n                this.wrap_line_length = wrap_line_length;\n                this.line_char_count = 0; //count to see if wrap_line_length was exceeded\n\n                for (var i = 0; i < this.indent_size; i++) {\n                    this.indent_string += this.indent_character;\n                }\n\n                this.print_newline = function(force, arr) {\n                    this.line_char_count = 0;\n                    if (!arr || !arr.length) {\n                        return;\n                    }\n                    if (force || (arr[arr.length - 1] !== '\\n')) { //we might want the extra line\n                        if ((arr[arr.length - 1] !== '\\n')) {\n                            arr[arr.length - 1] = rtrim(arr[arr.length - 1]);\n                        }\n                        arr.push('\\n');\n                    }\n                };\n\n                this.print_indentation = function(arr) {\n                    for (var i = 0; i < this.indent_level; i++) {\n                        arr.push(this.indent_string);\n                        this.line_char_count += this.indent_string.length;\n                    }\n                };\n\n                this.print_token = function(text) {\n                    // Avoid printing initial whitespace.\n                    if (this.is_whitespace(text) && !this.output.length) {\n                        return;\n                    }\n                    if (text || text !== '') {\n                        if (this.output.length && this.output[this.output.length - 1] === '\\n') {\n                            this.print_indentation(this.output);\n                            text = ltrim(text);\n                        }\n                    }\n                    this.print_token_raw(text);\n                };\n\n                this.print_token_raw = function(text) {\n                    // If we are going to print newlines, truncate trailing\n                    // whitespace, as the newlines will represent the space.\n                    if (this.newlines > 0) {\n                        text = rtrim(text);\n                    }\n\n                    if (text && text !== '') {\n                        if (text.length > 1 && text.charAt(text.length - 1) === '\\n') {\n                            // unformatted tags can grab newlines as their last character\n                            this.output.push(text.slice(0, -1));\n                            this.print_newline(false, this.output);\n                        } else {\n                            this.output.push(text);\n                        }\n                    }\n\n                    for (var n = 0; n < this.newlines; n++) {\n                        this.print_newline(n > 0, this.output);\n                    }\n                    this.newlines = 0;\n                };\n\n                this.indent = function() {\n                    this.indent_level++;\n                };\n\n                this.unindent = function() {\n                    if (this.indent_level > 0) {\n                        this.indent_level--;\n                    }\n                };\n            };\n            return this;\n        }\n\n        /*_____________________--------------------_____________________*/\n\n        multi_parser = new Parser(); //wrapping functions Parser\n        multi_parser.printer(html_source, indent_character, indent_size, wrap_line_length, brace_style); //initialize starting values\n\n        while (true) {\n            var t = multi_parser.get_token();\n            multi_parser.token_text = t[0];\n            multi_parser.token_type = t[1];\n\n            if (multi_parser.token_type === 'TK_EOF') {\n                break;\n            }\n\n            switch (multi_parser.token_type) {\n                case 'TK_TAG_START':\n                    multi_parser.print_newline(false, multi_parser.output);\n                    multi_parser.print_token(multi_parser.token_text);\n                    if (multi_parser.indent_content) {\n                        if ((multi_parser.indent_body_inner_html || !multi_parser.token_text.match(/<body(?:.*)>/)) &&\n                            (multi_parser.indent_head_inner_html || !multi_parser.token_text.match(/<head(?:.*)>/))) {\n\n                            multi_parser.indent();\n                        }\n\n                        multi_parser.indent_content = false;\n                    }\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_STYLE':\n                case 'TK_TAG_SCRIPT':\n                    multi_parser.print_newline(false, multi_parser.output);\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_END':\n                    //Print new line only if the tag has no content and has child\n                    if (multi_parser.last_token === 'TK_CONTENT' && multi_parser.last_text === '') {\n                        var tag_name = (multi_parser.token_text.match(/\\w+/) || [])[0];\n                        var tag_extracted_from_last_output = null;\n                        if (multi_parser.output.length) {\n                            tag_extracted_from_last_output = multi_parser.output[multi_parser.output.length - 1].match(/(?:<|{{#)\\s*(\\w+)/);\n                        }\n                        if (tag_extracted_from_last_output === null ||\n                            (tag_extracted_from_last_output[1] !== tag_name && !multi_parser.Utils.in_array(tag_extracted_from_last_output[1], unformatted))) {\n                            multi_parser.print_newline(false, multi_parser.output);\n                        }\n                    }\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_SINGLE':\n                    // Don't add a newline before elements that should remain unformatted.\n                    var tag_check = multi_parser.token_text.match(/^\\s*<([a-z-]+)/i);\n                    if (!tag_check || !multi_parser.Utils.in_array(tag_check[1], unformatted)) {\n                        multi_parser.print_newline(false, multi_parser.output);\n                    }\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_HANDLEBARS_ELSE':\n                    // Don't add a newline if opening {{#if}} tag is on the current line\n                    var foundIfOnCurrentLine = false;\n                    for (var lastCheckedOutput = multi_parser.output.length - 1; lastCheckedOutput >= 0; lastCheckedOutput--) {\n                        if (multi_parser.output[lastCheckedOutput] === '\\n') {\n                            break;\n                        } else {\n                            if (multi_parser.output[lastCheckedOutput].match(/{{#if/)) {\n                                foundIfOnCurrentLine = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (!foundIfOnCurrentLine) {\n                        multi_parser.print_newline(false, multi_parser.output);\n                    }\n                    multi_parser.print_token(multi_parser.token_text);\n                    if (multi_parser.indent_content) {\n                        multi_parser.indent();\n                        multi_parser.indent_content = false;\n                    }\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_HANDLEBARS_COMMENT':\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'TAG';\n                    break;\n                case 'TK_CONTENT':\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'TAG';\n                    break;\n                case 'TK_STYLE':\n                case 'TK_SCRIPT':\n                    if (multi_parser.token_text !== '') {\n                        multi_parser.print_newline(false, multi_parser.output);\n                        var text = multi_parser.token_text,\n                            _beautifier,\n                            script_indent_level = 1;\n                        if (multi_parser.token_type === 'TK_SCRIPT') {\n                            _beautifier = typeof js_beautify === 'function' && js_beautify;\n                        } else if (multi_parser.token_type === 'TK_STYLE') {\n                            _beautifier = typeof css_beautify === 'function' && css_beautify;\n                        }\n\n                        if (options.indent_scripts === \"keep\") {\n                            script_indent_level = 0;\n                        } else if (options.indent_scripts === \"separate\") {\n                            script_indent_level = -multi_parser.indent_level;\n                        }\n\n                        var indentation = multi_parser.get_full_indent(script_indent_level);\n                        if (_beautifier) {\n\n                            // call the Beautifier if avaliable\n                            var Child_options = function() {\n                                this.eol = '\\n';\n                            };\n                            Child_options.prototype = options;\n                            var child_options = new Child_options();\n                            text = _beautifier(text.replace(/^\\s*/, indentation), child_options);\n                        } else {\n                            // simply indent the string otherwise\n                            var white = text.match(/^\\s*/)[0];\n                            var _level = white.match(/[^\\n\\r]*$/)[0].split(multi_parser.indent_string).length - 1;\n                            var reindent = multi_parser.get_full_indent(script_indent_level - _level);\n                            text = text.replace(/^\\s*/, indentation)\n                                .replace(/\\r\\n|\\r|\\n/g, '\\n' + reindent)\n                                .replace(/\\s+$/, '');\n                        }\n                        if (text) {\n                            multi_parser.print_token_raw(text);\n                            multi_parser.print_newline(true, multi_parser.output);\n                        }\n                    }\n                    multi_parser.current_mode = 'TAG';\n                    break;\n                default:\n                    // We should not be getting here but we don't want to drop input on the floor\n                    // Just output the text and move on\n                    if (multi_parser.token_text !== '') {\n                        multi_parser.print_token(multi_parser.token_text);\n                    }\n                    break;\n            }\n            multi_parser.last_token = multi_parser.token_type;\n            multi_parser.last_text = multi_parser.token_text;\n        }\n        var sweet_code = multi_parser.output.join('').replace(/[\\r\\n\\t ]+$/, '');\n\n        // establish end_with_newline\n        if (end_with_newline) {\n            sweet_code += '\\n';\n        }\n\n        if (eol !== '\\n') {\n            sweet_code = sweet_code.replace(/[\\n]/g, eol);\n        }\n\n        return sweet_code;\n    }\n\n    if (typeof define === \"function\" && define.amd) {\n        // Add support for AMD ( https://github.com/amdjs/amdjs-api/wiki/AMD#defineamd-property- )\n        define([\"require\", \"./beautify\", \"./beautify-css\"], function(requireamd) {\n            var js_beautify = requireamd(\"./beautify\");\n            var css_beautify = requireamd(\"./beautify-css\");\n\n            return {\n                html_beautify: function(html_source, options) {\n                    return style_html(html_source, options, js_beautify.js_beautify, css_beautify.css_beautify);\n                }\n            };\n        });\n    } else if (typeof exports !== \"undefined\") {\n        // Add support for CommonJS. Just put this file somewhere on your require.paths\n        // and you will be able to `var html_beautify = require(\"beautify\").html_beautify`.\n        var js_beautify = require('./beautify.js');\n        var css_beautify = require('./beautify-css.js');\n\n        exports.html_beautify = function(html_source, options) {\n            return style_html(html_source, options, js_beautify.js_beautify, css_beautify.css_beautify);\n        };\n    } else if (typeof window !== \"undefined\") {\n        // If we're running a web page and don't have either of the above, add our one global\n        window.html_beautify = function(html_source, options) {\n            return style_html(html_source, options, window.js_beautify, window.css_beautify);\n        };\n    } else if (typeof global !== \"undefined\") {\n        // If we don't even have window, try global.\n        global.html_beautify = function(html_source, options) {\n            return style_html(html_source, options, global.js_beautify, global.css_beautify);\n        };\n    }\n\n}());","'use strict';\n\n/**\n * An editor for displaying Media objects\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass MediaViewer extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(this.model instanceof HashBrown.Models.Media === false) {\n            this.model = new HashBrown.Models.Media(this.model);        \n        }\n\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        let mediaSrc = '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + this.model.id + '?width=800&t=' + Date.now();\n\n        return _.div({class: 'editor editor--media'},\n            _.div({class: 'editor__header'},\n                _.span({class: 'editor__header__icon fa fa-file-image-o'}),\n                _.h4({class: 'editor__header__title'},\n                    this.model.name,\n                    _.span({class: 'editor__header__title__appendix'},\n                        this.model.getContentTypeHeader()    \n                    )\n                )\n            ),\n            _.div({class: 'editor__body'},\n                _.if(this.model.isImage(),\n                    _.img({class: 'editor--media__preview', src: mediaSrc})\n                ),\n                _.if(this.model.isVideo(),\n                    _.video({class: 'editor--media__preview', controls: true},\n                        _.source({src: mediaSrc, type: this.model.getContentTypeHeader()})\n                    )\n                ),\n                _.if(this.model.isAudio(),\n                    _.audio({class: 'editor--media__preview', controls: true},\n                        _.source({src: mediaSrc, type: this.model.getContentTypeHeader()})\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = MediaViewer;\n","'use strict';\n\n/**\n * An editor for Users\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass UserEditor extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params.title = 'Settings for \"' + (params.model.fullName || params.model.username || params.model.email || params.model.id) + '\"';\n        params.actions = [\n            {\n                label: 'Save',\n                onClick: () => { this.onClickSave(); }\n            }\n        ];\n\n        params.autoFetch = false;\n\n        super(params);\n\n        HashBrown.Helpers.RequestHelper.customRequest('get', '/api/server/projects')\n        .then((projects) => {\n            this.projects = projects;\n\n            this.fetch();\n        });\n    }\n    \n    /**\n     * Event: Click save.\n     */\n    onClickSave() {\n        let newUserObject = this.model.getObject();\n\n        if(this.newPassword) {\n            newUserObject.password = this.newPassword;\n        }\n\n        HashBrown.Helpers.RequestHelper.request('post', 'user/' + this.model.id, newUserObject)\n        .then(() => {\n            this.close();\n\n            this.trigger('save', this.model);\n        })\n        .catch(UI.errorModal);\n    }\n     \n    /**\n     * Renders the username editor\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderUserNameEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.username,\n            placeholder: 'Input the username here',\n            onChange: (newValue) => {\n                this.model.username = newValue;\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders the scopes editor\n     *\n     * @param {String} project\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderScopesEditor(project) {\n        return new HashBrown.Views.Widgets.Dropdown({\n            value: this.model.getScopes(project),\n            useMultiple: true,\n            placeholder: '(no scopes)',\n            options: [\n                'connections',\n                'schemas'\n            ],\n            onChange: (newValue) => {\n                this.model.scopes[project] = newValue;\n\n                this.fetch();\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders the full name editor\n     *\n     * @return {HTMLElement} Element\n     */\n    renderFullNameEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.fullName,\n            onChange: (newValue) => {\n                this.model.fullName = newValue;\n            }\n        }).$element;\n    }\n    \n    /**\n     * Renders the email editor\n     *\n     * @return {HTMLElement} Element\n     */\n    renderEmailEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.email,\n            onChange: (newValue) => {\n                this.model.email = newValue;\n            }\n        }).$element;\n    }\n    \n    /**\n     * Renders the password\n     *\n     * @return {HTMLElement} Element\n     */\n    renderPasswordEditor() {\n        let password1;\n        let password2;\n\n        let onChange = () => {\n            let isMatch = password1 == password2;\n            let isLongEnough = password1 && password1.length > 3;\n            let isValid = isMatch && isLongEnough;\n\n            this.$element.find('.modal__footer .widget--button').toggleClass('disabled', !isValid);\n\n            let $passwordWarning = this.$element.find('.editor--user__password-warning');\n\n            if(isValid) {\n                this.newPassword = password1;\n\n                $passwordWarning.hide();\n            \n            } else {\n                $passwordWarning.show();\n                \n                this.newPassword = null;\n\n                if(!isMatch) {\n                    $passwordWarning.html('Passwords do not match');\n                } else if(!isLongEnough) {\n                    $passwordWarning.html('Passwords are too short');\n                }\n            }\n        }\n\n        return _.div({class: 'widget-group'},\n            new HashBrown.Views.Widgets.Input({\n                placeholder: 'Type new password',\n                type: 'password',\n                onChange: (newValue) => {\n                    password1 = newValue;\n\n                    onChange();\n                }\n            }).$element,\n            new HashBrown.Views.Widgets.Input({\n                placeholder: 'Confirm new password',\n                type: 'password',\n                onChange: (newValue) => {\n                    password2 = newValue;\n\n                    onChange();\n                }\n            }).$element\n        );\n    }\n    \n    /**\n     * Renders the admin editor\n     *\n     * @return {HTMLElement} Element\n     */\n    renderAdminEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            type: 'checkbox',\n            value: this.model.isAdmin == true,\n            onChange: (newValue) => {\n                this.model.isAdmin = newValue;\n\n                setTimeout(() => {\n                    this.fetch();\n                }, 300);\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders a single field\n     *\n     * @return {HTMLElement} Element\n     */\n    renderField(label, $content) {\n        return _.div({class: 'widget-group'},\n            _.div({class: 'widget widget--label'},\n                label\n            ),\n            $content\n        );\n    }\n    \n    /**\n     * Renders this editor\n     */\n    renderBody() {\n        return [\n            this.renderField('Username', this.renderUserNameEditor()),\n            this.renderField('Full name', this.renderFullNameEditor()),\n            this.renderField('Email', this.renderEmailEditor()),\n            this.renderField('Password', this.renderPasswordEditor()),\n            _.div({class: 'widget widget--label warning hidden editor--user__password-warning'}),\n\n            _.if(currentUserIsAdmin() && !this.hidePermissions,\n                this.renderField('Is admin', this.renderAdminEditor()),\n\n                _.if(!this.model.isAdmin,\n                    _.div({class: 'widget widget--separator'}, 'Projects'),\n                    _.each(this.projects, (i, project) => {\n                        return _.div({class: 'widget-group'},\n                            new HashBrown.Views.Widgets.Input({\n                                type: 'checkbox',\n                                value: this.model.hasScope(project.id),\n                                onChange: (newValue) => {\n                                    if(newValue) {\n                                        this.model.giveScope(project.id);\n                                    } else {\n                                        this.model.removeScope(project.id);\n                                    }\n                                }\n                            }).$element,\n                            _.div({class: 'widget widget--label'}, project.settings.info.name),\n                            this.renderScopesEditor(project.id)\n                        );\n                    })\n                )\n            )\n        ];\n    }\n}\n\nmodule.exports = UserEditor;\n","'use strict';\n\n// Icons\nlet icons = require('../../icons.json').icons;\n\n/**\n * The editor for schemas\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass SchemaEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n        \n        this.fetch();\n    }\n    \n    /**\n     * Event: Click advanced. Routes to the JSON editor\n     */\n    onClickAdvanced() {\n        location.hash = location.hash.replace('/schemas/', '/schemas/json/');\n    }\n    \n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        if(this.jsonEditor && this.jsonEditor.isValid == false) {\n            return;\n        }\n\n        this.$saveBtn.toggleClass('working', true);\n\n        HashBrown.Helpers.RequestHelper.request('post', 'schemas/' + Crisp.Router.params.id, this.model)\n        .then((schema) => {\n            this.$saveBtn.toggleClass('working', false);\n        \n            return HashBrown.Helpers.RequestHelper.reloadResource('schemas');\n        })\n        .then(() => {\n            Crisp.View.get('NavbarMain').reload();\n\n            // If id changed, change the hash\n            if(Crisp.Router.params.id != this.model.id) {\n                location.hash = '/schemas/' + this.model.id;\n            }\n        })\n        .catch((e) => {\n            UI.errorModal(e);\n        \n            this.$saveBtn.toggleClass('working', false);\n        });\n    }\n\n    /**\n     * Renders the icon editor\n     *  \n     * @return {Object} element\n     */\n    renderIconEditor() {\n        return _.button({class: 'widget small widget--button fa fa-' + this.getIcon()})\n            .click((e) => {\n                let modal = new HashBrown.Views.Modals.IconModal();\n\n                modal.on('change', (newIcon) => {\n                    this.model.icon = newIcon;\n\n                    e.currentTarget.className = 'widget small widget--button fa fa-' + this.model.icon;\n                });\n            });\n    }\n\n    /**\n     * Renders a single field\n     *\n     * @param {String} label\n     * @param {HTMLElement} content\n     * @param {Boolean} isVertical\n     * @param {Boolean} isLocked\n     *\n     * @return {HTMLElement} Editor element\n     */\n    renderField(label, $content, isVertical, isLocked) {\n        if(!$content) { return; }\n\n        return _.div({class: 'editor__field ' + (isVertical ? 'vertical' : '')},\n            _.div({class: 'editor__field__key'},\n                label\n            ),\n            _.div({class: 'editor__field__value'},\n                _.if(isLocked,\n                    _.input({class: 'editor__field__value__lock', title: 'Only edit this field if you know what you\\'re doing', type: 'checkbox', checked: true})\n                ),\n                $content\n            )\n        );\n    }\n\n    /**\n     * Renders all fields\n     *\n     * @return {Object} element\n     */\n    renderFields() {\n        let id = parseInt(this.model.id);\n\n        let $element = _.div({class: 'editor__body'});\n        \n        $element.empty();\n        \n        $element.append(this.renderField('Id', new HashBrown.Views.Widgets.Input({\n            value: this.model.id,\n            onChange: (newValue) => { this.model.id = newValue; }\n        }).$element, false, true)); \n\n        $element.append(this.renderField('Name', new HashBrown.Views.Widgets.Input({\n            value: this.model.name,\n            onChange: (newValue) => { this.model.name = newValue; }\n        }).$element)); \n\n        $element.append(this.renderField('Icon', this.renderIconEditor()));   \n\n        $element.append(this.renderField('Parent', new HashBrown.Views.Widgets.Dropdown({\n            value: this.model.parentSchemaId,\n            options: resources.schemas,\n            valueKey: 'id',\n            labelKey: 'name',\n            disabledOptions: [ { id: this.model.id, name: this.model.name } ],\n            onChange: (newParent) => {\n                this.model.parentSchemaId = newParent;\n\n                this.fetch();\n            }\n        }).$element));\n        \n\n        return $element;\n    }\n\n    /**\n     * Gets the schema icon\n     *\n     * @returns {String} Icon\n     */\n    getIcon() {\n        if(this.model.icon) {\n            return this.model.icon;\n        }\n\n        if(this.parentSchema && this.parentSchema.icon) {\n            return this.parentSchema.icon;\n        }\n\n        return 'cogs';\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--schema' + (this.model.isLocked ? ' locked' : '')},\n            _.div({class: 'editor__header'},\n                _.span({class: 'editor__header__icon fa fa-' + this.getIcon()}),\n                _.h4({class: 'editor__header__title'}, this.model.name)\n            ),\n            this.renderFields(),\n            _.div({class: 'editor__footer'}, \n                _.div({class: 'editor__footer__buttons'},\n                    _.button({class: 'widget widget--button embedded'},\n                        'Advanced'\n                    ).click(() => { this.onClickAdvanced(); }),\n                    _.if(!this.model.isLocked,\n                        this.$saveBtn = _.button({class: 'widget widget--button editor__footer__buttons__save'},\n                            _.span({class: 'widget--button__text-default'}, 'Save '),\n                            _.span({class: 'widget--button__text-working'}, 'Saving ')\n                        ).click(() => { this.onClickSave(); })\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = SchemaEditor;\n","'use strict';\n\n/**\n * The editor for Content Schemas\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass ContentSchemaEditor extends HashBrown.Views.Editors.SchemaEditor {\n    /**\n     * Gets parent tabs\n     *\n     * @returns {Object} Parent tabs\n     */\n    getParentTabs() {\n        if(!this.parentSchema) {\n            return {};\n        }\n\n        return this.parentSchema.tabs;\n    }\n\n    /**\n     * Gets all tabs\n     *\n     * @returns {Object} All tabs\n     */\n    getAllTabs() {\n        let allTabs = {};\n        let parentTabs = this.getParentTabs();\n\n        for(let tabId in parentTabs) {\n            allTabs[tabId] = parentTabs[tabId];\n        }\n        \n        for(let tabId in this.model.tabs) {\n            allTabs[tabId] = this.model.tabs[tabId];\n        }\n\n        return allTabs;\n    }\n    \n    /**\n     * Gets parent properties\n     *\n     * @param {String} tabId\n     *\n     * @returns {Object} Parent properties\n     */\n    getParentProperties(tabId) {\n        let parentProperties = {};\n        \n        if(!this.parentSchema) { return parentProperties; }\n\n        for(let key in this.parentSchema.fields.properties) {\n            // If a tab is specified, we only want properties in this tab\n            if(tabId && this.parentSchema.fields.properties[key].tabId !== tabId) { continue; }\n\n            parentProperties[key] = this.parentSchema.fields.properties[key];\n        }\n\n        return parentProperties;\n    }\n\n    /**\n     * Renders the editor fields\n     */\n    renderFields() {\n        let $element = super.renderFields();\n\n        // Allowed child Schemas\n        $element.append(this.renderField('Allowed child Schemas', new HashBrown.Views.Widgets.Dropdown({\n            options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('content'),\n            value: this.model.allowedChildSchemas,\n            labelKey: 'name',\n            valueKey: 'id',\n            useMultiple: true,\n            useClearButton: true,\n            useTypeAhead: true,\n            onChange: (newValue) => {\n                this.model.allowedChildSchemas = newValue;\n            }\n        }).$element));\n        \n        // Default tab\n        let defaultTabEditor = new HashBrown.Views.Widgets.Dropdown({\n            options: this.getAllTabs(),\n            useClearButton: true,\n            value: this.model.defaultTabId,\n            onChange: (newValue) => {\n                this.model.defaultTabId = newValue;\n            }\n        });\n\n        if(!this.model.defaultTabId && this.parentSchema) {\n            this.model.defaultTabId = this.parentSchema.defaultTabId;\n        }\n        \n        $element.append(this.renderField('Default tab', defaultTabEditor.$element));\n        \n        // Tabs\n        $element.append(this.renderField('Tabs', new HashBrown.Views.Widgets.Chips({\n            disabledValue: Object.values(this.getParentTabs()),\n            value: Object.values(this.model.tabs),\n            placeholder: 'New tab',\n            onChange: (newValue) => {\n                let newTabs = {};\n\n                for(let tab of newValue) {\n                    newTabs[tab.toLowerCase().replace(/[^a-zA-Z]/g, '')] = tab;\n                }\n                \n                this.model.tabs = newTabs;\n\n                defaultTabEditor.options = this.getAllTabs();\n                defaultTabEditor.fetch();\n\n                renderFieldProperties();\n            }\n        }).$element));\n       \n        // Field properties\n        let $tabs = _.div({class: 'editor--schema__tabs'});\n        let $fieldProperties = _.div({class: 'editor__field'});\n        let $parentFieldProperties = _.div({class: 'editor__field editor--schema__parent-field-properties'});\n        \n        $element.append($tabs);\n        $element.append($parentFieldProperties);\n        $element.append($fieldProperties);\n\n        let renderFieldProperties = () => {\n            // Render tabs\n            if(!this.currentTab) {\n                this.currentTab = Object.keys(this.getAllTabs())[0] || 'meta';\n            }\n       \n            _.append($tabs.empty(),\n                _.each(this.getAllTabs(), (id, name) => {\n                    return _.button({class: 'editor--schema__tab' + (this.currentTab === id ? ' active' : '')}, name)\n                        .click(() => {\n                            this.currentTab = id;\n                    \n                            renderFieldProperties();\n                        });\n                }),\n                _.button({class: 'editor--schema__tab' + (this.currentTab === 'meta' ? ' active' : '')}, 'meta')\n                    .click(() => {\n                        this.currentTab = 'meta';\n                    \n                        renderFieldProperties();\n                    })\n            );\n\n            // Render parent Schema's field properties\n            _.append($parentFieldProperties.empty(),\n                _.if(Object.keys(this.getParentProperties(this.currentTab)).length > 0,\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Parent properties'),\n                        _.div({class: 'editor__field__key__description'}, 'Properties that are inherited and can be changed if you add them to this Schema')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        _.each(this.getParentProperties(this.currentTab), (fieldKey, fieldValue) => {\n                            if(this.model.fields.properties[fieldKey]) { return; }\n\n                            return _.button({class: 'widget widget--button condensed', title: 'Change the \"' + (fieldValue.label || fieldKey) + '\" property for this Schema'}, _.span({class: 'fa fa-plus'}), fieldValue.label || fieldKey)\n                                .click(() => {\n                                    let newProperties = {};\n\n                                    newProperties[fieldKey] = JSON.parse(JSON.stringify(fieldValue));\n\n                                    for(let key in this.model.fields.properties) {\n                                        newProperties[key] = this.model.fields.properties[key];\n                                    }\n\n                                    this.model.fields.properties = newProperties;\n\n                                    renderFieldProperties();\n                                });\n                        })\n                    )\n                )\n            );\n\n            // Render this Schema's fields\n            _.append($fieldProperties.empty(),\n                _.div({class: 'editor__field__key'},\n                    _.div({class: 'editor__field__key__label'}, 'Properties'),\n                    _.div({class: 'editor__field__key__description'}, 'This Schema\\'s own properties'),\n                    _.div({class: 'editor__field__key__actions'},\n                        _.button({class: 'editor__field__key__action editor__field__key__action--sort'})\n                            .click((e) => {\n                                HashBrown.Helpers.UIHelper.fieldSortableObject(\n                                    this.model.fields.properties,\n                                    $(e.currentTarget).parents('.editor__field')[0],\n                                    (newProperties) => {\n                                        this.model.fields.properties = newProperties;\n                                    }\n                                );\n                            })\n                    )\n                ),\n                _.div({class: 'editor__field__value segmented'},\n                    _.each(this.model.fields.properties, (fieldKey, fieldValue) => {\n                        if(!fieldValue) { return; }\n\n                        let isValidTab = !!this.getAllTabs()[fieldValue.tabId];\n\n                        if(isValidTab && fieldValue.tabId !== this.currentTab) { return; }\n                        if(!isValidTab && this.currentTab !== 'meta') { return; }\n\n                        let $field = _.div({class: 'editor__field'});\n\n                        // Sanity check\n                        fieldValue.config = fieldValue.config || {};\n                        fieldValue.schemaId = fieldValue.schemaId || 'array';\n\n                        let renderField = () => {\n                            _.append($field.empty(),\n                                _.div({class: 'editor__field__sort-key'},\n                                    fieldKey\n                                ),\n                                _.div({class: 'editor__field__value'},\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Tab'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Dropdown({\n                                                useClearButton: true,\n                                                options: this.getAllTabs(),\n                                                value: fieldValue.tabId,\n                                                onChange: (newValue) => {\n                                                    fieldValue.tabId = newValue;\n\n                                                    renderFieldProperties();\n                                                }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Key'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Input({\n                                                type: 'text',\n                                                placeholder: 'A variable name, e.g. \"myField\"',\n                                                tooltip: 'The field variable name',\n                                                value: fieldKey,\n                                                onChange: (newKey) => {\n                                                    if(!newKey) { return; }\n\n                                                    let newProperties = {};\n\n                                                    // Insert the changed key into the correct place in the object\n                                                    for(let key in this.model.fields.properties) {\n                                                        if(key === fieldKey) {\n                                                            newProperties[newKey] = this.model.fields.properties[fieldKey];\n                                                        \n                                                        } else {\n                                                            newProperties[key] = this.model.fields.properties[key];\n\n                                                        }\n                                                    }\n\n                                                    // Change internal reference to new key\n                                                    fieldKey = newKey;\n\n                                                    // Reassign the properties object\n                                                    this.model.fields.properties = newProperties;\n\n                                                    // Update the sort key\n                                                    $field.find('.editor__field__sort-key').html(fieldKey);\n                                                }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Label'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Input({\n                                                type: 'text',\n                                                placeholder: 'A label, e.g. \"My field\"',\n                                                tooltip: 'The field label',\n                                                value: fieldValue.label,\n                                                onChange: (newValue) => { fieldValue.label = newValue; }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Description'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Input({\n                                                type: 'text',\n                                                placeholder: 'A description',\n                                                tooltip: 'The field description',\n                                                value: fieldValue.description,\n                                                onChange: (newValue) => { fieldValue.description = newValue; }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Multilingual'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Input({\n                                                type: 'checkbox',\n                                                tooltip: 'Whether or not this field should support multiple languages',\n                                                value: fieldValue.multilingual || false,\n                                                onChange: (newValue) => { fieldValue.multilingual = newValue; }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Schema'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Dropdown({\n                                                useTypeAhead: true,\n                                                options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('field'),\n                                                value: fieldValue.schemaId,\n                                                labelKey: 'name',\n                                                valueKey: 'id',\n                                                onChange: (newValue) => {\n                                                    fieldValue.schemaId = newValue;\n\n                                                    renderField();\n                                                }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.do(() => {\n                                        let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(fieldValue.schemaId);\n\n                                        if(!schema) { return; }\n\n                                        let editor = HashBrown.Views.Editors.FieldEditors[schema.editorId];\n\n                                        if(!editor) { return; }\n\n                                        fieldValue.config = fieldValue.config || {};\n\n                                        return editor.renderConfigEditor(fieldValue.config);\n                                    })\n                                ),\n                                _.div({class: 'editor__field__actions'},\n                                    _.button({class: 'editor__field__action editor__field__action--remove', title: 'Remove field'})\n                                        .click(() => {\n                                            delete this.model.fields.properties[fieldKey];\n\n                                            renderFieldProperties();\n                                        })\n                                )\n                            );\n                        };\n\n                        renderField();\n\n                        return $field;\n                    }),\n                    _.button({title: 'Add a Content property', class: 'editor__field__add widget widget--button round fa fa-plus'})\n                        .click(() => {\n                            if(this.model.fields.properties.newField) { return; }\n\n                            this.model.fields.properties.newField = {\n                                label: 'New field',\n                                schemaId: 'array',\n                                tabId: this.currentTab\n\n                            };\n\n                            renderFieldProperties();\n                        })\n                )\n            );\n        };\n\n        renderFieldProperties();\n\n        return $element;\n    }\n}\n\nmodule.exports = ContentSchemaEditor;\n","'use strict';\n\n/**\n * The editor for field Schemas\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass FieldSchemaEditor extends HashBrown.Views.Editors.SchemaEditor {\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(!this.model.editorId && this.parentSchema) { \n            this.model.editorId = this.parentSchema.editorId;\n        }\n    }\n\n    /**\n     * Renders the field config editor\n     *\n     * @returns {HTMLElement} Editor element\n     */\n    renderFieldConfigEditor() {\n        let editor = HashBrown.Views.Editors.FieldEditors[this.model.editorId];\n\n        if(!editor) { return; }\n\n        return _.div({class: 'config'},\n            editor.renderConfigEditor(this.model.config, this.model.id)\n        );\n    }\n\n    /**\n     * Renders the editor fields\n     */\n    renderFields() {\n        let $element = super.renderFields();\n        \n        $element.append(this.renderField('Field editor', new HashBrown.Views.Widgets.Dropdown({\n            useTypeahead: true,\n            value: this.model.editorId,\n            options: HashBrown.Views.Editors.FieldEditors,\n            valueKey: 'name',\n            labelKey: 'name',\n            onChange: (newEditor) => {\n                this.model.editorId = newEditor;\n\n                this.fetch();\n            }\n        }).$element));\n        \n        $element.append(this.renderField('Config', this.renderFieldConfigEditor(), true));\n\n        return $element;\n    }\n}\n\nmodule.exports = FieldSchemaEditor;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Editors.FieldEditors\n */\nnamespace('Views.Editors.FieldEditors')\n.add(require('./FieldEditor'))\n.add(require('./ArrayEditor'))\n.add(require('./BooleanEditor'))\n.add(require('./ContentReferenceEditor'))\n.add(require('./ContentSchemaReferenceEditor'))\n.add(require('./DateEditor'))\n.add(require('./DropdownEditor'))\n.add(require('./LanguageEditor'))\n.add(require('./MediaReferenceEditor'))\n.add(require('./NumberEditor'))\n.add(require('./ResourceReferenceEditor'))\n.add(require('./RichTextEditor'))\n.add(require('./StringEditor'))\n.add(require('./StructEditor'))\n.add(require('./TagsEditor'))\n.add(require('./UrlEditor'));\n","'use strict';\n\n/**\n * The base for all field editors\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass FieldEditor extends Crisp.View {\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        return null;\n    }\n\n    /**\n     * Renders key actions\n     *\n     * @returns {HTMLElement} Actions\n     */\n    renderKeyActions() {}\n\n    /**\n     * Post render\n     */\n    postrender() {\n        if(!this.$keyActions) { return; }\n\n        _.append(this.$keyActions.empty(),\n            this.renderKeyActions()\n        );\n    }\n}\n\nmodule.exports = FieldEditor;\n","'use strict';\n\n/**\n * An array editor for editing a list of other field values\n *\n * @description Example:\n * <pre>\n * {\n *     \"myArray\": {\n *         \"label\": \"My array\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"array\",\n *         \"config\": {\n *             \"allowedSchemas\": [ \"string\", \"mediaReference\", \"myCustomSchema\" ],\n *             \"minItems\": 5,\n *             \"maxItems\": 5\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass ArrayEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n   \n    /**\n     * Render key actions\n     *\n     * @returns {HTMLElement} Actions\n     */\n    renderKeyActions() {\n        if(!this.value || this.value.length < 1 || this.config.useGrid) { return; }\n\n        return [\n            _.button({class: 'editor__field__key__action editor__field__key__action--sort'})\n                .click((e) => {\n                    HashBrown.Helpers.UHashBrown.Helpers.IHelper.fieldSortableArray(\n                        this.value,\n                        $(e.currentTarget).parents('.editor__field')[0],\n                        (newArray) => {\n                            this.value = newArray;\n\n                            this.trigger('change', this.value);\n                        }\n                    );\n                }),\n            _.button({class: 'editor__field__key__action editor__field__key__action--collapse'}, 'Collapse all')\n                .click((e) => {\n                    Array.from(this.element.children).forEach((field) => {\n                        field.classList.toggle('collapsed', true);\n                    });\n                }),\n            _.button({class: 'editor__field__key__action editor__field__key__action--expand'}, 'Expand all')\n                .click((e) => {\n                    Array.from(this.element.children).forEach((field) => {\n                        field.classList.toggle('collapsed', false);\n                    });\n                })\n        ];\n    }\n\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Min items'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'number',\n                        min: 0,\n                        step: 1,\n                        tooltip: 'How many items are required in this array (0 is unlimited)',\n                        value: config.minItems || 0,\n                        onChange: (newValue) => { config.minItems = newValue; }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Max items'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'number',\n                        min: 0,\n                        step: 1,\n                        tooltip: 'How many items are allowed in this array (0 is unlimited)',\n                        value: config.maxItems || 0,\n                        onChange: (newValue) => { config.maxItems = newValue; }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Allowed Schemas'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Dropdown({\n                        useMultiple: true,\n                        useTypeAhead: true,\n                        labelKey: 'name',\n                        valueKey: 'id',\n                        value: config.allowedSchemas,\n                        useClearButton: true,\n                        options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('field'),\n                        onChange: (newValue) => { config.allowedSchemas = newValue; }\n                    }).$element\n                )\n            )\n        ];\n    }\n\n    /**\n     * Sanity check\n     */\n    sanityCheck() {\n        // The value was null\n        if(!this.value) { this.value = []; }\n\n        // Config\n        this.config = this.config || {};\n\n        // Sanity check for allowed Schemas array\n        this.config.allowedSchemas = this.config.allowedSchemas || [];\n        \n        // The value was not an array, recover the items\n        if(!Array.isArray(this.value)) {\n            debug.log('Restructuring array from old format...', this);\n\n            // If this value isn't using the old system, we can't recover it\n            if(!Array.isArray(this.value.items) || !Array.isArray(this.value.schemaBindings)) {\n                return UI.errorModal(new Error('The type \"' + typeof this.value + '\" of the value is incorrect or corrupted'));\n            }\n\n            let newItems = [];\n\n            // Restructure \"items\" array into objects\n            for(let i in this.value.items) {\n                newItems[i] = {\n                    value: this.value.items[i]\n                };\n            \n                // Try to get the Schema id\n                if(this.value.schemaBindings[i]) {\n                    newItems[i].schemaId = this.value.schemaBindings[i];\n\n                // If we couldn't find it, just use the first allowed Schema\n                } else {\n                    newItems[i].schemaId = this.config.allowedSchemas[0];\n\n                }\n            }\n\n            this.value = newItems;\n    \n            setTimeout(() => {\n                this.trigger('silentchange', this.value);\n            }, 500);\n        }\n\n        // The value was below the required amount\n        if(this.value.length < this.config.minItems) {\n            let diff = this.config.minItems - this.value.length;\n\n            for(let i = 0; i < diff; i++) {\n                this.value.push({ value: null, schemaId: null });\n            }\n        }\n\n        // The value was above the required amount\n        if(this.value.length > this.config.maxItems) {\n            for(let i = this.config.maxItems; i < this.value.length; i++) {\n                delete this.value[i];\n            }\n        }\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        this.sanityCheck();\n    }\n\n    /**\n     * Gets the label of an item\n     *\n     * @param {Object} item\n     * @param {Schema} schema\n     *\n     * @return {String} Label\n     */\n    getItemLabel(item, schema) {\n        if(schema.config) {\n            if(schema.config.label && item.value && item.value[schema.config.label]) {\n                return item.value[schema.config.label];\n            }\n        }\n\n        if(item.value !== null && item.value !== undefined && typeof item.value === 'string' || typeof item.value === 'number') {\n            return item.value;\n        }\n\n        return schema.name;\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value segmented ' + (this.config.useGrid ? 'grid' : '')},\n            _.each(this.value, (i, item) => {\n                // Render field\n                let $field = _.div({class: 'editor__field'});\n\n                let renderField = () => {\n                    let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(item.schemaId);\n\n                    // Schema could not be found, assign first allowed Schema\n                    if(!schema || this.config.allowedSchemas.indexOf(item.schemaId) < 0) {\n                        item.schemaId = this.config.allowedSchemas[0];\n                    \n                        schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(item.schemaId);\n                    }\n\n                    if(!schema) {\n                        UI.errorModal(new Error('Item #' + i + ' has no available Schemas'));\n                        $field = null;\n                        return;\n                    }\n\n                    // Obtain the field editor\n                    if(schema.editorId.indexOf('Editor') < 0) {\n                        schema.editorId = schema.editorId[0].toUpperCase() + schema.editorId.substring(1) + 'Editor';\n                    }\n                    \n                    let editorClass = HashBrown.Views.Editors.FieldEditors[schema.editorId];\n\n                    if(!editorClass) {\n                        UI.errorModal(new Error('The field editor \"' + schema.editorId + '\" for Schema \"' + schema.name + '\" was not found'));    \n                        $field = null;\n                        return;\n                    }\n                    \n                    // Perform sanity check on item value\n                    item.value = HashBrown.Helpers.ContentHelper.fieldSanityCheck(item.value, schema);\n\n                    // Init the field editor\n                    let editorInstance = new editorClass({\n                        value: item.value,\n                        config: schema.config,\n                        schema: schema\n                    });\n\n                    // Hook up the change event\n                    editorInstance.on('change', (newValue) => {\n                        item.value = newValue;\n                    });\n                    \n                    editorInstance.on('silentchange', (newValue) => {\n                        item.value = newValue;\n                    });\n\n                    // Render Schema picker\n                    if(this.config.allowedSchemas.length > 1) {\n                        editorInstance.$element.prepend(\n                            _.div({class: 'editor__field'},\n                                _.div({class: 'editor__field__key'}, 'Schema'),\n                                _.div({class: 'editor__field__value'},\n                                    new HashBrown.Views.Widgets.Dropdown({\n                                        value: item.schemaId,\n                                        placeholder: 'Schema',\n                                        valueKey: 'id',\n                                        labelKey: 'name',\n                                        iconKey: 'icon',\n                                        options: resources.schemas.filter((schema) => {\n                                            return this.config.allowedSchemas.indexOf(schema.id) > -1;\n                                        }),\n                                        onChange: (newSchemaId) => {\n                                            item.schemaId = newSchemaId;\n                                            item.value = null;\n                                            \n                                            renderField();\n\n                                            this.trigger('change', this.value);\n                                        }\n                                    }).$element\n                                )\n                            )\n                        );\n                    }\n                \n                    _.append($field.empty(),\n                        _.div({class: 'editor__field__sort-key'}, this.getItemLabel(item, schema)),\n                        editorInstance.$element,\n                        _.div({class: 'editor__field__actions'},\n                            _.if(!this.config.useGrid,\n                                _.button({class: 'editor__field__action editor__field__action--collapse', title: 'Collapse/expand item'})\n                                    .click(() => {\n                                        $field.toggleClass('collapsed');\n                                    })\n                            ),\n                            _.button({class: 'editor__field__action editor__field__action--remove', title: 'Remove item'})\n                                .click(() => {\n                                    this.value.splice(i, 1);\n                            \n                                    this.trigger('change', this.value);\n\n                                    this.fetch();\n                                })\n                        )\n                    );\n                };\n\n                renderField();\n\n                return $field;\n            }),\n            _.button({title: 'Add an item', class: 'editor__field__add widget widget--button round fa fa-plus'})\n                .click(() => {\n                    let index = this.value.length;\n\n                    if(this.config.maxItems && index >= this.config.maxItems) {\n                        UI.messageModal('Item maximum reached', 'You  can maximum add ' + this.config.maxItems + ' items here');\n                        return;\n                    }\n\n                    this.value[index] = { value: null, schemaId: null };\n\n                    this.trigger('change', this.value);\n\n                    // Restore the scroll position with 100ms delay\n                    HashBrown.Views.Editors.ContentEditor.restoreScrollPos(100);\n                    \n                    this.fetch();\n                })\n        );\n    }    \n}\n\nmodule.exports = ArrayEditor;\n","'use strict';\n\n/**\n * A simple boolean editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myBoolean\": {\n *         \"label\": \"My boolean\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"boolean\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass BooleanEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        // Sanity check\n        if(typeof this.value === 'undefined') {\n            this.value = false;\n        \n        } else if(typeof this.value === 'string') {\n            this.value = this.value == 'true';\n\n        } else if(typeof this.value !== 'boolean') {\n            this.value = false\n\n        }\n\n        // Just to make sure the model has the right type of value\n        setTimeout(() => {\n            this.trigger('silentchange', this.value);\n        }, 20);\n        \n        this.fetch();\n    }\n\n    /**\n     * Render this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value field-editor--boolean'},\n            new HashBrown.Views.Widgets.Input({\n                type: 'checkbox',\n                value: this.value,\n                tooltip: this.description || '',\n                onChange: (newValue) => {\n                    this.value = newValue;\n                    \n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = BooleanEditor;\n","'use strict';\n\n/**\n * An editor for referring to other Content\n *\n * @description Example:\n * <pre>\n * {\n *     \"myContentReference\": {\n *         \"label\": \"My content reference\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"contentReference\",\n *         \"config\": {\n *            \"allowedSchemas\": [ \"page\", \"myCustomSchema\" ]\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass ContentReferenceEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Change value\n     */\n    onChange(newValue) {\n        this.value = newValue;\n\n        this.trigger('change', this.value);\n    }\n\n    /**\n     * Gets a list of allowed Content options\n     *\n     * @returns {Array} List of options\n     */\n    getDropdownOptions() {\n        let allowedContent = [];\n        let areRulesDefined = this.config && Array.isArray(this.config.allowedSchemas) && this.config.allowedSchemas.length > 0;\n\n        for(let content of resources.content) {\n            if(areRulesDefined) {\n                let isContentAllowed = this.config.allowedSchemas.indexOf(content.schemaId) > -1;\n                \n                if(!isContentAllowed) { continue; }\n            }\n\n            allowedContent[allowedContent.length] = {\n                title: content.prop('title', window.language) || content.id,\n                id: content.id\n            };\n        }\n\n        return allowedContent;\n    }\n\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        config.allowedSchemas = config.allowedSchemas || [];\n        \n        return _.div({class: 'editor__field'},\n            _.div({class: 'editor__field__key'}, 'Allowed Schemas'),\n            _.div({class: 'editor__field__value'},\n                new HashBrown.Views.Widgets.Dropdown({\n                    options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('content'),\n                    useMultiple: true,\n                    value: config.allowedSchemas,\n                    useClearButton: true,\n                    valueKey: 'id',\n                    labelKey: 'name',\n                    onChange: (newValue) => {\n                        config.allowedSchemas = newValue;\n                    }\n                }).$element\n            )\n        );\n    }\n\n    /**\n     * Render this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'}, [\n            new HashBrown.Views.Widgets.Dropdown({\n                value: this.value,\n                options: this.getDropdownOptions(),\n                useTypeAhead: true,\n                valueKey: 'id',\n                useClearButton: true,\n                tooltip: this.description || '',\n                labelKey: 'title',\n                onChange: (newValue) => {\n                    this.value = newValue;\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        ]);\n    }\n}\n\nmodule.exports = ContentReferenceEditor;\n","'use strict';\n\n/**\n * An editor for referencing Content Schemas\n *\n * @descripton Example:\n * <pre>\n * {\n *     \"myContentSchemaReference\": {\n *         \"label\": \"My content schema reference\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"contentSchemaReference\",\n *         \"config\": {\n *             \"allowedSchemas\": \"fromParent\" || [ \"myCustomSchema\" ]\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass ContentSchemaReferenceEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n       \n        // Adopt allowed Schemas from parent if applicable\n        let parentSchema = this.getParentSchema();\n\n        if(parentSchema && this.config && this.config.allowedSchemas == 'fromParent') {\n            this.config.allowedSchemas = parentSchema.allowedChildSchemas;                            \n        }\n\n        this.fetch();\n    }\n\n    /**\n     * Gets the parent Schema\n     *\n     * @returns {Schema} Parentn Schema\n     */\n    getParentSchema() {\n        // Return config parent Schema if available\n        if(this.config.parentSchema) { return this.config.parentSchema; }\n\n        // Fetch current ContentEditor\n        let contentEditor = Crisp.View.get('ContentEditor');\n\n        if(!contentEditor) { return null; }\n\n        // Fetch current Content model\n        let thisContent = contentEditor.model;\n\n        if(!thisContent) { return null; }\n        \n        // Fetch parent Content\n        if(!thisContent.parentId) { return null; }\n        \n        let parentContent = HashBrown.Helpers.ContentHelper.getContentByIdSync(thisContent.parentId);\n\n        if(!parentContent) {\n            UI.errorModal(new Error('Content by id \"' + thisContent.parentId + '\" not found'));\n            return null;\n        }\n\n        // Fetch parent Schema\n        let parentSchema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(parentContent.schemaId);\n            \n        if(!parentSchema) {\n            UI.errorModal(new Error('Schema by id \"' + parentContent.schemaId + '\" not found'));\n            return null;\n        }\n\n        // Return parent Schema\n        return parentSchema;\n    }\n\n    /**\n     * Gets schema types\n     *\n     * @returns {Array} List of options\n     */\n    getDropdownOptions() {\n        let contentSchemas = [];\n\n        for(let i in window.resources.schemas) {\n            let schema = window.resources.schemas[i];\n            let isNative = schema.id == 'page' || schema.id == 'contentBase';\n\n            if(\n                schema.type == 'content' &&\n                !isNative &&\n                (\n                    !this.config ||\n                    !this.config.allowedSchemas ||\n                    !Array.isArray(this.config.allowedSchemas) ||\n                    this.config.allowedSchemas.indexOf(schema.id) > -1\n                )\n            ) {\n                contentSchemas[contentSchemas.length] = {\n                    name: schema.name,\n                    id: schema.id\n                };\n            }\n        }\n\n        return contentSchemas;\n    }\n    \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        config.allowedSchemas = config.allowedSchemas || [];\n        \n        return _.div({class: 'editor__field'},\n            _.div({class: 'editor__field__key'}, 'Allowed Schemas'),\n            _.div({class: 'editor__field__value'},\n                new HashBrown.Views.Widgets.Dropdown({\n                    options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('content'),\n                    useMultiple: true,\n                    value: config.allowedSchemas,\n                    useClearButton: true,\n                    valueKey: 'id',\n                    labelKey: 'name',\n                    iconKey: 'icon',\n                    onChange: (newValue) => {\n                        config.allowedSchemas = newValue;\n                    }\n                }).$element\n            )\n        );\n    }\n\n    /**\n     * Picks the first available Schema\n     */\n    pickFirstSchema() {\n        let options = this.getDropdownOptions();\n\n        if(options.length < 1) { return; }\n\n        this.value = options[0].id;\n\n        this.trigger('change', this.value);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'}, \n            new HashBrown.Views.Widgets.Dropdown({\n                value: this.value,\n                options: this.getDropdownOptions(),\n                valueKey: 'id',\n                tooltip: this.description || '',\n                labelKey: 'name',\n                iconKey: 'icon',\n                useClearButton: true,\n                onChange: (newValue) => {\n                    this.value = newValue;\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = ContentSchemaReferenceEditor;\n","'use strict';\n\n/**\n * An editor for date values\n *\n * @description Example:\n * <pre>\n * {\n *     \"myDate\": {\n *         \"label\": \"My date\",\n *         \"schemaId\": \"date\",\n *         \"tabId\": \"content\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass DateEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: On click remove\n     */\n    onClickRemove() {\n        this.value = null;\n\n        this.trigger('change', this.value);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click open\n     */\n    onClickOpen() {\n        let modal = new HashBrown.Views.Modals.DateModal({\n            value: this.value\n        });\n\n        modal.on('change', (newValue) => {\n            this.value = newValue.toISOString();\n\n            this.trigger('change', this.value);\n\n            this.fetch();\n        });\n    }\n\n    /**\n     * Format a date string\n     *\n     * @param {String} input\n     *\n     * @returns {String} Formatted date string\n     */\n    formatDate(input) {\n        let output = '(none)';\n        let date = new Date(input);\n\n        if(input && !isNaN(date.getTime())) {\n            let day = date.getDate();\n            let month = date.getMonth() + 1;\n            let hours = date.getHours();\n            let minutes = date.getMinutes();\n\n            if(day < 10) {\n                day = '0' + day;\n            }\n\n            if(month < 10) {\n                month = '0' + month;\n            }\n            \n            if(hours < 10) {\n                hours = '0' + hours;\n            }\n            \n            if(minutes < 10) {\n                minutes = '0' + minutes;\n            }\n\n            output = date.getFullYear() + '.' + month + '.' + day + ' - ' + hours + ':' + minutes;\n        } \n\n        return output;\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            _.do(() => {\n                if(this.disabled) {\n                    return this.formatDate(this.value);\n                }\n                \n                return _.div({class: 'widget widget-group', title: this.description || ''},\n                    _.button({class: 'widget widget--button low'}, this.formatDate(this.value))\n                        .click(() => { this.onClickOpen(); }),\n                    _.div({class: 'widget widget--button small fa fa-remove'})\n                        .click(() => { this.onClickRemove(); })\n                );\n            })\n        );\n    }\n}\n\nmodule.exports = DateEditor;\n","'use strict';\n\n/**\n * A simple list picker\n *\n * @description Example:\n * <pre>\n * {\n *     \"myDropdown\": {\n *         \"label\": \"My dropdown\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"dropdown\",\n *         \"config\": {\n *             \"options\": [\n *                 {\n *                     \"label\": \"Option #1\",\n *                     \"value\": \"option-1\"\n *                 },\n *                 {\n *                     \"label\": \"Option #2\",\n *                     \"value\": \"option-2\"\n *                 }\n *             ]\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass DropdownEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        if(!this.config.options) {\n            this.config.options = [];\n        }\n        \n        this.fetch();\n    }\n   \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        config.options = config.options || [];\n\n        return _.div({class: 'editor__field'},\n            _.div({class: 'editor__field__key'}, 'Options'),\n            _.div({class: 'editor__field__value'},\n                new HashBrown.Views.Widgets.Chips({\n                    value: config.options,\n                    valueKey: 'value',\n                    labelKey: 'label',\n                    placeholder: 'New option',\n                    onChange: (newValue) => {\n                        config.options = newValue;\n                    }\n                }).$element\n            )\n        );\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            _.if(this.config.options.length < 1,\n                _.span({class: 'editor__field__value__warning'}, 'No options configured')\n            ),\n            _.if(this.config.options.length > 0,\n                new HashBrown.Views.Widgets.Dropdown({\n                    value: this.value,\n                    useClearButton: true,\n                    options: this.config.options,\n                    valueKey: 'value',\n                    tooltip: this.description || '',\n                    labelKey: 'label',\n                    onChange: (newValue) => {\n                        this.value = newValue;\n\n                        this.trigger('change', this.value);\n                    }\n                }).$element\n            )\n        );\n    }\n}\n\nmodule.exports = DropdownEditor;\n","'use strict';\n\n/**\n * A field editor for specifying one of the selected languages\n *\n * @description Example:\n * <pre>\n * {\n *     \"myLanguage\": {\n *         \"label\": \"My language\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"language\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass LanguageEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Prerender\n     */\n    prerender() {\n        let options = HashBrown.Helpers.LanguageHelper.getLanguagesSync();\n\n        if(!this.value || options.indexOf(this.value) < 0) {\n            this.value = options[0];\n        }\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Dropdown({\n                value: this.value,\n                options: HashBrown.Helpers.LanguageHelper.getLanguagesSync(),\n                tooltip: this.description || '',\n                onChange: (newValue) => {\n                    this.value = newValue;\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = LanguageEditor;\n","'use strict';\n\n/**\n * A picker for referencing Media \n *\n * @description Example:\n * <pre>\n * {\n *     \"myMediaReference\": {\n *         \"label\": \"My medie reference\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"mediaReference\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass MediaReferenceEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        let media = HashBrown.Helpers.MediaHelper.getMediaByIdSync(this.value);\n\n        return _.div({class: 'editor__field__value editor__field--media-reference', title: this.description || ''},\n            _.button({class: 'editor__field--media-reference__pick'},\n                _.do(()=> {\n                    if(!media) { return _.div({class: 'editor__field--media-reference__empty'}); }\n            \n                    if(media.isAudio()) {\n                        return _.div({class: 'editor__field--media-reference__preview fa fa-file-audio-o'});\n                    }\n\n                    if(media.isVideo()) {\n                        return _.div({class: 'editor__field--media-reference__preview fa fa-file-video-o'});\n                    }\n\n                    if(media.isImage()) {\n                        return _.img({class: 'editor__field--media-reference__preview', src: '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + media.id + '?width=200'});\n                    }\n                })\n            ).click(() => {\n                new HashBrown.Views.Modals.MediaBrowser({\n                    value: this.value\n                })\n                .on('select', (id) => {\n                    this.value = id;\n\n                    this.trigger('change', this.value);\n\n                    this.fetch();\n                });\n            }),\n            _.div({class: 'editor__field--media-reference__footer'},\n                _.label({class: 'editor__field--media-reference__name'}, media ? media.name : ''),\n                _.button({class: 'editor__field--media-reference__remove', title: 'Clear the Media selection'})\n                    .click(() => {\n                        this.value = null;\n\n                        this.trigger('change', this.value);\n\n                        this.fetch();\n                    })\n            )\n        );\n    }\n}\n\nmodule.exports = MediaReferenceEditor;\n","'use strict';\n\n/**\n * A simple number editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myNumber\": {\n *         \"label\": \"My number\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"number\",\n *         \"config\": {\n *             \"step\": 0.5\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass NumberEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Change\n     */\n    onChange() {\n        this.value = parseFloat(this.$input.val());\n\n        this.trigger('change', this.value);\n    }\n   \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config)\n    {\n        config.step = config.step || 'any';\n\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Step'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'number',\n                        step: 'any',\n                        tooltip: 'The division by which the input number is allowed (0 is any division)',\n                        value: config.step === 'any' ? 0 : config.step,\n                        onChange: (newValue) => {\n                            if(newValue == 0) { newValue = 'any'; }\n\n                            config.step = newValue;\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Min value'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        tooltip: 'The minimum required value',\n                        type: 'number',\n                        step: 'any',\n                        value: config.min || 0,\n                        onChange: (newValue) => {\n                            config.min = newValue;\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Max value'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        tooltip: 'The maximum allowed value (0 is infinite)',\n                        type: 'number',\n                        step: 'any',\n                        value: config.max || 0,\n                        onChange: (newValue) => {\n                            config.max = newValue;\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Is slider'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        tooltip: 'Whether or not this number should be edited as a range slider',\n                        type: 'checkbox',\n                        value: config.isSlider || false,\n                        onChange: (newValue) => {\n                            config.isSlider = newValue;\n                        }\n                    }).$element\n                )\n            )\n        ];\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Input({\n                value: this.value || '0',\n                type: this.config.isSlider ? 'range' : 'number',\n                step: this.config.step || 'any',\n                tooltip: this.description || '',\n                min: this.config.min || '0',\n                max: this.config.max || '0',\n                onChange: (newValue) => {\n                    this.value = parseFloat(newValue);\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = NumberEditor;\n","'use strict';\n\n/**\n * A simple string editor\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass ResourceReferenceEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        config.resourceKeys = config.resourceKeys || [];\n\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Resource'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Dropdown({\n                        value: config.resource,\n                        options: Object.keys(resources),\n                        onChange: (newValue) => {\n                            config.resource = newValue\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Resource keys'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Chips({\n                        value: config.resourceKeys,\n                        placeholder: 'keyName',\n                        onChange: (newValue) => {\n                            config.resourceKeys = newValue;\n                        }\n                    }).$element\n                )\n            )\n        ];\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        let resource = resources[this.config.resource];\n        let value;\n\n        if(resource) {\n            value = resource[this.value];\n\n            if(!value) {\n                for(let i in resource) {\n                    if(resource[i].id == this.value) {\n                        value = resource[i];\n                        break;\n                    }\n                }\n            }\n\n            if(value) {\n                for(let key of (this.config.resourceKeys || [])) {\n                    if(value[key]) {\n                        value = value[key];\n                        break;    \n                    }\n                }\n\n            } else if(this.value) {\n                let singularResourceName = this.config.resource;\n\n                if(singularResourceName[singularResourceName.length - 1] == 's') {\n                    singularResourceName = singularResourceName.substring(0, singularResourceName.length - 1);\n                }\n\n                value = '(' + singularResourceName + ' not found)';\n\n            }\n        }\n        \n        return _.div({class: 'editor__field__value'},\n            value || '(none)'\n        );\n    }\n}\n\nmodule.exports = ResourceReferenceEditor;\n","'use strict';\n\n/**\n * A rich text editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myRichText\": {\n *         \"label\": \"My rich text\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"richText\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass RichTextEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        // Sanity check of value\n        if(typeof this.value !== 'string') {\n            this.value = this.value || '';\n        }\n\n        // Make sure the string is HTML\n        try {\n            this.value = marked(this.value);\n        } catch(e) {\n            // Catch this silly exception that marked does sometimes\n        }\n        \n        this.fetch();\n    }\n    \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Disable markdown'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'checkbox',\n                        tooltip: 'Hides the markdown tab if enabled',\n                        value: config.isMarkdownDisabled || false,\n                        onChange: (newValue) => { config.isMarkdownDisabled = newValue; }\n                    }).$element\n                )\n            )\n        ];\n    }\n\n    /**\n     * Event: Change input\n     *\n     * @param {String} value\n     */\n    onChange(value) {\n        value = value || '';\n\n        this.value = value;\n\n        if(this.silentChange === true) {\n            this.silentChange = false;\n\n            this.trigger('silentchange', this.value);\n        \n        } else {\n            this.trigger('change', this.value);\n\n        }\n    }\n\n    /**\n     * Event: On click tab\n     *\n     * @param {String} source\n     */\n    onClickTab(source) {\n        this.silentChange = true;\n\n        this.activeView = source;\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click insert media\n     */\n    onClickInsertMedia() {\n        let mediaBrowser = new HashBrown.Views.Modals.MediaBrowser();\n\n        mediaBrowser.on('select', (id) => {\n            HashBrown.Helpers.MediaHelper.getMediaById(id)\n            .then((media) => {\n                let html = '';\n\n                if(media.isImage()) {\n                    html = '<img data-id=\"' + id + '\" alt=\"' + media.name + '\" src=\"/' + media.url + '\">';\n                } else if(media.isVideo()) {\n                    html = '<video data-id=\"' + id + '\" alt=\"' + media.name + '\" src=\"/' + media.url + '\">';\n                }\n\n                let activeView = this.activeView || 'wysiwyg';\n\n                switch(activeView) {\n                    case 'wysiwyg':\n                        this.wysiwyg.insertHtml(html);\n                        break;\n                    \n                    case 'html':\n                        this.html.replaceSelection(html, 'end');\n                        break;\n                    \n                    case 'markdown':\n                        this.markdown.replaceSelection(toMarkdown(html), 'end');\n                        break;\n                }\n            })\n            .catch(UI.errorModal);\n        });\n    }\n    \n    /**\n     * Gets the tab content\n     *\n     * @returns {HTMLElement} Tab content\n     */\n    getTabContent() {\n        return this.element.querySelector('.editor__field--rich-text-editor__tab__content');\n    }\n\n    /**\n     * Initialises the HTML editor\n     */\n    initHtmlEditor() {\n        setTimeout(() => {\n            // Kepp reference to editor\n            this.html = CodeMirror.fromTextArea(this.getTabContent(), {\n                lineNumbers: false,\n                mode: {\n                    name: 'xml'\n                },\n                viewportMargin: Infinity,\n                tabSize: 4,\n                indentUnit: 4,\n                indentWithTabs: true,\n                theme: 'default',\n                value: this.value\n            });\n\n            // Change event\n            this.html.on('change', () => {\n                this.onChange(this.html.getDoc().getValue());\n            });\n\n            // Set value initially\n            this.silentChange = true;\n            this.html.getDoc().setValue(this.value);\n        }, 1);\n    }\n    \n    /**\n     * Initialises the markdown editor\n     */\n    initMarkdownEditor() {\n        setTimeout(() => {\n            // Keep reference to editor\n            this.markdown = CodeMirror.fromTextArea(this.getTabContent(), {\n                lineNumbers: false,\n                mode: {\n                    name: 'markdown'\n                },\n                viewportMargin: Infinity,\n                tabSize: 4,\n                indentUnit: 4,\n                indentWithTabs: true,\n                theme: 'default',\n                value: toMarkdown(this.value)\n            });\n\n            // Change event\n            this.markdown.on('change', () => {\n                this.onChange(marked(this.markdown.getDoc().getValue()));\n            });\n\n            // Set value initially\n            this.silentChange = true;\n            this.markdown.getDoc().setValue(toMarkdown(this.value));\n        }, 1);\n    }\n\n    /**\n     * Initialises the WYSIWYG editor\n     */\n    initWYSIWYGEditor() {\n        this.wysiwyg = CKEDITOR.replace(\n            this.getTabContent(),\n            {\n                removePlugins: 'contextmenu,liststyle,tabletools',\n                allowedContent: true,\n                height: 400,\n                toolbarGroups: [\n                    { name: 'styles' },\n                    { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },\n                    { name: 'paragraph',   groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ] },\n                    { name: 'links' },\n                    { name: 'insert' },\n                    { name: 'forms' },\n                    { name: 'tools' },\n                    { name: 'document',\t   groups: [ 'mode', 'document', 'doctools' ] },\n                    { name: 'others' },\n                ],\n           \n                extraPlugins: 'justify,divarea',\n\n                removeButtons: 'Image,Styles,Underline,Subscript,Superscript,Source,SpecialChar,HorizontalRule,Maximize,Table',\n\n                removeDialogTabs: 'image:advanced;link:advanced'\n            }\n        );\n\n        this.wysiwyg.on('change', () => {\n            this.onChange(this.wysiwyg.getData());\n        });\n\n        this.wysiwyg.on('instanceReady', () => {\n            // Strips the style information\n            let stripStyle = (element) => {\n                delete element.attributes.style;\n            };\n\n            // Filtering rules\n            this.wysiwyg.dataProcessor.dataFilter.addRules({\n                elements: {\n                    // Strip styling from these elements\n                    p: stripStyle,\n                    h1: stripStyle,\n                    h2: stripStyle,\n                    h3: stripStyle,\n                    h4: stripStyle,\n                    h5: stripStyle,\n                    h6: stripStyle,\n                    span: stripStyle,\n                    div: stripStyle,\n                    section: stripStyle,\n                    hr: stripStyle,\n                    header: stripStyle,\n                    aside: stripStyle,\n                    footer: stripStyle,\n                    ul: stripStyle,\n                    li: stripStyle,\n                    blockquote: stripStyle,\n\n                    // Refactor image src url to fit MediaController\n                    img: (element) => {\n                        stripStyle(element);\n\n                        // Fetch from data attribute\n                        if(element.attributes['data-id']) {\n                            element.attributes.src = '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + element.attributes['data-id'];\n                        \n                        // Failing that, use regex\n                        } else {\n                            element.attributes.src = element.attributes.src.replace(/.+media\\/([0-9a-z]+)\\/.+/g, '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/$1');\n                        \n                        }\n                        \n                    },\n                    \n                    // Refactor video src url to fit MediaController\n                    video: (element) => {\n                        stripStyle(element);\n\n                        // Fetch from data attribute\n                        if(element.attributes['data-id']) {\n                            element.attributes.src = '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + element.attributes['data-id'];\n                        \n                        // Failing that, use regex\n                        } else {\n                            element.attributes.src = element.attributes.src.replace(/.+media\\/([0-9a-z]+)\\/.+/g, '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/$1');\n                        \n                        }\n                        \n                    }\n                }\n            });\n\n            // Set value initially\n            this.silentChange = true;\n            this.wysiwyg.setData(this.value);\n        });\n    }\n\n    /**\n     * Prerender\n     */\n    prerender() {\n        this.markdown = null;\n        this.wysiwyg = null;\n        this.html = null;\n    }\n\n    /** \n     * Renders this editor\n     */\n    template() {\n        let activeView = this.activeView || 'wysiwyg';\n\n        return _.div({class: 'editor__field__value editor__field--rich-text-editor', title: this.description || ''},\n            _.div({class: 'editor__field--rich-text-editor__header'},\n                _.each({wysiwyg: 'Visual', markdown: 'Markdown', html: 'HTML'}, (alias, label) => {\n                    return _.button({class: (activeView === alias ? 'active ' : '') + 'editor__field--rich-text-editor__header__tab'}, label)\n                        .click(() => { this.onClickTab(alias); })\n                }),\n                _.button({class: 'editor__field--rich-text-editor__header__add-media'},\n                    'Add media'\n                ).click(() => { this.onClickInsertMedia(); })\n            ),\n            _.div({class: 'editor__field--rich-text-editor__body'},\n                _.if(activeView === 'wysiwyg',\n                    _.div({class: 'editor__field--rich-text-editor__tab wysiwyg'},\n                        _.div({class: 'editor__field--rich-text-editor__tab__content', 'contenteditable': true})\n                    )\n                ),\n                _.if(activeView === 'markdown',\n                    _.div({class: 'editor__field--rich-text-editor__tab markdown'},\n                        _.textarea({class: 'editor__field--rich-text-editor__tab__content'})\n                    )\n                ),\n                _.if(activeView === 'html',\n                    _.div({class: 'editor__field--rich-text-editor__tab html'},\n                        _.textarea({class: 'editor__field--rich-text-editor__tab__content'})\n                    )\n                )\n            )\n        );\n    }\n     \n    /**\n     * Post render\n     */\n    postrender() {\n        let activeView = this.activeView || 'wysiwyg';\n       \n        switch(activeView) {\n            case 'html':\n                this.initHtmlEditor();\n                break;\n\n            case 'markdown':\n                this.initMarkdownEditor();\n                break;\n\n            case 'wysiwyg':\n                this.initWYSIWYGEditor();\n                break;\n        }\n    }\n}\n\nmodule.exports = RichTextEditor;\n","'use strict';\n\n/**\n * A simple string editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myString\": {\n *         \"label\": \"My string\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"string\",\n *         \"config\": {\n *             \"isMultiLine\": false\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass StringEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n    \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Is multi-line'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'checkbox',\n                        tooltip: 'Whether or not this string uses line breaks',\n                        value: config.isMultiLine || false,\n                        onChange: (newValue) => { config.isMultiLine = newValue; }\n                    }).$element\n                )\n            )\n        ];\n    }\n    \n    /**\n     * Render this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Input({\n                type: this.config.isMultiLine ? 'textarea' : 'text',\n                value: this.value,\n                tooltip: this.description || '',\n                onChange: (newValue) => {\n                    this.value = newValue;\n\n                    this.trigger('change', this.value);\n                }\n            })\n        );\n    }\n}\n\nmodule.exports = StringEditor;\n","'use strict';\n\n/**\n * A struct editor for editing any arbitrary object value\n *\n * @description Example:\n * <pre>\n * {\n *     \"myStruct\": {\n *         \"label\": \"My struct\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"struct\",\n *         \"config\": {\n *             \"label\": \"myString\",\n *             \"struct\": {\n *                 \"myString\": {\n *                     \"label\": \"My string\",\n *                     \"schemaId\": \"string\"\n *                 },\n *                 \"myArray\": {\n *                     \"label\": \"My array\",\n *                     \"schemaId\": \"array\",\n *                     \"config\": {\n *                         \"allowedSchemas\": [ \"string\", \"mediaReference\", \"myCustomSchema\" ]\n *                     }\n *                 }\n *             }\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass StructEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        // A sanity check to make sure we're working with an object\n        if(!this.value || typeof this.value !== 'object') {\n            this.value = {};\n        }\n        \n        this.fetch();\n    }\n\n    /**\n     * Event: Change value\n     *\n     * @param {Object} newValue\n     * @param {String} key\n     * @param {Object} keySchema\n     * @param {Boolean} isSilent\n     */\n    onChange(newValue, key, keySchema, isSilent) {\n        if(keySchema.multilingual) {\n            // Sanity check to make sure multilingual fields are accomodated for\n            if(!this.value[key] || typeof this.value[key] !== 'object') {\n                this.value[key] = {};\n            }\n            \n            this.value[key]._multilingual = true;\n            this.value[key][window.language] = newValue;\n\n        } else {\n            this.value[key] = newValue;\n        }\n\n        this.trigger(isSilent ? 'silentchange' : 'change', this.value);\n    }\n\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     * @param {String} fieldSchemaId\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config, fieldSchemaId) {\n        config.struct = config.struct || {};\n\n        let $element = _.div({class: 'editor--schema__struct'});\n\n        let compiledFieldSchema = HashBrown.Helpers.SchemaHelper.getFieldSchemaWithParentConfigs(fieldSchemaId);\n        \n        let renderEditor = () => {\n            // Get the parent struct fields\n            let parentStruct = {};\n\n            if(compiledFieldSchema && compiledFieldSchema.config && compiledFieldSchema.config.struct) {\n                for(let key in compiledFieldSchema.config.struct) {\n                    // We only want parent struct values\n                    if(config.struct[key]) { continue; }\n\n                    parentStruct[key]  = compiledFieldSchema.config.struct[key];\n                }\n            }\n           \n            // Compile the label options\n            let labelOptions = {};\n            \n            for(let key in parentStruct) {\n                if(!parentStruct[key]) { continue; }\n\n                labelOptions[key] = parentStruct[key].label;\n            }\n\n            for(let key in config.struct) {\n                if(!config.struct[key]) { continue; }\n\n                labelOptions[key] = config.struct[key].label;\n            }\n\n            // Render everything\n            _.append($element.empty(),\n                // Render the label picker\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Label'),\n                        _.div({class: 'editor__field__key__description'}, 'The value of the field picked here will represent this struct when collapsed')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        new HashBrown.Views.Widgets.Dropdown({\n                            options: labelOptions,\n                            value: config.label,\n                            onChange: (newLabel) => {\n                                config.label = newLabel;\n                            }\n                        })\n                    )\n                ),\n\n                // Render the parent struct\n                _.if(Object.keys(parentStruct).length > 0,\n                    _.div({class: 'editor__field'},\n                        _.div({class: 'editor__field__key'},\n                            _.div({class: 'editor__field__key__label'}, 'Parent struct'),\n                            _.div({class: 'editor__field__key__description'}, 'Properties that are inherited and can be changed if you add them to this struct')\n                        ),\n                        _.div({class: 'editor__field__value flex'},\n                            _.each(parentStruct, (fieldKey, fieldValue) => {\n                                return _.button({class: 'widget widget--button condensed', title: 'Change the \"' + (fieldValue.label || fieldKey) + '\" property for this Schema'}, _.span({class: 'fa fa-plus'}), fieldValue.label || fieldKey)\n                                    .click(() => {\n                                        let newProperties = {};\n\n                                        newProperties[fieldKey] = JSON.parse(JSON.stringify(fieldValue));\n\n                                        for(let key in config.struct) {\n                                            newProperties[key] = config.struct[key];\n                                        }\n\n                                        config.struct = newProperties;\n\n                                        renderEditor();\n                                    });\n                            })\n                        )\n                    )\n                ),\n\n                // Render this struct\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        'Struct',\n                        _.div({class: 'editor__field__key__actions'},\n                            _.button({class: 'editor__field__key__action editor__field__key__action--sort'})\n                                .click((e) => {\n                                    HashBrown.Helpers.UIHelper.fieldSortableObject(\n                                        config.struct,\n                                        $(e.currentTarget).parents('.editor__field')[0],\n                                        (newStruct) => {\n                                            config.struct = newStruct;\n                                        }\n                                    );\n                                })\n                        )\n                    ),\n                    _.div({class: 'editor__field__value segmented'},\n                        _.each(config.struct, (fieldKey, fieldValue) => {\n                            // Sanity check\n                            fieldValue.config = fieldValue.config || {};\n                            fieldValue.schemaId = fieldValue.schemaId || 'array';\n\n                            let $field = _.div({class: 'editor__field'});\n\n                            let renderField = () => {\n                                _.append($field.empty(),\n                                    _.div({class: 'editor__field__sort-key'},\n                                        fieldKey\n                                    ),\n                                    _.div({class: 'editor__field__value'},\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Key'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Input({\n                                                    type: 'text',\n                                                    placeholder: 'A variable name, e.g. \"myField\"',\n                                                    tooltip: 'The field variable name',\n                                                    value: fieldKey,\n                                                    onChange: (newKey) => {\n                                                        if(!newKey) { return; }\n\n                                                        let newStruct = {};\n\n                                                        // Insert the changed key into the correct place in the struct\n                                                        for(let key in config.struct) {\n                                                            if(key === fieldKey) {\n                                                                newStruct[newKey] = config.struct[fieldKey];\n                                                            \n                                                            } else {\n                                                                newStruct[key] = config.struct[key];\n\n                                                            }\n                                                        }\n\n                                                        // Change internal reference to new key\n                                                        fieldKey = newKey;\n\n                                                        // Reassign the struct object\n                                                        config.struct = newStruct;\n                                                    \n                                                        // Update the sort key\n                                                        $field.find('.editor__field__sort-key').html(fieldKey);\n                                                    }\n                                                })\n                                            )\n                                        ),\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Label'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Input({\n                                                    type: 'text',\n                                                    placeholder: 'A label, e.g. \"My field\"',\n                                                    tooltip: 'The field label',\n                                                    value: fieldValue.label,\n                                                    onChange: (newValue) => { fieldValue.label = newValue; }\n                                                }).$element\n                                            )\n                                        ),\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Description'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Input({\n                                                    type: 'text',\n                                                    placeholder: 'A description',\n                                                    tooltip: 'The field description',\n                                                    value: fieldValue.description,\n                                                    onChange: (newValue) => { fieldValue.description = newValue; }\n                                                }).$element\n                                            )\n                                        ),\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Multilingual'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Input({\n                                                    type: 'checkbox',\n                                                    tooltip: 'Whether or not this field should support multiple languages',\n                                                    value: fieldValue.multilingual || false,\n                                                    onChange: (newValue) => { fieldValue.multilingual = newValue; }\n                                                }).$element\n                                            )\n                                        ),\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Schema'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Dropdown({\n                                                    useTypeAhead: true,\n                                                    options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('field'),\n                                                    value: fieldValue.schemaId,\n                                                    labelKey: 'name',\n                                                    valueKey: 'id',\n                                                    onChange: (newValue) => {\n                                                        fieldValue.schemaId = newValue;\n\n                                                        renderField();\n                                                    }\n                                                }).$element\n                                            )\n                                        ),\n                                        _.do(() => {\n                                            let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(fieldValue.schemaId);\n\n                                            if(!schema) { return; }\n\n                                            let editor = HashBrown.Views.Editors.FieldEditors[schema.editorId];\n\n                                            if(!editor) { return; }\n\n                                            return editor.renderConfigEditor(fieldValue.config);\n                                        })\n                                    ),\n                                    _.div({class: 'editor__field__actions'},\n                                        _.button({class: 'editor__field__action editor__field__action--remove', title: 'Remove field'})\n                                            .click(() => {\n                                                delete config.struct[fieldKey];\n\n                                                renderEditor();\n                                            })\n                                    )\n                                )\n                            };\n\n                            renderField();\n\n                            return $field;\n                        }),\n                        _.button({class: 'editor__field__add widget widget--button round right fa fa-plus', title: 'Add a struct property'},\n                            ).click(() => {\n                                if(config.struct.newField) { return; }\n                            \n                                config.struct.newField = {\n                                    label: 'New field',\n                                    schemaId: 'string'\n                                };\n\n                                renderEditor();\n                            })\n                    )\n                )\n            );\n        };\n\n        renderEditor();\n\n        return $element;\n    }\n\n    /**\n     * Renders this editor\n     */\n   template() {\n        let compiledSchema = HashBrown.Helpers.SchemaHelper.getFieldSchemaWithParentConfigs(this.schema.id);\n           \n        return _.div({class: 'editor__field__value field-editor--struct'},\n            // Loop through each key in the struct\n            _.each(compiledSchema.config.struct, (k, keySchema) => {\n                let value = this.value[k];\n\n                if(!keySchema.schemaId) {\n                    UI.errorModal(new Error('Schema id not set for key \"' + k + '\"'));\n                }\n\n                let fieldSchema = HashBrown.Helpers.SchemaHelper.getFieldSchemaWithParentConfigs(keySchema.schemaId);\n\n                if(!fieldSchema) {\n                    UI.errorModal(new Error('Field schema \"' + keySchema.schemaId + '\" could not be found for key \" + k + \"'));\n                }\n\n                let fieldEditor = HashBrown.Views.Editors.ContentEditor.getFieldEditor(fieldSchema.editorId);\n\n                // Sanity check\n                value = HashBrown.Helpers.ContentHelper.fieldSanityCheck(value, keySchema);\n                this.value[k] = value;\n\n                // Init the field editor\n                let fieldEditorInstance = new fieldEditor({\n                    value: keySchema.multilingual ? value[window.language] : value,\n                    disabled: keySchema.disabled || false,\n                    config: keySchema.config || fieldSchema.config || {},\n                    schema: keySchema\n                });\n\n                // Hook up the change event\n                fieldEditorInstance.on('change', (newValue) => {\n                    this.onChange(newValue, k, keySchema);\n                });\n                \n                fieldEditorInstance.on('silentchange', (newValue) => {\n                    this.onChange(newValue, k, keySchema, true);\n                });\n\n                // Return the DOM element\n                return _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, keySchema.label),\n                        _.if(keySchema.description,\n                            _.div({class: 'editor__field__key__description'}, keySchema.description)\n                        ),\n                        fieldEditorInstance.renderKeyActions()\n                    ),\n                    fieldEditorInstance.$element\n                );\n            })    \n        );\n    }    \n}\n\nmodule.exports = StructEditor;\n","'use strict';\n\n/**\n * A CSV string editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myTags\": {\n *         \"label\": \"My tags\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"tags\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass TagsEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Chips({\n                tooltip: this.description || '',\n                value: (this.value || '').split(','),\n                onChange: (newValue) => {\n                    this.value = newValue.join(',');\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = TagsEditor;\n","'use strict';\n\n/**\n * An editor for content URLs\n *\n * @description Example:\n * <pre>\n * {\n *     \"myUrl\": {\n *         \"label\": \"My URL\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"url\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass UrlEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Get all parent content nodes\n     *\n     * @param {String} contentId\n     *\n     * @return {Array} nodes\n     */\n    static getAllParents(contentId) {\n        let nodes = [];    \n        let contentEditor = Crisp.View.get('ContentEditor');\n\n        function iterate(id) {\n            let node;\n        \n            node = window.resources.content.filter((node) => {\n                return node.id == id;\n            })[0];\n\n            if(node) {\n                nodes.push(node);\n\n                if(node.parentId) {\n                    iterate(node.parentId);\n                }\n\n            } else {\n                debug.log('Content not found: \"' + id + '\"', this);\n            }\n        }\n\n        iterate(contentId);\n\n        nodes.reverse();\n\n        return nodes;\n    }\n\n    /**\n     * Generates a new url based on content id\n     *\n     * @param {String} contentId\n     *\n     * @return {String} url\n     */\n    generateUrl(contentId) {\n        let nodes = UrlEditor.getAllParents(contentId);\n        let url = '/';\n      \n        if(this.multilingual) {\n            url += window.language + '/';\n        }\n\n        for(let node of nodes) {\n            let title = '';\n\n            // If the node equals the currently edited node, take the value directly from the \"title\" field\n            if(node.id == Crisp.Router.params.id) {\n                title = $('.editor__field[data-key=\"title\"] .editor__field__value input').val();\n\n            // If it's not, try to get the title from the model\n            } else {\n                // If title is set directly (unlikely), pass it\n                if(typeof node.title === 'string') {\n                    title = node.title;\n\n                // If title is defined in properties (typical)\n                } else if(node.properties && node.properties.title) {\n                    // If title is multilingual\n                    if(node.properties.title[window.language]) {\n                        title = node.properties.title[window.language];\n                    \n                    // If title is not multilingual\n                    } else if(typeof node.properties.title === 'string') {\n                        title = node.properties.title;\n                    \n                    }\n                }\n            }\n\n            url += HashBrown.Helpers.ContentHelper.getSlug(title) + '/';\n        }\n\n        // Check for duplicate URLs\n        let sameUrls = 0;\n\n        for(let content of window.resources.content) {\n            if(content.id != contentId) {\n                let thatUrl = content.prop('url', window.language);\n                let isMatchWithNumber = new RegExp(url.substring(0, url.lastIndexOf('/')) + '-[0-9]+/').test(thatUrl);\n                let isSameUrl = url == thatUrl || isMatchWithNumber;\n\n                if(isSameUrl) {\n                    sameUrls++;\n                }\n            }\n        }\n\n        // Append a number, if duplidate URLs were found\n        if(sameUrls > 0) {\n            url = url.replace(/\\/$/, '-' + sameUrls + '/');\n        }\n\n        return url;\n    }\n\n    /**\n     * Regenerates the URL\n     */\n    regenerate() {\n        let newUrl = this.generateUrl(Crisp.Router.params.id);\n\n        this.$input.val(newUrl);\n\n        this.trigger('silentchange', this.$input.val());\n    };\n\n    /**\n     * Fetch the URL from the Content title\n     */\n    fetchFromTitle() {\n        this.value = this.$titleInput.val();\n\n        this.regenerate();\n    }\n\n    /**\n     * Event: Change value\n     */\n    onChange() {\n        this.value = this.$input.val();\n\n        if(this.value.length > 0) {\n            if(this.value[0] != '/') {\n                this.value = '/' + this.value;\n                this.$input.val(this.value);\n            }\n            \n            if(this.value.length > 1 && this.value[this.value.length - 1] != '/') {\n                this.value = this.value + '/';\n                this.$input.val(this.value);\n            }\n        } else {\n            this.fetchFromTitle();\n        }\n\n        this.trigger('change', this.value);\n    };\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value field-editor--url'},\n            _.div({class: 'widget-group', title: this.description || ''},\n                this.$input = _.input({class: 'widget widget--input text', type: 'text', value: this.value})\n                    .on('change', () => { this.onChange(); }),\n                _.button({class: 'widget widget--button small fa fa-refresh', title: 'Regenerate URL'})\n                    .click(() => { this.regenerate(); })\n            )\n        );\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        //  Wait a bit before checking for title field\n        setTimeout(() => {\n            this.$titleInput = $('.editor__field[data-key=\"title\"] input[type=\"text\"]');\n\n            if(this.$titleInput.length === 1) {\n                this.$titleInput.on('input', () => {\n                    this.fetchFromTitle();   \n                });\n            }\n\n            if(!this.value) {\n                this.fetchFromTitle();\n            }\n        }, 100);\n    }\n}\n\nmodule.exports = UrlEditor;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Navigation\n */\nnamespace('Views.Navigation')\n.add(require('./NavbarMain'))\n.add(require('./MainMenu'))\n.add(require('./NavbarPane'))\n.add(require('./ConnectionPane'))\n.add(require('./ContentPane'))\n.add(require('./FormsPane'))\n.add(require('./MediaPane'))\n.add(require('./SchemaPane'));\n","'use strict';\n\n/**\n * The main navbar\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass NavbarMain extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        this.template = require('Client/Templates/Navigation/NavbarMain');\n        this.tabPanes = [];\n\n        HashBrown.Views.Navigation.ContentPane.init();\n        HashBrown.Views.Navigation.MediaPane.init();\n        HashBrown.Views.Navigation.FormsPane.init();\n        HashBrown.Views.Navigation.ConnectionPane.init();\n        HashBrown.Views.Navigation.SchemaPane.init();\n\n        this.fetch();\n        \n        $('.page--environment__space--nav').html(this.$element);\n    }\n    \n    /**\n     * Event: Change filter\n     *\n     * @param {HTMLElement} $pane\n     * @param {NavbarPane} pane\n     * @param {String} search\n     */\n    onChangeFilter($pane, pane, search) {\n        search = search.toLowerCase();\n\n        $pane.find('.navbar-main__pane__item').each((i, item) => {\n            let label = item.querySelector('.navbar-main__pane__item__label').innerText.toLowerCase();\n\n            item.classList.toggle('filter-not-matched', label.indexOf(search) < 0);\n        });\n    }\n\n    /**\n     * Event: Change sorting\n     *\n     * @param {HTMLElement} $pane\n     * @param {NavbarPane} pane\n     * @param {String} sortingMethod\n     */\n    onChangeSorting($pane, pane, sortingMethod) {\n        this.applySorting($pane, pane, sortingMethod);\n    }\n\n    /**\n     * Event: Error was returned\n     */\n    onError(err) {\n        UI.errorModal(err);\n    }\n    \n    /**\n     * Event: Click copy item id\n     */\n    onClickCopyItemId() {\n        let id = $('.context-menu-target').data('id');\n\n        copyToClipboard(id);\n    }\n\n    /**\n     * Event: Click tab\n     */\n    onClickTab(e) {\n        e.preventDefault();\n        \n        location.hash = e.currentTarget.dataset.route;\n        \n        $('.navbar-main__pane__item.active').toggleClass('active', false);\n        $('.page--environment__space--nav').toggleClass('expanded', true);\n    }\n\n    /**\n     * Event: Toggle children\n     */\n    onClickToggleChildren(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        e.currentTarget.parentElement.parentElement.classList.toggle('open');\n    }\n\n    /**\n     * Toggles the tab buttons\n     *\n     * @param {Boolean} isActive\n     */\n    toggleTabButtons(isActive) {\n        this.$element.toggleClass('hide-tabs', !isActive);\n    }\n\n    /**\n     * Shows a tab\n     *\n     * @param {String} tabName\n     */\n    showTab(tabRoute) {\n        this.$element.find('.navbar-main__pane').each(function(i) {\n            $(this).toggleClass('active', $(this).attr('data-route') == tabRoute);\n        });\n        \n        this.$element.find('.navbar-main__tab').each(function(i) {\n            $(this).toggleClass('active', $(this).attr('data-route') == tabRoute);\n        });\n    }\n\n    /**\n     * Saves the navbar state\n     */\n    save() {\n        this.state = {\n            buttons: {},\n            panes: {},\n            items: {},\n            scroll: $('.navbar-main__pane.active .navbar-main__pane__items').scrollTop() || 0\n        };\n        \n        this.$element.find('.navbar-main__tab').each((i, element) => {\n            let key = element.dataset.route;\n\n            if(!key) { return; }\n\n            this.state.buttons[key] = element.className;\n        });\n        \n        this.$element.find('.navbar-main__pane').each((i, element) => {\n            let key = element.dataset.route;\n\n            this.state.panes[key] = element.className;\n        });\n\n        this.$element.find('.navbar-main__pane__item').each((i, element) => {\n            let key = element.dataset.routingPath || element.dataset.mediaFolder;\n\n            this.state.items[key] = element.className.replace('loading', '');\n        });\n    }\n\n    /**\n     * Restores the navbar state\n     */\n    restore() {\n        if(!this.state) { return; }\n\n        // Restore tab buttons\n        this.$element.find('.navbar-main__tab').each((i, element) => {\n            let key = element.dataset.route;\n\n            if(key && this.state.buttons[key]) {\n                element.className = this.state.buttons[key];\n            }\n        });\n        \n        // Restore pane containers\n        this.$element.find('.navbar-main__pane').each((i, element) => {\n            let key = element.dataset.route;\n\n            if(key && this.state.panes[key]) {\n                element.className = this.state.panes[key];\n            }\n        });\n\n        // Restore pane items\n        this.$element.find('.navbar-main__pane__item').each((i, element) => {\n            let key = element.dataset.routingPath || element.dataset.mediaFolder;\n\n            if(key && this.state.items[key]) {\n                element.className = this.state.items[key];\n            }\n        });\n\n        // Restore scroll position\n        $('.navbar-main__pane.active .navbar-main__pane__items').scrollTop(this.state.scroll || 0);\n\n        this.state = null;\n    }\n\n    /**\n     * Reloads this view\n     */\n    reload() {\n        this.save();\n        \n        this.fetch();\n\n        this.restore();\n    }\n    \n    /**\n     * Static version of the reload method\n     */\n    static reload() {\n        Crisp.View.get('NavbarMain').reload();\n    }\n\n    /**\n     * Adds a tab pane\n     *\n     * @param {String} route\n     * @param {Object} settings\n     */\n    static addTabPane(route, label, icon, settings) {\n        Crisp.View.get('NavbarMain').tabPanes.push({\n            label: label,\n            route: route,\n            icon: icon,\n            settings: settings\n        });\n    }\n\n    /**\n     * Gets the icons of an item\n     *\n     * @param {Object} item\n     * @param {Object} settings\n     *\n     * @returns {String} Icon name\n     */\n    getItemIcon(item, settings) {\n        // If this item has a Schema id, fetch the appropriate icon\n        if(item.schemaId) {\n            let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(item.schemaId);\n\n            if(schema) {\n                return schema.icon;\n            }\n        }\n\n        return item.icon || settings.icon || 'file';\n    }\n\n    /**\n     * Gets whether the item is a directory\n     *\n     * @param {Object} item\n     *\n     * @return {Boolean} Is directory\n     */\n    isItemDirectory(item) {\n        if(item.properties && item.createDate) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Gets the routing path for an item\n     *\n     * @param {Object} item\n     * @param {Object} settings\n     *\n     * @returns {String} Routing path\n     */\n    getItemRoutingPath(item, settings) {\n        if(typeof settings.itemPath === 'function') {\n            return settings.itemPath(item);\n        }\n\n        return item.shortPath || item.path || item.id || null;\n    }\n\n    /**\n     * Gets the name of an item\n     *\n     * @param {Object} item\n     *\n     * @returns {String} Item name\n     */\n    getItemName(item) {\n        let name = '';\n\n        // This is a Content node\n        if(item.properties && item.createDate) {\n            // Use title directly if available\n            if(typeof item.properties.title === 'string') {\n                name = item.properties.title;\n\n            } else if(item.properties.title && typeof item.properties.title === 'object') {\n                // Use the current language title\n                if(item.properties.title[window.language]) {\n                    name = item.properties.title[window.language];\n\n                // If no title was found, search in other languages\n                } else {\n                    name = 'Untitled';\n\n                    for(let language in item.properties.title) {\n                        let languageTitle = item.properties.title[language];\n\n                        if(languageTitle) {\n                            name += ' - (' + language + ': ' + languageTitle + ')';\n                            break;\n                        }\n                    }\n                }\n            }\n\n            if(!name || name === 'Untitled') {\n                name = 'Untitled (id: ' + item.id.substring(0, 6) + '...)';\n            }\n        \n        } else if(item.title && typeof item.title === 'string') {\n            name = item.title;\n\n        } else if(item.name && typeof item.name === 'string') {\n            name = item.name;\n\n        } else {\n            name = item.id;\n\n        }\n\n        return name;\n    }\n\n    /**\n     * Highlights an item\n     */\n    highlightItem(tab, route) {\n        this.showTab(tab);\n\n        this.$element.find('.navbar-main__pane.active .navbar-main__pane__item').each((i, element) => {\n            let $item = $(element);\n            let id = ($item.children('a').attr('data-id') || '').toLowerCase();\n            let routingPath = ($item.attr('data-routing-path') || '').toLowerCase();\n\n            $item.toggleClass('active', false);\n            \n            if(\n                id == route.toLowerCase() ||\n                routingPath == route.toLowerCase()\n            ) {\n                $item.toggleClass('active', true);\n                $item.parents('.navbar-main__pane__item').toggleClass('open', true);\n            }\n        });\n    }\n\n    /**\n     * Clears all content within the navbar\n     */\n    clear() {\n        this.$element.find('.navbar-main__tabs').empty();\n        this.$element.find('.navbar-main__panes').empty();\n    }\n\n    /**\n     * Applies item sorting\n     *\n     * @param {HTMLElement} $pane\n     * @param {Object} pane\n     * @param {String} sortingMethod\n     */\n    applySorting($pane, pane, sortingMethod) {\n        let performSort = (a, b) => {\n            switch(sortingMethod) {\n                case 'alphaAsc':\n                    return a.querySelector('.navbar-main__pane__item__label').innerText > b.querySelector('.navbar-main__pane__item__label').innerText ? 1 : -1;\n                \n                case 'alphaDesc':\n                    return a.querySelector('.navbar-main__pane__item__label').innerText < b.querySelector('.navbar-main__pane__item__label').innerText ? 1 : -1;\n                \n                case 'dateAsc':\n                    return new Date(a.dataset.updateDate) > new Date(b.dataset.updateDate) ? 1 : -1;\n                \n                case 'dateDesc':\n                    return new Date(a.dataset.updateDate) < new Date(b.dataset.updateDate) ? 1 : -1;\n\n                default:\n                    return parseInt(a.dataset.sort) > parseInt(b.dataset.sort) ? 1 : -1;\n            }\n        };\n\n        // Sort direct and nested children\n        $pane.find('.navbar-main__pane__items, .navbar-main__pane__item .navbar-main__pane__item__children').each((i, container) => {\n            let $nestedChildren = $(container).find('>.navbar-main__pane__item');\n            $nestedChildren.sort(performSort);\n            $nestedChildren.appendTo($(container));\n        });\n    }\n\n    /**\n     * Applies item hierarchy\n     *\n     * @param {HTMLElement} $pane\n     * @param {Object} pane\n     * @param {Array} queue\n     */\n    applyHierarchy($pane, pane, queue) {\n        for(let queueItem of queue) {\n            if(!queueItem.parentDirAttr) { continue; } \n\n            // Find parent item\n            let parentDirAttrKey = Object.keys(queueItem.parentDirAttr)[0];\n            let parentDirAttrValue = queueItem.parentDirAttr[parentDirAttrKey];\n            let parentDirSelector = '.navbar-main__pane__item[' + parentDirAttrKey + '=\"' + parentDirAttrValue + '\"]';\n            let $parentDir = $pane.find(parentDirSelector);\n\n            // If parent element already exists, just append the queue item element\n            if(parentDirAttrKey && parentDirAttrValue && $parentDir.length > 0) {\n                $parentDir.children('.navbar-main__pane__item__children').append(queueItem.$element);\n            \n            // If not, create parent elements if specified\n            } else if(queueItem.createDir) {\n                let dirNames = parentDirAttrValue.split('/').filter((item) => { return item != ''; });\n                let finalDirName = '/';\n\n                // Create a folder for each directory name in the path\n                for(let i in dirNames) {\n                    let dirName = dirNames[i];\n\n                    let prevFinalDirName = finalDirName;\n                    finalDirName += dirName + '/';\n\n                    // Look for an existing directory element\n                    let $dir = $pane.find('[' + parentDirAttrKey + '=\"' + finalDirName + '\"]');\n\n                    // Create it if not found\n                    if($dir.length < 1) {\n                        $dir = _.div({class: 'navbar-main__pane__item', 'data-is-directory': true},\n                            _.a({\n                                class: 'navbar-main__pane__item__content'\n                            },\n                                _.span({class: 'navbar-main__pane__item__icon fa fa-folder'}),\n                                _.span({class: 'navbar-main__pane__item__label'}, dirName),\n                                \n                                // Toggle button\n                                _.button({class: 'navbar-main__pane__item__toggle-children'})\n                                    .click((e) => { this.onClickToggleChildren(e); })\n                            ),\n                            _.div({class: 'navbar-main__pane__item__children'})\n                        );\n                        \n                        $dir.attr(parentDirAttrKey, finalDirName);\n\n                        // Extra parent dir attributes\n                        if(queueItem.parentDirExtraAttr) {\n                            for(let k in queueItem.parentDirExtraAttr) {\n                                let v = queueItem.parentDirExtraAttr[k];\n\n                                $dir.attr(k, v);\n                            }\n                        }\n               \n                        // Append to previous dir \n                        let $prevDir = $pane.find('[' + parentDirAttrKey + '=\"' + prevFinalDirName + '\"]');\n                        \n                        if($prevDir.length > 0) {\n                            $prevDir.children('.navbar-main__pane__item__children').prepend($dir);\n\n                        // If no previous dir was found, append directly to pane\n                        } else {\n                            $pane.children('.navbar-main__pane__items').prepend($dir); \n                        }\n                        \n                        // Attach item context menu\n                        if(pane.settings.dirContextMenu) {\n                            UI.context($dir[0], pane.settings.dirContextMenu);\n                        }\n                    }\n                   \n                    // Only append the queue item to the final parent element\n                    if(i >= dirNames.length - 1) {\n                        $parentDir = $dir;\n                    } \n                }\n\n                $parentDir.children('.navbar-main__pane__item__children').append(queueItem.$element);\n            }\n\n            // Add expand/collapse buttons\n            if($parentDir.children('.navbar-main__pane__item__content').children('.navbar-main__pane__item__toggle-children').length < 1) {\n                $parentDir.children('.navbar-main__pane__item__content').append(\n                    _.button({class: 'navbar-main__pane__item__toggle-children'})\n                        .click((e) => { this.onClickToggleChildren(e); })\n                );\n            }\n        }\n    }\n}\n\nmodule.exports = NavbarMain;\n","module.exports = function() {\n    let currentUser = HashBrown.Models.User.current;\n    let currentProject = HashBrown.Helpers.ProjectHelper.currentProject;\n\n    let hasConnectionsScope = currentUser.hasScope(currentProject, 'connections');\n    let hasSchemasScope = currentUser.hasScope(currentProject, 'schemas');\n    let hasSettingsScope = currentUser.hasScope(currentProject, 'settings');\n     \n    return _.nav({class: 'navbar-main'},\n        // Buttons\n        _.div({class: 'navbar-main__tabs'},\n            _.a({href: '/', class: 'navbar-main__tab'},\n                _.img({src: '/svg/logo_white.svg', class: 'navbar-main__tab__icon'}),\n                _.div({class: 'navbar-main__tab__label'}, 'Dashboard')\n            ),            \n            _.each(this.tabPanes, (i, pane) => {\n                return _.button({class: 'navbar-main__tab', 'data-route': pane.route, title: pane.label},\n                    _.div({class: 'navbar-main__tab__icon fa fa-' + pane.icon}),\n                    _.div({class: 'navbar-main__tab__label'}, pane.label)\n                ).on('click', (e) => { this.onClickTab(e); });\n            })\n        ),\n\n        // Panes\n        _.div({class: 'navbar-main__panes'},\n            _.each(this.tabPanes, (i, pane) => {\n                let queue = [];\n\n                let sortingOptions = {\n                    default: 'Default',\n                    alphaAsc: 'A  Z',\n                    alphaDesc: 'Z  A'\n                };\n\n                if(pane.label === 'Content') {\n                    sortingOptions.dateAsc = 'Old  new';\n                    sortingOptions.dateDesc = 'New  old';\n                }\n\n                let $pane = _.div({class: 'navbar-main__pane', 'data-route': pane.route},\n                    // Filter/sort bar\n                    _.div({class: 'navbar-main__pane__filter-sort-bar'},\n                        _.div({class: 'widget-group'},\n                            new HashBrown.Views.Widgets.Input({\n                                placeholder: 'Filter',\n                                onChange: (newValue) => { this.onChangeFilter($pane, pane, newValue); },\n                                type: 'text'\n                            }),\n                            new HashBrown.Views.Widgets.Dropdown({\n                                placeholder: 'Sort',\n                                options: sortingOptions,\n                                onChange: (newValue) => { this.onChangeSorting($pane, pane, newValue); }\n                            })\n                        )\n                    ),\n\n                    // Move buttons\n                    _.div({class: 'navbar-main__pane__move-buttons widget-group'},\n                        _.button({class: 'widget widget--button low expanded navbar-main__pane__move-button navbar-main__pane__move-button--root-dir'}, 'Move to root'),\n                        _.button({class: 'widget widget--button low expanded navbar-main__pane__move-button navbar-main__pane__move-button--new-dir'}, 'New folder')\n                    ),\n\n                    // Items\n                    _.div({class: 'navbar-main__pane__items'},\n                        _.each(pane.settings.items || pane.settings.getItems(), (i, item) => {\n                            let id = item.id || i;\n                            let name = this.getItemName(item);\n                            let icon = this.getItemIcon(item, pane.settings);\n                            let routingPath = this.getItemRoutingPath(item, pane.settings);\n                            let isDirectory = this.isItemDirectory(item);\n                            let queueItem = {};\n                            let hasRemote = item.sync ? item.sync.hasRemote : false;\n                            let isRemote = item.sync ? item.sync.isRemote : false;\n\n                            let $item = _.div(\n                                {\n                                    class: 'navbar-main__pane__item',\n                                    'data-routing-path': routingPath,\n                                    'data-locked': item.isLocked,\n                                    'data-remote': isRemote,\n                                    'data-local': hasRemote,\n                                    'data-is-directory': isDirectory,\n                                    'data-sort': item.sort || 0,\n                                    'data-update-date': item.updateDate || item.createDate\n                                },\n                                _.a({\n                                    'data-id': id,\n                                    'data-name': name,\n                                    href: '#' + (routingPath ? pane.route + routingPath : pane.route),\n                                    class: 'navbar-main__pane__item__content'\n                                },\n                                    _.div({class: 'navbar-main__pane__item__icon fa fa-' + icon}),\n                                    _.div({class: 'navbar-main__pane__item__label'}, name)\n                                ),\n                                _.div({class: 'navbar-main__pane__item__children'}),\n                                _.div({class: 'navbar-main__pane__item__insert-below'})\n                            );\n\n                            // Attach item context menu\n                            if(pane.settings.getItemContextMenu) {\n                                UI.context($item.find('a')[0], pane.settings.getItemContextMenu(item));\n\n                            } else if(pane.settings.itemContextMenu) {\n                                UI.context($item.find('a')[0], pane.settings.itemContextMenu);\n\n                            }\n                            \n                            // Add element to queue item\n                            queueItem.$element = $item;\n\n                            // Use specific hierarchy behaviours\n                            if(pane.settings.hierarchy) {\n                                pane.settings.hierarchy(item, queueItem);\n                            }\n\n                            // Add queue item to sorting queue\n                            queue.push(queueItem);\n\n                            return $item;\n                        })\n                    )\n                );\n\n                this.applyHierarchy($pane, pane, queue);\n                this.applySorting($pane, pane);\n\n                // Attach pane context menu\n                if(pane.settings.paneContextMenu) {\n                    UI.context($pane[0], pane.settings.paneContextMenu);\n                }\n                \n                return $pane;\n            })\n        ),\n\n        // Toggle button (mobile only)\n        _.button({class: 'navbar-main__toggle'})\n            .click((e) => {\n                $('.page--environment__space--nav').toggleClass('expanded');\n            })\n    );\n};\n","'use strict';\n\n/**\n * The main menu\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass MainMenu extends Crisp.View {\n    constructor(params) {\n        super(params);\n        \n        this.fetch();\n        \n        $('.page--environment__space--menu').html(this.$element);\n    }\n    \n    /**\n     * Event: On change language\n     *\n     * @param {String} newLanguage\n     */\n    onChangeLanguage(newLanguage) {\n        localStorage.setItem('language', newLanguage);\n\n        window.language = newLanguage;\n\n        HashBrown.Helpers.RequestHelper.reloadResource('content')\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            let contentEditor = Crisp.View.get('ContentEditor');\n\n            if(contentEditor) {\n                contentEditor.model = null;\n                contentEditor.fetch();\n            }\n\n            this.fetch();\n        });\n    }\n    \n    /**\n     * Event: Click question\n     *\n     * @param {String} topic\n     */\n    onClickQuestion(topic) {\n        switch(topic) {\n            case 'content':\n                let modal = UI.messageModal('Content', [ \n                    _.p('This section contains all of your authored work. The content is a hierarchical tree of nodes that can contain text and media, in simple or complex structures.')\n                ]);\n                break;\n\n            case 'media':\n                UI.messageModal('Media', [\n                    _.p('This is a gallery of your statically hosted files, such as images, videos and PDFs.'),\n                    _.p('The contents of this gallery depends on which <a href=\"#/connections\">Connection</a> has been set up as the Media provider')\n                ]);\n                break;\n\n            case 'forms':\n                UI.messageModal('Forms', 'If you need an input form on your website, you can create the model for it here and see a list of the user submitted input.');\n                break;\n\n            case 'connections':\n                UI.messageModal('Connections', [\n                    _.p('Connections are endpoints and resources for your content. Connections can be set up to publish your Content and Media to remote servers.'),\n                    _.p('They can also be set up to provide statically hosted media.')\n                ]);\n                break;\n\n            case 'schemas':\n                UI.messageModal('Schemas', 'This is a library of content structures. Here you define how your editable content looks and behaves. You can define schemas for both content nodes and property fields.');\n                break;\n        }\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        this.languages = HashBrown.Helpers.LanguageHelper.getLanguagesSync() || [];\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        this.languageDropdown.notify(window.language);\n    }\n\n    /**\n     * Renders this menu\n     */\n    template() {\n        return _.div({class: 'main-menu widget-group'},\n            // Language picker\n            _.if(Array.isArray(this.languages) && this.languages.length > 1,\n                this.languageDropdown = new HashBrown.Views.Widgets.Dropdown({\n                    tooltip: 'Language',\n                    icon: 'flag',\n                    value: window.language,\n                    options: this.languages,\n                    onChange: (newValue) => {\n                        this.onChangeLanguage(newValue);\n                    }\n                })\n            ),\n\n            // User dropdown\n            this.userDropdown = new HashBrown.Views.Widgets.Dropdown({\n                tooltip: 'Logged in as \"' + (HashBrown.Models.User.current.fullName || HashBrown.Models.User.current.username) + '\"',\n                icon: 'user',\n                reverseKeys: true,\n                options: {\n                    'User settings': () => { new HashBrown.Views.Editors.UserEditor({ hidePermissions: true, model: HashBrown.Models.User.current }); },\n                    'Log out': () => {\n                        HashBrown.Helpers.RequestHelper.customRequest('post', '/api/user/logout')\n                        .then(() => {\n                            location = '/';\n                        });\n                    }\n                }\n            }),\n\n            // Help\n            this.helpDropdown = new HashBrown.Views.Widgets.Dropdown({\n                tooltip: 'Get help',\n                icon: 'question-circle',\n                reverseKeys: true,\n                options: {\n                    'Connections': () => { this.onClickQuestion('connections'); },\n                    'Content': () => { this.onClickQuestion('content'); },\n                    'Forms': () => { this.onClickQuestion('forms'); },\n                    'Media': () => { this.onClickQuestion('media'); },\n                    'Schemas': () => { this.onClickQuestion('schemas'); }\n                }\n            })\n        );\n    }\n}\n\nmodule.exports = MainMenu;\n","'use strict';\n\n/**\n * A navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass NavbarPane {\n    /**\n     * Init\n     */\n    static init() {\n        HashBrown.Views.Navigation.NavbarMain.addTabButton('My pane', '/my-route', 'question');\n    }\n\n    /**\n     * Event: Click copy item id\n     */\n    static onClickCopyItemId() {\n        let id = $('.context-menu-target').data('id');\n\n        copyToClipboard(id);\n    }\n    \n    /**\n     * Event: Click open in new tab\n     */\n    static onClickOpenInNewTab() {\n        let href = $('.context-menu-target').attr('href');\n\n        window.open(location.protocol + '//' + location.host + '/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + href);\n    }\n\n    /**\n     * Event: Click refresh resource\n     *\n     * @param {String} resource\n     */\n    static onClickRefreshResource(resource) {\n        HashBrown.Helpers.RequestHelper.reloadResource(resource)\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        });\n    }\n\n    /**\n     * Event: Change directory\n     *\n     * @param {String} id\n     * @param {String} newParent\n     */\n    static onChangeDirectory(id, newParent) {\n\n    }\n    \n    /**\n     * Event: Change sort index\n     *\n     * @param {String} id\n     * @param {Number} newIndex\n     * @param {String} newParent\n     */\n    static onChangeSortIndex(id, newIndex, newParent) {\n\n    }\n\n    /**\n     * Event: Click move item\n     */\n    static onClickMoveItem() {\n        let id = $('.context-menu-target').data('id');\n        let navbar = Crisp.View.get('NavbarMain');\n        let $pane = navbar.$element.find('.navbar-main__pane.active');\n\n        $pane.find('.navbar-main__pane__item a[data-id=\"' + id + '\"]').parent().toggleClass('moving-item', true);\n        $pane.toggleClass('select-dir', true);\n        \n        // Reset\n        function reset(newPath) {\n            $pane.find('.navbar-main__pane__item[data-id=\"' + id + '\"]').toggleClass('moving-item', false);\n            $pane.toggleClass('select-dir', false);\n            $pane.find('.navbar-main__pane__move-button').off('click');\n            $pane.find('.navbar-main__pane__item__content').off('click');\n            $pane.find('.moving-item').toggleClass('moving-item', false);\n        }\n        \n        // Cancel by escape key\n        $(document).on('keyup', (e) => {\n            if(e.which == 27) {\n                reset();\n            }\n        });\n\n        // Click existing directory\n        $pane.find('.navbar-main__pane__item[data-is-directory=\"true\"]:not(.moving-item)').each((i, element) => {\n            $(element).children('.navbar-main__pane__item__content').on('click', (e) => {\n                e.preventDefault();\n                e.stopPropagation();\n\n                let newPath = $(element).attr('data-media-folder') || $(element).attr('data-content-id');\n\n                reset(newPath);\n\n                this.onChangeDirectory(id, newPath);\n            });\n        }); \n\n        // Click below item\n        $pane.find('.navbar-main__pane__item__insert-below').click((e) => {\n            e.preventDefault();\n            e.stopPropagation();\n\n            // Create new sort index based on the container we clicked below\n            let $container = $(e.target).parent();\n            let containerIndex = parseInt($container.data('sort') || 0)\n\n            let newIndex = containerIndex + 1;\n\n            // Reset the move state\n            reset();\n\n            // Fetch the parent id as well, in case that changed\n            let $parentItem = $container.parents('.navbar-main__pane__item');\n            let newPath = $parentItem.length > 0 ? ($parentItem.attr('data-media-folder') || $parentItem.attr('data-content-id')) : null;\n\n            // Trigger sort change event\n            this.onChangeSortIndex(id, newIndex, newPath);\n        });\n\n        // Click \"move to root\" button\n        $pane.find('.navbar-main__pane__move-button--root-dir').on('click', (e) => {\n            let newPath = '/';\n\n            reset(newPath);\n\n            this.onChangeDirectory(id, newPath);\n        });\n        \n        $pane.find('.navbar-main__pane__move-button--new-dir').toggle(this.canCreateDirectory == true);\n\n        if(this.canCreateDirectory) {\n            $pane.find('.navbar-main__pane__move-button--new-dir').on('click', () => {\n                HashBrown.Helpers.MediaHelper.getMediaById(id)\n                .then((item) => {\n                    let messageModal = new HashBrown.Views.Modals.Modal({\n                        title: 'Move item',\n                        body: _.div({class: 'widget-group'},\n                            _.input({class: 'widget widget--input text', value: (item.folder || item.parentId || ''), placeholder: '/path/to/media/'}),\n                            _.div({class: 'widget widget--label'}, (item.name || item.title || item.id))\n                        ),\n                        actions: [\n                            {\n                                label: 'OK',\n                                onClick: () => {\n                                    let newPath = messageModal.$element.find('.widget--input').val();\n                                    \n                                    reset(newPath);\n\n                                    this.onChangeDirectory(item.id, newPath);\n                                }\n                            }\n                        ]\n                    });\n                })\n                .catch(UI.errorModal);\n            });\n        }\n    }\n}\n\nmodule.exports = NavbarPane;\n","'use strict';\n\n/**\n * The Connection navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass ConnectionPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: Click new connection\n     */\n    static onClickNewConnection() {\n        let newConnection;\n\n        HashBrown.Helpers.RequestHelper.request('post', 'connections/new')\n        .then((connection) => {\n            newConnection = connection;\n\n            return HashBrown.Helpers.RequestHelper.reloadResource('connections');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            location.hash = '/connections/' + newConnection.id;\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: On click remove connection\n     */\n    static onClickRemoveConnection() {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let name = $element.data('name');\n        \n        new UI.confirmModal('delete', 'Delete connection', 'Are you sure you want to remove the connection \"' + name + '\"?', () => {\n            HashBrown.Helpers.RequestHelper.request('delete', 'connections/' + id)\n            .then(() => {\n                debug.log('Removed connection with alias \"' + id + '\"', this); \n\n                return HashBrown.Helpers.RequestHelper.reloadResource('connections');\n            })\n            .then(() => {\n                HashBrown.Views.Navigation.NavbarMain.reload();\n\n                // Cancel the ConnectionEditor view if it was displaying the deleted connection\n                if(location.hash == '#/connections/' + id) {\n                    location.hash = '/connections/';\n                }\n            })\n            .catch(UI.errorModal);\n        });\n    }\n    \n    /**\n     * Event: Click pull connection\n     */\n    static onClickPullConnection() {\n        let connectionEditor = Crisp.View.get('ConnectionEditor');\n        let pullId = $('.context-menu-target').data('id');\n\n        // API call to pull the Connection by id\n        HashBrown.Helpers.RequestHelper.request('post', 'connections/pull/' + pullId, {})\n        \n        // Upon success, reload all Connection models    \n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('connections');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n\t\t\tlocation.hash = '/connections/' + pullId;\n\t\t\n\t\t\tlet editor = Crisp.View.get('ConnectionEditor');\n\n\t\t\tif(editor && editor.model.id == pullId) {\n                editor.model = null;\n\t\t\t\teditor.fetch();\n\t\t\t}\n        }) \n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click push connection\n     */\n    static onClickPushConnection() {\n\t\tlet $element = $('.context-menu-target');\n        let pushId = $element.data('id');\n\n\t\t$element.parent().addClass('loading');\n\n        // API call to push the Connection by id\n        HashBrown.Helpers.RequestHelper.request('post', 'connections/push/' + pushId)\n\n        // Upon success, reload all Connection models\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('connections');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        }) \n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Init\n     */\n    static init() {\n        if(!currentUserHasScope('connections')) { return; }\n\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/connections/', 'Connections', 'exchange', {\n            icon: 'exchange',\n            \n            getItems: () => { return resources.connections; },\n\n            // Item context menu\n            getItemContextMenu: (item) => {\n                let menu = {};\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n                \n                menu['This connection'] = '---';\n\n                menu['Open in new tab'] = () => { this.onClickOpenInNewTab(); };\n\n                if(!item.sync.hasRemote && !item.sync.isRemote && !item.isLocked) {\n                    menu['Remove'] = () => { this.onClickRemoveConnection(); };\n                }\n                \n                menu['Copy id'] = () => { this.onClickCopyItemId(); };\n\n                if(item.isLocked && !item.sync.isRemote) { isSyncEnabled = false; }\n\n                if(isSyncEnabled) {\n                    menu['Sync'] = '---';\n\n                    if(!item.sync.isRemote) {\n                        menu['Push to remote'] = () => { this.onClickPushConnection(); };\n                    }\n\n                    if(item.sync.hasRemote) {\n                        menu['Remove local copy'] = () => { this.onClickRemoveConnection(); };\n                    }\n                    \n                    if(item.sync.isRemote) {\n                        menu['Pull from remote'] = () => { this.onClickPullConnection(); };\n                    }\n                }\n                \n                menu['General'] = '---';\n                menu['New connection'] = () => { this.onClickNewConnection(); };\n                menu['Refresh'] = () => { this.onClickRefreshResource('connections'); };\n\n                return menu;\n            },\n            \n            // General context menu\n            paneContextMenu: {\n                'Connections': '---',\n                'New connection': () => { this.onClickNewConnection(); },\n                'Refresh': () => { this.onClickRefreshResource('connections'); }\n            }\n        });\n    }\n}\n\nmodule.exports = ConnectionPane;\n","'use strict';\n\n/**\n * The Content navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass ContentPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: Change parent\n     */\n    static onChangeDirectory(id, parentId) {\n        if(parentId == '/') {\n            parentId = '';\n        }\n\n        // Get the Content model\n        HashBrown.Helpers.ContentHelper.getContentById(id)\n\n        // API call to apply changes to Content parent\n        .then((content) => {\n            content.parentId = parentId;\n         \n            return HashBrown.Helpers.RequestHelper.request('post', 'content/' + id, content);\n        })\n\n        // Reload all Content models\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n\n        // Reload UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Change sort index\n     */\n    static onChangeSortIndex(id, newIndex, parentId) {\n        if(parentId == '/') {\n            parentId = '';\n        }\n        \n        // Get the Content model\n        HashBrown.Helpers.ContentHelper.getContentById(id)\n\n        // API call to apply changes to Content parent\n        .then((content) => {\n            content.sort = newIndex;\n            content.parentId = parentId;\n         \n            return HashBrown.Helpers.RequestHelper.request('post', 'content/' + id, content);\n        })\n\n        // Reload all Content models\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n\n        // Reload UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click pull content\n     */\n    static onClickPullContent() {\n        let contentEditor = Crisp.View.get('ContentEditor');\n        let pullId = $('.context-menu-target').data('id');\n\n        // API call to pull the Content by id\n        HashBrown.Helpers.RequestHelper.request('post', 'content/pull/' + pullId, {})\n        \n        // Upon success, reload all Content models    \n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n\t\t\tlocation.hash = '/content/' + pullId;\n\t\t\n\t\t\tlet editor = Crisp.View.get('ContentEditor');\n\n\t\t\tif(editor && editor.model && editor.model.id == pullId) {\n                editor.model = null;\n\t\t\t\teditor.fetch();\n\t\t\t}\n        }) \n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click push content\n     */\n    static onClickPushContent() {\n\t\tlet $element = $('.context-menu-target');\n        let pushId = $element.data('id');\n\n\t\t$element.parent().addClass('loading');\n\n        // API call to push the Content by id\n        HashBrown.Helpers.RequestHelper.request('post', 'content/push/' + pushId)\n\n        // Upon success, reload all Content models\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        }) \n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click new content\n     *\n     * @param {String} parentId\n     */\n    static onClickNewContent(parentId, asSibling) {\n        // Try to get a parent Schema if it exists\n        return function getParentSchema() {\n            if(parentId) {\n                return HashBrown.Helpers.ContentHelper.getContentById(parentId)\n                .then((parentContent) => {\n                    return HashBrown.Helpers.SchemaHelper.getSchemaById(parentContent.schemaId);\n                });\n            } else {\n                return Promise.resolve();\n            }\n        }()\n\n        // Parent Schema logic resolved, move on\n        .then((parentSchema) => {\n            let allowedSchemas = parentSchema ? parentSchema.allowedChildSchemas : null;\n\n            // If allowed child Schemas were found, but none were provided, don't create the Content node\n            if(allowedSchemas && allowedSchemas.length < 1) {\n                return Promise.reject(new Error('No child content schemas are allowed under this parent'));\n            \n            // Some child Schemas were provided, or no restrictions were defined\n            } else {\n                let schemaId;\n                let sortIndex = HashBrown.Helpers.ContentHelper.getNewSortIndex(parentId);\n              \n                // Instatiate a new Content Schema reference editor\n                let schemaReference = new HashBrown.Views.Editors.FieldEditors.ContentSchemaReferenceEditor({\n                    config: {\n                        allowedSchemas: allowedSchemas,\n                        parentSchema: parentSchema\n                    }\n                });\n\n                schemaReference.on('change', (newValue) => {\n                    schemaId = newValue;\n                });\n\n                schemaReference.pickFirstSchema();\n\n                schemaReference.$element.addClass('widget');\n\n                // Render the confirmation modal\n                UI.confirmModal(\n                    'OK',\n                    'Create new content',\n                    _.div({class: 'widget-group'},\n                        _.label({class: 'widget widget--label'},'Schema'),\n                        schemaReference.$element\n                    ),\n\n                    // Event fired when clicking \"OK\"\n                    () => {\n                        if(!schemaId) { return false; }\n                       \n                        let apiUrl = 'content/new/' + schemaId + '?sort=' + sortIndex;\n\n                        let newContent;\n\n                        // Append parent Content id to request URL\n                        if(parentId) {\n                            apiUrl += '&parent=' + parentId;\n                        }\n\n                        // API call to create new Content node\n                        HashBrown.Helpers.RequestHelper.request('post', apiUrl)\n                        \n                        // Upon success, reload resource and UI elements    \n                        .then((result) => {\n                            newContent = result;\n\n                            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n                        })\n                        .then(() => {\n                            HashBrown.Views.Navigation.NavbarMain.reload();\n                            \n                            location.hash = '/content/' + newContent.id;\n                        })\n                        .catch(UI.errorModal);\n                    }\n                );\n            }\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Render Content publishing modal\n     *\n     * @param {Content} content\n     */\n    static renderPublishingModal(content) {\n        let modal = new HashBrown.Views.Modals.PublishingSettingsModal({\n            model: content\n        });\n\n        modal.on('change', (newValue) => {\n            if(newValue.governedBy) { return; }\n           \n            // Commit publishing settings to Content model\n            content.settings.publishing = newValue;\n    \n            // API call to save the Content model\n            HashBrown.Helpers.RequestHelper.request('post', 'content/' + content.id, content)\n            \n            // Upon success, reload the UI    \n            .then(() => {\n                HashBrown.Views.Navigation.NavbarMain.reload();\n\n                if(Crisp.Router.params.id == content.id) {\n                    let contentEditor = Crisp.View.get('ContentEditor');\n\n                    contentEditor.model = content;\n                    return contentEditor.fetch();\n                \n                } else {\n                    return Promise.resolve();\n\n                }\n            })\n            .catch(UI.errorModal);\n        });\n    }\n\n    /**\n     * Event: Click Content settings\n     */\n    static onClickContentPublishing() {\n        let id = $('.context-menu-target').data('id');\n\n        // Get Content model\n        let content = HashBrown.Helpers.ContentHelper.getContentByIdSync(id);\n\n        this.renderPublishingModal(content);\n    }\n\n    /**\n     * Event: Click remove content\n     *\n     * @param {Boolean} shouldUnpublish\n     */\n    static onClickRemoveContent(shouldUnpublish) {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let name = $element.data('name');\n    \n        HashBrown.Helpers.ContentHelper.getContentById(id)\n        .then((content) => {\n            content.settingsSanityCheck('publishing');\n\n            function unpublishConnection() {\n                return HashBrown.Helpers.RequestHelper.request('post', 'content/unpublish', content)\n                .then(() => {\n                    return onSuccess();\n                });\n            }\n            \n            function onSuccess() {\n                return HashBrown.Helpers.RequestHelper.reloadResource('content')\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n                            \n                    let contentEditor = Crisp.View.get('ContentEditor');\n                   \n                    // Change the ContentEditor view if it was displaying the deleted content\n                    if(contentEditor && contentEditor.model && contentEditor.model.id == id) {\n                        // The Content was actually deleted\n                        if(shouldUnpublish) {\n                            location.hash = '/content/';\n                        \n                        // The Content still has a synced remote\n                        } else {\n                            contentEditor.model = null;\n                            contentEditor.fetch();\n\n                        }\n                    }\n                    \n                    $element.parent().toggleClass('loading', false);\n\n                    return Promise.resolve();\n                });\n            }\n\n            let shouldDeleteChildren = false;\n            \n            UI.confirmModal(\n                'Remove',\n                'Remove the content \"' + name + '\"?',\n                _.div({class: 'widget-group'},\n                    _.label({class: 'widget widget--label'}, 'Remove child Content too'),\n                    new HashBrown.Views.Widgets.Input({\n                        value: shouldDeleteChildren,\n                        type: 'checkbox',\n                        onChange: (newValue) => {\n                            shouldDeleteChildren = newValue;\n                        }\n                    }).$element\n                ),\n                () => {\n                    $element.parent().toggleClass('loading', true);\n\n                    HashBrown.Helpers.RequestHelper.request('delete', 'content/' + id + '?removeChildren=' + shouldDeleteChildren)\n                    .then(() => {\n                        if(shouldUnpublish && content.getSettings('publishing').connectionId) {\n                            return unpublishConnection();\n                        } else {\n                            return onSuccess();\n                        }\n                    })\n                    .catch((e) => {\n                        $element.parent().toggleClass('loading', false);\n                        UI.errorModal(e);\n                    });\n                }\n            );\n        });\n    }\n\n    /**\n     * Event: Click rename\n     */\n    static onClickRename() {\n        let id = $('.context-menu-target').data('id');\n        let content = HashBrown.Helpers.ContentHelper.getContentByIdSync(id);\n\n        UI.messageModal(\n            'Rename \"' + content.getPropertyValue('title', window.language) + '\"', \n            _.div({class: 'widget-group'}, \n                _.label({class: 'widget widget--label'}, 'New name'),\n                new HashBrown.Views.Widgets.Input({\n                    value: content.getPropertyValue('title', window.language), \n                    onChange: (newValue) => {\n                        content.setPropertyValue('title', newValue, window.language);\n                    }\n                })\n            ),\n            () => {\n                HashBrown.Helpers.ContentHelper.setContentById(id, content)\n                .then(() => {\n                    return HashBrown.Helpers.RequestHelper.reloadResource('content');\n                })\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n\n                    // Update ContentEditor if needed\n                    let contentEditor = Crisp.View.get('ContentEditor');\n\n                    if(!contentEditor || contentEditor.model.id !== id) { return; }\n\n                    contentEditor.model = null;\n                    contentEditor.fetch();\n                })\n                .catch(UI.errorModal);\n            }\n        );\n    }\n\n    /**\n     * Init\n     */\n    static init() {\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/content/', 'Content', 'file', {\n            getItems: () => { return resources.content; },\n\n            // Item context menu\n            getItemContextMenu: (item) => {\n                let menu = {};\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n                \n                menu['This content'] = '---';\n                \n                menu['Open in new tab'] = () => { this.onClickOpenInNewTab(); };\n                \n                menu['Rename'] = () => { this.onClickRename(); };\n\n                menu['New child content'] = () => {\n                    this.onClickNewContent($('.context-menu-target').data('id'));\n                };\n                                \n                if(!item.sync.isRemote && !item.isLocked) {\n                    menu['Move'] = () => { this.onClickMoveItem(); };\n                }\n\n                if(!item.sync.hasRemote && !item.isLocked) {\n                    menu['Remove'] = () => { this.onClickRemoveContent(true); };\n                }\n                \n                menu['Copy id'] = () => { this.onClickCopyItemId(); };\n                \n                if(!item.sync.isRemote && !item.isLocked) {\n                    menu['Settings'] = '---';\n                    menu['Publishing'] = () => { this.onClickContentPublishing(); };\n                }\n                \n                if(item.isLocked && !item.sync.isRemote) { isSyncEnabled = false; }\n               \n                if(isSyncEnabled) {\n                    menu['Sync'] = '---';\n                    \n                    if(!item.sync.isRemote) {\n                        menu['Push to remote'] = () => { this.onClickPushContent(); };\n                    }\n\n                    if(item.sync.hasRemote) {\n                        menu['Remove local copy'] = () => { this.onClickRemoveContent(); };\n                    }\n                    \n                    if(item.sync.isRemote) {\n                        menu['Pull from remote'] = () => { this.onClickPullContent(); };\n                    }\n                }\n\n                menu['General'] = '---';\n                menu['New content'] = () => { this.onClickNewContent(); };  \n                menu['Refresh'] = () => { this.onClickRefreshResource('content'); };\n\n                return menu;\n            },\n\n            // Set general context menu items\n            paneContextMenu: {\n                'Content': '---',\n                'New content': () => { this.onClickNewContent(); },\n                'Refresh': () => { this.onClickRefreshResource('content'); }\n            },\n\n            // Hierarchy logic\n            hierarchy: function(item, queueItem) {\n                // Set id data attributes\n                queueItem.$element.attr('data-content-id', item.id);\n                queueItem.parentDirAttr = {'data-content-id': item.parentId };\n            }\n        });\n    }\n}\n\nmodule.exports = ContentPane;\n","'use strict';\n\n/**\n * The Forms navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass FormsPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: Click create new form\n     */\n    static onClickNewForm() {\n        HashBrown.Helpers.RequestHelper.request('post', 'forms/new')\n        .then((newFormId) => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('forms')\n            .then(() => {\n                HashBrown.Views.Navigation.NavbarMain.reload();\n                \n                location.hash = '/forms/' + newFormId;\n            });\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: On click remove\n     */\n    static onClickRemoveForm() {\n        let view = this;\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let form = resources.forms.filter((form) => { return form.id == id; })[0];\n\n        UI.confirmModal(\n            'delete',\n            'Delete form',\n            'Are you sure you want to delete the form \"' + form.title + '\"?',\n            () => {\n                HashBrown.Helpers.RequestHelper.request('delete', 'forms/' + form.id)\n                .then(() => {\n                    debug.log('Removed Form with id \"' + form.id + '\"', view); \n\n                    return HashBrown.Helpers.RequestHelper.reloadResource('forms');\n                })\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n\n                    // Cancel the FormEditor view\n                    location.hash = '/forms/';\n                })\n                .catch(UI.errorModal);\n            }\n        );\n    }\n    \n    /**\n     * Event: Click pull Form\n     */\n    static onClickPullForm() {\n        let pullId = $('.context-menu-target').data('id');\n\n        // API call to pull the Form by id\n        HashBrown.Helpers.RequestHelper.request('post', 'forms/pull/' + pullId, {})\n        \n        // Upon success, reload all Form models    \n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('forms');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n\t\t\tlocation.hash = '/forms/' + pullId;\n\t\t\n\t\t\tlet editor = Crisp.View.get('FormEditor');\n\n\t\t\tif(editor && editor.model.id == pullId) {\n                editor.model = null;\n\t\t\t\teditor.fetch();\n\t\t\t}\n        }) \n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click push Form\n     */\n    static onClickPushForm() {\n\t\tlet $element = $('.context-menu-target');\n        let pushId = $element.data('id');\n\n\t\t$element.parent().addClass('loading');\n\n        HashBrown.Helpers.RequestHelper.request('post', 'forms/push/' + pushId)\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('forms');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        }) \n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Init\n     */\n    static init() {\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/forms/', 'Forms', 'wpforms', {\n            icon: 'wpforms',\n            \n            getItems: () => { return resources.forms; },\n\n            // Hierarchy logic\n            hierarchy: function(item, queueItem) {\n                queueItem.$element.attr('data-form-id', item.id);\n               \n                if(item.folder) {\n                    queueItem.createDir = true;\n                    queueItem.parentDirAttr = {'data-form-folder': item.folder };\n                }\n            },\n            \n            // Item context menu\n            getItemContextMenu: (item) => {\n                let menu = {};\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n                \n                menu['This form'] = '---';\n\n                menu['Open in new tab'] = () => { this.onClickOpenInNewTab(); };\n\n                if(!item.sync.hasRemote && !item.sync.isRemote && !item.isLocked) {\n                    menu['Remove'] = () => { this.onClickRemoveForm(); };\n                }\n                \n                menu['Copy id'] = () => { this.onClickCopyItemId(); };\n\n                if(item.isLocked && !item.sync.isRemote) { isSyncEnabled = false; }\n\n                if(isSyncEnabled) {\n                    menu['Sync'] = '---';\n\n                    if(!item.sync.isRemote) {\n                        menu['Push to remote'] = () => { this.onClickPushForm(); };\n                    }\n\n                    if(item.sync.hasRemote) {\n                        menu['Remove local copy'] = () => { this.onClickRemoveForm(); };\n                    }\n                    \n                    if(item.sync.isRemote) {\n                        menu['Pull from remote'] = () => { this.onClickPullForm(); };\n                    }\n                }\n                \n                menu['General'] = '---';\n                menu['New form'] = () => { this.onClickNewForm(); };\n                menu['Refresh'] = () => { this.onClickRefreshResource('forms'); };\n\n                return menu;\n            },\n            \n            // General context menu\n            paneContextMenu: {\n                'Forms': '---',\n                'New form': () => { this.onClickNewForm(); },\n                'Refresh': () => { this.onClickRefreshResource('forms'); }\n            }\n        });\n    }\n}\n\nmodule.exports = FormsPane;\n","'use strict';\n\n/**\n * The Media navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass MediaPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: On change folder path\n     *\n     * @param {String} newFolder\n     */\n    static onChangeDirectory(id, newFolder) {\n        HashBrown.Helpers.RequestHelper.request(\n            'post',\n            'media/tree/' + id,\n            newFolder ? {\n                id: id,\n                folder: newFolder\n            } : null\n        )\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('media');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            location.hash = '/media/' + id;\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click rename media\n     */\n    static onClickRenameMedia() {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let name = $element.data('name');\n\n        let modal = UI.messageModal(\n            'Rename ' + name,\n            new HashBrown.Views.Widgets.Input({\n                type: 'text',\n                value: name,\n                onChange: (newValue) => { name = newValue; }\n            }),\n            () => {\n                HashBrown.Helpers.RequestHelper.request('post', 'media/rename/' + id + '?name=' + name)\n                .then(() => {\n                    return HashBrown.Helpers.RequestHelper.reloadResource('media');\n                })\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n\n                    let mediaViewer = Crisp.View.get(HashBrown.Views.Editors.MediaViewer);\n\n                    if(mediaViewer && mediaViewer.model && mediaViewer.model.id === id) {\n                        mediaViewer.model = null;\n\n                        mediaViewer.fetch();\n                    }\n                })\n                .catch(UI.errorModal);\n            }\n        );\n\n        modal.$element.find('input').focus();\n    }\n\n    /**\n     * Event: Click remove media\n     */\n    static onClickRemoveMedia() {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let name = $element.data('name');\n        \n        UI.confirmModal(\n            'delete',\n            'Delete media',\n            'Are you sure you want to delete the media object \"' + name + '\"?',\n            () => {\n                $element.parent().toggleClass('loading', true);\n\n                HashBrown.Helpers.RequestHelper.request('delete', 'media/' + id)\n                .then(() => {\n                    return HashBrown.Helpers.RequestHelper.reloadResource('media');\n                })\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n\n                    // Cancel the MediaViever view if it was displaying the deleted object\n                    if(location.hash == '#/media/' + id) {\n                        location.hash = '/media/';\n                    }\n                })\n                .catch(UI.errorModal);\n            }\n        );\n    }\n\n    /**\n     * Event: Click replace media\n     */\n    static onClickReplaceMedia() {\n        let id = $('.context-menu-target').data('id');\n\n        this.onClickUploadMedia(id);\n    }\n\n    /**\n     * Event: Click upload media\n     */\n    static onClickUploadMedia(replaceId) {\n        let folder = $('.context-menu-target').data('media-folder') || '/';\n\n        new HashBrown.Views.Modals.MediaUploader({\n            onSuccess: (ids) => {\n                // We got one id back\n                if(typeof ids === 'string') {\n                    location.hash = '/media/' + ids;\n\n                // We got several ids back\n                } else if(Array.isArray(ids)) {\n                    location.hash = '/media/' + ids[0];\n                \n                }\n\n                // Refresh on replace\n                if(replaceId) {\n                    let mediaViewer = Crisp.View.get(HashBrown.Views.Editors.MediaViewer);\n\n                    if(mediaViewer) {\n                        mediaViewer.model = null;\n\n                        mediaViewer.fetch();\n                    }\n                }\n            },\n            replaceId: replaceId,\n            folder: folder\n        });\n    }\n    \n    /**\n     * Init\n     */\n    static init() {\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/media/', 'Media', 'file-image-o', {\n            getItems: () => { return resources.media; },\n\n            // Hierarchy logic\n            hierarchy: (item, queueItem) => {\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n\n                queueItem.$element.attr('data-media-id', item.id);\n                queueItem.$element.attr('data-remote', true);\n               \n                if(item.folder) {\n                    queueItem.createDir = true;\n                    queueItem.parentDirAttr = { 'data-media-folder': item.folder };\n                    queueItem.parentDirExtraAttr = { 'data-remote': isSyncEnabled };\n                }\n            },\n            \n            // Item context menu\n            itemContextMenu: {\n                'This media': '---',\n                'Open in new tab': () => { this.onClickOpenInNewTab(); },\n                'Move': () => { this.onClickMoveItem(); },\n                'Rename': () => { this.onClickRenameMedia(); },\n                'Remove': () => { this.onClickRemoveMedia(); },\n                'Replace': () => { this.onClickReplaceMedia(); },\n                'Copy id': () => { this.onClickCopyItemId(); },\n                'General': '---',\n                'Upload new media': () => { this.onClickUploadMedia(); },\n                'Refresh': () => { this.onClickRefreshResource('media'); }\n            },\n\n            // Dir context menu\n            dirContextMenu: {\n                'Directory': '---',\n                'Upload new media': () => { this.onClickUploadMedia(); },\n                'General': '---',\n                'Refresh': () => { this.onClickRefreshResource('media'); }\n            },\n\n            // General context menu\n            paneContextMenu: {\n                'Media': '---',\n                'Upload new media': () => { this.onClickUploadMedia(); },\n                'Refresh': () => { this.onClickRefreshResource('media'); }\n            }\n        });\n    }\n}\n\n// Settings\nMediaPane.canCreateDirectory = true;\n\nmodule.exports = MediaPane;\n","'use strict';\n\n/**\n * The Schema navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass SchemaPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: Click remove schema\n     */\n    static onClickRemoveSchema() {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(id);\n        \n        if(!schema.isLocked) {\n            UI.confirmModal(\n                'delete',\n                'Delete schema',\n                'Are you sure you want to delete the schema \"' + schema.name + '\"?',\n                () => {\n                    HashBrown.Helpers.RequestHelper.request('delete', 'schemas/' + id)\n                    .then(() => {\n                        debug.log('Removed schema with id \"' + id + '\"', this); \n\n                        return HashBrown.Helpers.RequestHelper.reloadResource('schemas');\n                    })\n                    .then(() => {\n                        HashBrown.Views.Navigation.NavbarMain.reload();\n\n                        // Cancel the SchemaEditor view if it was displaying the deleted content\n                        if(location.hash == '#/schemas/' + id) {\n                            location.hash = '/schemas/';\n                        }\n                    })\n                    .catch(UI.errorModal);\n                }\n            );\n        } else {\n            UI.messageModal(\n                'Delete schema',\n                'The schema \"' + schema.name + '\" is locked and cannot be removed'\n            );\n        }\n    }\n\n    /**\n     * Event: Click new Schema\n     */\n    static onClickNewSchema() {\n        let parentId = $('.context-menu-target').data('id');\n        let parentSchema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(parentId);\n\n        HashBrown.Helpers.RequestHelper.request('post', 'schemas/new', parentSchema)\n        .then((newSchema) => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('schemas')\n            .then(() => {\n                HashBrown.Views.Navigation.NavbarMain.reload();\n\n                location.hash = '/schemas/' + newSchema.id;\n            });\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click pull Schema\n     */\n    static onClickPullSchema() {\n        let schemaEditor = Crisp.View.get('SchemaEditor');\n        let pullId = $('.context-menu-target').data('id');\n\n        HashBrown.Helpers.RequestHelper.request('post', 'schemas/pull/' + pullId, {})\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('schemas');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n           \n\t\t\tlocation.hash = '/schemas/' + pullId;\n\t\t\n\t\t\tlet editor = Crisp.View.get('SchemaEditor');\n\n\t\t\tif(editor && editor.model.id == pullId) {\n                editor.model = null;\n\t\t\t\teditor.fetch();\n\t\t\t}\n        }) \n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click push Schema\n     */\n    static onClickPushSchema() {\n\t\tlet $element = $('.context-menu-target');\n        let pushId = $element.data('id');\n\n\t\t$element.parent().addClass('loading');\n\n        HashBrown.Helpers.RequestHelper.request('post', 'schemas/push/' + pushId)\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('schemas');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        }) \n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Init\n     */\n    static init() {\n        if(!currentUserHasScope('schemas')) { return; }\n\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/schemas/', 'Schemas', 'gears', {\n            getItems: () => { return resources.schemas; },\n\n            // Item context menu\n            getItemContextMenu: (item) => {\n                let menu = {};\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n\n                menu['This schema'] = '---';\n                \n                menu['Open in new tab'] = () => { this.onClickOpenInNewTab(); };\n               \n                menu['New child schema'] = () => { this.onClickNewSchema(); };\n                \n                if(!item.sync.hasRemote && !item.sync.isRemote && !item.isLocked) {\n                    menu['Remove'] = () => { this.onClickRemoveSchema(); };\n                }\n                \n                menu['Copy id'] = () => { this.onClickCopyItemId(); };\n                \n                if(item.isLocked && !item.sync.isRemote) { isSyncEnabled = false; }\n\n                if(isSyncEnabled) {\n                    menu['Sync'] = '---';\n                    \n                    if(!item.sync.isRemote) {\n                        menu['Push to remote'] = () => { this.onClickPushSchema(); };\n                    }\n\n                    if(item.sync.hasRemote) {\n                        menu['Remove local copy'] = () => { this.onClickRemoveSchema(); };\n                    }\n\n                    if(item.sync.isRemote) {\n                        menu['Pull from remote'] = () => { this.onClickPullSchema(); };\n                    }\n                }\n\n                menu['General'] = '---';\n                menu['Refresh'] = () => { this.onClickRefreshResource('schemas'); };\n\n                return menu;\n            },\n            \n            // Set general context menu items\n            paneContextMenu: {\n                'Schemas': '---',\n                'Refresh': () => { this.onClickRefreshResource('schemas'); }\n            },\n\n            // Hierarchy logic\n            hierarchy: function(item, queueItem) {\n                queueItem.$element.attr('data-schema-id', item.id);\n              \n                if(item.parentSchemaId) {\n                    queueItem.parentDirAttr = {'data-schema-id': item.parentSchemaId };\n\n                } else {\n                    queueItem.parentDirAttr = {'data-schema-type': item.type};\n                }\n            }\n        });\n    }\n}\n\nmodule.exports = SchemaPane;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Dashboard\n */\nnamespace('Views.Dashboard')\n.add(require('./BackupEditor'))\n.add(require('./InfoEditor'))\n.add(require('./LanguageEditor'))\n.add(require('./MigrationEditor'))\n.add(require('./ProjectEditor'))\n.add(require('./SyncEditor'));\n","'use strict';\n\n/**\n * The project backup editor\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass BackupEditor extends HashBrown.Views.Modals.Modal {\n    /**\n     * Event: Click upload button\n     */\n    onClickUploadBackup() {\n        let uploadModal = new HashBrown.Views.Modals.Modal({\n            title: 'Upload a backup file',\n            body: new HashBrown.Views.Widgets.Input({\n                type: 'file',\n                name: 'backup',\n                onSubmit: (formData) => {\n                    let apiPath = 'server/backups/' + this.model.id + '/upload';\n\n                    // TODO: Use the HashBrown.Helpers.ReqestHelper for this\n                    $.ajax({\n                        url: HashBrown.Helpers.RequestHelper.environmentUrl(apiPath),\n                        type: 'POST',\n                        data: formData,\n                        processData: false,\n                        contentType: false,\n                        success: (id) => {\n                            this.model = null;\n                            this.fetch();\n\n                            uploadModal.close();\n                        }\n                    });\n                }\n            }).$element,\n            actions: [\n                {\n                    label: 'OK',\n                    onClick: () => {\n                        uploadModal.$element.find('form').submit();\n                        \n                        return false;\n                    }\n                }\n            ]\n        });\n    }\n\n    /**\n     * Event: Click backup button\n     */\n    onClickCreateBackup() {\n        if(!currentUserIsAdmin()) { return; }\n\n        HashBrown.Helpers.RequestHelper.request('post', 'server/backups/' + this.model.id + '/new')\n        .then((data) => {\n            this.model = null;\n            this.fetch();\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click restore backup button\n     *\n     * @param {String} timestamp\n     */\n    onClickRestoreBackup(timestamp) {\n        if(!currentUserIsAdmin()) { return; }\n            \n        let label = '\"' + timestamp + '\"';\n        let date = new Date(parseInt(timestamp));\n\n        if(!isNaN(date.getTime())) {\n            label = date.toString();\n        }\n                            \n        let modal = UI.confirmModal('restore', 'Restore backup', 'Are you sure you want to restore the backup ' + label + '? Current content will be replaced.', () => {\n            HashBrown.Helpers.RequestHelper.request('post', 'server/backups/' + this.model.id + '/' + timestamp + '/restore')\n            .then(() => {\n                modal.close();\n                \n                this.trigger('change');\n\n                this.close();\n            })\n            .catch(UI.errorModal);\n        });\n    }\n    \n    /**\n     * Event: Click delete backup button\n     */ \n    onClickDeleteBackup(timestamp) {\n        if(!currentUserIsAdmin()) { return; }\n        \n        let label = timestamp;\n        let date = new Date(parseInt(timestamp));\n\n        if(!isNaN(date.getTime())) {\n            label = date.toString();\n        }\n        \n        let modal = UI.confirmModal('delete', 'Delete backup', 'Are you sure you want to delete the backup \"' + label + '\"?', () => {\n            HashBrown.Helpers.RequestHelper.request('delete', 'server/backups/' + this.model.id + '/' + timestamp)\n            .then(() => {\n                modal.close();\n\n                this.model = null;\n                this.fetch();\n            })\n            .catch(UI.errorModal);\n        });\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(this.model instanceof HashBrown.Models.Project === false) {\n            this.model = new HashBrown.Models.Project(this.model);\n        }\n        \n        this.title = this.model.settings.info.name + ' backups';\n        this.body = _.div(\n            _.if(!this.model.backups || this.model.backups.length < 1,\n                _.label({class: 'widget widget--label'}, 'No backups yet')\n            ),\n            // List existing backups\n            _.each(this.model.backups, (i, backup) => {\n                let label = backup;\n                let date = new Date(parseInt(backup));\n\n                if(!isNaN(date.getTime())) {\n                    label = date.toString();\n                }\n\n                return _.div({class: 'page--dashboard__backup-editor__backup widget-group'},\n                    _.p({class: 'widget widget--label page--dashboard__backup-editor__back__label'}, label),\n                    new HashBrown.Views.Widgets.Dropdown({\n                        icon: 'ellipsis-v',\n                        reverseKeys: true,\n                        options: {\n                            'Restore': () => { this.onClickRestoreBackup(backup); },\n                            'Download': () => { location = HashBrown.Helpers.ReqestHelper.environmentUrl('server/backups/' + this.model.id + '/' + backup + '.hba') },\n                            'Delete': () => { this.onClickDeleteBackup(backup); }\n                        }\n                    }).$element\n                );\n            })\n        );\n\n    }\n\n    /**\n     * Renders the modal footer\n     *\n     * @returns {HTMLElement} Footer\n     */\n    renderFooter() {\n        return [    \n            _.button({class: 'widget widget--button', title: 'Upload backup'}, 'Upload')\n                .click(() => { this.onClickUploadBackup(); }),\n            _.button({class: 'widget widget--button', title: 'Create a new backup'}, 'Create')\n                .click(() => { this.onClickCreateBackup(); })\n        ];\n    }\n}\n\nmodule.exports = BackupEditor;\n","'use strict';\n\n/**\n * The info settings editor\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass InfoEditor extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params.title = 'Project info';\n        params.actions = [\n            {\n                label: 'Save',\n                onClick: () => {\n                    this.onClickSave();\n\n                    return false;\n                }\n            }\n        ];\n\n        params.autoFetch = false;\n\n        super(params);\n\n        this.fetch();\n    }\n    \n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        HashBrown.Helpers.SettingsHelper.setSettings(this.model.id, null, 'info', this.model.settings.info)\n        .then(() => {\n            this.close();\n\n            this.trigger('change', this.model);\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        if(!this.model) { return; }\n\n        return _.div({class: 'widget-group'},\n            _.span({class: 'widget widget--label'}, 'Name'),\n            new HashBrown.Views.Widgets.Input({\n                value: this.model.settings.info.name,\n                onChange: (newName) => {\n                    this.model.settings.info.name = newName\n                }\n            })\n        );\n    }\n}\n\nmodule.exports = InfoEditor;\n","'use strict';\n\n/**\n * The language settings editor\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass LanguageEditor extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params.title = 'Languages';\n        params.actions = [\n            {\n                label: 'Save',\n                onClick: () => {\n                    this.onClickSave();\n\n                    return false;\n                }\n            }\n        ];\n\n        params.autoFetch = false;\n\n        super(params);\n        \n        this.fetch();\n    }\n\n    /**\n     * Event: Click save\n     */\n    onClickSave() {\n        HashBrown.Helpers.LanguageHelper.setLanguages(this.model.id, this.model.settings.languages)\n        .then(() => {\n            this.close();\n\n            this.trigger('change');\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return _.div({class: 'widget-group'},\n            _.label({class: 'widget widget--label'}, 'Selected languages'),\n            new HashBrown.Views.Widgets.Dropdown({\n                value: this.model.settings.languages,\n                useTypeAhead: true,\n                useMultiple: true,\n                options: HashBown.Helpers.LanguageHelper.getLanguageOptions(this.model.id),\n                onChange: (newValue) => {\n                    this.model.settings.languages = newValue;\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = LanguageEditor;\n","'use strict';\n\n/**\n * The editor for migrating content between environments\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass MigrationEditor extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params.title = 'Migrate content';\n\n        params.actions = [\n            {\n                label: 'Migrate',\n                onClick: () => {\n                    this.onSubmit(); \n\n                    return false;\n                }\n            }\n        ];\n\n        params.data = {\n            from: params.model.environments[0],\n            to: '',\n            settings: {\n                schemas: true,\n                replace: true\n            }\n        };\n\n        super(params);\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(!this.data.to || this.getToOptions().indexOf(this.data.to) < 0) {\n            this.data.to = this.getToOptions()[0];\n        }\n    }\n\n    /**\n     * Renders this modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return [\n            _.div({class: 'widget-group'},\n                new HashBrown.Views.Widgets.Dropdown({\n                    value: this.data.from,\n                    options: this.model.environments,\n                    onChange: (newValue) => {\n                        this.data.from = newValue;\n\n                        this.fetch();\n                    }\n                }).$element,\n                _.div({class: 'widget-group__separator fa fa-arrow-right'}),\n                new HashBrown.Views.Widgets.Dropdown({\n                    value: this.data.to,\n                    options: this.getToOptions(),\n                    onChange: (newValue) => {\n                        this.data.to = newValue;\n                    }\n                }).$element\n            ),\n            _.each({\n                replace: 'Overwrite on target',\n                schemas: 'Schemas',\n                content: 'Content',\n                forms: 'Forms',\n                media: 'Media',\n                connections: 'Connections'\n            }, (key, label) => {\n                return _.div({class: 'widget-group'},      \n                    _.label({class: 'widget widget--label'}, label),\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'checkbox',\n                        value: this.data.settings[key] === true,\n                        onChange: (newValue) => {\n                            this.data.settings[key] = newValue;\n                        }\n                    }).$element\n                );\n            })\n        ];\n    }\n\n    /**\n     * Gets the displayed \"to\" options\n     */\n    getToOptions() {\n        return this.model.environments.filter((environment) => {\n            return environment !== this.data.from;   \n        });\n    }\n\n    /**\n     * Event: Clicked submit\n     */\n    onSubmit() {\n        HashBrown.Helpers.RequestHelper.request('post', 'server/migrate/' + this.model.id, this.data)\n        .then(() => {\n            UI.messageModal('Success', 'Successfully migrated content from \"' + this.data.from + '\" to \"' + this.data.to + '\"', () => {\n                this.trigger('change');\n\n                this.close();\n            });\n        })\n        .catch(UI.errorModal);\n    }\n}\n\nmodule.exports = MigrationEditor;\n","'use strict';\n\n/**\n * The editor for projects as seen on the dashboard\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass ProjectEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        _.append(this.element,\n            _.div({class: 'widget--spinner embedded'},\n                _.div({class: 'widget--spinner__image fa fa-refresh'})\n            )\n        );\n\n        this.fetch();\n    }\n   \n    /**\n     * Event: Click remove button\n     */ \n    onClickRemove() {\n        if(!currentUserIsAdmin()) { return; }\n\n        let modal = new HashBrown.Views.Modals.Modal({\n            title: 'Delete ' + this.model.settings.info.name,\n            body: _.div({class: 'widget-group'},\n                _.p({class: 'widget widget--label'}, 'Type the project name to confirm'),\n                _.input({class: 'widget widget--input text', type: 'text', placeholder: this.model.settings.info.name})\n                    .on('input', (e) => {\n                        let $btn = modal.$element.find('.widget.warning');\n                        let isMatch = $(e.target).val() == this.model.settings.info.name;\n                        \n                        $btn.toggleClass('disabled', !isMatch);\n                    })\n            ),\n            actions: [\n                {\n                    label: 'Cancel',\n                    class: 'default'\n                },\n                {\n                    label: 'Delete',\n                    class: 'warning disabled',\n                    onClick: () => {\n                        HashBrown.Helpers.RequestHelper.request('delete', 'server/projects/' + this.model.id)\n                        .then(() => {\n                            location.reload();\n                        })\n                        .catch(UI.errorModal);\n                    }\n                }\n            ]\n        });\n    }\n\n    /**\n     * Event: Click remove environment\n     *\n     * @param {String} environmentName\n     */\n    onClickRemoveEnvironment(environmentName) {\n        let modal = UI.confirmModal('Remove', 'Remove environment \"' + environmentName + '\"', 'Are you sure want to remove the environment \"' + environmentName + '\" from the project \"' + (this.model.settings.info.name || this.model.id) + '\"?', () => {\n            HashBrown.Helpers.RequestHelper.request('delete', 'server/projects/' + this.model.id + '/' + environmentName)\n            .then(() => {\n                this.model = null;\n                this.fetch();\n            })\n            .catch(UI.errorModal);\n        });\n    }\n    \n    /**\n     * Event: Click info button */\n    onClickInfo() {\n        if(!currentUserIsAdmin()) { return; }\n        \n        new HashBrown.Views.Dashboard.InfoEditor({\n            modelUrl: '/api/server/projects/' + this.model.id\n        })\n        .on('change', (newInfo) => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n    \n    /**\n     * Event: Click sync button\n     */\n    onClickSync() {\n        if(!currentUserIsAdmin()) { return; }\n\n        new HashBrown.Views.Dashboard.SyncEditor({\n            projectId: this.model.id,\n            modelUrl: '/api/' + this.model.id + '/settings/sync'\n        })\n        .on('change', (newSettings) => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n    \n    /**\n     * Event: Click languages button\n     */\n    onClickLanguages() {\n        if(!currentUserIsAdmin()) { return; }\n        \n        new HashBrown.Views.Dashboard.LanguageEditor({\n            modelUrl: '/api/server/projects/' + this.model.id\n        })\n        .on('change', () => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n\n    /**\n     * Event: Click backups button\n     */\n    onClickBackups() {\n        if(!currentUserIsAdmin()) { return; }\n        \n        new HashBrown.Views.Dashboard.BackupEditor({\n            modelUrl: '/api/server/projects/' + this.model.id\n        })\n        .on('change', () => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n\n    /**\n     * Event: Click migration button\n     */\n    onClickMigrate() {\n        if(!currentUserIsAdmin()) { return; }\n\n        if(this.model.environments.length < 2) {\n            UI.errorModal(new Error('You need at least 2 environments to migrate content'));\n            return;\n        }\n    \n        new HashBrown.Views.Dashboard.MigrationEditor({\n            model: this.model\n        })\n        .on('change', () => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n\n    /**\n     * Event: Click add environment button\n     */\n    onClickAddEnvironment() {\n        let modal = new HashBrown.Views.Modals.Modal({\n            title: 'New environment for \"' + this.model.id + '\"',\n            body: _.div({class: 'widget-group'},\n                _.label({class: 'widget widget--label'}, 'Environment name'),\n                new HashBrown.Views.Widgets.Input({\n                    placeholder: 'i.e. \"testing\" or \"staging\"'\n                })\n            ),\n            actions: [\n                {\n                    label: 'Create',\n                    onClick: () => {\n                        let environmentName = modal.$element.find('input').val();\n\n                        if(!environmentName) { return false; }\n\n                        HashBrown.Helpers.RequestHelper.request('put', 'server/projects/' + this.model.id + '/' + environmentName)\n                        .then(() => {\n                            modal.close();\n\n                            this.model = null;\n                            this.fetch();\n                        })\n                        .catch(UI.errorModal);\n\n                        return false;\n                    }\n                }\n            ]\n        });\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(this.model instanceof HashBrown.Models.Project === false) {\n            this.model = new HashBrown.Models.Project(this.model);\n        }\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        let languageCount = this.model.settings.languages.length;\n        let userCount = this.model.users.length;\n\n        return _.div({class: 'page--dashboard__project in'},\n            _.div({class: 'page--dashboard__project__body'},\n                _.if(currentUserIsAdmin(),\n                    new HashBrown.Views.Widgets.Dropdown({\n                        icon: 'ellipsis-v',\n                        reverseKeys: true,\n                        options: {\n                            'Info': () => { this.onClickInfo(); },\n                            'Languages': () => { this.onClickLanguages(); },\n                            'Backups': () => { this.onClickBackups(); },\n                            'Sync': () => { this.onClickSync(); },\n                            'Delete': () => { this.onClickRemove(); },\n                            'Migrate content': () => { this.onClickMigrate(); }\n                        }\n                    }).$element.addClass('page--dashboard__project__menu')\n                ),\n                _.div({class: 'page--dashboard__project__info'},\n                    _.h4(this.model.settings.info.name || this.model.id),\n                    _.p(userCount + ' user' + (userCount != 1 ? 's' : '')),\n                    _.p(languageCount + ' language' + (languageCount != 1 ? 's' : '') + ' (' + this.model.settings.languages.join(', ') + ')')\n                ),\n                _.div({class: 'page--dashboard__project__environments'},\n                    _.each(this.model.environments, (i, environment) => {\n                        return _.div({class: 'page--dashboard__project__environment'},\n                            _.a({title: 'Go to \"' + environment + '\" CMS', href: '/' + this.model.id + '/' + environment, class: 'widget widget--button expanded'}, \n                                environment\n                            ),\n                            _.if(currentUserIsAdmin(),\n                                new HashBrown.Views.Widgets.Dropdown({\n                                    icon: 'ellipsis-v',\n                                    reverseKeys: true,\n                                    options: {\n                                        'Delete': () => { this.onClickRemoveEnvironment(environment); }\n                                    }\n                                }).$element.addClass('page--dashboard__project__environment__menu')\n                            )\n                        );\n                    }),\n                    _.if(currentUserIsAdmin(),\n                        _.button({title: 'Add environment', class: 'widget widget--button round right fa fa-plus'})\n                            .click(() => { this.onClickAddEnvironment(); })\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = ProjectEditor;\n","'use strict';\n\n/**\n * The sync settings editor\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass SyncEditor extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params.title = 'Sync';\n        params.actions = [\n            {\n                label: 'Apply',\n                class: 'btn-primary',\n                onClick: () => {\n                    this.onClickApply();\n\n                    return false;\n                }\n            },\n            {\n                label: 'Save',\n                class: 'btn-primary',\n                onClick: () => {\n                    this.onClickSave();\n\n                    return false;\n                }\n            }\n        ];\n\n        params.autoFetch = false;\n\n        super(params);\n        \n        this.fetch();\n    }\n    \n    /**\n     * Event: Click save. Posts the model to the modelUrl and closes\n     */\n    onClickSave() {\n        this.model.url = this.$element.find('input[name=\"url\"]').val();\n\n        HashBrown.Helpers.SettingsHelper.setSettings(this.projectId, '', 'sync', this.model)\n        .then(() => {\n            this.close();\n\n            this.trigger('change', this.model);\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click apply. Posts the model to the modelUrl\n     */\n    onClickApply() {\n        this.model.url = this.$element.find('input[name=\"url\"]').val();\n\n        HashBrown.Helpers.SettingsHelper.setSettings(this.projectId, '', 'sync', this.model)\n        .then(() => {\n            this.trigger('change', this.model);\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Render enabled switch\n     */\n    renderEnabledSwitch() {\n        return new HashBrown.Views.Widgets.Input({\n            type: 'checkbox',\n            name: 'enabled',\n            value: this.model.enabled === true,\n            onChange: (newValue) => {\n                this.model.enabled = newValue;\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders the URL editor\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderUrlEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            name: 'url',\n            type: 'text',\n            value: this.model.url || '',\n            placeholder: 'e.g. \"https://myserver.com/api/\"'\n        }).$element;\n    }\n    \n    /**\n     * Renders the project id editor\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderProjectIdEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            name: 'name',\n            value: this.model.project,\n            onChange: (newValue) => {\n                this.model.project = newValue;\n            }\n        }).$element;\n    }\n    \n    /**\n     * Renders the token editor\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderTokenEditor() {\n        return [\n            new HashBrown.Views.Widgets.Input({\n                value: this.model.token,\n                name: 'token',\n                placeholder: 'API token',\n                onChange: (newToken) => { this.model.token = newToken; }\n            }).$element,\n            _.button({class: 'widget widget--button small fa fa-refresh'})\n                .on('click', () => {\n                    if(!this.model.url) {\n                        alert('You need to specify a URL. Please do so and apply the settings first.');\n                        return;\n                    }\n                    \n                    let tokenModal = new HashBrown.Views.Modals.Modal({\n                        title: 'Refresh token',\n                        body: [\n                            _.div({class: 'widget-group'},\n                                _.label({class: 'widget widget--label'}, 'Username'),\n                                _.input({class: 'widget widget--input text', type: 'text'})\n                            ),\n                            _.div({class: 'widget-group'},\n                                _.label({class: 'widget widget--label'}, 'Password'),\n                                _.input({class: 'widget widget--input text', type: 'password'})\n                            )\n                        ],\n                        actions: [\n                            {\n                                label: 'Get token',\n                                onClick: () => {\n                                    let username = tokenModal.element.querySelector('input[type=\"text\"]').value;\n                                    let password = tokenModal.element.querySelector('input[type=\"password\"]').value;\n                                    \n                                    HashBrown.Helpers.RequestHelper.request(\n                                        'post',\n                                        this.projectId + '/sync/login',\n                                        {\n                                            username: username,\n                                            password: password\n                                        }\n                                    ).then((token) => {\n                                        this.model.token = token;\n                                        \n                                        this.element.querySelector('input[name=\"token\"]').value = token;\n                                    })\n                                    .catch(UI.errorModal);\n                                }\n                            }\n                        ]\n                    });\n                })\n        ];\n    }\n    \n    /**\n     * Renders a single field\n     *\n     * @param {String} label\n     * @param {HTMLElement} $content\n     *\n     * @return {HTMLElement} Editor element\n     */\n    renderField(label, $content) {\n        return _.div({class: 'widget-group'},\n            _.div({class: 'widget widget--label'},\n                label\n            ),\n            $content\n        );\n    }\n\n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return [\n            this.renderField('Enabled', this.renderEnabledSwitch()),\n            this.renderField('API URL', this.renderUrlEditor()),\n            this.renderField('API Token', this.renderTokenEditor()),\n            this.renderField('Project id', this.renderProjectIdEditor())\n        ];\n    }\n}\n\nmodule.exports = SyncEditor;\n"],"sourceRoot":""}