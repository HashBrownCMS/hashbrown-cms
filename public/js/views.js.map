{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Client/Views/index.js","webpack:///./src/Client/Views/Widgets/index.js","webpack:///./src/Client/Views/Widgets/Widget.js","webpack:///./src/Client/Views/Widgets/Dropdown.js","webpack:///./src/Client/Views/Widgets/Chips.js","webpack:///./src/Client/Views/Widgets/Input.js","webpack:///./src/Client/Views/Modals/index.js","webpack:///./src/Client/Views/Modals/Modal.js","webpack:///./src/Client/Views/Modals/ConfirmModal.js","webpack:///./src/Client/Views/Modals/DateModal.js","webpack:///./src/Client/Views/Modals/IconModal.js","webpack:///./src/Client/Views/Modals/IframeModal.js","webpack:///./src/Client/Views/Modals/MediaBrowser.js","webpack:///./src/Client/Views/Modals/MediaUploader.js","webpack:///./src/Client/Views/Modals/PublishingSettingsModal.js","webpack:///./src/Client/Views/Editors/index.js","webpack:///./src/Client/Views/Editors/ConnectionEditor.js","webpack:///./src/Client/Views/Editors/ContentEditor.js","webpack:///./src/Client/Views/Editors/FormEditor.js","webpack:///./src/Client/Views/Editors/JSONEditor.js","webpack:///./node_modules/js-beautify/js/index.js","webpack:///./node_modules/js-beautify/js/lib/beautify.js","webpack:///./node_modules/js-beautify/js/lib/beautify-css.js","webpack:///./node_modules/js-beautify/js/lib/beautify-html.js","webpack:///./src/Client/Views/Editors/MediaViewer.js","webpack:///./src/Client/Views/Editors/UserEditor.js","webpack:///./src/Client/Views/Editors/SchemaEditor.js","webpack:///./src/Client/Views/Editors/ContentSchemaEditor.js","webpack:///./src/Client/Views/Editors/FieldSchemaEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/index.js","webpack:///./src/Client/Views/Editors/FieldEditors/FieldEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/ArrayEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/BooleanEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/ContentReferenceEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/ContentSchemaReferenceEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/DateEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/DropdownEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/LanguageEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/MediaReferenceEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/NumberEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/ResourceReferenceEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/RichTextEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/StringEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/StructEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/TagsEditor.js","webpack:///./src/Client/Views/Editors/FieldEditors/UrlEditor.js","webpack:///./src/Client/Views/Navigation/index.js","webpack:///./src/Client/Views/Navigation/NavbarMain.js","webpack:///./src/Client/Templates/Navigation/NavbarMain.js","webpack:///./src/Client/Views/Navigation/MainMenu.js","webpack:///./src/Client/Views/Navigation/NavbarPane.js","webpack:///./src/Client/Views/Navigation/ConnectionPane.js","webpack:///./src/Client/Views/Navigation/ContentPane.js","webpack:///./src/Client/Views/Navigation/FormsPane.js","webpack:///./src/Client/Views/Navigation/MediaPane.js","webpack:///./src/Client/Views/Navigation/SchemaPane.js","webpack:///./src/Client/Views/Dashboard/index.js","webpack:///./src/Client/Views/Dashboard/BackupEditor.js","webpack:///./src/Client/Views/Dashboard/InfoEditor.js","webpack:///./src/Client/Views/Dashboard/LanguageEditor.js","webpack:///./src/Client/Views/Dashboard/MigrationEditor.js","webpack:///./src/Client/Views/Dashboard/ProjectEditor.js","webpack:///./src/Client/Views/Dashboard/SyncEditor.js"],"names":["require","namespace","add","Widget","params","isAsync","fetch","notify","message","notifier","element","querySelector","parentElement","removeChild","_","div","class","append","innerHTML","Crisp","View","module","exports","Dropdown","optionsUrl","HashBrown","Helpers","RequestHelper","request","then","options","optionIcons","getOptionIcon","label","iconKey","labelKey","key","value","optionLabel","toString","getFlattenedOptions","valueKey","Array","isArray","optionValue","isDisabled","disabledOptions","disabledKey","disabledValue","disabledOptionValue","sortedOptions","Object","keys","sort","getValueLabel","sanityCheck","icon","placeholder","useMultiple","labels","indexOf","push","join","updateSelectedClasses","btnOptions","querySelectorAll","i","length","dataset","hasValue","classList","toggle","updatePositionClasses","setTimeout","isChecked","checked","bounds","getBoundingClientRect","isAtRight","right","window","innerWidth","isAtBottom","bottom","innerHeight","onChangeInternal","newValue","foundValue","splice","divValue","onChange","onTypeahead","query","toLowerCase","isMatch","isOpen","trigger","useTypeAhead","focus","template","title","tooltip","input","type","click","e","currentTarget","if","span","on","each","optionIcon","reverseKeys","button","useClearButton","Views","Widgets","Chips","prerender","useArray","useObject","k","item","disabled","pattern","newKey","replace","newObject","Input","config","name","step","min","max","nextElementSibling","for","guid","id","form","onSubmit","multiple","directory","useDirectory","names","files","btnBrowse","btnSubmit","Math","round","size","preventDefault","FormData","textarea","Modal","actions","group","getAll","modal","remove","autoFetch","document","body","appendChild","setLoading","isActive","spinner","close","renderBody","renderFooter","action","onClick","renderHeader","h4","isBlocking","header","footer","hasTransitionedIn","className","$element","find","before","addEventListener","pop","which","ConfirmModal","postrender","Modals","DateModal","days","months","hours","minutes","Date","isNaN","getDate","getDays","year","month","getFullYear","getDay","getMonth","setMonth","day","thisDate","getTime","now","isCurrent","setDate","getHours","setHours","getMinutes","setMinutes","icons","IconModal","onSearch","style","display","IframeModal","iframe","src","url","MediaBrowser","onClickOK","onload","contentWindow","MediaHelper","initMediaPickerMode","onPickMedia","onChangeResource","UI","errorModal","resources","onClickCancel","reloadResource","Navigation","NavbarMain","reload","location","host","ProjectHelper","currentProject","currentEnvironment","MediaUploader","checkMediaProvider","catch","onChangeFile","numFiles","file","isImage","isVideo","reader","FileReader","html","img","target","result","readAsDataURL","video","URL","createObjectURL","controls","debug","log","content","apiPath","replaceId","uploadedIds","uploadFile","ids","Promise","reject","Error","folder","resolve","queue","slice","putNextMediaIntoTree","onSuccess","newFiles","PublishingSettingsModal","model","prop","language","JSON","parse","stringify","getSettings","governedBy","governor","ContentHelper","getContentByIdSync","applyToChildren","connections","connectionId","ConnectionEditor","onClickAdvanced","hash","onClickSave","$saveBtn","toggleClass","renderMediaProviderEditor","isProvider","ConnectionHelper","setMediaProvider","getMediaProvider","connection","renderTitleEditor","renderUrlEditor","renderProcessorSettingsEditor","processor","alias","Editors","ProcessorEditors","editor","fileExtension","renderDeployerSettingsEditor","deployer","DeployerEditors","do","paths","media","Models","Connection","isLocked","ContentEditor","dirty","onScroll","followingField","field","rect","actionRect","top","height","lastScrollPos","scrollTop","saveAction","val","postSaveUrl","setContent","iframeModal","onFieldEditorsReady","callback","fieldEditorReadyCallbacks","registeredCallback","restoreScrollPos","delay","newScrollPos","get","getFieldEditor","editorId","charAt","toUpperCase","FieldEditors","renderField","fieldValue","fieldDefinition","$keyActions","compiledSchema","SchemaHelper","getFieldSchemaWithParentConfigs","schemaId","fieldEditor","fieldSchema","isEmpty","checkRecursive","object","fieldEditorInstance","description","schema","getObject","multilingual","renderFields","tabId","fieldDefinitions","fieldValues","tabFieldDefinitions","noTabAssigned","tabs","isMetaTab","thisTabAssigned","fieldSanityCheck","_multilingual","onClickTab","tab","renderEditor","activeTab","Router","defaultTabId","tabName","fields","properties","renderButtons","remoteUrl","contentUrl","getConnectionByIdSync","$","empty","isPublished","a","href","select","option","Content","contentSchema","getSchemaWithParentFields","FormEditor","navbar","onClickAddInput","inputs","onClickRemoveInput","renderAllowedOriginEditor","allowedOrigin","newOrigin","newTitle","renderRedirectEditor","redirect","newUrl","appendRedirect","renderInputsEditor","types","view","renderPreview","required","checkDuplicates","$preview","renderEntries","confirmModal","entries","environmentUrl","$content","postUrl","protocol","hostname","readonly","copyToClipboard","previousElementSibling","beautify","js_beautify","JSONEditor","$error","hide","modelUrl","onClickBasic","attr","onClickBeautify","children","show","fromModel","isValid","check","v","getSchemaByIdSync","invalidSchemas","r","schemas","b","invalidConnections","c","recurse","obj","failMessage","onChangeText","getDoc","getValue","CodeMirror","fromTextArea","lineNumbers","mode","json","viewportMargin","tabSize","lineWrapping","indentUnit","indentWithTabs","theme","getCookie","setValue","get_beautify","css_beautify","html_beautify","js","css","define","values","o","TypeError","p","prototype","hasOwnProperty","call","mergeOpts","allOptions","targetType","finalOpts","js_source_text","acorn","nonASCIIwhitespace","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","RegExp","nonASCIIidentifier","newline","lineBreak","source","allLineBreaks","isIdentifierStart","code","test","String","fromCharCode","isIdentifierChar","in_array","what","arr","trim","s","ltrim","sanitizeOperatorPosition","opPosition","OPERATOR_POSITION","before_newline","validPositionValues","after_newline","preserve_newline","OPERATOR_POSITION_BEFORE_OR_PRESERVE","MODE","BlockStatement","Statement","ObjectLiteral","ArrayLiteral","ForInitializer","Conditional","Expression","Beautifier","output","tokens","token_pos","Tokenizer","current_token","last_type","last_last_text","indent_string","flags","previous_flags","flag_store","prefix","handlers","opt","baseIndentString","handle_start_expr","handle_end_expr","handle_start_block","handle_end_block","handle_word","handle_semicolon","handle_string","handle_equals","handle_operator","handle_comma","handle_block_comment","handle_comment","handle_dot","handle_unknown","handle_eof","create_flags","flags_base","next_indent_level","indentation_level","just_added_newline","line_indent_level","next_flags","parent","last_text","last_word","declaration_statement","declaration_assignment","multiline_frame","inline_frame","if_block","else_block","do_block","do_while","import_block","in_case_statement","in_case","case_body","start_line_index","get_line_number","ternary_depth","brace_style","braces_on_own_line","undefined","brace_style_split","split","brace_preserve_inline","indent_size","parseInt","indent_char","eol","preserve_newlines","break_chained_methods","max_preserve_newlines","space_in_paren","space_in_empty_paren","jslint_happy","space_after_anon_function","keep_array_indentation","space_before_conditional","unescape_strings","wrap_line_length","e4x","end_with_newline","comma_first","operator_position","test_output_raw","indent_with_tabs","match","preindent_index","substring","Output","raw","set_mode","sweet_code","tokenizer","tokenize","get_token","text","get_code","handle_whitespace_and_comments","local_token","preserve_statement_flags","newlines","keep_whitespace","is_array","temp_token","h","comments_before","print_newline","j","split_linebreaks","out","idx","newline_restricted_tokens","allow_wrap_or_preserved_newline","force_linewrap","shouldPreserveOrForce","wanted_newline","operatorLogicApplies","positionable_operators","shouldPrintOperatorNewline","proposed_line_length","current_line","get_character_count","space_before_token","force_newline","next_token","restore_mode","add_new_line","print_token_line_indentation","whitespace_before","set_indent","print_token","printable_token","add_raw_token","previous_line","last","popped","is_empty","add_token","indent","deindent","is_expression","remove_redundant_indentation","start_of_object_property","start_of_statement","all_lines_start_with","lines","line","each_line_matches_indent","len","is_special_word","word","offset","index","next_mode","line_starters","second_token","empty_braces","empty_anonymous_function","check_token","opened","just_added_blankline","isGeneratorAsterisk","isUnary","space_before","space_after","in_ternary","isColon","isTernaryColon","isOtherColon","directives","preserve","javadoc","starless","lastIndent","lastIndentLength","OutputLine","_character_count","_indent_count","_items","_empty","level","baseIndentLength","indent_length","remove_indent","indent_cache","add_outputline","token","x","add_space_before_token","frame","output_length","eat_newlines","InputScanner","_input","_input_length","_position","back","hasNext","next","peek","peekCharCode","charCodeAt","lastIndex","testChar","pattern_match","exec","Token","comments_after","input_string","opts","whitespace","digit","digit_bin","digit_oct","digit_hex","punct","concat","reserved_words","block_comment_pattern","comment_pattern","directives_block_pattern","directive_pattern","directives_end_ignore_pattern","template_pattern","n_newlines","whitespace_before_token","in_html_comment","token_values","open","open_stack","comments","tokenize_next","get_directives","directive_match","resulting_string","whitespace_on_this_line","last_token","allow_decimal","allow_e","local_digit","comment","comment_match","ignore","startXmlRegExp","sep","esc","has_char_escapes","in_char_class","xmlRegExp","xmlStr","rootTag","isCurlyRoot","depth","isEndTag","tagName","isSingletonTag","parse_string","delimiter","allow_unescaped_newlines","start_sub","current_char","unescape_string","sharp","template_match","escaped","input_scan","matched","beautifier","source_text","newlinesFromLastWSEat","indentSize","indentCharacter","selectorSeparatorNewline","selector_separator_newline","newline_between_rules","space_around_combinator","space_around_selector_separator","whiteRe","pos","ch","parenLevel","skipWhitespace","prev_pos","eatWhitespace","eatString","endChars","start","peekString","endChar","str","preserve_newlines_local","print","newLine","eatComment","singleLine","lookBack","foundNestedPseudoClass","openParen","basebaseIndentString","singleIndent","indentLevel","nestedLevel","outdent","singleSpace","_lastCharWhitespace","keepWhitespace","preserveSingleSpace","isAfterSpace","insideRule","insidePropertyValue","enteringConditionalGroup","top_ch","last_top_ch","isAfterNewline","variableOrRule","NESTED_AT_RULE","CONDITIONAL_GROUP_RULE","sweetCode","rtrim","style_html","html_source","multi_parser","indent_inner_html","indent_body_inner_html","indent_head_inner_html","indent_character","unformatted","content_unformatted","indent_handlebars","wrap_attributes","wrap_attributes_indent_size","is_wrap_attributes_force","is_wrap_attributes_force_expand_multiline","is_wrap_attributes_force_aligned","extra_liners","max_char","substr","Parser","current_mode","tags","parentcount","parent1","tag_type","token_text","token_type","indent_content","Utils","single_token","void_elements","is_whitespace","n","traverse_whitespace","input_char","space_or_wrap","line_char_count","print_indentation","get_content","handlebarsStarted","peek3","get_tag","get_contents_to","reg_match","reg_array","end_script","record_tag","tag","indent_level","retrieve_tag","temp_parent","indent_to_tag","space","first_attr","has_wrapped_attrs","tag_start","tag_end","tag_start_char","orig_pos","orig_line_char_count","is_tag_closed","tail","get_unformatted","wrapped","indentAttrs","force_first_attr_wrap","is_only_attribute","alignment_size","count","get_comment","tag_complete","tag_index","tag_offset","tag_check","is_unformatted","search","start_pos","tokenMatcher","newToken","doesNotMatch","orig_tag","delimiterMatcher","tag_name_type","get_full_indent","next_tag","printer","js_source","force","print_token_raw","unindent","t","tag_name","tag_extracted_from_last_output","foundIfOnCurrentLine","lastCheckedOutput","_beautifier","script_indent_level","indent_scripts","indentation","Child_options","child_options","white","_level","reindent","requireamd","MediaViewer","Media","mediaSrc","getContentTypeHeader","isAudio","audio","UserEditor","fullName","username","email","customRequest","projects","newUserObject","newPassword","password","renderUserNameEditor","renderScopesEditor","project","getScopes","scopes","renderFullNameEditor","renderEmailEditor","renderPasswordEditor","password1","password2","isLongEnough","$passwordWarning","renderAdminEditor","isAdmin","currentUserIsAdmin","hidePermissions","hasScope","giveScope","removeScope","settings","info","SchemaEditor","jsonEditor","renderIconEditor","getIcon","newIcon","isVertical","parentSchemaId","newParent","parentSchema","ContentSchemaEditor","getParentTabs","getAllTabs","allTabs","parentTabs","getParentProperties","parentProperties","getAllSchemasSync","allowedChildSchemas","defaultTabEditor","newTabs","renderFieldProperties","$tabs","$fieldProperties","$parentFieldProperties","currentTab","fieldKey","newProperties","UIHelper","fieldSortableObject","parents","isValidTab","$field","renderConfigEditor","newField","FieldSchemaEditor","renderFieldConfigEditor","useTypeahead","newEditor","FieldEditor","renderKeyActions","ArrayEditor","useGrid","UHashBrown","IHelper","fieldSortableArray","newArray","from","forEach","minItems","maxItems","allowedSchemas","items","schemaBindings","newItems","diff","getItemLabel","editorClass","editorInstance","prepend","filter","newSchemaId","messageModal","BooleanEditor","ContentReferenceEditor","getDropdownOptions","allowedContent","areRulesDefined","isContentAllowed","ContentSchemaReferenceEditor","getParentSchema","contentEditor","thisContent","parentId","parentContent","contentSchemas","isNative","pickFirstSchema","DateEditor","onClickRemove","onClickOpen","toISOString","formatDate","date","DropdownEditor","LanguageEditor","LanguageHelper","getLanguagesSync","MediaReferenceEditor","getMediaByIdSync","NumberEditor","parseFloat","$input","isSlider","ResourceReferenceEditor","resourceKeys","resource","singularResourceName","RichTextEditor","marked","isMarkdownDisabled","silentChange","activeView","onClickInsertMedia","mediaBrowser","getMediaById","wysiwyg","insertHtml","replaceSelection","markdown","toMarkdown","getTabContent","initHtmlEditor","Infinity","initMarkdownEditor","initWYSIWYGEditor","CKEDITOR","removePlugins","toolbarGroups","groups","extraPlugins","removeButtons","removeDialogTabs","getData","stripStyle","attributes","dataProcessor","dataFilter","addRules","elements","h1","h2","h3","h5","h6","section","hr","aside","ul","li","blockquote","setData","StringEditor","isMultiLine","StructEditor","keySchema","isSilent","fieldSchemaId","struct","compiledFieldSchema","parentStruct","labelOptions","newLabel","newStruct","TagsEditor","UrlEditor","getAllParents","contentId","nodes","iterate","node","reverse","generateUrl","getSlug","sameUrls","thatUrl","isMatchWithNumber","lastIndexOf","isSameUrl","regenerate","fetchFromTitle","$titleInput","tabPanes","ContentPane","init","MediaPane","FormsPane","ConnectionPane","SchemaPane","onChangeFilter","$pane","pane","innerText","onChangeSorting","sortingMethod","applySorting","onError","err","onClickCopyItemId","data","route","onClickToggleChildren","stopPropagation","toggleTabButtons","showTab","tabRoute","save","state","buttons","panes","scroll","routingPath","mediaFolder","restore","addTabPane","getItemIcon","isItemDirectory","createDate","getItemRoutingPath","itemPath","shortPath","path","getItemName","languageTitle","highlightItem","$item","clear","performSort","updateDate","container","$nestedChildren","appendTo","applyHierarchy","queueItem","parentDirAttr","parentDirAttrKey","parentDirAttrValue","parentDirSelector","$parentDir","createDir","dirNames","finalDirName","dirName","prevFinalDirName","$dir","parentDirExtraAttr","$prevDir","dirContextMenu","context","currentUser","User","current","hasConnectionsScope","hasSchemasScope","hasSettingsScope","nav","sortingOptions","default","alphaAsc","alphaDesc","dateAsc","dateDesc","getItems","isDirectory","hasRemote","sync","isRemote","getItemContextMenu","itemContextMenu","hierarchy","paneContextMenu","MainMenu","onChangeLanguage","newLanguage","localStorage","setItem","onClickQuestion","topic","languages","languageDropdown","userDropdown","helpDropdown","NavbarPane","addTabButton","onClickOpenInNewTab","onClickRefreshResource","onChangeDirectory","onChangeSortIndex","newIndex","onClickMoveItem","reset","newPath","off","$container","containerIndex","$parentItem","canCreateDirectory","onClickNewConnection","newConnection","onClickRemoveConnection","onClickPullConnection","connectionEditor","pullId","onClickPushConnection","pushId","addClass","currentUserHasScope","menu","isSyncEnabled","SettingsHelper","getCachedSettings","enabled","getContentById","onClickPullContent","onClickPushContent","onClickNewContent","asSibling","getSchemaById","sortIndex","getNewSortIndex","schemaReference","apiUrl","newContent","renderPublishingModal","publishing","onClickContentPublishing","onClickRemoveContent","shouldUnpublish","settingsSanityCheck","unpublishConnection","shouldDeleteChildren","onClickRename","getPropertyValue","setPropertyValue","setContentById","onClickNewForm","newFormId","onClickRemoveForm","forms","onClickPullForm","onClickPushForm","newFolder","onClickRenameMedia","mediaViewer","onClickRemoveMedia","onClickReplaceMedia","onClickUploadMedia","onClickRemoveSchema","onClickNewSchema","newSchema","onClickPullSchema","schemaEditor","onClickPushSchema","BackupEditor","onClickUploadBackup","uploadModal","formData","ajax","processData","contentType","success","submit","onClickCreateBackup","onClickRestoreBackup","timestamp","onClickDeleteBackup","Project","backups","backup","ReqestHelper","InfoEditor","setSettings","newName","setLanguages","HashBown","getLanguageOptions","MigrationEditor","environments","to","getToOptions","environment","ProjectEditor","$btn","onClickRemoveEnvironment","environmentName","onClickInfo","Dashboard","newInfo","onClickSync","SyncEditor","projectId","newSettings","onClickLanguages","onClickBackups","onClickMigrate","onClickAddEnvironment","languageCount","userCount","users","onClickApply","renderEnabledSwitch","renderProjectIdEditor","renderTokenEditor","alert","tokenModal"],"mappings":"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","file":"views.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 227);\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views\n */\nrequire('./Widgets');\nrequire('./Modals');\nrequire('./Editors');\nrequire('./Navigation');\nrequire('./Dashboard');\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Widgets\n */\nnamespace('Views.Widgets')\n.add(require('./Widget'))\n.add(require('./Dropdown'))\n.add(require('./Chips'))\n.add(require('./Input'));\n","'use strict';\n\n/**\n * A standard widget\n *\n * @memberof HashBrown.Client.Views.Widgets\n */\nclass Widget extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        if(!params.isAsync) {\n            this.fetch();\n        }\n    }\n\n    /**\n     * Adds a notifying message\n     *\n     * @param {String} message\n     */\n    notify(message) {\n        let notifier = this.element.querySelector('.widget__notifier');\n\n        if(!message) {\n            if(notifier) { \n                notifier.parentElement.removeChild(notifier);\n            }\n\n            return;\n        }\n\n        if(!notifier) {\n            notifier = _.div({class: 'widget__notifier'}, message);\n\n            _.append(this.element, notifier);\n        }\n\n        notifier.innerHTML = message;\n    }\n}\n\nmodule.exports = Widget;\n","'use strict';\n\n/**\n * A multi purpose dropdown\n *\n * @memberof HashBrown.Client.Views.Widgets\n */\nclass Dropdown extends HashBrown.Views.Widgets.Widget {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        if(params.optionsUrl) {\n            params.isAsync = true;\n            \n            HashBrown.Helpers.RequestHelper.request('get', params.optionsUrl)\n            .then((options) => {\n                this.options = options;\n\n                this.fetch();\n            });\n        }\n                \n        super(params);\n\n        this.optionIcons = {};\n    }\n   \n    /**\n     * Gets option icon\n     *\n     * @param {String} label\n     *\n     * @returns {String} Icon\n     */\n    getOptionIcon(label) {\n        if(!this.iconKey || !this.labelKey || !this.options) { return ''; }\n        \n        for(let key in this.options) {\n            let value = this.options[key];\n\n            let optionLabel = this.labelKey ? value[this.labelKey] : value;\n           \n            if(typeof optionLabel !== 'string') { \n                optionLabel = optionLabel ? optionLabel.toString() : '';\n            }\n        \n            if(optionLabel === label) {\n                return value[this.iconKey] || '';\n            }\n        }\n\n        return '';\n    }\n\n    /**\n     * Converts options into a flattened structure\n     *\n     * @returns {Object} Options\n     */\n    getFlattenedOptions() {\n        if(!this.labelKey && !this.valueKey && this.options && !Array.isArray(this.options)) { return this.options; }\n        \n        let options = {};\n\n        for(let key in this.options) {\n            let value = this.options[key];\n\n            let optionLabel = this.labelKey ? value[this.labelKey] : value;\n            let optionValue = this.valueKey ? value[this.valueKey] : value;\n           \n            if(typeof optionValue !== 'string') { \n                optionValue = optionValue ? optionValue.toString() : '';\n            }\n            \n            if(typeof optionLabel !== 'string') { \n                optionLabel = optionLabel ? optionLabel.toString() : '';\n            }\n\n            // Check for disabled options\n            let isDisabled = false;\n\n            if(this.disabledOptions && Array.isArray(this.disabledOptions)) {\n                for(let disabledKey in this.disabledOptions) {\n                    let disabledValue = this.disabledOptions[disabledKey];\n                    let disabledOptionValue = this.valueKey ? disabledValue[this.valueKey] : disabledValue;\n                   \n                    if(typeof disabledOptionValue !== 'string') { \n                        disabledOptionValue = disabledOptionValue.toString();\n                    }\n               \n                    if(optionValue === disabledOptionValue) {\n                        isDisabled = true;\n                        break;\n                    }\n                }\n            }\n\n            if(isDisabled) { continue; }\n\n            options[optionLabel] = optionValue;\n        }\n\n        // Sort options alphabetically\n        let sortedOptions = {};\n\n        for(let label of Object.keys(options).sort()) {\n            sortedOptions[options[label]] = label;\n        }\n\n        return sortedOptions;\n    }\n\n    /**\n     * Gets the current value label\n     *\n     * @returns {String} Value label\n     */\n    getValueLabel() {\n        this.sanityCheck();\n       \n        if(this.icon) {\n            return '<span class=\"widget--dropdown__value__tool-icon fa fa-' + this.icon + '\"></span>';\n        }\n\n        let label = this.placeholder || '(none)';\n        let options = this.getFlattenedOptions();\n\n        if(this.useMultiple) {\n            let labels = [];\n\n            for(let key in options) {\n                let value = options[key];\n\n                if(value && this.value.indexOf(key) > -1) {\n                    labels.push(value);\n                }\n            }\n\n            label = labels.join(', ');\n\n        } else {\n            label = options[this.value] === 0 ? '0' : options[this.value] || label;\n        \n        }\n\n        return label;\n    }\n\n    /**\n     * Performs a sanity check of the value\n     */\n    sanityCheck() {\n        if(this.useMultiple && !Array.isArray(this.value)) {\n            this.value = [];\n        } else if(!this.useMultiple && Array.isArray(this.value)) {\n            this.value = null;\n        }\n    }\n\n    /**\n     * Updates all selected classes\n     */\n    updateSelectedClasses() {\n        let btnOptions = this.element.querySelectorAll('.widget--dropdown__option');\n\n        if(!btnOptions) { return; }\n        \n        for(let i = 0; i < btnOptions.length; i++) {\n            let value = btnOptions[i].dataset.value;\n            let hasValue = Array.isArray(this.value) ? this.value.indexOf(value) > -1 : this.value === value;\n\n            btnOptions[i].classList.toggle('selected', hasValue);\n        }\n    }\n\n    /**\n     * Updates all position classes\n     */\n    updatePositionClasses() {\n        setTimeout(() => {\n            let toggle = this.element.querySelector('.widget--dropdown__toggle');\n            let isChecked = toggle.checked;\n            \n            toggle.checked = true;\n\n            let bounds = this.element.querySelector('.widget--dropdown__options').getBoundingClientRect();\n            \n            toggle.checked = isChecked;\n\n            let isAtRight = bounds.right >= window.innerWidth - 10;\n            let isAtBottom = bounds.bottom >= window.innerHeight - 10;\n\n            this.element.classList.toggle('right', isAtRight);\n            this.element.classList.toggle('bottom', isAtBottom);\n        }, 1);\n    }\n\n    /**\n     * Event: Change value\n     *\n     * @param {Object} newValue\n     */\n    onChangeInternal(newValue) {\n        this.sanityCheck();\n\n        // Change multiple value\n        if(this.useMultiple) {\n            // First check if value was already selected, remove if found\n            let foundValue = false;\n            \n            for(let i in this.value) {\n                if(this.value[i] === newValue) {\n                    this.value.splice(i, 1);\n                    foundValue = true;\n                    break;\n                }\n            }\n\n            // If value was not selected, add it\n            if(!foundValue) {\n                if(!newValue) {\n                    this.value = [];\n                } else {\n                    this.value.push(newValue);\n                }\n            }\n\n        // Change single value\n        } else {\n            this.value = newValue;\n        }\n\n        // Update classes\n        this.updateSelectedClasses();\n       \n        // Update value label\n        let divValue = this.element.querySelector('.widget--dropdown__value');\n\n        if(divValue) {\n            divValue.innerHTML = this.getValueLabel();\n        }\n\n        // Cancel\n        this.toggle(false);\n\n        // The value is a function, execute it and return\n        if(typeof this.value === 'function') {\n            this.value();\n            return;\n        }\n\n        // Change event\n        if(typeof this.onChange === 'function') {\n            this.onChange(this.value);\n        }\n    }\n\n    /**\n     * Event: Typeahead\n     *\n     * @param {String} query\n     */\n    onTypeahead(query) {\n        let btnOptions = this.element.querySelectorAll('.widget--dropdown__option');\n\n        if(!btnOptions) { return; }\n        \n        query = (query || '').toLowerCase();\n\n        for(let i = 0; i < btnOptions.length; i++) {\n            let value = btnOptions[i].innerHTML.toLowerCase();\n            let isMatch = query.length < 2 || value.indexOf(query) > -1;\n\n            btnOptions[i].classList.toggle('hidden', !isMatch);\n        }\n    }\n\n    /**\n     * Toggles open/closed\n     *\n     * @param {Boolean} isOpen\n     */\n    toggle(isOpen) {\n        let toggle = this.element.querySelector('.widget--dropdown__toggle');\n        \n        if(typeof isOpen === 'undefined') {\n            isOpen = !toggle.checked;\n        }\n\n        toggle.checked = isOpen;\n\n        if(!isOpen) {\n            this.trigger('cancel');\n        } else {\n            if(this.useTypeAhead) {\n                this.element.querySelector('.widget--dropdown__typeahead').focus();\n            }\n        }\n        \n        this.updatePositionClasses();\n        this.updateSelectedClasses();\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        return _.div({title: this.tooltip, class: 'widget widget--dropdown dropdown' + (this.icon ? ' has-icon' : '')},\n            // Value\n            _.div({class: 'widget--dropdown__value'}, this.getValueLabel()),\n            \n            // Toggle\n            _.input({class: 'widget--dropdown__toggle', type: 'checkbox'})\n                .click((e) => {\n                    this.toggle(e.currentTarget.checked);     \n                }),\n            \n            // Typeahead input\n            _.if(this.useTypeAhead,\n                _.span({class: 'widget--dropdown__typeahead__icon fa fa-search'}),\n                _.input({class: 'widget--dropdown__typeahead', type: 'text'})\n                    .on('input', (e) => { this.onTypeahead(e.currentTarget.value); })\n            ),\n\n            // Dropdown options\n            _.div({class: 'widget--dropdown__options'},\n                _.each(this.getFlattenedOptions(), (optionValue, optionLabel) => {\n                    let optionIcon = this.getOptionIcon(optionLabel);\n\n                    // Reverse keys option\n                    if(this.reverseKeys) {\n                        let key = optionLabel;\n                        let value = optionValue;\n\n                        optionValue = key;\n                        optionLabel = value;\n                    }\n\n                    if(!optionValue || optionValue === '---') {\n                        return _.div({class: 'widget--dropdown__separator'}, optionLabel);\n                    }\n\n                    return _.button({class: 'widget--dropdown__option', 'data-value': optionValue}, \n                        _.if(optionIcon, \n                            _.span({class: 'widget--dropdown__option__icon fa fa-' + optionIcon})\n                        ),\n                        optionLabel\n                    ).click((e) => {\n                        this.onChangeInternal(optionValue);\n                    });\n                })\n            ),\n\n            // Clear button\n            _.if(this.useClearButton,\n                _.button({class: 'widget--dropdown__clear fa fa-remove', title: 'Clear selection'})\n                    .click((e) => {\n                    this.onChangeInternal(null);\n                })\n            )\n        );\n    }\n}\n\nmodule.exports = Dropdown;\n","'use strict';\n\n/**\n * A group of chips\n *\n * @memberof HashBrown.Client.Views.Widgets\n */\nclass Chips extends HashBrown.Views.Widgets.Widget {\n    /**\n     * Event: Change\n     */\n    onChangeInternal() {\n        if(typeof this.onChange !== 'function') { return; }\n\n        this.onChange(this.value);\n    }\n    \n    /**\n     * Pre render\n     */\n    prerender() {\n        // Array check\n        // NOTE: Array is the default mode for this widget\n        if(this.useArray === true || typeof this.useArray === 'undefined') {\n            // Check format\n            if(!this.value || !Array.isArray(this.value)) {\n                this.value = [];\n            }\n            \n            if(!this.disabledValue || !Array.isArray(this.disabledValue)) {\n                this.disabledValue = [];\n            }\n\n            // Check empty values\n            for(let i = this.value.length - 1; i >= 0; i--) {\n                if(!this.value[i]) {\n                    this.value.splice(i, 1);\n                }\n            }\n            \n            // Check for empty values or duplicates in disabled value\n            for(let i = this.disabledValue.length - 1; i >= 0; i--) {\n                if(!this.disabledValue[i] || this.value.indexOf(this.disabledValue[i]) > -1) {\n                    this.disabledValue.splice(i, 1);\n                }\n            }\n\n        // Object check\n        } else if(this.useArray === false || this.useObject === true) {\n            // Check format\n            if(!this.value || Array.isArray(this.value) || typeof this.value !== 'object') {\n                this.value = {};\n            }\n\n            if(!this.disabledValue || Array.isArray(this.disabledValue) || typeof this.disabledValue !== 'object') {\n                this.disabledValue = {};\n            }\n\n            // Check empty values\n            for(let k in this.value) {\n                if(!k || !this.value[k]) {\n                    delete this.value[k];\n                }\n            }\n            \n            // Check for empty values or duplicates in disabled value\n            for(let k in this.disabledValue) {\n                if(!k || !this.disabledValue[k] || this.value[k]) {\n                    delete this.value[k];\n                }\n            }\n        }\n    }\n    \n    /**\n     * Template\n     */\n    template() {\n        return _.div({class: 'widget widget--chips'},\n            _.each(this.disabledValue, (i, item) => {\n                return _.div({class: 'widget--chips__chip'},\n                    _.input({class: 'widget--chips__chip__input', disabled: true, value: item})\n                );\n            }),\n            _.each(this.value, (i, item) => {\n                return _.div({class: 'widget--chips__chip'},\n                    _.if(this.useObject === true || this.useArray === false || this.valueKey,\n                        _.input({class: 'widget--chips__chip__input', title: 'The key', type: 'text', value: item[this.valueKey] || i, pattern: '.{1,}'})\n                            .on('change', (e) => {\n                                if(this.valueKey) {\n                                    item[this.valueKey] = e.currentTarget.value || '';\n\n                                } else {\n                                    i = e.currentTarget.value || '';\n\n                                    this.value[i] = item;\n                                }\n                       \n                                this.onChangeInternal();\n                            }),\n                    ),\n                    _.input({class: 'widget--chips__chip__input', title: 'The label', type: 'text', value: this.labelKey ? item[this.labelKey] : item, pattern: '.{1,}'})\n                        .on('change', (e) => {\n                            if(this.labelKey) {\n                                item[this.labelKey] = e.currentTarget.value || '';\n                            } else {\n                                this.value[i] = e.currentTarget.value || '';\n                            }\n                   \n                            this.onChangeInternal();\n                        }),\n                    _.button({class: 'widget--chips__chip__remove fa fa-remove', title: 'Remove item'})\n                        .click(() => {\n                            this.value.splice(i, 1);\n\n                            this.onChangeInternal();\n\n                            this.fetch();\n                        })\n                );\n            }),\n            _.button({class: 'widget widget--button round widget--chips__add fa fa-plus', title: 'Add item'})\n                .click(() => {\n                    let newValue = this.placeholder || 'New item';\n                    let newKey = newValue.toLowerCase().replace(/[^a-zA-Z]/g, '');\n\n\n                    if(this.useObject === true || this.useArray === false) {\n                        this.value[newKey] = newValue;\n                    \n                    } else if (this.valueKey && this.labelKey) {\n                        let newObject = {};\n\n                        newObject[this.valueKey] = newKey;\n                        newObject[this.labelKey] = newValue;\n                        \n                        this.value.push(newObject);\n                    \n                    } else {\n                        this.value.push(newValue);\n                    \n                    }\n\n                    this.onChangeInternal();\n\n                    this.fetch();\n                })\n        );\n    }\n}\n\nmodule.exports = Chips;\n","'use strict';\n\n/**\n * A versatile input widget\n *\n * @memberof HashBrown.Client.Views.Widgets\n */\nclass Input extends HashBrown.Views.Widgets.Widget {\n    /**\n     * Event: Change value\n     *\n     * @param {Anything} newValue\n     */\n    onChangeInternal(newValue) {\n        this.value = newValue;\n\n        if(typeof this.onChange !== 'function') { return; }\n\n        this.onChange(this.value);\n    }\n\n    /**\n     * Template\n     */\n    template() {\n        let config = {\n            placeholder: this.placeholder,\n            title: this.tooltip,\n            type: this.type || 'text',\n            class: 'widget widget--input ' + (this.type || 'text'),\n            value: this.value,\n            name: this.name\n        };\n\n        if(this.type === 'number' || this.type === 'range') {\n            config.step = this.step || 'any';\n            config.min = this.min;\n            config.max = this.max;\n        }\n\n        switch(this.type) {\n            case 'range':\n                return _.div({class: config.class, title: config.title},\n                    _.input({class: 'widget--input__range-input', type: 'range', value: this.value, min: config.min, max: config.max, step: config.step})\n                        .on('input', (e) => {\n                            this.onChangeInternal(e.currentTarget.value);\n\n                            e.currentTarget.nextElementSibling.innerHTML = e.currentTarget.value;\n                        }),\n                    _.div({class: 'widget--input__range-extra'}, this.value)\n                );\n\n            case 'checkbox':\n                return _.div({class: config.class, title: config.title},\n                    _.if(config.placeholder,\n                        _.label({for: 'checkbox-' + this.guid, class: 'widget--input__checkbox-label'}, config.placeholder)\n                    ),\n                    _.input({id: 'checkbox-' + this.guid, class: 'widget--input__checkbox-input', type: 'checkbox', checked: this.value})\n                        .on('change', (e) => {\n                            this.onChangeInternal(e.currentTarget.checked);\n                        }),\n                    _.div({class: 'widget--input__checkbox-background'}),\n                    _.div({class: 'widget--input__checkbox-switch'})\n                );\n      \n            case 'file':\n                return _.form({class: config.class + (typeof this.onSubmit === 'function' ? ' widget-group' : ''), title: config.title},\n                    _.label({for: 'file-' + this.guid, class: 'widget--input__file-browse widget widget--button expanded'}, this.placeholder || 'Browse...'), \n                    _.input({id: 'file-' + this.guid, class: 'widget--input__file-input', type: 'file', name: this.name || 'file', multiple: this.useMultiple, directory: this.useDirectory})\n                        .on('change', (e) => {\n                            let names = [];\n                            let files = e.currentTarget.files;\n\n                            let btnBrowse = e.currentTarget.parentElement.querySelector('.widget--input__file-browse');\n                            let btnSubmit = e.currentTarget.parentElement.querySelector('.widget--input__file-submit');\n\n                            if(btnSubmit) {\n                                btnSubmit.classList.toggle('disabled', !files || files.length < 1);\n                            }\n\n                            this.onChangeInternal(files);\n\n                            if(files && files.length > 0) {\n                                for(let i = 0; i < files.length; i++) {\n                                    names.push(files[i].name + ' (' + Math.round(files[i].size / 1000) + 'kb)');\n                                }\n                            }\n\n                            if(names.length > 0) {\n                                btnBrowse.innerHTML = names.join(', ');\n\n                            } else {\n                                btnBrowse.innerHTML = this.placeholder || 'Browse...';\n                            }\n                        }),\n                    _.if(typeof this.onSubmit === 'function',\n                        _.button({class: 'widget widget--button widget--input__file-submit disabled', type: 'submit', title: 'Upload file'},\n                            _.span({class: 'fa fa-upload'}),\n                            'Upload'\n                        )\n                    )\n                ).on('submit', (e) => {\n                    e.preventDefault();\n\n                    let input = e.currentTarget.querySelector('.widget--input__file-input');\n\n                    if(!input || !input.files || input.files.length < 1) { return; }\n\n                    if(typeof this.onSubmit !== 'function') { return; }\n\n                    this.onSubmit(new FormData(e.currentTarget), input.files);\n                });\n            \n            case 'textarea':\n                return _.textarea(config, config.value)\n                    .on('input', (e) => {\n                        this.onChangeInternal(e.currentTarget.value);\n                    });\n\n            default:\n                return _.input(config)\n                    .on('input', (e) => {\n                        this.onChangeInternal(e.currentTarget.value);\n                    });\n        }\n    }\n}\n\nmodule.exports = Input;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Modals\n */\nnamespace('Views.Modals')\n.add(require('./Modal'))\n.add(require('./ConfirmModal'))\n.add(require('./DateModal'))\n.add(require('./IconModal'))\n.add(require('./IframeModal'))\n.add(require('./MediaBrowser'))\n.add(require('./MediaUploader'))\n.add(require('./PublishingSettingsModal'));\n","'use strict';\n\n/**\n * A generic modal\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass Modal extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params = params || {};\n\n        if(typeof params.actions === 'undefined') {\n            params.actions = [];\n        }\n\n        super(params);\n\n        // If this belongs to a group, find existing modals and append instead\n        if(this.group) {\n            for(let modal of Crisp.View.getAll('Modal')) {\n                if(modal.group !== this.group || modal === this) { continue; }\n\n                modal.append(this);\n\n                this.remove();\n                break;\n            }\n        }\n\n        if(this.autoFetch !== false) {\n            this.fetch();\n        }\n       \n        document.body.appendChild(this.element);\n    }\n   \n    /**\n     * Toggles the loading state\n     *\n     * @param {Boolean} isActive\n     */\n    setLoading(isActive) {\n        let spinner = this.element.querySelector('.widget--spinner');\n\n        spinner.classList.toggle('hidden', !isActive);\n    }\n\n    /**\n     * Close this modal\n     *\n     */\n    close() {\n        this.element.classList.toggle('in', false);\n\n        setTimeout(() => {\n            this.remove();\n        }, 500);\n    }\n\n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return this.body;\n    }\n    \n    /**\n     * Renders the modal footer\n     *\n     * @returns {HTMLElement} Footer\n     */\n    renderFooter() {\n        if(this.actions === false) { return; }\n\n        if(this.actions && this.actions.length > 0) {\n            return _.each(this.actions, (i, action) => {\n                return _.button({class: 'widget widget--button ' + (action.class || '')}, action.label)\n                    .click(() => {\n                        if(typeof action.onClick !== 'function') {\n                            return this.close();\n                        }\n\n                        if(action.onClick() !== false) {\n                            this.close();\n                        }\n                    });\n            });\n        }\n\n        return _.button({class: 'widget widget--button'}, 'OK')\n            .click(() => {\n                this.close();\n\n                this.trigger('ok');\n            });\n    }\n    \n    /**\n     * Renders the modal header\n     *\n     * @returns {HTMLElement} Header\n     */\n    renderHeader() {\n        if(!this.title) { return; }\n\n        return [\n            _.h4({class: 'modal__title'}, this.title),\n            _.if(!this.isBlocking,\n                _.button({class: 'modal__close fa fa-close'})\n                    .click(() => { this.close(); })\n            )\n        ];\n    }\n\n    /**\n     * Renders this modal\n     */\n    template() {\n        let header = this.renderHeader();\n        let body = this.renderBody();\n        let footer = this.renderFooter();\n\n        if(!this.hasTransitionedIn) {\n            setTimeout(() => {\n                this.hasTransitionedIn = true;\n                this.element.classList.toggle('in', true);\n            }, 50);\n        }\n        \n        return _.div({class: 'modal' + (this.hasTransitionedIn ? ' in' : '') + (this.group ? ' ' + this.group : '') + (this.className ? ' modal--' + this.className : '')},\n            _.div({class: 'modal__dialog'},\n                _.div({class: 'widget--spinner embedded hidden'},\n                    _.div({class: 'widget--spinner__image fa fa-refresh'})\n                ),\n                _.if(header,\n                    _.div({class: 'modal__header'},\n                        header\n                    )\n                ),\n                _.if(body,\n                    _.div({class: 'modal__body'},\n                        body \n                    )\n                ),\n                _.if(footer && !this.isBlocking,\n                    _.div({class: 'modal__footer'},\n                        footer\n                    )\n                )\n            )\n        );\n    }\n\n    /**\n     * Appends another modal to this modal\n     *\n     * @param {Modal} modal\n     */\n    append(modal) {\n        this.$element.find('.modal__footer').before(_.div({class: 'modal__body'}, modal.renderBody()));\n    }\n}\n\n// Modal key events\ndocument.addEventListener('keyup', (e) => {\n    let modal = Crisp.View.getAll(Modal).pop();\n    \n    if(!modal) { return; }\n\n    switch(e.which) {\n        case 27: // Escape\n            if(modal.element.querySelector('.modal__close')) {\n                modal.close();\n            }\n            break;\n\n        case 13: // Enter\n            if((!modal.actions || modal.actions.length === 0) && modal.renderFooter === Modal.renderFooter) {\n                modal.close();\n                modal.trigger('ok');\n            } else if(modal.actions.length === 1) {\n                modal.close();\n                modal.actions[0].onClick();\n            }\n            break;\n    }\n});\n\nmodule.exports = Modal;\n","'use strict';\n\n/**\n * A modal for confirming actions\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass ConfirmModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Post render\n     */\n    postrender() {\n        this.element.classList.toggle('modal--confirm', true);\n    }\n\n    /**\n     * Render header\n     */\n    renderHeader() {\n        return _.h4({class: 'modal--date__header__title'}, this.title);\n    }\n    \n    /**\n     * Renders the modal footer\n     *\n     * @returns {HTMLElement} Footer\n     */\n    renderFooter() {\n        return [\n            _.button({class: 'widget widget--button standard'}, 'Cancel')\n                .click(() => {\n                    this.trigger('cancel');\n\n                    this.close();\n                }),\n            _.button({class: 'widget widget--button warning'}, this.type || 'OK')\n                .click(() => {\n                    this.trigger('ok');\n\n                    this.close();\n                })\n        ];\n    }\n\n    /**\n     * Render body\n     */\n    renderBody() {\n        return this.body;\n    }\n}\n\nmodule.exports = ConfirmModal;\n","'use strict';\n\n/**\n * A modal for picking dates\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass DateModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params.className = 'date';\n\n        super(params);\n    }\n    \n    /**\n     * Pre render\n     */\n    prerender() {\n        this.days = [ 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun' ];\n        this.months = [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ];\n        this.hours = [ '00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23' ];\n        this.minutes = [ '00', '05', '10', '15', '20', '25', '30', '35', '40', '45', '50', '55' ];\n\n        // Sanity check\n        this.value = this.value ? new Date(this.value) : new Date();\n\n        if(isNaN(this.value.getDate())) {\n            this.value = new Date();\n        }\n    }\n\n    /**\n     * Gets days in current month and year\n     *\n     * @param {Number} year\n     * @param {Number} month\n     *\n     * @returns {Array} Days\n     */\n    getDays(year, month) {\n        let max = new Date(year, month, 0).getDate();\n        let days = [];\n\n        while(days.length < max) {\n            days[days.length] = days.length + 1;\n        }\n\n        return days;\n    }\n\n    /**\n     * Render header\n     */\n    renderHeader() {\n        return [\n            _.div({class: 'modal--date__header__year'}, this.value.getFullYear().toString()),\n            _.div({class: 'modal--date__header__day'}, this.days[this.value.getDay()] + ', ' + this.months[this.value.getMonth()] + ' ' + this.value.getDate()),\n            _.button({class: 'modal__close fa fa-close'})\n                .click(() => { this.close(); })\n        ];\n    }\n    \n    /**\n     * Renders the modal footer\n     *\n     * @returns {HTMLElement} Footer\n     */\n    renderFooter() {\n        return _.button({class: 'widget widget--button'}, 'OK')\n            .click(() => {\n                this.trigger('change', this.value);\n\n                this.close();\n            });\n    }\n\n    /**\n     * Render body\n     */\n    renderBody() {\n        return [\n            _.div({class: 'modal--date__body__nav'},\n                _.button({class: 'modal--date__body__nav__left fa fa-arrow-left'})\n                    .click(() => {\n                        this.value.setMonth(this.value.getMonth() - 1);\n                        \n                        this.fetch();\n                    }),\n                _.div({class: 'modal--date__body__nav__month-year'},\n                    this.months[this.value.getMonth()] + ' ' + this.value.getFullYear()\n                ),\n                _.button({class: 'modal--date__body__nav__left fa fa-arrow-right'})\n                    .click(() => {\n                        this.value.setMonth(this.value.getMonth() + 1);\n                        \n                        this.fetch();\n                    })\n            ),\n            _.div({class: 'modal--date__body__weekdays'},\n                _.span({class: 'modal--date__body__weekday'}, 'M'),\n                _.span({class: 'modal--date__body__weekday'}, 'T'),\n                _.span({class: 'modal--date__body__weekday'}, 'W'),\n                _.span({class: 'modal--date__body__weekday'}, 'T'),\n                _.span({class: 'modal--date__body__weekday'}, 'F'),\n                _.span({class: 'modal--date__body__weekday'}, 'S'),\n                _.span({class: 'modal--date__body__weekday'}, 'S')\n            ),\n            _.div({class: 'modal--date__body__days'},\n                _.each(this.getDays(this.value.getFullYear(), this.value.getMonth() + 1), (i, day) => {\n                    let thisDate = new Date(this.value.getTime());\n                    let now = new Date();\n\n                    let isCurrent =\n                        now.getFullYear() == this.value.getFullYear() &&\n                        now.getMonth() == this.value.getMonth() &&\n                        now.getDate() == day;\n                    \n                    let isActive = this.value.getDate() == day;\n\n                    thisDate.setDate(day);\n\n                    return _.button({class: 'modal--date__body__day' + (isCurrent ? ' current' : '') + (isActive ? ' active' : '')}, day)\n                        .click(() => {\n                            this.value.setDate(day);\n\n                            this.fetch();\n                        });\n                })\n            ),\n            _.div({class: 'modal--date__body__time'},\n                _.input({class: 'modal--date__body__time__number', type: 'number', min: 0, max: 23, value: this.value.getHours()})\n                    .on('change', (e) => {\n                        this.value.setHours(e.currentTarget.value);\n                    }),\n                _.div({class: 'modal--date__body__time__separator'}, ':'),\n                _.input({class: 'modal--date__body__time__number', type: 'number', min: 0, max: 59, value: this.value.getMinutes()})\n                    .on('change', (e) => {\n                        this.value.setMinutes(e.currentTarget.value);\n                    })\n            )\n        ];\n    }\n}\n\nmodule.exports = DateModal;\n","'use strict';\n\nconst icons = require('../../icons.json').icons;\n\n/**\n * A modal for picking icons\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass IconModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params = params || {};\n        params.title = params.title || 'Pick an icon';\n        params.actions = false;\n\n        super(params);\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        this.element.classList.toggle('modal--icon', true);\n    }\n\n    /**\n     * Event: Search\n     *\n     * @param {String} query\n     */\n    onSearch(query) {\n        let icons = this.element.querySelectorAll('.modal--icon__icon');\n\n        if(!icons) { return; }\n\n        for(let i = 0; i < icons.length; i++) {\n            if(query.length < 3 || icons[i].title.indexOf(query) > -1) {\n                icons[i].style.display = 'block';\n            } else {\n                icons[i].style.display = 'none';\n            }\n        }\n    }\n\n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return [\n            _.input({type: 'text', class: 'widget widget--input text modal--icon__search', placeholder: 'Search for icons'})\n                .on('input', (e) => {\n                    this.onSearch(e.currentTarget.value);\n                }),\n            _.div({class: 'modal--icon__icons'},\n                _.each(icons, (i, icon) => {\n                    return _.button({class: 'modal--icon__icon widget widget--button fa fa-' + icon, title: icon})\n                    .click(() => {\n                        this.trigger('change', icon); \n\n                        this.close();\n                    });\n                })\n            )\n        ];\n    }\n}\n\nmodule.exports = IconModal;\n","'use strict';\n\n/**\n * A modal for showng iframes\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass IframeModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Post render\n     */\n    postrender() {\n        this.element.classList.toggle('modal--iframe', true);\n    }\n\n    /**\n     * Render body\n     */\n    renderBody() {\n        return _.iframe({class: 'modal--iframe__iframe', src: this.url});\n    }\n}\n\nmodule.exports = IframeModal;\n","'use strict';\n\n/**\n * A browser modal for Media objects\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass MediaBrowser extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params = params || {};\n\n        params.className = 'media-browser';\n        params.title = 'Pick media'; \n\n        params.actions = [\n            {\n                label: 'OK',\n                onClick: () => {\n                    this.onClickOK();\n                }\n            }\n        ];\n        \n        super(params);\n\n        // Init the media picker mode inside the iframe\n        let iframe = this.$element.find('iframe')[0];\n            \n        iframe.onload = () => {    \n            iframe.contentWindow.HashBrown.Helpers.MediaHelper.initMediaPickerMode(\n                (id) => { this.onPickMedia(id); },\n                () => { this.onChangeResource(); },\n                (e) => { UI.errorModal(e); },\n                resources\n            );\n        };\n    }\n\n    /**\n     * Event: Pick Media\n     *\n     * @param {string} id\n     */\n    onPickMedia(id) {\n        this.value = id;\n    }\n\n    /** \n     * Event: Click OK\n     */\n    onClickOK() {\n        if(this.value) {\n            this.trigger('select', this.value);\n        }\n\n        this.close();\n    }\n    \n    /** \n     * Event: Click cancel\n     */\n    onClickCancel() {\n        this.close();\n    }\n\n    /**\n     * Event: Change resource\n     */\n    onChangeResource() {\n        HashBrown.Helpers.RequestHelper.reloadResource('media')\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        });\n    }\n\n    /**\n     * Render body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return _.iframe({src: '//' + location.host  + '/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/#/media/' + (this.value || '')});\n    }\n}\n\nmodule.exports = MediaBrowser;\n","'use strict';\n\n/**\n * A modal for uploading Media objects\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass MediaUploader extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params.className = 'media-uploader';\n        params.title = 'Upload a file';\n        params.actions = false;\n\n        super(params);\n\n        HashBrown.Helpers.MediaHelper.checkMediaProvider()\n        .catch((e) => {\n            UI.errorModal(e);\n\n            this.close();\n        });\n    }\n\n    /**\n     * Event: Change file\n     */\n    onChangeFile(files) {\n        let numFiles = files ? files.length : 1;\n       \n        // In the case of a single file selected \n        if(numFiles == 1) {\n            let file = files[0];\n\n            let isImage =\n                file.type == 'image/png' ||\n                file.type == 'image/jpeg' ||\n                file.type == 'image/gif';\n\n            let isVideo =\n                file.type == 'video/mpeg' ||\n                file.type == 'video/mp4' ||\n                file.type == 'video/quicktime' ||\n                file.type == 'video/x-matroska';\n\n            if(isImage) {\n                let reader = new FileReader();\n               \n                this.setLoading(true);\n\n                reader.onload = (e) => {\n                    this.$element.find('.modal--media-uploader__preview').html(\n                        _.img({src: e.target.result})\n                    );\n\n\n                    this.setLoading(false);\n                }\n                \n                reader.readAsDataURL(file);\n            }\n                    \n            if(isVideo) {\n                this.$element.find('.modal--media-uploader__preview').html(\n                    _.video({src: window.URL.createObjectURL(file), controls: 'controls'})\n                );\n            }\n\n            debug.log('Previewing data of file type ' + file.type + '...', this);\n        \n        // Multiple files selected\n        } else if(numFiles > 1) {\n            this.$element.find('.media-preview').html(\n                '(Multiple files selected)'\n            );\n        \n        // No files selected\n        } else if(numFiles == 0) {\n            this.$element.find('.media-preview').html(\n                '(No files selected)'\n            );\n        }\n    }\n    \n    /**\n     * Event: Submit\n     *\n     * @param {FormData} content\n     * @param {Array} files\n     */\n    onSubmit(content, files) {\n        if(!content || !files || files.length < 1) { return; }\n\n        this.setLoading(true);\n\n        let type = files[0].type;\n        let apiPath = 'media/' + (this.replaceId ? 'replace/' + this.replaceId : 'new');\n        let uploadedIds = [];\n\n        // First upload the Media files\n        return HashBrown.Helpers.RequestHelper.uploadFile(apiPath, type, content)\n\n        // Then update the Media tree\n        .then((ids) => {\n            uploadedIds = ids;\n\n            if(!uploadedIds || uploadedIds.length < 1) {\n                return Promise.reject(new Error('File upload failed'));\n            }\n\n            if(!this.folder || this.folder === '/') {\n                return Promise.resolve();\n            }\n\n            let queue = uploadedIds.slice(0);\n\n            let putNextMediaIntoTree = () => {\n                let id = queue.pop();\n\n                if(!id) { return Promise.resolve(); }\n\n                return HashBrown.Helpers.RequestHelper.request('post', 'media/tree/' + id, {\n                    id: id,\n                    folder: this.folder\n                })\n                .then(() => {\n                    return putNextMediaIntoTree();\n                });\n            };\n\n            return putNextMediaIntoTree();\n        })\n\n        // Then reload the Media resource\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('media');\n        })\n\n        // Then update the UI and trigger the success callback\n        .then(() => {\n            this.setLoading(false);\n\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            if(typeof this.onSuccess === 'function') {\n                this.onSuccess(uploadedIds);\n            }\n            \n            this.close();\n        })\n        .catch((e) => {\n            UI.errorModal(e);\n\n            this.setLoading(false);  \n        });\n    }\n\n    /**\n     * Render body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return [\n            _.div({class: 'modal--media-uploader__preview'}),\n            new HashBrown.Views.Widgets.Input({\n                type: 'file',\n                name: 'media',\n                useMultiple: !this.replaceId,\n                onChange: (newValue) => {\n                    this.onChangeFile(newValue);\n                },\n                onSubmit: (newValue, newFiles) => {\n                    this.onSubmit(newValue, newFiles);\n                }\n            }).$element\n        ];\n    }\n}\n\nmodule.exports = MediaUploader;\n","'use strict';\n\n/**\n * A dialog for editing publishing settings for Content nodes\n *\n * @memberof HashBrown.Client.Views.Modals\n */\nclass PublishingSettingsModal extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params.title = 'Publishing settings for \"' + params.model.prop('title', window.language) + '\"';\n        params.actions = [\n            {\n                label: 'OK',\n                onClick: () => {\n                    this.trigger('change', this.value);\n                }\n            }\n        ];\n\n        params.value = JSON.parse(JSON.stringify(params.model.getSettings('publishing'))) || {};\n        \n        super(params);\n    }\n\n    /**\n     * Renders the body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        if(this.value.governedBy) {\n            let governor = HashBrown.Helpers.ContentHelper.getContentByIdSync(this.value.governedBy);\n\n            return _.div({class: 'widget widget--label'},\n                '(Settings inherited from <a href=\"#/content/' + governor.id + '\">' + governor.prop('title', window.language) + '</a>)'\n            );\n        \n        } else {\n            return _.div({class: 'settings-publishing'},\n                // Apply to children switch\n                _.div({class: 'widget-group'},      \n                    _.label({class: 'widget widget--label'}, 'Apply to children'),\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'checkbox',\n                        value: this.value.applyToChildren === true,\n                        onChange: (newValue) => {\n                            this.value.applyToChildren = newValue;   \n                        }\n                    }).$element\n                ),\n\n                // Connection picker\n                _.div({class: 'widget-group'},      \n                    _.label({class: 'widget widget--label'}, 'Connection'),\n                    new HashBrown.Views.Widgets.Dropdown({\n                        options: resources.connections,\n                        value: this.value.connectionId,\n                        valueKey: 'id',\n                        labelKey: 'title',\n                        useClearButton: true,\n                        onChange: (newValue) => {\n                            this.value.connectionId = newValue;\n                        }\n                    }).$element\n                )\n            );\n        }\n    }\n}\n\nmodule.exports = PublishingSettingsModal;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Editors\n */\nnamespace('Views.Editors')\n.add(require('./ConnectionEditor'))\n.add(require('./ContentEditor'))\n.add(require('./FormEditor'))\n.add(require('./JSONEditor'))\n.add(require('./MediaViewer'))\n.add(require('./UserEditor'))\n.add(require('./SchemaEditor'))\n.add(require('./ContentSchemaEditor'))\n.add(require('./FieldSchemaEditor'))\n\nnamespace('Views.Editors.DeployerEditors');\nnamespace('Views.Editors.ProcessorEditors');\n\nrequire('./FieldEditors')\n","'use strict';\n\n/**\n * The editor for Connections\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass ConnectionEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click advanced. Routes to the JSON editor\n     */\n    onClickAdvanced() {\n        location.hash = '/connections/json/' + this.model.id;\n    }\n\n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        this.$saveBtn.toggleClass('saving', true);\n\n        HashBrown.Helpers.RequestHelper.request('post', 'connections/' + this.model.id, this.model)\n        .then(() => {\n            this.$saveBtn.toggleClass('saving', false);\n       \n            location.reload(); \n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Renders the Media provider editor\n     */\n    renderMediaProviderEditor() {\n        let input = new HashBrown.Views.Widgets.Input({\n            value: false,\n            type: 'checkbox',\n            onChange: (isProvider) => {\n                HashBrown.Helpers.ConnectionHelper.setMediaProvider(isProvider ? this.model.id : null)\n                .catch(UI.errorModal);\n            }\n        });\n\n        // Set the value\n        input.$element.toggleClass('working', true);\n\n        HashBrown.Helpers.ConnectionHelper.getMediaProvider()\n        .then((connection) => {\n            if(connection && connection.id === this.model.id) {\n                input.value = true;\n                input.fetch();\n            }\n        \n            input.$element.toggleClass('working', false);\n        });\n\n        return input.$element;\n    }\n\n    /**\n     * Renders the title editor\n     */\n    renderTitleEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.title,\n            onChange: (newValue) => {\n                this.model.title = newValue;\n            }\n        }).$element;\n    }\n    \n    /**\n     * Renders the URL editor\n     */\n    renderUrlEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.url,\n            onChange: (newValue) => {\n                this.model.url = newValue;\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders the processing settings editor\n     */\n    renderProcessorSettingsEditor() {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Type'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Dropdown({\n                        value: this.model.processor.alias,\n                        optionsUrl: 'connections/processors', \n                        valueKey: 'alias',\n                        labelKey: 'name',\n                        placeholder: 'Type',\n                        onChange: (newValue) => {\n                            this.model.processor.alias = newValue;\n\n                            this.fetch();\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'},\n                    _.div({class: 'editor__field__key__label'}, 'File extension'),\n                    _.div({class: 'editor__field__key__description'}, 'A file extension such as .json or .xml')\n                ),\n                _.each(HashBrown.Views.Editors.ProcessorEditors, (name, editor) => {\n                    if(editor.alias !== this.model.processor.alias) { return; }\n                        \n                    return new editor({\n                        model: this.model.processor\n                    }).$element;\n                }),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        value: this.model.processor.fileExtension,\n                        onChange: (newValue) => {\n                            this.model.processor.fileExtension = newValue;\n                        }\n                    })\n                )\n            )\n        ];\n    }\n    \n    /**\n     * Renders the deployment settings editor\n     */\n    renderDeployerSettingsEditor() {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Type'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Dropdown({\n                        value: this.model.deployer.alias,\n                        optionsUrl: 'connections/deployers', \n                        valueKey: 'alias',\n                        labelKey: 'name',\n                        placeholder: 'Type',\n                        onChange: (newValue) => {\n                            this.model.deployer.alias = newValue;\n\n                            this.fetch();\n                        }\n                    }).$element\n                )\n            ),\n            _.each(HashBrown.Views.Editors.DeployerEditors, (name, editor) => {\n                if(editor.alias !== this.model.deployer.alias) { return; }\n                    \n                return new editor({\n                    model: this.model.deployer\n                }).$element;\n            }),\n            _.do(() => {\n                if(!this.model.deployer || !this.model.deployer.paths) { return; }\n                \n                return _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Paths'),\n                        _.div({class: 'editor__field__key__description'}, 'Where to send the individual resources')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Content'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    value: this.model.deployer.paths.content,\n                                    onChange: (newValue) => {\n                                        this.model.deployer.paths.content = newValue;\n                                    }\n                                })\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Media'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    value: this.model.deployer.paths.media,\n                                    onChange: (newValue) => {\n                                        this.model.deployer.paths.media = newValue;\n                                    }\n                                })\n                            )\n                        )\n                    )\n                );\n            })\n        ];\n    }\n\n    /**\n     * Prerender\n     */\n    prerender() {\n        if(this.model instanceof HashBrown.Models.Connection === false) {\n            this.model = new HashBrown.Models.Connection(this.model);\n        }\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--connection' + (this.model.isLocked ? ' locked' : '')},\n            _.div({class: 'editor__header'},\n                _.span({class: 'editor__header__icon fa fa-exchange'}),\n                _.h4({class: 'editor__header__title'}, this.model.title)\n            ),\n            _.div({class: 'editor__body'},\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'}, 'Is Media provider'),\n                    _.div({class: 'editor__field__value'},\n                        this.renderMediaProviderEditor()\n                    )\n                ),\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'}, 'Title'),\n                    _.div({class: 'editor__field__value'},\n                        this.renderTitleEditor()\n                    )\n                ),\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'}, 'URL'),\n                    _.div({class: 'editor__field__value'},\n                        this.renderUrlEditor()\n                    )\n                ),\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Processor'),\n                        _.div({class: 'editor__field__key__description'}, 'Which format to deploy Content in')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        this.renderProcessorSettingsEditor()\n                    )\n                ),\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Deployer'),\n                        _.div({class: 'editor__field__key__description'}, 'How to transfer data to and from the website\\'s server')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        this.renderDeployerSettingsEditor()\n                    )\n                )\n            ),\n            _.div({class: 'editor__footer'}, \n                _.div({class: 'editor__footer__buttons'},\n                    _.button({class: 'widget widget--button embedded'},\n                        'Advanced'\n                    ).click(() => { this.onClickAdvanced(); }),\n                    _.if(!this.model.isLocked, \n                        this.$saveBtn = _.button({class: 'widget widget--button editor__footer__buttons__save'},\n                            _.span({class: 'widget--button__text-default'}, 'Save '),\n                            _.span({class: 'widget--button__text-working'}, 'Saving ')\n                        ).click(() => { this.onClickSave(); })\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = ConnectionEditor;\n","'use strict';\n\n/**\n * The editor view for Content objects\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass ContentEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        this.dirty = false;\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Scroll\n     */\n    onScroll(e) {\n        let followingField;\n\n        // Look for field labels that are close to the top of the viewport and make them follow\n        this.$element.find('.editor__body__tab.active > .editor__field > .editor__field__key').each((i, field) => {\n            field.classList.remove('following');\n           \n            let rect = field.getBoundingClientRect();\n            let actions = field.querySelector('.editor__field__key__actions');\n            let actionRect;\n\n            if(actions) { \n                actionRect = actions.getBoundingClientRect();\n            }\n\n            if(\n                rect.top <= 40 &&\n                actionRect && rect.bottom >= (actionRect.height + 60) &&\n                (!followingField || followingField.getBoundingClientRect().top < rect.top)\n            ) {\n                followingField = field;\n            }\n        });\n\n        if(followingField) {\n            followingField.classList.add('following');\n        }\n       \n        // Cache the last scroll position\n        this.lastScrollPos = this.$element.find('.editor__body')[0].scrollTop; \n    }\n\n    /**\n     * Event: Click advanced. Routes to the JSON editor\n     */\n    onClickAdvanced() {\n        location.hash = '/content/json/' + this.model.id;\n    }\n\n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        let saveAction = this.$element.find('.editor__footer__buttons select').val();\n        let postSaveUrl;\n\n        let setContent = () => {\n            // Use publishing API\n            if(this.model.getSettings('publishing').connectionId) {\n                // Unpublish\n                if(saveAction === 'unpublish') {\n                    return HashBrown.Helpers.RequestHelper.request('post', 'content/unpublish', this.model);\n\n                // Publish\n                } else if(saveAction === 'publish') {\n                    return HashBrown.Helpers.RequestHelper.request('post', 'content/publish', this.model);\n                \n                // Preview\n                } else if(saveAction === 'preview') {\n                    return HashBrown.Helpers.RequestHelper.request('post', 'content/preview', this.model);\n\n                }\n            }\n\n            // Just save normally\n            return HashBrown.Helpers.RequestHelper.request('post', 'content/' + this.model.id, this.model);\n        }\n\n        this.$saveBtn.toggleClass('working', true);\n\n        // Save content to database\n        setContent()\n        .then((url) => {\n            postSaveUrl = url;\n            \n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n        .then(() => {\n            this.$saveBtn.toggleClass('working', false);\n            \n            this.reload();\n            \n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            this.dirty = false;\n\n            if(saveAction === 'preview') {\n                UI.iframeModal(\n                    'Preview',\n                    postSaveUrl\n                );\n            }\n        })\n        .catch((e) => {\n            this.$saveBtn.toggleClass('working', false);\n            UI.errorModal(e);\n        });\n    }\n\n    /**\n     * Reload this view\n     */\n    reload() {\n        this.lastScrollPos = this.$element.find('.editor__body')[0].scrollTop; \n\n        this.model = null;\n\n        this.fetch();\n    }\n\n    /**\n     * Binds event to fire when field editors are ready\n     * Or fires them if no callback was passed\n     *\n     * @param {Function} callback\n     */\n    onFieldEditorsReady(callback) {\n        if(!this.fieldEditorReadyCallbacks) {\n            this.fieldEditorReadyCallbacks = [];\n        }\n\n        if(callback) {\n            this.fieldEditorReadyCallbacks.push(callback);\n\n        } else {\n            for(let registeredCallback of this.fieldEditorReadyCallbacks) {\n                registeredCallback();\n            }\n\n            this.fieldEditorReadyCallbacks = [];\n        }\n\n        this.restoreScrollPos();\n    }\n\n    /**\n     * Restores the scroll position\n     *\n     * @param {Number} delay\n     */\n    restoreScrollPos(delay) {\n        let newScrollPos = this.lastScrollPos || 0;\n\n        setTimeout(() => {\n            this.$element.find('.editor__body')[0].scrollTop = newScrollPos;\n        }, delay || 0);\n    }\n\n    /**\n     * Static version of the restore scroll position method\n     *\n     * @param {Number} delay\n     */\n    static restoreScrollPos(delay) {\n        let editor = Crisp.View.get('ContentEditor');\n\n        if(editor) {\n            editor.restoreScrollPos(delay);\n        }\n    }\n\n    /**\n     * Gets a field editor for a Schema\n     *\n     * @param {string} editorId\n     *\n     * @returns {View} Field editor\n     */\n    static getFieldEditor(editorId) {\n        if(!editorId) { return; }\n\n        // Backwards compatible check\n        editorId = editorId.charAt(0).toUpperCase() + editorId.slice(1);\n        \n        if(editorId.indexOf('Editor') < 0) {\n            editorId += 'Editor';\n        }\n\n        return HashBrown.Views.Editors.FieldEditors[editorId];\n    }\n\n    /**\n     * Renders a field view\n     *\n     * @param {Object} fieldValue The field value to inject into the field editor\n     * @param {FieldSchema} fieldDefinition The field definition\n     * @param {Function} onChange The change event\n     * @param {HTMLElement} keyActions The key content container\n     *\n     * @return {Object} element\n     */\n    renderField(fieldValue, fieldDefinition, onChange, $keyActions) {\n        let compiledSchema = HashBrown.Helpers.SchemaHelper.getFieldSchemaWithParentConfigs(fieldDefinition.schemaId);\n\n        if(!compiledSchema) {\n            return debug.log('No FieldSchema found for Schema id \"' + fieldDefinition.schemaId + '\"', this);\n        }\n\n        let fieldEditor = ContentEditor.getFieldEditor(compiledSchema.editorId);\n          \n        if(!fieldEditor) {\n            return debug.log('No field editor by id \"' + fieldSchema.editorId + '\" found', this);\n        }\n\n        // Get the config\n        let config;\n\n        // If the field has a config, check recursively if it's empty\n        // If it isn't, use this config\n        if(fieldDefinition.config) {\n            let isEmpty = true;\n            let checkRecursive = (object) => {\n                if(!object) { return; }\n\n                // We consider a config not empty, if it has a value that is not an object\n                // Remember, null is of type 'object' too\n                if(typeof object !== 'object') { return isEmpty = false; }\n\n                for(let k in object) {\n                    checkRecursive(object[k]);\n                }\n            };\n\n            checkRecursive(fieldDefinition.config);\n\n            if(!isEmpty) {\n                config = fieldDefinition.config;\n            }\n        }\n\n        // If no config was found, and the Schema has one, use it\n        if(!config && compiledSchema.config) {\n            config = compiledSchema.config;\n        }\n\n        // If still no config was found, assign a placeholder\n        if(!config) {\n            config = {};\n        }\n\n        // Instantiate the field editor\n        let fieldEditorInstance = new fieldEditor({\n            value: fieldValue,\n            disabled: fieldDefinition.disabled || false,\n            config: config,\n            description: fieldDefinition.description || '',\n            schema: compiledSchema.getObject(),\n            multilingual: fieldDefinition.multilingual === true,\n            $keyActions: $keyActions\n        });\n\n        fieldEditorInstance.on('change', (newValue) => {\n            if(this.model.isLocked) { return; }\n            \n            this.dirty = true;\n\n            onChange(newValue);\n        });\n\n        fieldEditorInstance.on('silentchange', (newValue) => {\n            if(this.model.isLocked) { return; }\n            \n            onChange(newValue);\n        });\n\n        return fieldEditorInstance.$element;\n    }\n\n    /**\n     * Renders fields\n     *\n     * @param {String} tabId The tab for which to render the fields\n     * @param {Object} fieldDefinitions The set of field definitions to render\n     * @param {Object} fieldValues The set of field values to inject into the field editor\n     *\n     * @returns {Array} A list of HTMLElements to render\n     */\n    renderFields(tabId, fieldDefinitions, fieldValues) {\n        let tabFieldDefinitions = {};\n\n        // Map out field definitions to render\n        // This is necessary because we're only rendering the fields for the specified tab\n        for(let key in fieldDefinitions) {\n            let fieldDefinition = fieldDefinitions[key];\n\n            let noTabAssigned = !this.schema.tabs[fieldDefinition.tabId];\n            let isMetaTab = tabId === 'meta';\n            let thisTabAssigned = fieldDefinition.tabId === tabId;\n\n            // Don't include \"properties\" field, if this is the meta tab\n            if(isMetaTab && key === 'properties') {\n                continue;\n            }\n\n            if((noTabAssigned && isMetaTab) || thisTabAssigned) {\n                tabFieldDefinitions[key] = fieldDefinition;\n            }\n        }\n\n        // Render all fields\n        return _.each(tabFieldDefinitions, (key, fieldDefinition) => {\n            // Field value sanity check\n            fieldValues[key] = HashBrown.Helpers.ContentHelper.fieldSanityCheck(fieldValues[key], fieldDefinition);\n\n            // Render the field actions container\n            let $keyActions;\n\n            return _.div({class: 'editor__field', 'data-key': key},\n                // Render the label and icon\n                _.div({class: 'editor__field__key', title: fieldDefinition.description || ''},\n                    _.div({class: 'editor__field__key__label'}, fieldDefinition.label || key),\n                    _.if(fieldDefinition.description,\n                        _.div({class: 'editor__field__key__description'}, fieldDefinition.description)\n                    ),\n                    $keyActions = _.div({class: 'editor__field__key__actions'})\n                ),\n\n                // Render the field editor\n                this.renderField(\n                    // If the field definition is set to multilingual, pass value from object\n                    fieldDefinition.multilingual ? fieldValues[key][window.language] : fieldValues[key],\n\n                    // Pass the field definition\n                    fieldDefinition,\n\n                    // On change function\n                    (newValue) => {\n                        // If field definition is set to multilingual, assign flag and value onto object...\n                        if(fieldDefinition.multilingual) {\n                            fieldValues[key]._multilingual = true;\n                            fieldValues[key][window.language] = newValue;\n\n                        // ...if not, assign the value directly\n                        } else {\n                            fieldValues[key] = newValue;\n                        }\n                    },\n\n                    // Pass the key actions container, so the field editor can populate it\n                    $keyActions\n                )\n            );\n        });\n    }\n\n    /**\n     * Event: Click tab\n     *\n     * @param {String} tab\n     */\n    onClickTab(tab) {\n    }\n\n    /**\n     * Renders the editor\n     *\n     * @param {Content} content\n     * @param {ContentSchema} schema\n     *\n     * @return {Object} element\n     */\n    renderEditor(content, schema) {\n        let activeTab = Crisp.Router.params.tab || schema.defaultTabId || 'meta';\n\n        // Render editor\n        return [\n            _.div({class: 'editor__header'}, \n                _.each(schema.tabs, (tabId, tabName) => {\n                    return _.button({class: 'editor__header__tab' + (tabId === activeTab ? ' active' : '')}, tabName)\n                        .click(() => {\n                            location.hash = '/content/' + Crisp.Router.params.id + '/' + tabId;\n\n                            this.fetch();\n                        });\n                }),\n                _.button({'data-id': 'meta', class: 'editor__header__tab' + ('meta' === activeTab ? ' active' : '')}, 'Meta')\n                    .click(() => {\n                        location.hash = '/content/' + Crisp.Router.params.id + '/meta';\n\n                        this.fetch();\n                    })\n            ),\n            _.div({class: 'editor__body'},\n                // Render content properties\n                _.each(schema.tabs, (tabId, tabName) => {\n                    if(tabId !== activeTab) { return; }\n\n                    return _.div({class: 'editor__body__tab active'},\n                        this.renderFields(tabId, schema.fields.properties, content.properties)\n                    );\n                }),\n\n                // Render meta properties\n                _.if(activeTab === 'meta',\n                    _.div({class: 'editor__body__tab' + ('meta' === activeTab ? 'active' : ''), 'data-id': 'meta'},\n                        this.renderFields('meta', schema.fields, content),\n                        this.renderFields('meta', schema.fields.properties, content.properties)\n                    )\n                )\n            ).on('scroll', (e) => {\n                this.onScroll(e);\n            }),\n            _.div({class: 'editor__footer'})\n        ];\n    }\n\n    /**\n     * Renders the action buttons\n     */\n    renderButtons() {\n        let remoteUrl;\n        let connectionId = this.model.getSettings('publishing').connectionId;\n        let connection;\n\n        // Construct the remote URL, if a Connection is set up for publishing\n        let contentUrl = this.model.properties.url;\n\n        if(connectionId) {\n            connection = HashBrown.Helpers.ConnectionHelper.getConnectionByIdSync(connectionId);\n                \n            if(connection && connection.url && contentUrl) {\n                // Language versioning\n                if(contentUrl instanceof Object) {\n                    contentUrl = contentUrl[window.language];\n                }\n\n                // Construct remote URL\n                if(contentUrl && contentUrl !== '//') {\n                    remoteUrl = connection.url + contentUrl;\n                    remoteUrl = remoteUrl.replace(/\\/\\//g, '/').replace(':/', '://');\n\n                } else {\n                    contentUrl = null;\n                \n                }\n            }\n        }\n            \n        _.append($('.editor__footer').empty(),\n            _.div({class: 'editor__footer__message'},\n                _.do(() => {\n                    if(!connection) {\n                        return 'No Connection is assigned for publishing'   ;\n                    }\n                    \n                    if(connection && !connection.url) {\n                        return 'No remote URL is defined in the <a href=\"#/connections/' + connection.id + '\">\"' + connection.title + '\"</a> Connection';\n                    }\n                    \n                    if(connection && connection.url && !contentUrl) {\n                        return 'Content without a URL may not be visible after publishing';\n                    }\n                })\n            ),\n\n            _.div({class: 'editor__footer__buttons'},\n                // JSON editor\n                _.button({class: 'widget widget--button condensed embedded'},\n                    'Advanced'\n                ).click(() => { this.onClickAdvanced(); }),\n\n                // View remote\n                _.if(this.model.isPublished && remoteUrl,\n                    _.a({target: '_blank', href: remoteUrl, class: 'widget widget--button condensed embedded'}, 'View')\n                ),\n\n                _.if(!this.model.isLocked,\n                    // Save & publish\n                    _.div({class: 'widget widget-group'},\n                        this.$saveBtn = _.button({class: 'widget widget--button'},\n                            _.span({class: 'widget--button__text-default'}, 'Save'),\n                            _.span({class: 'widget--button__text-working'}, 'Saving')\n                        ).click(() => { this.onClickSave(); }),\n                        _.if(connection,\n                            _.span({class: 'widget widget--button widget-group__separator'}, '&'),\n                            _.select({class: 'widget widget--select'},\n                                _.option({value: 'publish'}, 'Publish'),\n                                _.option({value: 'preview'}, 'Preview'),\n                                _.if(this.model.isPublished, \n                                    _.option({value: 'unpublish'}, 'Unpublish')\n                                ),\n                                _.option({value: ''}, '(No action)')\n                            ).val('publish')\n                        )\n                    )\n                )\n            )\n        );\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        // Make sure the model data is using the Content model\n        if(this.model instanceof HashBrown.Models.Content === false) {\n            this.model = new HashBrown.Models.Content(this.model);\n        }\n    }\n\n    /**\n     * Render this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--content' + (this.model.isLocked ? ' locked' : '')});\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        // Fetch information\n        let contentSchema;\n\n        return HashBrown.Helpers.SchemaHelper.getSchemaWithParentFields(this.model.schemaId)\n        .then((schema) => {\n            contentSchema = schema;\n\n            this.schema = contentSchema;\n\n            this.$element.html(\n                this.renderEditor(this.model, contentSchema)\n            );\n           \n            this.renderButtons();\n\n            this.onFieldEditorsReady();\n        })\n        .catch((e) => {\n            UI.errorModal(e, () => { location.hash = '/content/json/' + this.model.id; });\n        });\n    }\n}\n\nmodule.exports = ContentEditor;\n","'use strict';\n\n/**\n * The editor for Forms\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass FormEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n        \n        this.fetch();\n    }\n    \n    /**\n     * Event: Click advanced. Routes to the JSON editor\n     */\n    onClickAdvanced() {\n        location.hash = location.hash.replace('/forms/', '/forms/json/');\n    }\n\n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        this.$saveBtn.toggleClass('working', true);\n\n        HashBrown.Helpers.RequestHelper.request('post', 'forms/' + this.model.id, this.model)\n        .then(() => {\n            debug.log('Saved form \"' + this.model.id + '\"', this);\n            this.$saveBtn.toggleClass('working', false);\n        \n            return HashBrown.Helpers.RequestHelper.reloadResource('forms');\n        })\n        .then(() => {\n            let navbar = Crisp.View.get('NavbarMain');\n            \n            navbar.reload();\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click add input\n     */\n    onClickAddInput() {\n        if(!this.model.inputs['newinput']) {\n            this.model.inputs['newinput'] = { type: 'text' };\n        }\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click remove input\n     *\n     * @param {String} key\n     */\n    onClickRemoveInput(key) {\n        delete this.model.inputs[key];\n\n        this.fetch();\n    }\n    \n    /**\n     * Renders the allowed origin editor\n     *\n     * @return {Object} element\n     */\n    renderAllowedOriginEditor() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Input({\n                value: this.model.allowedOrigin,\n                tooltip: 'The allowed origin from which entries to this form can be posted',\n                onChange: (newOrigin) => {\n                    this.model.allowedOrigin = newOrigin;\n                }\n            }).$element\n        );\n    }\n\n    /**\n     * Renders the title editor\n     *\n     * @return {Object} element\n     */\n    renderTitleEditor() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Input({\n                value: this.model.title,\n                tooltip: 'The title of the form',\n                onChange: (newTitle) => {\n                    this.model.title = newTitle;\n                }\n            }).$element\n        );\n    }\n    \n    /**\n     * Renders the redirect editor\n     *\n     * @return {Object} element\n     */\n    renderRedirectEditor() {\n        return _.div({class: 'editor__field__value'},\n            _.div({class: 'widget-group'},\n                new HashBrown.Views.Widgets.Input({\n                    value: this.model.redirect,\n                    tooltip: 'The URL that the user will be redirected to after submitting the form entry',\n                    onChange: (newUrl) => {\n                        this.model.redirect = newUrl;\n                    }\n                }).$element,\n                new HashBrown.Views.Widgets.Input({\n                    value: this.model.appendRedirect,\n                    placeholder: 'Append',\n                    type: 'checkbox',\n                    tooltip: 'If ticked, the redirect URL will be appended to that of the origin',\n                    onChange: (newValue) => {\n                        this.model.appendRedirect = newValue;\n                    }\n                }).$element\n            )\n        );\n    }\n\n    /**\n     * Renders the inputs editor\n     *\n     * @return {Object} element\n     */\n    renderInputsEditor() {\n        let types = [\n            'checkbox',\n            'hidden',\n            'number',\n            'select',\n            'text'\n        ];\n\n        return _.div({class: 'editor__field__value segmented'},\n            _.each(this.model.inputs, (key, input) => {\n                return _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__actions'},\n                        _.button({class: 'editor__field__action editor__field__action--remove', title: 'Remove field'})\n                            .click(() => { view.onClickRemoveInput(key); })\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Name'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    value: key,\n                                    onChange: (newValue) => {\n                                        delete this.model.inputs[key];\n\n                                        key = newValue;\n\n                                        this.model.inputs[key] = input;\n                                    }\n                                }).$element\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Type'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Dropdown({\n                                    value: input.type,\n                                    options: types,\n                                    onChange: (newValue) => {\n                                        input.type = newValue;\n\n                                        this.fetch();\n                                    }\n                                }).$element\n                            )\n                        ),\n                        _.if(input.type == 'select',\n                            _.div({class: 'editor__field'},\n                                _.div({class: 'editor__field__key'}, 'Select options'),\n                                _.div({class: 'editor__field__value'},\n                                    new HashBrown.Views.Widgets.Chips({\n                                        value: input.options || [],\n                                        onChange: (newValue) => {\n                                            input.options = newValue;\n\n                                            this.renderPreview();\n                                        }\n                                    }).$element\n                                )\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Required'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    type: 'checkbox',\n                                    value: input.required === true,\n                                    onChange: (newValue) => {\n                                        input.required = newValue;\n                                    }\n                                }).$element\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Check duplicates'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    type: 'checkbox',\n                                    value: input.checkDuplicates === true,\n                                    onChange: (newValue) => {\n                                        input.checkDuplicates = newValue;\n                                    }\n                                }).$element\n                            )\n                        ),\n                        _.div({class: 'editor__field'},\n                            _.div({class: 'editor__field__key'}, 'Pattern'),\n                            _.div({class: 'editor__field__value'},\n                                new HashBrown.Views.Widgets.Input({\n                                    value: input.pattern,\n                                    onChange: (newValue) => {\n                                        input.pattern = newValue;\n                                    }\n                                }).$element\n                            )\n                        )\n                    )\n                );\n            }),\n            _.button({class: 'widget widget--button round editor__field__add fa fa-plus', title: 'Add an input'})\n                .on('click', () => { this.onClickAddInput(); })\n        );\n    }\n\n    /**\n     * Renders a preview\n     *\n     * @return {Object} element\n     */\n    renderPreview() {\n        let $preview = this.$element.find('.editor--form__preview');\n\n        _.append($preview.empty(),\n            _.each(this.model.inputs, (key, input) => {\n                if(input.type === 'select') {\n                    return new HashBrown.Views.Widgets.Dropdown({\n                        options: input.options || []\n                    }).$element\n                } else {\n                    return _.input({class: 'widget widget--input ' + (input.type || 'text'), placeholder: key, type: input.type, name: key, pattern: input.pattern, required: input.required === true});\n                }\n            })\n        );\n    }\n\n    /**\n     * Renders all entries\n     *\n     * @return {Object} element\n     */\n    renderEntries() {\n        return _.div({class: 'editor__field__value'},\n            _.div({class: 'widget-group'},\n                _.button({class: 'widget widget--button low warning'}, 'Clear').click(() => {\n                    UI.confirmModal('Clear', 'Clear \"' + this.model.title + '\"', 'Are you sure you want to clear all entries?', () => {\n                        HashBrown.Helpers.RequestHelper.request('post', 'forms/clear/' + this.model.id)\n                        .then(() => {\n                            this.model.entries = [];\n                        })\n                        .catch(UI.errorModal);\n                    });\n                }),\n                _.button({class: 'widget widget--button low'}, 'Get .csv').click(() => {\n                    location = HashBrown.Helpers.RequestHelper.environmentUrl('forms/' + this.model.id + '/entries');\n                })\n            )\n        );\n    }\n\n    /**\n     * Renders a single field\n     *\n     * @return {HTMLElement} Element\n     */\n    renderField(label, $content, className) {\n        return _.div({class: 'editor__field'},\n            _.div({class: 'editor__field__key'},\n                label\n            ),\n            $content\n        );\n    }\n        \n    /**\n     * Renders all fields\n     *\n     * @return {Object} element\n     */\n    renderFields() {\n        let $element = _.div({class: 'editor__body'});\n        let postUrl = location.protocol + '//' + location.hostname + '/api/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/forms/' + this.model.id + '/submit';\n        \n        return _.div({class: 'editor__body'},\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Entries (' + this.model.entries.length + ')'),\n                _.div({class: 'editor__field__value'},\n                    this.renderEntries()\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'POST URL'),\n                _.div({class: 'editor__field__value'},\n                    _.div({class: 'widget-group'},\n                        _.input({readonly: 'readonly', class: 'widget widget--input text', type: 'text', value: postUrl}),\n                        _.button({class: 'widget widget--button small fa fa-copy', title: 'Copy POST URL'})\n                            .click((e) => {\n                                copyToClipboard(e.currentTarget.previousElementSibling.value);\n                            })\n                    )\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Title'),\n                _.div({class: 'editor__field__value'},\n                    this.renderTitleEditor()\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Allowed origin'),\n                _.div({class: 'editor__field__value'},\n                    this.renderAllowedOriginEditor() \n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Redirect URL'),\n                _.div({class: 'editor__field__value'},\n                    this.renderRedirectEditor() \n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Inputs'),\n                _.div({class: 'editor__field__value'},\n                    this.renderInputsEditor()\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Preview'),\n                _.div({class: 'editor__field__value'},\n                    _.div({class: 'editor--form__preview'})\n                )\n            )\n        );\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        this.renderPreview();\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--form' + (this.model.isLocked ? ' locked' : '')},\n            _.div({class: 'editor__header'},\n                _.span({class: 'editor__header__icon fa fa-wpforms'}),\n                _.h4({class: 'editor__header__title'}, this.model.title)\n            ),\n            this.renderFields(),\n            _.div({class: 'editor__footer'}, \n                _.div({class: 'editor__footer__buttons'},\n                    _.button({class: 'widget widget--button embedded'},\n                        'Advanced'\n                    ).click(() => { this.onClickAdvanced(); }),\n                    _.if(!this.model.isLocked,\n                        this.$saveBtn = _.button({class: 'widget widget--button'},\n                            _.span({class: 'widget--button__text-default'}, 'Save '),\n                            _.span({class: 'widget--button__text-working'}, 'Saving ')\n                        ).click(() => { this.onClickSave(); })\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = FormEditor;\n","'use strict';\n\nconst beautify = require('js-beautify').js_beautify;\n\n/**\n * A basic JSON editor for any object\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass JSONEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        this.$error = _.div({class: 'editor__footer__error'},\n            _.div({class: 'editor__footer__error__heading'}),\n            _.div({class: 'editor__footer__error__body'})\n        ).hide();\n\n        if(!this.model && !this.modelUrl) {\n            this.modelUrl = HashBrown.Helpers.RequestHelper.environmentUrl(this.apiPath);\n        }\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click basic. Returns to the regular editor\n     */\n    onClickBasic() {\n        let url = $('.navbar-main__pane__item.active > a').attr('href');\n    \n        if(url) {\n            location = url;\n        } else {\n            debug.log('Invalid url \"' + url + '\"', this);\n        }\n    }\n\n    /**\n     * Event: Click save. Posts the model to the apiPath\n     */\n    onClickSave() {\n        let view = this;\n        \n        this.$saveBtn.toggleClass('working', true);\n\n        if(this.debug()) {\n            HashBrown.Helpers.RequestHelper.request('post', this.apiPath, this.model)\n            .then(() => {\n                this.$saveBtn.toggleClass('working', false);\n            })\n            .catch(UI.errorModal);\n       \n        } else {\n            UI.errorModal('Unable to save', 'Please refer to the error prompt for details');\n\n        }\n    }\n\n    /**\n     * Event: Click beautify button\n     */\n    onClickBeautify() {\n        try {\n            this.value = beautify(this.value);\n            this.$element.find('textarea').val(this.value);\n        \n        } catch(e) {\n            this.$error.children('.editor__footer__error__heading').html('JSON error');\n            this.$error.children('.editor__footer__error__body').html(e);\n            this.$error.show();\n\n        }\n    }\n\n    /**\n     * Debug the JSON string\n     *\n     * @param {Boolean} fromModel\n     */\n    debug(fromModel) {\n        let isValid = true;\n        \n        // Function for checking model integrity\n        let check = (k, v) => {\n            if(!v) { return; }\n\n            switch(k) {\n                case 'schemaId': case 'parentSchemaId':\n                    if(HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(v)) {\n                        return;\n                    }\n\n                    return 'Schema \"' + v + '\" not found';\n               \n                case 'schemaBindings': case 'allowedSchemas': case 'allowedChildSchemas':\n                    let invalidSchemas = v.slice(0);\n                    \n                    for(let r in resources.schemas) {\n                        let schema = resources.schemas[r];\n                        \n                        for(let b = invalidSchemas.length - 1; b >= 0; b--) {\n                            if(schema.id == invalidSchemas[b]) {\n                                invalidSchemas.splice(b, 1);\n                            }\n                        }   \n                    }\n\n                    if(invalidSchemas.length > 0) {\n                        if(invalidSchemas.length == 1) {\n                            return 'Schema \"' + invalidSchemas[0] + '\" not found';\n                        } else {\n                            return 'Schemas \"' + invalidSchemas.join(', ') + '\" not found';\n                        }\n                    }\n\n                    break;\n                    \n                case 'connections':\n                    let invalidConnections = v.slice(0);\n                    \n                    for(let r in resources.connections) {\n                        let connection = resources.connections[r];\n\n                        for(let c = invalidConnections.length - 1; c >= 0; c--) {\n                            if(connection.id == invalidConnections[c]) {\n                                invalidConnections.splice(c, 1);\n                            }\n                        }   \n                    }\n\n                    if(invalidConnections.length > 0) {\n                        if(invalidConnections.length == 1) {\n                            return 'Connection \"' + invalidConnections[0] + '\" not found';\n                        } else {\n                            return 'Connections \"' + invalidConnections.join(', ') + '\" not found';\n                        }\n                    }\n\n                    break;\n            }\n\n            return;\n        };\n\n        // Function for recursing through object\n        let recurse = (obj) => {\n            if(obj instanceof Object) {\n                for(let k in obj) {\n                    let v = obj[k];\n\n                    let failMessage = check(k, v);\n                    \n                    if(failMessage) {\n                        this.$error.children('.editor__footer__error__heading').html('Input error');\n                        this.$error.children('.editor__footer__error__body').html(failMessage);\n                        this.$error.show();\n                    \n                        isValid = false;\n                    };\n\n                    recurse(v);\n                }\n            }\n        };\n        \n        // Hide error message initially\n        this.$error.hide();\n\n        // Syntax check\n        try {\n            if(!fromModel) {\n                this.model = JSON.parse(this.value);\n            }\n            \n            // Sanity check\n            recurse(this.model);\n\n        } catch(e) {\n            this.$error.children('.editor__footer__error__heading').html('Syntax error');\n            this.$error.children('.editor__footer__error__body').html(e);\n            this.$error.show();\n\n            isValid = false;\n        }\n\n        this.isValid = isValid;\n\n        return isValid;\n    }\n\n    /**\n     * Event: Change text. Make sure the value is up to date\n     */\n    onChangeText() {\n        this.value = this.editor.getDoc().getValue();\n\n        if(this.debug()) {\n            this.trigger('change', this.model);\n        }\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        // Debug once before entering into the code editor\n        // This allows for backward compatibility adjustments to happen first\n        this.debug(true);\n\n        // Convert the model to a string value\n        this.value = beautify(JSON.stringify(this.model));\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--json'},\n            _.div({class: 'editor__header'}, \n                _.span({class: 'editor__header__icon fa fa-code'}),\n                _.h4({class: 'editor__header__title'}, Crisp.Router.params.id)\n            ),\n            _.div({class: 'editor__body'},\n                _.textarea(),\n            ),\n            _.div({class: 'editor__footer'}, \n                this.$error,\n                _.div({class: 'editor__footer__buttons'},\n                    _.button({class: 'widget widget--button embedded'},\n                        'Basic'\n                    ).click(() => { this.onClickBasic(); }),\n                    _.if(!this.model.isLocked,\n                        this.$saveBtn = _.button({class: 'widget widget--button'},\n                            _.span({class: 'widget--button__text-default'}, 'Save'),\n                            _.span({class: 'widget--button__text-working'}, 'Saving')\n                        ).click(() => { this.onClickSave(); })\n                    )\n                )\n            )\n        );\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        setTimeout(() => {\n            this.editor = CodeMirror.fromTextArea(this.element.querySelector('textarea'), {\n                lineNumbers: true,\n                mode: {\n                    name: 'javascript',\n                    json: true\n                },\n                viewportMargin: 10,\n                tabSize: 4,\n                lineWrapping: false,\n                indentUnit: 4,\n                indentWithTabs: true,\n                theme: getCookie('cmtheme') || 'default',\n                value: this.value\n            });\n\n            this.editor.getDoc().setValue(this.value);\n\n            this.editor.on('change', () => { this.onChangeText(); });\n\n            this.onChangeText();\n        }, 1);\n    }\n}\n\nmodule.exports = JSONEditor;\n","/*\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2017 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n*/\n\n/**\nThe following batches are equivalent:\n\nvar beautify_js = require('js-beautify');\nvar beautify_js = require('js-beautify').js;\nvar beautify_js = require('js-beautify').js_beautify;\n\nvar beautify_css = require('js-beautify').css;\nvar beautify_css = require('js-beautify').css_beautify;\n\nvar beautify_html = require('js-beautify').html;\nvar beautify_html = require('js-beautify').html_beautify;\n\nAll methods returned accept two arguments, the source string and an options object.\n**/\n\nfunction get_beautify(js_beautify, css_beautify, html_beautify) {\n    // the default is js\n    var beautify = function(src, config) {\n        return js_beautify.js_beautify(src, config);\n    };\n\n    // short aliases\n    beautify.js = js_beautify.js_beautify;\n    beautify.css = css_beautify.css_beautify;\n    beautify.html = html_beautify.html_beautify;\n\n    // legacy aliases\n    beautify.js_beautify = js_beautify.js_beautify;\n    beautify.css_beautify = css_beautify.css_beautify;\n    beautify.html_beautify = html_beautify.html_beautify;\n\n    return beautify;\n}\n\nif (typeof define === \"function\" && define.amd) {\n    // Add support for AMD ( https://github.com/amdjs/amdjs-api/wiki/AMD#defineamd-property- )\n    define([\n        \"./lib/beautify\",\n        \"./lib/beautify-css\",\n        \"./lib/beautify-html\"\n    ], function(js_beautify, css_beautify, html_beautify) {\n        return get_beautify(js_beautify, css_beautify, html_beautify);\n    });\n} else {\n    (function(mod) {\n        var js_beautify = require('./lib/beautify');\n        var css_beautify = require('./lib/beautify-css');\n        var html_beautify = require('./lib/beautify-html');\n\n        mod.exports = get_beautify(js_beautify, css_beautify, html_beautify);\n\n    })(module);\n}","/*jshint curly:true, eqeqeq:true, laxbreak:true, noempty:false */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2017 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n JS Beautifier\n---------------\n\n\n  Written by Einar Lielmanis, <einar@jsbeautifier.org>\n      http://jsbeautifier.org/\n\n  Originally converted to javascript by Vital, <vital76@gmail.com>\n  \"End braces on own line\" added by Chris J. Shull, <chrisjshull@gmail.com>\n  Parsing improvements for brace-less statements by Liam Newman <bitwiseman@gmail.com>\n\n\n  Usage:\n    js_beautify(js_source_text);\n    js_beautify(js_source_text, options);\n\n  The options are:\n    indent_size (default 4)          - indentation size,\n    indent_char (default space)      - character to indent with,\n    preserve_newlines (default true) - whether existing line breaks should be preserved,\n    max_preserve_newlines (default unlimited) - maximum number of line breaks to be preserved in one chunk,\n\n    jslint_happy (default false) - if true, then jslint-stricter mode is enforced.\n\n            jslint_happy        !jslint_happy\n            ---------------------------------\n            function ()         function()\n\n            switch () {         switch() {\n            case 1:               case 1:\n              break;                break;\n            }                   }\n\n    space_after_anon_function (default false) - should the space before an anonymous function's parens be added, \"function()\" vs \"function ()\",\n          NOTE: This option is overriden by jslint_happy (i.e. if jslint_happy is true, space_after_anon_function is true by design)\n\n    brace_style (default \"collapse\") - \"collapse\" | \"expand\" | \"end-expand\" | \"none\" | any of the former + \",preserve-inline\"\n            put braces on the same line as control statements (default), or put braces on own line (Allman / ANSI style), or just put end braces on own line, or attempt to keep them where they are.\n            preserve-inline will try to preserve inline blocks of curly braces\n\n    space_before_conditional (default true) - should the space before conditional statement be added, \"if(true)\" vs \"if (true)\",\n\n    unescape_strings (default false) - should printable characters in strings encoded in \\xNN notation be unescaped, \"example\" vs \"\\x65\\x78\\x61\\x6d\\x70\\x6c\\x65\"\n\n    wrap_line_length (default unlimited) - lines should wrap at next opportunity after this number of characters.\n          NOTE: This is not a hard limit. Lines will continue until a point where a newline would\n                be preserved if it were present.\n\n    end_with_newline (default false)  - end output with a newline\n\n\n    e.g\n\n    js_beautify(js_source_text, {\n      'indent_size': 1,\n      'indent_char': '\\t'\n    });\n\n*/\n\n// Object.values polyfill found here:\n// http://tokenposts.blogspot.com.au/2012/04/javascript-objectkeys-browser.html\nif (!Object.values) {\n    Object.values = function(o) {\n        if (o !== Object(o)) {\n            throw new TypeError('Object.values called on a non-object');\n        }\n        var k = [],\n            p;\n        for (p in o) {\n            if (Object.prototype.hasOwnProperty.call(o, p)) {\n                k.push(o[p]);\n            }\n        }\n        return k;\n    };\n}\n\n(function() {\n\n    function mergeOpts(allOptions, targetType) {\n        var finalOpts = {};\n        var name;\n\n        for (name in allOptions) {\n            if (name !== targetType) {\n                finalOpts[name] = allOptions[name];\n            }\n        }\n\n        //merge in the per type settings for the targetType\n        if (targetType in allOptions) {\n            for (name in allOptions[targetType]) {\n                finalOpts[name] = allOptions[targetType][name];\n            }\n        }\n        return finalOpts;\n    }\n\n    function js_beautify(js_source_text, options) {\n\n        var acorn = {};\n        (function(exports) {\n            /* jshint curly: false */\n            // This section of code is taken from acorn.\n            //\n            // Acorn was written by Marijn Haverbeke and released under an MIT\n            // license. The Unicode regexps (for identifiers and whitespace) were\n            // taken from [Esprima](http://esprima.org) by Ariya Hidayat.\n            //\n            // Git repositories for Acorn are available at\n            //\n            //     http://marijnhaverbeke.nl/git/acorn\n            //     https://github.com/marijnh/acorn.git\n\n            // ## Character categories\n\n            // Big ugly regular expressions that match characters in the\n            // whitespace, identifier, and identifier-start categories. These\n            // are only applied when a character is found to actually have a\n            // code point above 128.\n\n            var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/; // jshint ignore:line\n            var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n            var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n            var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n            var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n\n            // Whether a single character denotes a newline.\n\n            exports.newline = /[\\n\\r\\u2028\\u2029]/;\n\n            // Matches a whole line break (where CRLF is considered a single\n            // line break). Used to count lines.\n\n            // in javascript, these two differ\n            // in python they are the same, different methods are called on them\n            exports.lineBreak = new RegExp('\\r\\n|' + exports.newline.source);\n            exports.allLineBreaks = new RegExp(exports.lineBreak.source, 'g');\n\n\n            // Test whether a given character code starts an identifier.\n\n            exports.isIdentifierStart = function(code) {\n                // permit $ (36) and @ (64). @ is used in ES7 decorators.\n                if (code < 65) return code === 36 || code === 64;\n                // 65 through 91 are uppercase letters.\n                if (code < 91) return true;\n                // permit _ (95).\n                if (code < 97) return code === 95;\n                // 97 through 123 are lowercase letters.\n                if (code < 123) return true;\n                return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n            };\n\n            // Test whether a given character is part of an identifier.\n\n            exports.isIdentifierChar = function(code) {\n                if (code < 48) return code === 36;\n                if (code < 58) return true;\n                if (code < 65) return false;\n                if (code < 91) return true;\n                if (code < 97) return code === 95;\n                if (code < 123) return true;\n                return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n            };\n        })(acorn);\n        /* jshint curly: true */\n\n        function in_array(what, arr) {\n            for (var i = 0; i < arr.length; i += 1) {\n                if (arr[i] === what) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        function trim(s) {\n            return s.replace(/^\\s+|\\s+$/g, '');\n        }\n\n        function ltrim(s) {\n            return s.replace(/^\\s+/g, '');\n        }\n\n        // function rtrim(s) {\n        //     return s.replace(/\\s+$/g, '');\n        // }\n\n        function sanitizeOperatorPosition(opPosition) {\n            opPosition = opPosition || OPERATOR_POSITION.before_newline;\n\n            var validPositionValues = Object.values(OPERATOR_POSITION);\n\n            if (!in_array(opPosition, validPositionValues)) {\n                throw new Error(\"Invalid Option Value: The option 'operator_position' must be one of the following values\\n\" +\n                    validPositionValues +\n                    \"\\nYou passed in: '\" + opPosition + \"'\");\n            }\n\n            return opPosition;\n        }\n\n        var OPERATOR_POSITION = {\n            before_newline: 'before-newline',\n            after_newline: 'after-newline',\n            preserve_newline: 'preserve-newline',\n        };\n\n        var OPERATOR_POSITION_BEFORE_OR_PRESERVE = [OPERATOR_POSITION.before_newline, OPERATOR_POSITION.preserve_newline];\n\n        var MODE = {\n            BlockStatement: 'BlockStatement', // 'BLOCK'\n            Statement: 'Statement', // 'STATEMENT'\n            ObjectLiteral: 'ObjectLiteral', // 'OBJECT',\n            ArrayLiteral: 'ArrayLiteral', //'[EXPRESSION]',\n            ForInitializer: 'ForInitializer', //'(FOR-EXPRESSION)',\n            Conditional: 'Conditional', //'(COND-EXPRESSION)',\n            Expression: 'Expression' //'(EXPRESSION)'\n        };\n\n        function Beautifier(js_source_text, options) {\n            \"use strict\";\n            var output;\n            var tokens = [],\n                token_pos;\n            var Tokenizer;\n            var current_token;\n            var last_type, last_last_text, indent_string;\n            var flags, previous_flags, flag_store;\n            var prefix;\n\n            var handlers, opt;\n            var baseIndentString = '';\n\n            handlers = {\n                'TK_START_EXPR': handle_start_expr,\n                'TK_END_EXPR': handle_end_expr,\n                'TK_START_BLOCK': handle_start_block,\n                'TK_END_BLOCK': handle_end_block,\n                'TK_WORD': handle_word,\n                'TK_RESERVED': handle_word,\n                'TK_SEMICOLON': handle_semicolon,\n                'TK_STRING': handle_string,\n                'TK_EQUALS': handle_equals,\n                'TK_OPERATOR': handle_operator,\n                'TK_COMMA': handle_comma,\n                'TK_BLOCK_COMMENT': handle_block_comment,\n                'TK_COMMENT': handle_comment,\n                'TK_DOT': handle_dot,\n                'TK_UNKNOWN': handle_unknown,\n                'TK_EOF': handle_eof\n            };\n\n            function create_flags(flags_base, mode) {\n                var next_indent_level = 0;\n                if (flags_base) {\n                    next_indent_level = flags_base.indentation_level;\n                    if (!output.just_added_newline() &&\n                        flags_base.line_indent_level > next_indent_level) {\n                        next_indent_level = flags_base.line_indent_level;\n                    }\n                }\n\n                var next_flags = {\n                    mode: mode,\n                    parent: flags_base,\n                    last_text: flags_base ? flags_base.last_text : '', // last token text\n                    last_word: flags_base ? flags_base.last_word : '', // last 'TK_WORD' passed\n                    declaration_statement: false,\n                    declaration_assignment: false,\n                    multiline_frame: false,\n                    inline_frame: false,\n                    if_block: false,\n                    else_block: false,\n                    do_block: false,\n                    do_while: false,\n                    import_block: false,\n                    in_case_statement: false, // switch(..){ INSIDE HERE }\n                    in_case: false, // we're on the exact line with \"case 0:\"\n                    case_body: false, // the indented case-action block\n                    indentation_level: next_indent_level,\n                    line_indent_level: flags_base ? flags_base.line_indent_level : next_indent_level,\n                    start_line_index: output.get_line_number(),\n                    ternary_depth: 0\n                };\n                return next_flags;\n            }\n\n            // Some interpreters have unexpected results with foo = baz || bar;\n            options = options ? options : {};\n\n            // Allow the setting of language/file-type specific options\n            // with inheritance of overall settings\n            options = mergeOpts(options, 'js');\n\n            opt = {};\n\n            // compatibility, re\n            if (options.brace_style === \"expand-strict\") { //graceful handling of deprecated option\n                options.brace_style = \"expand\";\n            } else if (options.brace_style === \"collapse-preserve-inline\") { //graceful handling of deprecated option\n                options.brace_style = \"collapse,preserve-inline\";\n            } else if (options.braces_on_own_line !== undefined) { //graceful handling of deprecated option\n                options.brace_style = options.braces_on_own_line ? \"expand\" : \"collapse\";\n            } else if (!options.brace_style) //Nothing exists to set it\n            {\n                options.brace_style = \"collapse\";\n            }\n\n\n            var brace_style_split = options.brace_style.split(/[^a-zA-Z0-9_\\-]+/);\n            opt.brace_style = brace_style_split[0];\n            opt.brace_preserve_inline = brace_style_split[1] ? brace_style_split[1] : false;\n\n            opt.indent_size = options.indent_size ? parseInt(options.indent_size, 10) : 4;\n            opt.indent_char = options.indent_char ? options.indent_char : ' ';\n            opt.eol = options.eol ? options.eol : 'auto';\n            opt.preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines;\n            opt.break_chained_methods = (options.break_chained_methods === undefined) ? false : options.break_chained_methods;\n            opt.max_preserve_newlines = (options.max_preserve_newlines === undefined) ? 0 : parseInt(options.max_preserve_newlines, 10);\n            opt.space_in_paren = (options.space_in_paren === undefined) ? false : options.space_in_paren;\n            opt.space_in_empty_paren = (options.space_in_empty_paren === undefined) ? false : options.space_in_empty_paren;\n            opt.jslint_happy = (options.jslint_happy === undefined) ? false : options.jslint_happy;\n            opt.space_after_anon_function = (options.space_after_anon_function === undefined) ? false : options.space_after_anon_function;\n            opt.keep_array_indentation = (options.keep_array_indentation === undefined) ? false : options.keep_array_indentation;\n            opt.space_before_conditional = (options.space_before_conditional === undefined) ? true : options.space_before_conditional;\n            opt.unescape_strings = (options.unescape_strings === undefined) ? false : options.unescape_strings;\n            opt.wrap_line_length = (options.wrap_line_length === undefined) ? 0 : parseInt(options.wrap_line_length, 10);\n            opt.e4x = (options.e4x === undefined) ? false : options.e4x;\n            opt.end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline;\n            opt.comma_first = (options.comma_first === undefined) ? false : options.comma_first;\n            opt.operator_position = sanitizeOperatorPosition(options.operator_position);\n\n            // For testing of beautify ignore:start directive\n            opt.test_output_raw = (options.test_output_raw === undefined) ? false : options.test_output_raw;\n\n            // force opt.space_after_anon_function to true if opt.jslint_happy\n            if (opt.jslint_happy) {\n                opt.space_after_anon_function = true;\n            }\n\n            if (options.indent_with_tabs) {\n                opt.indent_char = '\\t';\n                opt.indent_size = 1;\n            }\n\n            if (opt.eol === 'auto') {\n                opt.eol = '\\n';\n                if (js_source_text && acorn.lineBreak.test(js_source_text || '')) {\n                    opt.eol = js_source_text.match(acorn.lineBreak)[0];\n                }\n            }\n\n            opt.eol = opt.eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n');\n\n            //----------------------------------\n            indent_string = '';\n            while (opt.indent_size > 0) {\n                indent_string += opt.indent_char;\n                opt.indent_size -= 1;\n            }\n\n            var preindent_index = 0;\n            if (js_source_text && js_source_text.length) {\n                while ((js_source_text.charAt(preindent_index) === ' ' ||\n                        js_source_text.charAt(preindent_index) === '\\t')) {\n                    baseIndentString += js_source_text.charAt(preindent_index);\n                    preindent_index += 1;\n                }\n                js_source_text = js_source_text.substring(preindent_index);\n            }\n\n            last_type = 'TK_START_BLOCK'; // last token type\n            last_last_text = ''; // pre-last token text\n            output = new Output(indent_string, baseIndentString);\n\n            // If testing the ignore directive, start with output disable set to true\n            output.raw = opt.test_output_raw;\n\n\n            // Stack of parsing/formatting states, including MODE.\n            // We tokenize, parse, and output in an almost purely a forward-only stream of token input\n            // and formatted output.  This makes the beautifier less accurate than full parsers\n            // but also far more tolerant of syntax errors.\n            //\n            // For example, the default mode is MODE.BlockStatement. If we see a '{' we push a new frame of type\n            // MODE.BlockStatement on the the stack, even though it could be object literal.  If we later\n            // encounter a \":\", we'll switch to to MODE.ObjectLiteral.  If we then see a \";\",\n            // most full parsers would die, but the beautifier gracefully falls back to\n            // MODE.BlockStatement and continues on.\n            flag_store = [];\n            set_mode(MODE.BlockStatement);\n\n            this.beautify = function() {\n\n                /*jshint onevar:true */\n                var sweet_code;\n                Tokenizer = new tokenizer(js_source_text, opt, indent_string);\n                tokens = Tokenizer.tokenize();\n                token_pos = 0;\n\n                current_token = get_token();\n                while (current_token) {\n                    handlers[current_token.type]();\n\n                    last_last_text = flags.last_text;\n                    last_type = current_token.type;\n                    flags.last_text = current_token.text;\n\n                    token_pos += 1;\n                    current_token = get_token();\n                }\n\n                sweet_code = output.get_code();\n                if (opt.end_with_newline) {\n                    sweet_code += '\\n';\n                }\n\n                if (opt.eol !== '\\n') {\n                    sweet_code = sweet_code.replace(/[\\n]/g, opt.eol);\n                }\n\n                return sweet_code;\n            };\n\n            function handle_whitespace_and_comments(local_token, preserve_statement_flags) {\n                var newlines = local_token.newlines;\n                var keep_whitespace = opt.keep_array_indentation && is_array(flags.mode);\n                var temp_token = current_token;\n\n                for (var h = 0; h < local_token.comments_before.length; h++) {\n                    // The cleanest handling of inline comments is to treat them as though they aren't there.\n                    // Just continue formatting and the behavior should be logical.\n                    // Also ignore unknown tokens.  Again, this should result in better behavior.\n                    current_token = local_token.comments_before[h];\n                    handle_whitespace_and_comments(current_token, preserve_statement_flags);\n                    handlers[current_token.type](preserve_statement_flags);\n                }\n                current_token = temp_token;\n\n                if (keep_whitespace) {\n                    for (var i = 0; i < newlines; i += 1) {\n                        print_newline(i > 0, preserve_statement_flags);\n                    }\n                } else {\n                    if (opt.max_preserve_newlines && newlines > opt.max_preserve_newlines) {\n                        newlines = opt.max_preserve_newlines;\n                    }\n\n                    if (opt.preserve_newlines) {\n                        if (local_token.newlines > 1) {\n                            print_newline(false, preserve_statement_flags);\n                            for (var j = 1; j < newlines; j += 1) {\n                                print_newline(true, preserve_statement_flags);\n                            }\n                        }\n                    }\n                }\n\n            }\n\n            // we could use just string.split, but\n            // IE doesn't like returning empty strings\n            function split_linebreaks(s) {\n                //return s.split(/\\x0d\\x0a|\\x0a/);\n\n                s = s.replace(acorn.allLineBreaks, '\\n');\n                var out = [],\n                    idx = s.indexOf(\"\\n\");\n                while (idx !== -1) {\n                    out.push(s.substring(0, idx));\n                    s = s.substring(idx + 1);\n                    idx = s.indexOf(\"\\n\");\n                }\n                if (s.length) {\n                    out.push(s);\n                }\n                return out;\n            }\n\n            var newline_restricted_tokens = ['break', 'continue', 'return', 'throw'];\n\n            function allow_wrap_or_preserved_newline(force_linewrap) {\n                force_linewrap = (force_linewrap === undefined) ? false : force_linewrap;\n\n                // Never wrap the first token on a line\n                if (output.just_added_newline()) {\n                    return;\n                }\n\n                var shouldPreserveOrForce = (opt.preserve_newlines && current_token.wanted_newline) || force_linewrap;\n                var operatorLogicApplies = in_array(flags.last_text, Tokenizer.positionable_operators) || in_array(current_token.text, Tokenizer.positionable_operators);\n\n                if (operatorLogicApplies) {\n                    var shouldPrintOperatorNewline = (\n                            in_array(flags.last_text, Tokenizer.positionable_operators) &&\n                            in_array(opt.operator_position, OPERATOR_POSITION_BEFORE_OR_PRESERVE)\n                        ) ||\n                        in_array(current_token.text, Tokenizer.positionable_operators);\n                    shouldPreserveOrForce = shouldPreserveOrForce && shouldPrintOperatorNewline;\n                }\n\n                if (shouldPreserveOrForce) {\n                    print_newline(false, true);\n                } else if (opt.wrap_line_length) {\n                    if (last_type === 'TK_RESERVED' && in_array(flags.last_text, newline_restricted_tokens)) {\n                        // These tokens should never have a newline inserted\n                        // between them and the following expression.\n                        return;\n                    }\n                    var proposed_line_length = output.current_line.get_character_count() + current_token.text.length +\n                        (output.space_before_token ? 1 : 0);\n                    if (proposed_line_length >= opt.wrap_line_length) {\n                        print_newline(false, true);\n                    }\n                }\n            }\n\n            function print_newline(force_newline, preserve_statement_flags) {\n                if (!preserve_statement_flags) {\n                    if (flags.last_text !== ';' && flags.last_text !== ',' && flags.last_text !== '=' && last_type !== 'TK_OPERATOR') {\n                        var next_token = get_token(1);\n                        while (flags.mode === MODE.Statement &&\n                            !(flags.if_block && next_token && next_token.type === 'TK_RESERVED' && next_token.text === 'else') &&\n                            !flags.do_block) {\n                            restore_mode();\n                        }\n                    }\n                }\n\n                if (output.add_new_line(force_newline)) {\n                    flags.multiline_frame = true;\n                }\n            }\n\n            function print_token_line_indentation() {\n                if (output.just_added_newline()) {\n                    if (opt.keep_array_indentation && is_array(flags.mode) && current_token.wanted_newline) {\n                        output.current_line.push(current_token.whitespace_before);\n                        output.space_before_token = false;\n                    } else if (output.set_indent(flags.indentation_level)) {\n                        flags.line_indent_level = flags.indentation_level;\n                    }\n                }\n            }\n\n            function print_token(printable_token) {\n                if (output.raw) {\n                    output.add_raw_token(current_token);\n                    return;\n                }\n\n                if (opt.comma_first && last_type === 'TK_COMMA' &&\n                    output.just_added_newline()) {\n                    if (output.previous_line.last() === ',') {\n                        var popped = output.previous_line.pop();\n                        // if the comma was already at the start of the line,\n                        // pull back onto that line and reprint the indentation\n                        if (output.previous_line.is_empty()) {\n                            output.previous_line.push(popped);\n                            output.trim(true);\n                            output.current_line.pop();\n                            output.trim();\n                        }\n\n                        // add the comma in front of the next token\n                        print_token_line_indentation();\n                        output.add_token(',');\n                        output.space_before_token = true;\n                    }\n                }\n\n                printable_token = printable_token || current_token.text;\n                print_token_line_indentation();\n                output.add_token(printable_token);\n            }\n\n            function indent() {\n                flags.indentation_level += 1;\n            }\n\n            function deindent() {\n                if (flags.indentation_level > 0 &&\n                    ((!flags.parent) || flags.indentation_level > flags.parent.indentation_level)) {\n                    flags.indentation_level -= 1;\n\n                }\n            }\n\n            function set_mode(mode) {\n                if (flags) {\n                    flag_store.push(flags);\n                    previous_flags = flags;\n                } else {\n                    previous_flags = create_flags(null, mode);\n                }\n\n                flags = create_flags(previous_flags, mode);\n            }\n\n            function is_array(mode) {\n                return mode === MODE.ArrayLiteral;\n            }\n\n            function is_expression(mode) {\n                return in_array(mode, [MODE.Expression, MODE.ForInitializer, MODE.Conditional]);\n            }\n\n            function restore_mode() {\n                if (flag_store.length > 0) {\n                    previous_flags = flags;\n                    flags = flag_store.pop();\n                    if (previous_flags.mode === MODE.Statement) {\n                        output.remove_redundant_indentation(previous_flags);\n                    }\n                }\n            }\n\n            function start_of_object_property() {\n                return flags.parent.mode === MODE.ObjectLiteral && flags.mode === MODE.Statement && (\n                    (flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set'])));\n            }\n\n            function start_of_statement() {\n                if (\n                    (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const']) && current_token.type === 'TK_WORD') ||\n                    (last_type === 'TK_RESERVED' && flags.last_text === 'do') ||\n                    (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['return', 'throw']) && !current_token.wanted_newline) ||\n                    (last_type === 'TK_RESERVED' && flags.last_text === 'else' &&\n                        !(current_token.type === 'TK_RESERVED' && current_token.text === 'if' && !current_token.comments_before.length)) ||\n                    (last_type === 'TK_END_EXPR' && (previous_flags.mode === MODE.ForInitializer || previous_flags.mode === MODE.Conditional)) ||\n                    (last_type === 'TK_WORD' && flags.mode === MODE.BlockStatement &&\n                        !flags.in_case &&\n                        !(current_token.text === '--' || current_token.text === '++') &&\n                        last_last_text !== 'function' &&\n                        current_token.type !== 'TK_WORD' && current_token.type !== 'TK_RESERVED') ||\n                    (flags.mode === MODE.ObjectLiteral && (\n                        (flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set']))))\n                ) {\n\n                    set_mode(MODE.Statement);\n                    indent();\n\n                    handle_whitespace_and_comments(current_token, true);\n\n                    // Issue #276:\n                    // If starting a new statement with [if, for, while, do], push to a new line.\n                    // if (a) if (b) if(c) d(); else e(); else f();\n                    if (!start_of_object_property()) {\n                        allow_wrap_or_preserved_newline(\n                            current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['do', 'for', 'if', 'while']));\n                    }\n\n                    return true;\n                }\n                return false;\n            }\n\n            function all_lines_start_with(lines, c) {\n                for (var i = 0; i < lines.length; i++) {\n                    var line = trim(lines[i]);\n                    if (line.charAt(0) !== c) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n\n            function each_line_matches_indent(lines, indent) {\n                var i = 0,\n                    len = lines.length,\n                    line;\n                for (; i < len; i++) {\n                    line = lines[i];\n                    // allow empty lines to pass through\n                    if (line && line.indexOf(indent) !== 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n\n            function is_special_word(word) {\n                return in_array(word, ['case', 'return', 'do', 'if', 'throw', 'else']);\n            }\n\n            function get_token(offset) {\n                var index = token_pos + (offset || 0);\n                return (index < 0 || index >= tokens.length) ? null : tokens[index];\n            }\n\n            function handle_start_expr() {\n                // The conditional starts the statement if appropriate.\n                if (!start_of_statement()) {\n                    handle_whitespace_and_comments(current_token);\n                }\n\n                var next_mode = MODE.Expression;\n                if (current_token.text === '[') {\n\n                    if (last_type === 'TK_WORD' || flags.last_text === ')') {\n                        // this is array index specifier, break immediately\n                        // a[x], fn()[x]\n                        if (last_type === 'TK_RESERVED' && in_array(flags.last_text, Tokenizer.line_starters)) {\n                            output.space_before_token = true;\n                        }\n                        set_mode(next_mode);\n                        print_token();\n                        indent();\n                        if (opt.space_in_paren) {\n                            output.space_before_token = true;\n                        }\n                        return;\n                    }\n\n                    next_mode = MODE.ArrayLiteral;\n                    if (is_array(flags.mode)) {\n                        if (flags.last_text === '[' ||\n                            (flags.last_text === ',' && (last_last_text === ']' || last_last_text === '}'))) {\n                            // ], [ goes to new line\n                            // }, [ goes to new line\n                            if (!opt.keep_array_indentation) {\n                                print_newline();\n                            }\n                        }\n                    }\n\n                } else {\n                    if (last_type === 'TK_RESERVED' && flags.last_text === 'for') {\n                        next_mode = MODE.ForInitializer;\n                    } else if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['if', 'while'])) {\n                        next_mode = MODE.Conditional;\n                    } else {\n                        // next_mode = MODE.Expression;\n                    }\n                }\n\n                if (flags.last_text === ';' || last_type === 'TK_START_BLOCK') {\n                    print_newline();\n                } else if (last_type === 'TK_END_EXPR' || last_type === 'TK_START_EXPR' || last_type === 'TK_END_BLOCK' || flags.last_text === '.') {\n                    // TODO: Consider whether forcing this is required.  Review failing tests when removed.\n                    allow_wrap_or_preserved_newline(current_token.wanted_newline);\n                    // do nothing on (( and )( and ][ and ]( and .(\n                } else if (!(last_type === 'TK_RESERVED' && current_token.text === '(') && last_type !== 'TK_WORD' && last_type !== 'TK_OPERATOR') {\n                    output.space_before_token = true;\n                } else if ((last_type === 'TK_RESERVED' && (flags.last_word === 'function' || flags.last_word === 'typeof')) ||\n                    (flags.last_text === '*' &&\n                        (in_array(last_last_text, ['function', 'yield']) ||\n                            (flags.mode === MODE.ObjectLiteral && in_array(last_last_text, ['{', ',']))))) {\n                    // function() vs function ()\n                    // yield*() vs yield* ()\n                    // function*() vs function* ()\n                    if (opt.space_after_anon_function) {\n                        output.space_before_token = true;\n                    }\n                } else if (last_type === 'TK_RESERVED' && (in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === 'catch')) {\n                    if (opt.space_before_conditional) {\n                        output.space_before_token = true;\n                    }\n                }\n\n                // Should be a space between await and an IIFE\n                if (current_token.text === '(' && last_type === 'TK_RESERVED' && flags.last_word === 'await') {\n                    output.space_before_token = true;\n                }\n\n                // Support of this kind of newline preservation.\n                // a = (b &&\n                //     (c || d));\n                if (current_token.text === '(') {\n                    if (last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n                        if (!start_of_object_property()) {\n                            allow_wrap_or_preserved_newline();\n                        }\n                    }\n                }\n\n                // Support preserving wrapped arrow function expressions\n                // a.b('c',\n                //     () => d.e\n                // )\n                if (current_token.text === '(' && last_type !== 'TK_WORD' && last_type !== 'TK_RESERVED') {\n                    allow_wrap_or_preserved_newline();\n                }\n\n                set_mode(next_mode);\n                print_token();\n                if (opt.space_in_paren) {\n                    output.space_before_token = true;\n                }\n\n                // In all cases, if we newline while inside an expression it should be indented.\n                indent();\n            }\n\n            function handle_end_expr() {\n                // statements inside expressions are not valid syntax, but...\n                // statements must all be closed when their container closes\n                while (flags.mode === MODE.Statement) {\n                    restore_mode();\n                }\n\n                handle_whitespace_and_comments(current_token);\n\n                if (flags.multiline_frame) {\n                    allow_wrap_or_preserved_newline(current_token.text === ']' && is_array(flags.mode) && !opt.keep_array_indentation);\n                }\n\n                if (opt.space_in_paren) {\n                    if (last_type === 'TK_START_EXPR' && !opt.space_in_empty_paren) {\n                        // () [] no inner space in empty parens like these, ever, ref #320\n                        output.trim();\n                        output.space_before_token = false;\n                    } else {\n                        output.space_before_token = true;\n                    }\n                }\n                if (current_token.text === ']' && opt.keep_array_indentation) {\n                    print_token();\n                    restore_mode();\n                } else {\n                    restore_mode();\n                    print_token();\n                }\n                output.remove_redundant_indentation(previous_flags);\n\n                // do {} while () // no statement required after\n                if (flags.do_while && previous_flags.mode === MODE.Conditional) {\n                    previous_flags.mode = MODE.Expression;\n                    flags.do_block = false;\n                    flags.do_while = false;\n\n                }\n            }\n\n            function handle_start_block() {\n                handle_whitespace_and_comments(current_token);\n\n                // Check if this is should be treated as a ObjectLiteral\n                var next_token = get_token(1);\n                var second_token = get_token(2);\n                if (second_token && (\n                        (in_array(second_token.text, [':', ',']) && in_array(next_token.type, ['TK_STRING', 'TK_WORD', 'TK_RESERVED'])) ||\n                        (in_array(next_token.text, ['get', 'set', '...']) && in_array(second_token.type, ['TK_WORD', 'TK_RESERVED']))\n                    )) {\n                    // We don't support TypeScript,but we didn't break it for a very long time.\n                    // We'll try to keep not breaking it.\n                    if (!in_array(last_last_text, ['class', 'interface'])) {\n                        set_mode(MODE.ObjectLiteral);\n                    } else {\n                        set_mode(MODE.BlockStatement);\n                    }\n                } else if (last_type === 'TK_OPERATOR' && flags.last_text === '=>') {\n                    // arrow function: (param1, paramN) => { statements }\n                    set_mode(MODE.BlockStatement);\n                } else if (in_array(last_type, ['TK_EQUALS', 'TK_START_EXPR', 'TK_COMMA', 'TK_OPERATOR']) ||\n                    (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['return', 'throw', 'import', 'default']))\n                ) {\n                    // Detecting shorthand function syntax is difficult by scanning forward,\n                    //     so check the surrounding context.\n                    // If the block is being returned, imported, export default, passed as arg,\n                    //     assigned with = or assigned in a nested object, treat as an ObjectLiteral.\n                    set_mode(MODE.ObjectLiteral);\n                } else {\n                    set_mode(MODE.BlockStatement);\n                }\n\n                var empty_braces = !next_token.comments_before.length && next_token.text === '}';\n                var empty_anonymous_function = empty_braces && flags.last_word === 'function' &&\n                    last_type === 'TK_END_EXPR';\n\n                if (opt.brace_preserve_inline) // check for inline, set inline_frame if so\n                {\n                    // search forward for a newline wanted inside this block\n                    var index = 0;\n                    var check_token = null;\n                    flags.inline_frame = true;\n                    do {\n                        index += 1;\n                        check_token = get_token(index);\n                        if (check_token.wanted_newline) {\n                            flags.inline_frame = false;\n                            break;\n                        }\n                    } while (check_token.type !== 'TK_EOF' &&\n                        !(check_token.type === 'TK_END_BLOCK' && check_token.opened === current_token));\n                }\n\n                if ((opt.brace_style === \"expand\" ||\n                        (opt.brace_style === \"none\" && current_token.wanted_newline)) &&\n                    !flags.inline_frame) {\n                    if (last_type !== 'TK_OPERATOR' &&\n                        (empty_anonymous_function ||\n                            last_type === 'TK_EQUALS' ||\n                            (last_type === 'TK_RESERVED' && is_special_word(flags.last_text) && flags.last_text !== 'else'))) {\n                        output.space_before_token = true;\n                    } else {\n                        print_newline(false, true);\n                    }\n                } else { // collapse || inline_frame\n                    if (is_array(previous_flags.mode) && (last_type === 'TK_START_EXPR' || last_type === 'TK_COMMA')) {\n                        if (last_type === 'TK_COMMA' || opt.space_in_paren) {\n                            output.space_before_token = true;\n                        }\n\n                        if (last_type === 'TK_COMMA' || (last_type === 'TK_START_EXPR' && flags.inline_frame)) {\n                            allow_wrap_or_preserved_newline();\n                            previous_flags.multiline_frame = previous_flags.multiline_frame || flags.multiline_frame;\n                            flags.multiline_frame = false;\n                        }\n                    }\n                    if (last_type !== 'TK_OPERATOR' && last_type !== 'TK_START_EXPR') {\n                        if (last_type === 'TK_START_BLOCK' && !flags.inline_frame) {\n                            print_newline();\n                        } else {\n                            output.space_before_token = true;\n                        }\n                    }\n                }\n                print_token();\n                indent();\n            }\n\n            function handle_end_block() {\n                // statements must all be closed when their container closes\n                handle_whitespace_and_comments(current_token);\n\n                while (flags.mode === MODE.Statement) {\n                    restore_mode();\n                }\n\n                var empty_braces = last_type === 'TK_START_BLOCK';\n\n                if (flags.inline_frame && !empty_braces) { // try inline_frame (only set if opt.braces-preserve-inline) first\n                    output.space_before_token = true;\n                } else if (opt.brace_style === \"expand\") {\n                    if (!empty_braces) {\n                        print_newline();\n                    }\n                } else {\n                    // skip {}\n                    if (!empty_braces) {\n                        if (is_array(flags.mode) && opt.keep_array_indentation) {\n                            // we REALLY need a newline here, but newliner would skip that\n                            opt.keep_array_indentation = false;\n                            print_newline();\n                            opt.keep_array_indentation = true;\n\n                        } else {\n                            print_newline();\n                        }\n                    }\n                }\n                restore_mode();\n                print_token();\n            }\n\n            function handle_word() {\n                if (current_token.type === 'TK_RESERVED') {\n                    if (in_array(current_token.text, ['set', 'get']) && flags.mode !== MODE.ObjectLiteral) {\n                        current_token.type = 'TK_WORD';\n                    } else if (in_array(current_token.text, ['as', 'from']) && !flags.import_block) {\n                        current_token.type = 'TK_WORD';\n                    } else if (flags.mode === MODE.ObjectLiteral) {\n                        var next_token = get_token(1);\n                        if (next_token.text === ':') {\n                            current_token.type = 'TK_WORD';\n                        }\n                    }\n                }\n\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                    if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const']) && current_token.type === 'TK_WORD') {\n                        flags.declaration_statement = true;\n                    }\n                } else if (current_token.wanted_newline && !is_expression(flags.mode) &&\n                    (last_type !== 'TK_OPERATOR' || (flags.last_text === '--' || flags.last_text === '++')) &&\n                    last_type !== 'TK_EQUALS' &&\n                    (opt.preserve_newlines || !(last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const', 'set', 'get'])))) {\n                    handle_whitespace_and_comments(current_token);\n                    print_newline();\n                } else {\n                    handle_whitespace_and_comments(current_token);\n                }\n\n                if (flags.do_block && !flags.do_while) {\n                    if (current_token.type === 'TK_RESERVED' && current_token.text === 'while') {\n                        // do {} ## while ()\n                        output.space_before_token = true;\n                        print_token();\n                        output.space_before_token = true;\n                        flags.do_while = true;\n                        return;\n                    } else {\n                        // do {} should always have while as the next word.\n                        // if we don't see the expected while, recover\n                        print_newline();\n                        flags.do_block = false;\n                    }\n                }\n\n                // if may be followed by else, or not\n                // Bare/inline ifs are tricky\n                // Need to unwind the modes correctly: if (a) if (b) c(); else d(); else e();\n                if (flags.if_block) {\n                    if (!flags.else_block && (current_token.type === 'TK_RESERVED' && current_token.text === 'else')) {\n                        flags.else_block = true;\n                    } else {\n                        while (flags.mode === MODE.Statement) {\n                            restore_mode();\n                        }\n                        flags.if_block = false;\n                        flags.else_block = false;\n                    }\n                }\n\n                if (current_token.type === 'TK_RESERVED' && (current_token.text === 'case' || (current_token.text === 'default' && flags.in_case_statement))) {\n                    print_newline();\n                    if (flags.case_body || opt.jslint_happy) {\n                        // switch cases following one another\n                        deindent();\n                        flags.case_body = false;\n                    }\n                    print_token();\n                    flags.in_case = true;\n                    flags.in_case_statement = true;\n                    return;\n                }\n\n                if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n                    if (!start_of_object_property()) {\n                        allow_wrap_or_preserved_newline();\n                    }\n                }\n\n                if (current_token.type === 'TK_RESERVED' && current_token.text === 'function') {\n                    if (in_array(flags.last_text, ['}', ';']) ||\n                        (output.just_added_newline() && !(in_array(flags.last_text, ['(', '[', '{', ':', '=', ',']) || last_type === 'TK_OPERATOR'))) {\n                        // make sure there is a nice clean space of at least one blank line\n                        // before a new function definition\n                        if (!output.just_added_blankline() && !current_token.comments_before.length) {\n                            print_newline();\n                            print_newline(true);\n                        }\n                    }\n                    if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\n                        if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set', 'new', 'return', 'export', 'async'])) {\n                            output.space_before_token = true;\n                        } else if (last_type === 'TK_RESERVED' && flags.last_text === 'default' && last_last_text === 'export') {\n                            output.space_before_token = true;\n                        } else {\n                            print_newline();\n                        }\n                    } else if (last_type === 'TK_OPERATOR' || flags.last_text === '=') {\n                        // foo = function\n                        output.space_before_token = true;\n                    } else if (!flags.multiline_frame && (is_expression(flags.mode) || is_array(flags.mode))) {\n                        // (function\n                    } else {\n                        print_newline();\n                    }\n\n                    print_token();\n                    flags.last_word = current_token.text;\n                    return;\n                }\n\n                prefix = 'NONE';\n\n                if (last_type === 'TK_END_BLOCK') {\n\n                    if (previous_flags.inline_frame) {\n                        prefix = 'SPACE';\n                    } else if (!(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally', 'from']))) {\n                        prefix = 'NEWLINE';\n                    } else {\n                        if (opt.brace_style === \"expand\" ||\n                            opt.brace_style === \"end-expand\" ||\n                            (opt.brace_style === \"none\" && current_token.wanted_newline)) {\n                            prefix = 'NEWLINE';\n                        } else {\n                            prefix = 'SPACE';\n                            output.space_before_token = true;\n                        }\n                    }\n                } else if (last_type === 'TK_SEMICOLON' && flags.mode === MODE.BlockStatement) {\n                    // TODO: Should this be for STATEMENT as well?\n                    prefix = 'NEWLINE';\n                } else if (last_type === 'TK_SEMICOLON' && is_expression(flags.mode)) {\n                    prefix = 'SPACE';\n                } else if (last_type === 'TK_STRING') {\n                    prefix = 'NEWLINE';\n                } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD' ||\n                    (flags.last_text === '*' &&\n                        (in_array(last_last_text, ['function', 'yield']) ||\n                            (flags.mode === MODE.ObjectLiteral && in_array(last_last_text, ['{', ',']))))) {\n                    prefix = 'SPACE';\n                } else if (last_type === 'TK_START_BLOCK') {\n                    if (flags.inline_frame) {\n                        prefix = 'SPACE';\n                    } else {\n                        prefix = 'NEWLINE';\n                    }\n                } else if (last_type === 'TK_END_EXPR') {\n                    output.space_before_token = true;\n                    prefix = 'NEWLINE';\n                }\n\n                if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\n                    if (flags.inline_frame || flags.last_text === 'else' || flags.last_text === 'export') {\n                        prefix = 'SPACE';\n                    } else {\n                        prefix = 'NEWLINE';\n                    }\n\n                }\n\n                if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally'])) {\n                    if ((!(last_type === 'TK_END_BLOCK' && previous_flags.mode === MODE.BlockStatement) ||\n                            opt.brace_style === \"expand\" ||\n                            opt.brace_style === \"end-expand\" ||\n                            (opt.brace_style === \"none\" && current_token.wanted_newline)) &&\n                        !flags.inline_frame) {\n                        print_newline();\n                    } else {\n                        output.trim(true);\n                        var line = output.current_line;\n                        // If we trimmed and there's something other than a close block before us\n                        // put a newline back in.  Handles '} // comment' scenario.\n                        if (line.last() !== '}') {\n                            print_newline();\n                        }\n                        output.space_before_token = true;\n                    }\n                } else if (prefix === 'NEWLINE') {\n                    if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n                        // no newline between 'return nnn'\n                        output.space_before_token = true;\n                    } else if (last_type !== 'TK_END_EXPR') {\n                        if ((last_type !== 'TK_START_EXPR' || !(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['var', 'let', 'const']))) && flags.last_text !== ':') {\n                            // no need to force newline on 'var': for (var x = 0...)\n                            if (current_token.type === 'TK_RESERVED' && current_token.text === 'if' && flags.last_text === 'else') {\n                                // no newline for } else if {\n                                output.space_before_token = true;\n                            } else {\n                                print_newline();\n                            }\n                        }\n                    } else if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\n                        print_newline();\n                    }\n                } else if (flags.multiline_frame && is_array(flags.mode) && flags.last_text === ',' && last_last_text === '}') {\n                    print_newline(); // }, in lists get a newline treatment\n                } else if (prefix === 'SPACE') {\n                    output.space_before_token = true;\n                }\n                print_token();\n                flags.last_word = current_token.text;\n\n                if (current_token.type === 'TK_RESERVED') {\n                    if (current_token.text === 'do') {\n                        flags.do_block = true;\n                    } else if (current_token.text === 'if') {\n                        flags.if_block = true;\n                    } else if (current_token.text === 'import') {\n                        flags.import_block = true;\n                    } else if (flags.import_block && current_token.type === 'TK_RESERVED' && current_token.text === 'from') {\n                        flags.import_block = false;\n                    }\n                }\n            }\n\n            function handle_semicolon() {\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                    // Semicolon can be the start (and end) of a statement\n                    output.space_before_token = false;\n                } else {\n                    handle_whitespace_and_comments(current_token);\n                }\n\n                var next_token = get_token(1);\n                while (flags.mode === MODE.Statement &&\n                    !(flags.if_block && next_token && next_token.type === 'TK_RESERVED' && next_token.text === 'else') &&\n                    !flags.do_block) {\n                    restore_mode();\n                }\n\n                // hacky but effective for the moment\n                if (flags.import_block) {\n                    flags.import_block = false;\n                }\n                print_token();\n            }\n\n            function handle_string() {\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                    // One difference - strings want at least a space before\n                    output.space_before_token = true;\n                } else {\n                    handle_whitespace_and_comments(current_token);\n                    if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD' || flags.inline_frame) {\n                        output.space_before_token = true;\n                    } else if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n                        if (!start_of_object_property()) {\n                            allow_wrap_or_preserved_newline();\n                        }\n                    } else {\n                        print_newline();\n                    }\n                }\n                print_token();\n            }\n\n            function handle_equals() {\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                } else {\n                    handle_whitespace_and_comments(current_token);\n                }\n\n                if (flags.declaration_statement) {\n                    // just got an '=' in a var-line, different formatting/line-breaking, etc will now be done\n                    flags.declaration_assignment = true;\n                }\n                output.space_before_token = true;\n                print_token();\n                output.space_before_token = true;\n            }\n\n            function handle_comma() {\n                handle_whitespace_and_comments(current_token, true);\n\n                print_token();\n                output.space_before_token = true;\n                if (flags.declaration_statement) {\n                    if (is_expression(flags.parent.mode)) {\n                        // do not break on comma, for(var a = 1, b = 2)\n                        flags.declaration_assignment = false;\n                    }\n\n                    if (flags.declaration_assignment) {\n                        flags.declaration_assignment = false;\n                        print_newline(false, true);\n                    } else if (opt.comma_first) {\n                        // for comma-first, we want to allow a newline before the comma\n                        // to turn into a newline after the comma, which we will fixup later\n                        allow_wrap_or_preserved_newline();\n                    }\n                } else if (flags.mode === MODE.ObjectLiteral ||\n                    (flags.mode === MODE.Statement && flags.parent.mode === MODE.ObjectLiteral)) {\n                    if (flags.mode === MODE.Statement) {\n                        restore_mode();\n                    }\n\n                    if (!flags.inline_frame) {\n                        print_newline();\n                    }\n                } else if (opt.comma_first) {\n                    // EXPR or DO_BLOCK\n                    // for comma-first, we want to allow a newline before the comma\n                    // to turn into a newline after the comma, which we will fixup later\n                    allow_wrap_or_preserved_newline();\n                }\n            }\n\n            function handle_operator() {\n                var isGeneratorAsterisk = current_token.text === '*' &&\n                    ((last_type === 'TK_RESERVED' && in_array(flags.last_text, ['function', 'yield'])) ||\n                        (in_array(last_type, ['TK_START_BLOCK', 'TK_COMMA', 'TK_END_BLOCK', 'TK_SEMICOLON']))\n                    );\n                var isUnary = in_array(current_token.text, ['-', '+']) && (\n                    in_array(last_type, ['TK_START_BLOCK', 'TK_START_EXPR', 'TK_EQUALS', 'TK_OPERATOR']) ||\n                    in_array(flags.last_text, Tokenizer.line_starters) ||\n                    flags.last_text === ','\n                );\n\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                } else {\n                    var preserve_statement_flags = !isGeneratorAsterisk;\n                    handle_whitespace_and_comments(current_token, preserve_statement_flags);\n                }\n\n                if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n                    // \"return\" had a special handling in TK_WORD. Now we need to return the favor\n                    output.space_before_token = true;\n                    print_token();\n                    return;\n                }\n\n                // hack for actionscript's import .*;\n                if (current_token.text === '*' && last_type === 'TK_DOT') {\n                    print_token();\n                    return;\n                }\n\n                if (current_token.text === '::') {\n                    // no spaces around exotic namespacing syntax operator\n                    print_token();\n                    return;\n                }\n\n                // Allow line wrapping between operators when operator_position is\n                //   set to before or preserve\n                if (last_type === 'TK_OPERATOR' && in_array(opt.operator_position, OPERATOR_POSITION_BEFORE_OR_PRESERVE)) {\n                    allow_wrap_or_preserved_newline();\n                }\n\n                if (current_token.text === ':' && flags.in_case) {\n                    flags.case_body = true;\n                    indent();\n                    print_token();\n                    print_newline();\n                    flags.in_case = false;\n                    return;\n                }\n\n                var space_before = true;\n                var space_after = true;\n                var in_ternary = false;\n                if (current_token.text === ':') {\n                    if (flags.ternary_depth === 0) {\n                        // Colon is invalid javascript outside of ternary and object, but do our best to guess what was meant.\n                        space_before = false;\n                    } else {\n                        flags.ternary_depth -= 1;\n                        in_ternary = true;\n                    }\n                } else if (current_token.text === '?') {\n                    flags.ternary_depth += 1;\n                }\n\n                // let's handle the operator_position option prior to any conflicting logic\n                if (!isUnary && !isGeneratorAsterisk && opt.preserve_newlines && in_array(current_token.text, Tokenizer.positionable_operators)) {\n                    var isColon = current_token.text === ':';\n                    var isTernaryColon = (isColon && in_ternary);\n                    var isOtherColon = (isColon && !in_ternary);\n\n                    switch (opt.operator_position) {\n                        case OPERATOR_POSITION.before_newline:\n                            // if the current token is : and it's not a ternary statement then we set space_before to false\n                            output.space_before_token = !isOtherColon;\n\n                            print_token();\n\n                            if (!isColon || isTernaryColon) {\n                                allow_wrap_or_preserved_newline();\n                            }\n\n                            output.space_before_token = true;\n                            return;\n\n                        case OPERATOR_POSITION.after_newline:\n                            // if the current token is anything but colon, or (via deduction) it's a colon and in a ternary statement,\n                            //   then print a newline.\n\n                            output.space_before_token = true;\n\n                            if (!isColon || isTernaryColon) {\n                                if (get_token(1).wanted_newline) {\n                                    print_newline(false, true);\n                                } else {\n                                    allow_wrap_or_preserved_newline();\n                                }\n                            } else {\n                                output.space_before_token = false;\n                            }\n\n                            print_token();\n\n                            output.space_before_token = true;\n                            return;\n\n                        case OPERATOR_POSITION.preserve_newline:\n                            if (!isOtherColon) {\n                                allow_wrap_or_preserved_newline();\n                            }\n\n                            // if we just added a newline, or the current token is : and it's not a ternary statement,\n                            //   then we set space_before to false\n                            space_before = !(output.just_added_newline() || isOtherColon);\n\n                            output.space_before_token = space_before;\n                            print_token();\n                            output.space_before_token = true;\n                            return;\n                    }\n                }\n\n                if (isGeneratorAsterisk) {\n                    allow_wrap_or_preserved_newline();\n                    space_before = false;\n                    var next_token = get_token(1);\n                    space_after = next_token && in_array(next_token.type, ['TK_WORD', 'TK_RESERVED']);\n                } else if (current_token.text === '...') {\n                    allow_wrap_or_preserved_newline();\n                    space_before = last_type === 'TK_START_BLOCK';\n                    space_after = false;\n                } else if (in_array(current_token.text, ['--', '++', '!', '~']) || isUnary) {\n                    // unary operators (and binary +/- pretending to be unary) special cases\n\n                    space_before = false;\n                    space_after = false;\n\n                    // http://www.ecma-international.org/ecma-262/5.1/#sec-7.9.1\n                    // if there is a newline between -- or ++ and anything else we should preserve it.\n                    if (current_token.wanted_newline && (current_token.text === '--' || current_token.text === '++')) {\n                        print_newline(false, true);\n                    }\n\n                    if (flags.last_text === ';' && is_expression(flags.mode)) {\n                        // for (;; ++i)\n                        //        ^^^\n                        space_before = true;\n                    }\n\n                    if (last_type === 'TK_RESERVED') {\n                        space_before = true;\n                    } else if (last_type === 'TK_END_EXPR') {\n                        space_before = !(flags.last_text === ']' && (current_token.text === '--' || current_token.text === '++'));\n                    } else if (last_type === 'TK_OPERATOR') {\n                        // a++ + ++b;\n                        // a - -b\n                        space_before = in_array(current_token.text, ['--', '-', '++', '+']) && in_array(flags.last_text, ['--', '-', '++', '+']);\n                        // + and - are not unary when preceeded by -- or ++ operator\n                        // a-- + b\n                        // a * +b\n                        // a - -b\n                        if (in_array(current_token.text, ['+', '-']) && in_array(flags.last_text, ['--', '++'])) {\n                            space_after = true;\n                        }\n                    }\n\n\n                    if (((flags.mode === MODE.BlockStatement && !flags.inline_frame) || flags.mode === MODE.Statement) &&\n                        (flags.last_text === '{' || flags.last_text === ';')) {\n                        // { foo; --i }\n                        // foo(); --bar;\n                        print_newline();\n                    }\n                }\n\n                output.space_before_token = output.space_before_token || space_before;\n                print_token();\n                output.space_before_token = space_after;\n            }\n\n            function handle_block_comment(preserve_statement_flags) {\n                if (output.raw) {\n                    output.add_raw_token(current_token);\n                    if (current_token.directives && current_token.directives.preserve === 'end') {\n                        // If we're testing the raw output behavior, do not allow a directive to turn it off.\n                        output.raw = opt.test_output_raw;\n                    }\n                    return;\n                }\n\n                if (current_token.directives) {\n                    print_newline(false, preserve_statement_flags);\n                    print_token();\n                    if (current_token.directives.preserve === 'start') {\n                        output.raw = true;\n                    }\n                    print_newline(false, true);\n                    return;\n                }\n\n                // inline block\n                if (!acorn.newline.test(current_token.text) && !current_token.wanted_newline) {\n                    output.space_before_token = true;\n                    print_token();\n                    output.space_before_token = true;\n                    return;\n                }\n\n                var lines = split_linebreaks(current_token.text);\n                var j; // iterator for this case\n                var javadoc = false;\n                var starless = false;\n                var lastIndent = current_token.whitespace_before;\n                var lastIndentLength = lastIndent.length;\n\n                // block comment starts with a new line\n                print_newline(false, preserve_statement_flags);\n                if (lines.length > 1) {\n                    javadoc = all_lines_start_with(lines.slice(1), '*');\n                    starless = each_line_matches_indent(lines.slice(1), lastIndent);\n                }\n\n                // first line always indented\n                print_token(lines[0]);\n                for (j = 1; j < lines.length; j++) {\n                    print_newline(false, true);\n                    if (javadoc) {\n                        // javadoc: reformat and re-indent\n                        print_token(' ' + ltrim(lines[j]));\n                    } else if (starless && lines[j].length > lastIndentLength) {\n                        // starless: re-indent non-empty content, avoiding trim\n                        print_token(lines[j].substring(lastIndentLength));\n                    } else {\n                        // normal comments output raw\n                        output.add_token(lines[j]);\n                    }\n                }\n\n                // for comments of more than one line, make sure there's a new line after\n                print_newline(false, preserve_statement_flags);\n            }\n\n            function handle_comment(preserve_statement_flags) {\n                if (current_token.wanted_newline) {\n                    print_newline(false, preserve_statement_flags);\n                } else {\n                    output.trim(true);\n                }\n\n                output.space_before_token = true;\n                print_token();\n                print_newline(false, preserve_statement_flags);\n            }\n\n            function handle_dot() {\n                if (start_of_statement()) {\n                    // The conditional starts the statement if appropriate.\n                } else {\n                    handle_whitespace_and_comments(current_token, true);\n                }\n\n                if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n                    output.space_before_token = true;\n                } else {\n                    // allow preserved newlines before dots in general\n                    // force newlines on dots after close paren when break_chained - for bar().baz()\n                    allow_wrap_or_preserved_newline(flags.last_text === ')' && opt.break_chained_methods);\n                }\n\n                print_token();\n            }\n\n            function handle_unknown(preserve_statement_flags) {\n                print_token();\n\n                if (current_token.text[current_token.text.length - 1] === '\\n') {\n                    print_newline(false, preserve_statement_flags);\n                }\n            }\n\n            function handle_eof() {\n                // Unwind any open statements\n                while (flags.mode === MODE.Statement) {\n                    restore_mode();\n                }\n                handle_whitespace_and_comments(current_token);\n            }\n        }\n\n\n        function OutputLine(parent) {\n            var _character_count = 0;\n            // use indent_count as a marker for lines that have preserved indentation\n            var _indent_count = -1;\n\n            var _items = [];\n            var _empty = true;\n\n            this.set_indent = function(level) {\n                _character_count = parent.baseIndentLength + level * parent.indent_length;\n                _indent_count = level;\n            };\n\n            this.get_character_count = function() {\n                return _character_count;\n            };\n\n            this.is_empty = function() {\n                return _empty;\n            };\n\n            this.last = function() {\n                if (!this._empty) {\n                    return _items[_items.length - 1];\n                } else {\n                    return null;\n                }\n            };\n\n            this.push = function(input) {\n                _items.push(input);\n                _character_count += input.length;\n                _empty = false;\n            };\n\n            this.pop = function() {\n                var item = null;\n                if (!_empty) {\n                    item = _items.pop();\n                    _character_count -= item.length;\n                    _empty = _items.length === 0;\n                }\n                return item;\n            };\n\n            this.remove_indent = function() {\n                if (_indent_count > 0) {\n                    _indent_count -= 1;\n                    _character_count -= parent.indent_length;\n                }\n            };\n\n            this.trim = function() {\n                while (this.last() === ' ') {\n                    _items.pop();\n                    _character_count -= 1;\n                }\n                _empty = _items.length === 0;\n            };\n\n            this.toString = function() {\n                var result = '';\n                if (!this._empty) {\n                    if (_indent_count >= 0) {\n                        result = parent.indent_cache[_indent_count];\n                    }\n                    result += _items.join('');\n                }\n                return result;\n            };\n        }\n\n        function Output(indent_string, baseIndentString) {\n            baseIndentString = baseIndentString || '';\n            this.indent_cache = [baseIndentString];\n            this.baseIndentLength = baseIndentString.length;\n            this.indent_length = indent_string.length;\n            this.raw = false;\n\n            var lines = [];\n            this.baseIndentString = baseIndentString;\n            this.indent_string = indent_string;\n            this.previous_line = null;\n            this.current_line = null;\n            this.space_before_token = false;\n\n            this.add_outputline = function() {\n                this.previous_line = this.current_line;\n                this.current_line = new OutputLine(this);\n                lines.push(this.current_line);\n            };\n\n            // initialize\n            this.add_outputline();\n\n\n            this.get_line_number = function() {\n                return lines.length;\n            };\n\n            // Using object instead of string to allow for later expansion of info about each line\n            this.add_new_line = function(force_newline) {\n                if (this.get_line_number() === 1 && this.just_added_newline()) {\n                    return false; // no newline on start of file\n                }\n\n                if (force_newline || !this.just_added_newline()) {\n                    if (!this.raw) {\n                        this.add_outputline();\n                    }\n                    return true;\n                }\n\n                return false;\n            };\n\n            this.get_code = function() {\n                var sweet_code = lines.join('\\n').replace(/[\\r\\n\\t ]+$/, '');\n                return sweet_code;\n            };\n\n            this.set_indent = function(level) {\n                // Never indent your first output indent at the start of the file\n                if (lines.length > 1) {\n                    while (level >= this.indent_cache.length) {\n                        this.indent_cache.push(this.indent_cache[this.indent_cache.length - 1] + this.indent_string);\n                    }\n\n                    this.current_line.set_indent(level);\n                    return true;\n                }\n                this.current_line.set_indent(0);\n                return false;\n            };\n\n            this.add_raw_token = function(token) {\n                for (var x = 0; x < token.newlines; x++) {\n                    this.add_outputline();\n                }\n                this.current_line.push(token.whitespace_before);\n                this.current_line.push(token.text);\n                this.space_before_token = false;\n            };\n\n            this.add_token = function(printable_token) {\n                this.add_space_before_token();\n                this.current_line.push(printable_token);\n            };\n\n            this.add_space_before_token = function() {\n                if (this.space_before_token && !this.just_added_newline()) {\n                    this.current_line.push(' ');\n                }\n                this.space_before_token = false;\n            };\n\n            this.remove_redundant_indentation = function(frame) {\n                // This implementation is effective but has some issues:\n                //     - can cause line wrap to happen too soon due to indent removal\n                //           after wrap points are calculated\n                // These issues are minor compared to ugly indentation.\n\n                if (frame.multiline_frame ||\n                    frame.mode === MODE.ForInitializer ||\n                    frame.mode === MODE.Conditional) {\n                    return;\n                }\n\n                // remove one indent from each line inside this section\n                var index = frame.start_line_index;\n\n                var output_length = lines.length;\n                while (index < output_length) {\n                    lines[index].remove_indent();\n                    index++;\n                }\n            };\n\n            this.trim = function(eat_newlines) {\n                eat_newlines = (eat_newlines === undefined) ? false : eat_newlines;\n\n                this.current_line.trim(indent_string, baseIndentString);\n\n                while (eat_newlines && lines.length > 1 &&\n                    this.current_line.is_empty()) {\n                    lines.pop();\n                    this.current_line = lines[lines.length - 1];\n                    this.current_line.trim();\n                }\n\n                this.previous_line = lines.length > 1 ? lines[lines.length - 2] : null;\n            };\n\n            this.just_added_newline = function() {\n                return this.current_line.is_empty();\n            };\n\n            this.just_added_blankline = function() {\n                if (this.just_added_newline()) {\n                    if (lines.length === 1) {\n                        return true; // start of the file and newline = blank\n                    }\n\n                    var line = lines[lines.length - 2];\n                    return line.is_empty();\n                }\n                return false;\n            };\n        }\n\n        var InputScanner = function(input) {\n            var _input = input;\n            var _input_length = _input.length;\n            var _position = 0;\n\n            this.back = function() {\n                _position -= 1;\n            };\n\n            this.hasNext = function() {\n                return _position < _input_length;\n            };\n\n            this.next = function() {\n                var val = null;\n                if (this.hasNext()) {\n                    val = _input.charAt(_position);\n                    _position += 1;\n                }\n                return val;\n            };\n\n            this.peek = function(index) {\n                var val = null;\n                index = index || 0;\n                index += _position;\n                if (index >= 0 && index < _input_length) {\n                    val = _input.charAt(index);\n                }\n                return val;\n            };\n\n            this.peekCharCode = function(index) {\n                var val = 0;\n                index = index || 0;\n                index += _position;\n                if (index >= 0 && index < _input_length) {\n                    val = _input.charCodeAt(index);\n                }\n                return val;\n            };\n\n            this.test = function(pattern, index) {\n                index = index || 0;\n                pattern.lastIndex = _position + index;\n                return pattern.test(_input);\n            };\n\n            this.testChar = function(pattern, index) {\n                var val = this.peek(index);\n                return val !== null && pattern.test(val);\n            };\n\n            this.match = function(pattern) {\n                pattern.lastIndex = _position;\n                var pattern_match = pattern.exec(_input);\n                if (pattern_match && pattern_match.index === _position) {\n                    _position += pattern_match[0].length;\n                } else {\n                    pattern_match = null;\n                }\n                return pattern_match;\n            };\n        };\n\n        var Token = function(type, text, newlines, whitespace_before, parent) {\n            this.type = type;\n            this.text = text;\n\n            // comments_before are\n            // comments that have a new line before them\n            // and may or may not have a newline after\n            // this is a set of comments before\n            this.comments_before = /* inline comment*/ [];\n\n\n            this.comments_after = []; // no new line before and newline after\n            this.newlines = newlines || 0;\n            this.wanted_newline = newlines > 0;\n            this.whitespace_before = whitespace_before || '';\n            this.parent = parent || null;\n            this.opened = null;\n            this.directives = null;\n        };\n\n        function tokenizer(input_string, opts) {\n\n            var whitespace = \"\\n\\r\\t \".split('');\n            var digit = /[0-9]/;\n            var digit_bin = /[01]/;\n            var digit_oct = /[01234567]/;\n            var digit_hex = /[0123456789abcdefABCDEF]/;\n\n            this.positionable_operators = '!= !== % & && * ** + - / : < << <= == === > >= >> >>> ? ^ | ||'.split(' ');\n            var punct = this.positionable_operators.concat(\n                // non-positionable operators - these do not follow operator position settings\n                '! %= &= *= **= ++ += , -- -= /= :: <<= = => >>= >>>= ^= |= ~ ...'.split(' '));\n\n            // words which should always start on new line.\n            this.line_starters = 'continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export'.split(',');\n            var reserved_words = this.line_starters.concat(['do', 'in', 'of', 'else', 'get', 'set', 'new', 'catch', 'finally', 'typeof', 'yield', 'async', 'await', 'from', 'as']);\n\n            //  /* ... */ comment ends with nearest */ or end of file\n            var block_comment_pattern = /([\\s\\S]*?)((?:\\*\\/)|$)/g;\n\n            // comment ends just before nearest linefeed or end of file\n            var comment_pattern = /([^\\n\\r\\u2028\\u2029]*)/g;\n\n            var directives_block_pattern = /\\/\\* beautify( \\w+[:]\\w+)+ \\*\\//g;\n            var directive_pattern = / (\\w+)[:](\\w+)/g;\n            var directives_end_ignore_pattern = /([\\s\\S]*?)((?:\\/\\*\\sbeautify\\signore:end\\s\\*\\/)|$)/g;\n\n            var template_pattern = /((<\\?php|<\\?=)[\\s\\S]*?\\?>)|(<%[\\s\\S]*?%>)/g;\n\n            var n_newlines, whitespace_before_token, in_html_comment, tokens;\n            var input;\n\n            this.tokenize = function() {\n                input = new InputScanner(input_string);\n                in_html_comment = false;\n                tokens = [];\n\n                var next, last;\n                var token_values;\n                var open = null;\n                var open_stack = [];\n                var comments = [];\n\n                while (!(last && last.type === 'TK_EOF')) {\n                    token_values = tokenize_next();\n                    next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token);\n                    while (next.type === 'TK_COMMENT' || next.type === 'TK_BLOCK_COMMENT' || next.type === 'TK_UNKNOWN') {\n                        if (next.type === 'TK_BLOCK_COMMENT') {\n                            next.directives = token_values[2];\n                        }\n                        comments.push(next);\n                        token_values = tokenize_next();\n                        next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token);\n                    }\n\n                    if (comments.length) {\n                        next.comments_before = comments;\n                        comments = [];\n                    }\n\n                    if (next.type === 'TK_START_BLOCK' || next.type === 'TK_START_EXPR') {\n                        next.parent = last;\n                        open_stack.push(open);\n                        open = next;\n                    } else if ((next.type === 'TK_END_BLOCK' || next.type === 'TK_END_EXPR') &&\n                        (open && (\n                            (next.text === ']' && open.text === '[') ||\n                            (next.text === ')' && open.text === '(') ||\n                            (next.text === '}' && open.text === '{')))) {\n                        next.parent = open.parent;\n                        next.opened = open;\n\n                        open = open_stack.pop();\n                    }\n\n                    tokens.push(next);\n                    last = next;\n                }\n\n                return tokens;\n            };\n\n            function get_directives(text) {\n                if (!text.match(directives_block_pattern)) {\n                    return null;\n                }\n\n                var directives = {};\n                directive_pattern.lastIndex = 0;\n                var directive_match = directive_pattern.exec(text);\n\n                while (directive_match) {\n                    directives[directive_match[1]] = directive_match[2];\n                    directive_match = directive_pattern.exec(text);\n                }\n\n                return directives;\n            }\n\n            function tokenize_next() {\n                var resulting_string;\n                var whitespace_on_this_line = [];\n\n                n_newlines = 0;\n                whitespace_before_token = '';\n\n                var c = input.next();\n\n                if (c === null) {\n                    return ['', 'TK_EOF'];\n                }\n\n                var last_token;\n                if (tokens.length) {\n                    last_token = tokens[tokens.length - 1];\n                } else {\n                    // For the sake of tokenizing we can pretend that there was on open brace to start\n                    last_token = new Token('TK_START_BLOCK', '{');\n                }\n\n                while (in_array(c, whitespace)) {\n\n                    if (acorn.newline.test(c)) {\n                        if (!(c === '\\n' && input.peek(-2) === '\\r')) {\n                            n_newlines += 1;\n                            whitespace_on_this_line = [];\n                        }\n                    } else {\n                        whitespace_on_this_line.push(c);\n                    }\n\n                    c = input.next();\n\n                    if (c === null) {\n                        return ['', 'TK_EOF'];\n                    }\n                }\n\n                if (whitespace_on_this_line.length) {\n                    whitespace_before_token = whitespace_on_this_line.join('');\n                }\n\n                if (digit.test(c) || (c === '.' && input.testChar(digit))) {\n                    var allow_decimal = true;\n                    var allow_e = true;\n                    var local_digit = digit;\n\n                    if (c === '0' && input.testChar(/[XxOoBb]/)) {\n                        // switch to hex/oct/bin number, no decimal or e, just hex/oct/bin digits\n                        allow_decimal = false;\n                        allow_e = false;\n                        if (input.testChar(/[Bb]/)) {\n                            local_digit = digit_bin;\n                        } else if (input.testChar(/[Oo]/)) {\n                            local_digit = digit_oct;\n                        } else {\n                            local_digit = digit_hex;\n                        }\n                        c += input.next();\n                    } else if (c === '.') {\n                        // Already have a decimal for this literal, don't allow another\n                        allow_decimal = false;\n                    } else {\n                        // we know this first loop will run.  It keeps the logic simpler.\n                        c = '';\n                        input.back();\n                    }\n\n                    // Add the digits\n                    while (input.testChar(local_digit)) {\n                        c += input.next();\n\n                        if (allow_decimal && input.peek() === '.') {\n                            c += input.next();\n                            allow_decimal = false;\n                        }\n\n                        // a = 1.e-7 is valid, so we test for . then e in one loop\n                        if (allow_e && input.testChar(/[Ee]/)) {\n                            c += input.next();\n\n                            if (input.testChar(/[+-]/)) {\n                                c += input.next();\n                            }\n\n                            allow_e = false;\n                            allow_decimal = false;\n                        }\n                    }\n\n                    return [c, 'TK_WORD'];\n                }\n\n                if (acorn.isIdentifierStart(input.peekCharCode(-1))) {\n                    if (input.hasNext()) {\n                        while (acorn.isIdentifierChar(input.peekCharCode())) {\n                            c += input.next();\n                            if (!input.hasNext()) {\n                                break;\n                            }\n                        }\n                    }\n\n                    if (!(last_token.type === 'TK_DOT' ||\n                            (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['set', 'get']))) &&\n                        in_array(c, reserved_words)) {\n                        if (c === 'in' || c === 'of') { // hack for 'in' and 'of' operators\n                            return [c, 'TK_OPERATOR'];\n                        }\n                        return [c, 'TK_RESERVED'];\n                    }\n\n                    return [c, 'TK_WORD'];\n                }\n\n                if (c === '(' || c === '[') {\n                    return [c, 'TK_START_EXPR'];\n                }\n\n                if (c === ')' || c === ']') {\n                    return [c, 'TK_END_EXPR'];\n                }\n\n                if (c === '{') {\n                    return [c, 'TK_START_BLOCK'];\n                }\n\n                if (c === '}') {\n                    return [c, 'TK_END_BLOCK'];\n                }\n\n                if (c === ';') {\n                    return [c, 'TK_SEMICOLON'];\n                }\n\n                if (c === '/') {\n                    var comment = '';\n                    var comment_match;\n                    // peek for comment /* ... */\n                    if (input.peek() === '*') {\n                        input.next();\n                        comment_match = input.match(block_comment_pattern);\n                        comment = '/*' + comment_match[0];\n                        var directives = get_directives(comment);\n                        if (directives && directives.ignore === 'start') {\n                            comment_match = input.match(directives_end_ignore_pattern);\n                            comment += comment_match[0];\n                        }\n                        comment = comment.replace(acorn.allLineBreaks, '\\n');\n                        return [comment, 'TK_BLOCK_COMMENT', directives];\n                    }\n                    // peek for comment // ...\n                    if (input.peek() === '/') {\n                        input.next();\n                        comment_match = input.match(comment_pattern);\n                        comment = '//' + comment_match[0];\n                        return [comment, 'TK_COMMENT'];\n                    }\n\n                }\n\n                var startXmlRegExp = /<()([-a-zA-Z:0-9_.]+|{[\\s\\S]+?}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+{[\\s\\S]+?}|\\s+[-a-zA-Z:0-9_.]+|\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{[\\s\\S]+?}))*\\s*(\\/?)\\s*>/g;\n\n                if (c === '`' || c === \"'\" || c === '\"' || // string\n                    (\n                        (c === '/') || // regexp\n                        (opts.e4x && c === \"<\" && input.test(startXmlRegExp, -1)) // xml\n                    ) && ( // regex and xml can only appear in specific locations during parsing\n                        (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['return', 'case', 'throw', 'else', 'do', 'typeof', 'yield'])) ||\n                        (last_token.type === 'TK_END_EXPR' && last_token.text === ')' &&\n                            last_token.parent && last_token.parent.type === 'TK_RESERVED' && in_array(last_token.parent.text, ['if', 'while', 'for'])) ||\n                        (in_array(last_token.type, ['TK_COMMENT', 'TK_START_EXPR', 'TK_START_BLOCK',\n                            'TK_END_BLOCK', 'TK_OPERATOR', 'TK_EQUALS', 'TK_EOF', 'TK_SEMICOLON', 'TK_COMMA'\n                        ]))\n                    )) {\n\n                    var sep = c,\n                        esc = false,\n                        has_char_escapes = false;\n\n                    resulting_string = c;\n\n                    if (sep === '/') {\n                        //\n                        // handle regexp\n                        //\n                        var in_char_class = false;\n                        while (input.hasNext() &&\n                            ((esc || in_char_class || input.peek() !== sep) &&\n                                !input.testChar(acorn.newline))) {\n                            resulting_string += input.peek();\n                            if (!esc) {\n                                esc = input.peek() === '\\\\';\n                                if (input.peek() === '[') {\n                                    in_char_class = true;\n                                } else if (input.peek() === ']') {\n                                    in_char_class = false;\n                                }\n                            } else {\n                                esc = false;\n                            }\n                            input.next();\n                        }\n                    } else if (opts.e4x && sep === '<') {\n                        //\n                        // handle e4x xml literals\n                        //\n\n                        var xmlRegExp = /[\\s\\S]*?<(\\/?)([-a-zA-Z:0-9_.]+|{[\\s\\S]+?}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+{[\\s\\S]+?}|\\s+[-a-zA-Z:0-9_.]+|\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{[\\s\\S]+?}))*\\s*(\\/?)\\s*>/g;\n                        input.back();\n                        var xmlStr = '';\n                        var match = input.match(startXmlRegExp);\n                        if (match) {\n                            // Trim root tag to attempt to\n                            var rootTag = match[2].replace(/^{\\s+/, '{').replace(/\\s+}$/, '}');\n                            var isCurlyRoot = rootTag.indexOf('{') === 0;\n                            var depth = 0;\n                            while (match) {\n                                var isEndTag = !!match[1];\n                                var tagName = match[2];\n                                var isSingletonTag = (!!match[match.length - 1]) || (tagName.slice(0, 8) === \"![CDATA[\");\n                                if (!isSingletonTag &&\n                                    (tagName === rootTag || (isCurlyRoot && tagName.replace(/^{\\s+/, '{').replace(/\\s+}$/, '}')))) {\n                                    if (isEndTag) {\n                                        --depth;\n                                    } else {\n                                        ++depth;\n                                    }\n                                }\n                                xmlStr += match[0];\n                                if (depth <= 0) {\n                                    break;\n                                }\n                                match = input.match(xmlRegExp);\n                            }\n                            // if we didn't close correctly, keep unformatted.\n                            if (!match) {\n                                xmlStr += input.match(/[\\s\\S]*/g)[0];\n                            }\n                            xmlStr = xmlStr.replace(acorn.allLineBreaks, '\\n');\n                            return [xmlStr, \"TK_STRING\"];\n                        }\n                    } else {\n                        //\n                        // handle string\n                        //\n                        var parse_string = function(delimiter, allow_unescaped_newlines, start_sub) {\n                            // Template strings can travers lines without escape characters.\n                            // Other strings cannot\n                            var current_char;\n                            while (input.hasNext()) {\n                                current_char = input.peek();\n                                if (!(esc || (current_char !== delimiter &&\n                                        (allow_unescaped_newlines || !acorn.newline.test(current_char))))) {\n                                    break;\n                                }\n\n                                // Handle \\r\\n linebreaks after escapes or in template strings\n                                if ((esc || allow_unescaped_newlines) && acorn.newline.test(current_char)) {\n                                    if (current_char === '\\r' && input.peek(1) === '\\n') {\n                                        input.next();\n                                        current_char = input.peek();\n                                    }\n                                    resulting_string += '\\n';\n                                } else {\n                                    resulting_string += current_char;\n                                }\n\n                                if (esc) {\n                                    if (current_char === 'x' || current_char === 'u') {\n                                        has_char_escapes = true;\n                                    }\n                                    esc = false;\n                                } else {\n                                    esc = current_char === '\\\\';\n                                }\n\n                                input.next();\n\n                                if (start_sub && resulting_string.indexOf(start_sub, resulting_string.length - start_sub.length) !== -1) {\n                                    if (delimiter === '`') {\n                                        parse_string('}', allow_unescaped_newlines, '`');\n                                    } else {\n                                        parse_string('`', allow_unescaped_newlines, '${');\n                                    }\n\n                                    if (input.hasNext()) {\n                                        resulting_string += input.next();\n                                    }\n                                }\n                            }\n                        };\n\n                        if (sep === '`') {\n                            parse_string('`', true, '${');\n                        } else {\n                            parse_string(sep);\n                        }\n                    }\n\n                    if (has_char_escapes && opts.unescape_strings) {\n                        resulting_string = unescape_string(resulting_string);\n                    }\n\n                    if (input.peek() === sep) {\n                        resulting_string += sep;\n                        input.next();\n\n                        if (sep === '/') {\n                            // regexps may have modifiers /regexp/MOD , so fetch those, too\n                            // Only [gim] are valid, but if the user puts in garbage, do what we can to take it.\n                            while (input.hasNext() && acorn.isIdentifierStart(input.peekCharCode())) {\n                                resulting_string += input.next();\n                            }\n                        }\n                    }\n                    return [resulting_string, 'TK_STRING'];\n                }\n\n                if (c === '#') {\n\n                    if (tokens.length === 0 && input.peek() === '!') {\n                        // shebang\n                        resulting_string = c;\n                        while (input.hasNext() && c !== '\\n') {\n                            c = input.next();\n                            resulting_string += c;\n                        }\n                        return [trim(resulting_string) + '\\n', 'TK_UNKNOWN'];\n                    }\n\n\n\n                    // Spidermonkey-specific sharp variables for circular references\n                    // https://developer.mozilla.org/En/Sharp_variables_in_JavaScript\n                    // http://mxr.mozilla.org/mozilla-central/source/js/src/jsscan.cpp around line 1935\n                    var sharp = '#';\n                    if (input.hasNext() && input.testChar(digit)) {\n                        do {\n                            c = input.next();\n                            sharp += c;\n                        } while (input.hasNext() && c !== '#' && c !== '=');\n                        if (c === '#') {\n                            //\n                        } else if (input.peek() === '[' && input.peek(1) === ']') {\n                            sharp += '[]';\n                            input.next();\n                            input.next();\n                        } else if (input.peek() === '{' && input.peek(1) === '}') {\n                            sharp += '{}';\n                            input.next();\n                            input.next();\n                        }\n                        return [sharp, 'TK_WORD'];\n                    }\n                }\n\n                if (c === '<' && (input.peek() === '?' || input.peek() === '%')) {\n                    input.back();\n                    var template_match = input.match(template_pattern);\n                    if (template_match) {\n                        c = template_match[0];\n                        c = c.replace(acorn.allLineBreaks, '\\n');\n                        return [c, 'TK_STRING'];\n                    }\n                }\n\n                if (c === '<' && input.match(/\\!--/g)) {\n                    c = '<!--';\n                    while (input.hasNext() && !input.testChar(acorn.newline)) {\n                        c += input.next();\n                    }\n                    in_html_comment = true;\n                    return [c, 'TK_COMMENT'];\n                }\n\n                if (c === '-' && in_html_comment && input.match(/->/g)) {\n                    in_html_comment = false;\n                    return ['-->', 'TK_COMMENT'];\n                }\n\n                if (c === '.') {\n                    if (input.peek() === '.' && input.peek(1) === '.') {\n                        c += input.next() + input.next();\n                        return [c, 'TK_OPERATOR'];\n                    }\n                    return [c, 'TK_DOT'];\n                }\n\n                if (in_array(c, punct)) {\n                    while (input.hasNext() && in_array(c + input.peek(), punct)) {\n                        c += input.next();\n                        if (!input.hasNext()) {\n                            break;\n                        }\n                    }\n\n                    if (c === ',') {\n                        return [c, 'TK_COMMA'];\n                    } else if (c === '=') {\n                        return [c, 'TK_EQUALS'];\n                    } else {\n                        return [c, 'TK_OPERATOR'];\n                    }\n                }\n\n                return [c, 'TK_UNKNOWN'];\n            }\n\n\n            function unescape_string(s) {\n                // You think that a regex would work for this\n                // return s.replace(/\\\\x([0-9a-f]{2})/gi, function(match, val) {\n                //         return String.fromCharCode(parseInt(val, 16));\n                //     })\n                // However, dealing with '\\xff', '\\\\xff', '\\\\\\xff' makes this more fun.\n                var out = '',\n                    escaped = 0;\n\n                var input_scan = new InputScanner(s);\n                var matched = null;\n\n                while (input_scan.hasNext()) {\n                    // Keep any whitespace, non-slash characters\n                    // also keep slash pairs.\n                    matched = input_scan.match(/([\\s]|[^\\\\]|\\\\\\\\)+/g);\n\n                    if (matched) {\n                        out += matched[0];\n                    }\n\n                    if (input_scan.peek() === '\\\\') {\n                        input_scan.next();\n                        if (input_scan.peek() === 'x') {\n                            matched = input_scan.match(/x([0-9A-Fa-f]{2})/g);\n                        } else if (input_scan.peek() === 'u') {\n                            matched = input_scan.match(/u([0-9A-Fa-f]{4})/g);\n                        } else {\n                            out += '\\\\';\n                            if (input_scan.hasNext()) {\n                                out += input_scan.next();\n                            }\n                            continue;\n                        }\n\n                        // If there's some error decoding, return the original string\n                        if (!matched) {\n                            return s;\n                        }\n\n                        escaped = parseInt(matched[1], 16);\n\n                        if (escaped > 0x7e && escaped <= 0xff && matched[0].indexOf('x') === 0) {\n                            // we bail out on \\x7f..\\xff,\n                            // leaving whole string escaped,\n                            // as it's probably completely binary\n                            return s;\n                        } else if (escaped >= 0x00 && escaped < 0x20) {\n                            // leave 0x00...0x1f escaped\n                            out += '\\\\' + matched[0];\n                            continue;\n                        } else if (escaped === 0x22 || escaped === 0x27 || escaped === 0x5c) {\n                            // single-quote, apostrophe, backslash - escape these\n                            out += '\\\\' + String.fromCharCode(escaped);\n                        } else {\n                            out += String.fromCharCode(escaped);\n                        }\n                    }\n                }\n\n                return out;\n            }\n        }\n\n        var beautifier = new Beautifier(js_source_text, options);\n        return beautifier.beautify();\n\n    }\n\n    if (typeof define === \"function\" && define.amd) {\n        // Add support for AMD ( https://github.com/amdjs/amdjs-api/wiki/AMD#defineamd-property- )\n        define([], function() {\n            return { js_beautify: js_beautify };\n        });\n    } else if (typeof exports !== \"undefined\") {\n        // Add support for CommonJS. Just put this file somewhere on your require.paths\n        // and you will be able to `var js_beautify = require(\"beautify\").js_beautify`.\n        exports.js_beautify = js_beautify;\n    } else if (typeof window !== \"undefined\") {\n        // If we're running a web page and don't have either of the above, add our one global\n        window.js_beautify = js_beautify;\n    } else if (typeof global !== \"undefined\") {\n        // If we don't even have window, try global.\n        global.js_beautify = js_beautify;\n    }\n\n}());","/*jshint curly:true, eqeqeq:true, laxbreak:true, noempty:false */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2017 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n\n CSS Beautifier\n---------------\n\n    Written by Harutyun Amirjanyan, (amirjanyan@gmail.com)\n\n    Based on code initially developed by: Einar Lielmanis, <einar@jsbeautifier.org>\n        http://jsbeautifier.org/\n\n    Usage:\n        css_beautify(source_text);\n        css_beautify(source_text, options);\n\n    The options are (default in brackets):\n        indent_size (4)                          indentation size,\n        indent_char (space)                      character to indent with,\n        preserve_newlines (default false)       - whether existing line breaks should be preserved,\n        selector_separator_newline (true)       - separate selectors with newline or\n                                                  not (e.g. \"a,\\nbr\" or \"a, br\")\n        end_with_newline (false)                - end with a newline\n        newline_between_rules (true)            - add a new line after every css rule\n        space_around_selector_separator (false) - ensure space around selector separators:\n                                                  '>', '+', '~' (e.g. \"a>b\" -> \"a > b\")\n    e.g\n\n    css_beautify(css_source_text, {\n      'indent_size': 1,\n      'indent_char': '\\t',\n      'selector_separator': ' ',\n      'end_with_newline': false,\n      'newline_between_rules': true,\n      'space_around_selector_separator': true\n    });\n*/\n\n// http://www.w3.org/TR/CSS21/syndata.html#tokenization\n// http://www.w3.org/TR/css3-syntax/\n\n(function() {\n\n    function mergeOpts(allOptions, targetType) {\n        var finalOpts = {};\n        var name;\n\n        for (name in allOptions) {\n            if (name !== targetType) {\n                finalOpts[name] = allOptions[name];\n            }\n        }\n\n\n        //merge in the per type settings for the targetType\n        if (targetType in allOptions) {\n            for (name in allOptions[targetType]) {\n                finalOpts[name] = allOptions[targetType][name];\n            }\n        }\n        return finalOpts;\n    }\n\n    var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/;\n    var allLineBreaks = new RegExp(lineBreak.source, 'g');\n\n    function css_beautify(source_text, options) {\n        options = options || {};\n\n        // Allow the setting of language/file-type specific options\n        // with inheritance of overall settings\n        options = mergeOpts(options, 'css');\n\n        source_text = source_text || '';\n\n        var newlinesFromLastWSEat = 0;\n        var indentSize = options.indent_size ? parseInt(options.indent_size, 10) : 4;\n        var indentCharacter = options.indent_char || ' ';\n        var preserve_newlines = (options.preserve_newlines === undefined) ? false : options.preserve_newlines;\n        var selectorSeparatorNewline = (options.selector_separator_newline === undefined) ? true : options.selector_separator_newline;\n        var end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline;\n        var newline_between_rules = (options.newline_between_rules === undefined) ? true : options.newline_between_rules;\n        var space_around_combinator = (options.space_around_combinator === undefined) ? false : options.space_around_combinator;\n        space_around_combinator = space_around_combinator || ((options.space_around_selector_separator === undefined) ? false : options.space_around_selector_separator);\n        var eol = options.eol ? options.eol : 'auto';\n\n        if (options.indent_with_tabs) {\n            indentCharacter = '\\t';\n            indentSize = 1;\n        }\n\n        if (eol === 'auto') {\n            eol = '\\n';\n            if (source_text && lineBreak.test(source_text || '')) {\n                eol = source_text.match(lineBreak)[0];\n            }\n        }\n\n        eol = eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n');\n\n        // HACK: newline parsing inconsistent. This brute force normalizes the input.\n        source_text = source_text.replace(allLineBreaks, '\\n');\n\n        // tokenizer\n        var whiteRe = /^\\s+$/;\n\n        var pos = -1,\n            ch;\n        var parenLevel = 0;\n\n        function next() {\n            ch = source_text.charAt(++pos);\n            return ch || '';\n        }\n\n        function peek(skipWhitespace) {\n            var result = '';\n            var prev_pos = pos;\n            if (skipWhitespace) {\n                eatWhitespace();\n            }\n            result = source_text.charAt(pos + 1) || '';\n            pos = prev_pos - 1;\n            next();\n            return result;\n        }\n\n        function eatString(endChars) {\n            var start = pos;\n            while (next()) {\n                if (ch === \"\\\\\") {\n                    next();\n                } else if (endChars.indexOf(ch) !== -1) {\n                    break;\n                } else if (ch === \"\\n\") {\n                    break;\n                }\n            }\n            return source_text.substring(start, pos + 1);\n        }\n\n        function peekString(endChar) {\n            var prev_pos = pos;\n            var str = eatString(endChar);\n            pos = prev_pos - 1;\n            next();\n            return str;\n        }\n\n        function eatWhitespace(preserve_newlines_local) {\n            var result = 0;\n            while (whiteRe.test(peek())) {\n                next();\n                if (ch === '\\n' && preserve_newlines_local && preserve_newlines) {\n                    print.newLine(true);\n                    result++;\n                }\n            }\n            newlinesFromLastWSEat = result;\n            return result;\n        }\n\n        function skipWhitespace() {\n            var result = '';\n            if (ch && whiteRe.test(ch)) {\n                result = ch;\n            }\n            while (whiteRe.test(next())) {\n                result += ch;\n            }\n            return result;\n        }\n\n        function eatComment(singleLine) {\n            var start = pos;\n            singleLine = peek() === \"/\";\n            next();\n            while (next()) {\n                if (!singleLine && ch === \"*\" && peek() === \"/\") {\n                    next();\n                    break;\n                } else if (singleLine && ch === \"\\n\") {\n                    return source_text.substring(start, pos);\n                }\n            }\n\n            return source_text.substring(start, pos) + ch;\n        }\n\n\n        function lookBack(str) {\n            return source_text.substring(pos - str.length, pos).toLowerCase() ===\n                str;\n        }\n\n        // Nested pseudo-class if we are insideRule\n        // and the next special character found opens\n        // a new block\n        function foundNestedPseudoClass() {\n            var openParen = 0;\n            for (var i = pos + 1; i < source_text.length; i++) {\n                var ch = source_text.charAt(i);\n                if (ch === \"{\") {\n                    return true;\n                } else if (ch === '(') {\n                    // pseudoclasses can contain ()\n                    openParen += 1;\n                } else if (ch === ')') {\n                    if (openParen === 0) {\n                        return false;\n                    }\n                    openParen -= 1;\n                } else if (ch === \";\" || ch === \"}\") {\n                    return false;\n                }\n            }\n            return false;\n        }\n\n        // printer\n        var basebaseIndentString = source_text.match(/^[\\t ]*/)[0];\n        var singleIndent = new Array(indentSize + 1).join(indentCharacter);\n        var indentLevel = 0;\n        var nestedLevel = 0;\n\n        function indent() {\n            indentLevel++;\n            basebaseIndentString += singleIndent;\n        }\n\n        function outdent() {\n            indentLevel--;\n            basebaseIndentString = basebaseIndentString.slice(0, -indentSize);\n        }\n\n        var print = {};\n        print[\"{\"] = function(ch) {\n            print.singleSpace();\n            output.push(ch);\n            if (!eatWhitespace(true)) {\n                print.newLine();\n            }\n        };\n        print[\"}\"] = function(newline) {\n            if (newline) {\n                print.newLine();\n            }\n            output.push('}');\n            if (!eatWhitespace(true)) {\n                print.newLine();\n            }\n        };\n\n        print._lastCharWhitespace = function() {\n            return whiteRe.test(output[output.length - 1]);\n        };\n\n        print.newLine = function(keepWhitespace) {\n            if (output.length) {\n                if (!keepWhitespace && output[output.length - 1] !== '\\n') {\n                    print.trim();\n                } else if (output[output.length - 1] === basebaseIndentString) {\n                    output.pop();\n                }\n                output.push('\\n');\n\n                if (basebaseIndentString) {\n                    output.push(basebaseIndentString);\n                }\n            }\n        };\n        print.singleSpace = function() {\n            if (output.length && !print._lastCharWhitespace()) {\n                output.push(' ');\n            }\n        };\n\n        print.preserveSingleSpace = function() {\n            if (isAfterSpace) {\n                print.singleSpace();\n            }\n        };\n\n        print.trim = function() {\n            while (print._lastCharWhitespace()) {\n                output.pop();\n            }\n        };\n\n\n        var output = [];\n        /*_____________________--------------------_____________________*/\n\n        var insideRule = false;\n        var insidePropertyValue = false;\n        var enteringConditionalGroup = false;\n        var top_ch = '';\n        var last_top_ch = '';\n\n        while (true) {\n            var whitespace = skipWhitespace();\n            var isAfterSpace = whitespace !== '';\n            var isAfterNewline = whitespace.indexOf('\\n') !== -1;\n            last_top_ch = top_ch;\n            top_ch = ch;\n\n            if (!ch) {\n                break;\n            } else if (ch === '/' && peek() === '*') { /* css comment */\n                var header = indentLevel === 0;\n\n                if (isAfterNewline || header) {\n                    print.newLine();\n                }\n\n                output.push(eatComment());\n                print.newLine();\n                if (header) {\n                    print.newLine(true);\n                }\n            } else if (ch === '/' && peek() === '/') { // single line comment\n                if (!isAfterNewline && last_top_ch !== '{') {\n                    print.trim();\n                }\n                print.singleSpace();\n                output.push(eatComment());\n                print.newLine();\n            } else if (ch === '@') {\n                print.preserveSingleSpace();\n\n                // deal with less propery mixins @{...}\n                if (peek() === '{') {\n                    output.push(eatString('}'));\n                } else {\n                    output.push(ch);\n\n                    // strip trailing space, if present, for hash property checks\n                    var variableOrRule = peekString(\": ,;{}()[]/='\\\"\");\n\n                    if (variableOrRule.match(/[ :]$/)) {\n                        // we have a variable or pseudo-class, add it and insert one space before continuing\n                        next();\n                        variableOrRule = eatString(\": \").replace(/\\s$/, '');\n                        output.push(variableOrRule);\n                        print.singleSpace();\n                    }\n\n                    variableOrRule = variableOrRule.replace(/\\s$/, '');\n\n                    // might be a nesting at-rule\n                    if (variableOrRule in css_beautify.NESTED_AT_RULE) {\n                        nestedLevel += 1;\n                        if (variableOrRule in css_beautify.CONDITIONAL_GROUP_RULE) {\n                            enteringConditionalGroup = true;\n                        }\n                    }\n                }\n            } else if (ch === '#' && peek() === '{') {\n                print.preserveSingleSpace();\n                output.push(eatString('}'));\n            } else if (ch === '{') {\n                if (peek(true) === '}') {\n                    eatWhitespace();\n                    next();\n                    print.singleSpace();\n                    output.push(\"{\");\n                    print['}'](false);\n                    if (newlinesFromLastWSEat < 2 && newline_between_rules && indentLevel === 0) {\n                        print.newLine(true);\n                    }\n                } else {\n                    indent();\n                    print[\"{\"](ch);\n                    // when entering conditional groups, only rulesets are allowed\n                    if (enteringConditionalGroup) {\n                        enteringConditionalGroup = false;\n                        insideRule = (indentLevel > nestedLevel);\n                    } else {\n                        // otherwise, declarations are also allowed\n                        insideRule = (indentLevel >= nestedLevel);\n                    }\n                }\n            } else if (ch === '}') {\n                outdent();\n                print[\"}\"](true);\n                insideRule = false;\n                insidePropertyValue = false;\n                if (nestedLevel) {\n                    nestedLevel--;\n                }\n                if (newlinesFromLastWSEat < 2 && newline_between_rules && indentLevel === 0) {\n                    print.newLine(true);\n                }\n            } else if (ch === \":\") {\n                eatWhitespace();\n                if ((insideRule || enteringConditionalGroup) &&\n                    !(lookBack(\"&\") || foundNestedPseudoClass()) &&\n                    !lookBack(\"(\")) {\n                    // 'property: value' delimiter\n                    // which could be in a conditional group query\n                    output.push(':');\n                    if (!insidePropertyValue) {\n                        insidePropertyValue = true;\n                        print.singleSpace();\n                    }\n                } else {\n                    // sass/less parent reference don't use a space\n                    // sass nested pseudo-class don't use a space\n\n                    // preserve space before pseudoclasses/pseudoelements, as it means \"in any child\"\n                    if (lookBack(\" \") && output[output.length - 1] !== \" \") {\n                        output.push(\" \");\n                    }\n                    if (peek() === \":\") {\n                        // pseudo-element\n                        next();\n                        output.push(\"::\");\n                    } else {\n                        // pseudo-class\n                        output.push(':');\n                    }\n                }\n            } else if (ch === '\"' || ch === '\\'') {\n                print.preserveSingleSpace();\n                output.push(eatString(ch));\n            } else if (ch === ';') {\n                insidePropertyValue = false;\n                output.push(ch);\n                if (!eatWhitespace(true)) {\n                    print.newLine();\n                }\n            } else if (ch === '(') { // may be a url\n                if (lookBack(\"url\")) {\n                    output.push(ch);\n                    eatWhitespace();\n                    if (next()) {\n                        if (ch !== ')' && ch !== '\"' && ch !== '\\'') {\n                            output.push(eatString(')'));\n                        } else {\n                            pos--;\n                        }\n                    }\n                } else {\n                    parenLevel++;\n                    print.preserveSingleSpace();\n                    output.push(ch);\n                    eatWhitespace();\n                }\n            } else if (ch === ')') {\n                output.push(ch);\n                parenLevel--;\n            } else if (ch === ',') {\n                output.push(ch);\n                if (!eatWhitespace(true) && selectorSeparatorNewline && !insidePropertyValue && parenLevel < 1) {\n                    print.newLine();\n                } else {\n                    print.singleSpace();\n                }\n            } else if ((ch === '>' || ch === '+' || ch === '~') &&\n                !insidePropertyValue && parenLevel < 1) {\n                //handle combinator spacing\n                if (space_around_combinator) {\n                    print.singleSpace();\n                    output.push(ch);\n                    print.singleSpace();\n                } else {\n                    output.push(ch);\n                    eatWhitespace();\n                    // squash extra whitespace\n                    if (ch && whiteRe.test(ch)) {\n                        ch = '';\n                    }\n                }\n            } else if (ch === ']') {\n                output.push(ch);\n            } else if (ch === '[') {\n                print.preserveSingleSpace();\n                output.push(ch);\n            } else if (ch === '=') { // no whitespace before or after\n                eatWhitespace();\n                output.push('=');\n                if (whiteRe.test(ch)) {\n                    ch = '';\n                }\n            } else {\n                print.preserveSingleSpace();\n                output.push(ch);\n            }\n        }\n\n\n        var sweetCode = '';\n        if (basebaseIndentString) {\n            sweetCode += basebaseIndentString;\n        }\n\n        sweetCode += output.join('').replace(/[\\r\\n\\t ]+$/, '');\n\n        // establish end_with_newline\n        if (end_with_newline) {\n            sweetCode += '\\n';\n        }\n\n        if (eol !== '\\n') {\n            sweetCode = sweetCode.replace(/[\\n]/g, eol);\n        }\n\n        return sweetCode;\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/At-rule\n    css_beautify.NESTED_AT_RULE = {\n        \"@page\": true,\n        \"@font-face\": true,\n        \"@keyframes\": true,\n        // also in CONDITIONAL_GROUP_RULE below\n        \"@media\": true,\n        \"@supports\": true,\n        \"@document\": true\n    };\n    css_beautify.CONDITIONAL_GROUP_RULE = {\n        \"@media\": true,\n        \"@supports\": true,\n        \"@document\": true\n    };\n\n    /*global define */\n    if (typeof define === \"function\" && define.amd) {\n        // Add support for AMD ( https://github.com/amdjs/amdjs-api/wiki/AMD#defineamd-property- )\n        define([], function() {\n            return {\n                css_beautify: css_beautify\n            };\n        });\n    } else if (typeof exports !== \"undefined\") {\n        // Add support for CommonJS. Just put this file somewhere on your require.paths\n        // and you will be able to `var html_beautify = require(\"beautify\").html_beautify`.\n        exports.css_beautify = css_beautify;\n    } else if (typeof window !== \"undefined\") {\n        // If we're running a web page and don't have either of the above, add our one global\n        window.css_beautify = css_beautify;\n    } else if (typeof global !== \"undefined\") {\n        // If we don't even have window, try global.\n        global.css_beautify = css_beautify;\n    }\n\n}());","/*jshint curly:true, eqeqeq:true, laxbreak:true, noempty:false */\n/*\n\n  The MIT License (MIT)\n\n  Copyright (c) 2007-2017 Einar Lielmanis, Liam Newman, and contributors.\n\n  Permission is hereby granted, free of charge, to any person\n  obtaining a copy of this software and associated documentation files\n  (the \"Software\"), to deal in the Software without restriction,\n  including without limitation the rights to use, copy, modify, merge,\n  publish, distribute, sublicense, and/or sell copies of the Software,\n  and to permit persons to whom the Software is furnished to do so,\n  subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n\n\n Style HTML\n---------------\n\n  Written by Nochum Sossonko, (nsossonko@hotmail.com)\n\n  Based on code initially developed by: Einar Lielmanis, <einar@jsbeautifier.org>\n    http://jsbeautifier.org/\n\n  Usage:\n    style_html(html_source);\n\n    style_html(html_source, options);\n\n  The options are:\n    indent_inner_html (default false)   indent <head> and <body> sections,\n    indent_size (default 4)           indentation size,\n    indent_char (default space)       character to indent with,\n    wrap_line_length (default 250)            -  maximum amount of characters per line (0 = disable)\n    brace_style (default \"collapse\") - \"collapse\" | \"expand\" | \"end-expand\" | \"none\"\n            put braces on the same line as control statements (default), or put braces on own line (Allman / ANSI style), or just put end braces on own line, or attempt to keep them where they are.\n    unformatted (defaults to inline tags) - list of tags, that shouldn't be reformatted\n    content_unformatted (defaults to pre tag) - list of tags, that its content shouldn't be reformatted\n    indent_scripts (default normal)  - \"keep\"|\"separate\"|\"normal\"\n    preserve_newlines (default true) - whether existing line breaks before elements should be preserved\n                                        Only works before elements, not inside tags or for text.\n    max_preserve_newlines (default unlimited) - maximum number of line breaks to be preserved in one chunk\n    indent_handlebars (default false) - format and indent {{#foo}} and {{/foo}}\n    end_with_newline (false)          - end with a newline\n    extra_liners (default [head,body,/html]) -List of tags that should have an extra newline before them.\n\n    e.g.\n\n    style_html(html_source, {\n      'indent_inner_html': false,\n      'indent_size': 2,\n      'indent_char': ' ',\n      'wrap_line_length': 78,\n      'brace_style': 'expand',\n      'preserve_newlines': true,\n      'max_preserve_newlines': 5,\n      'indent_handlebars': false,\n      'extra_liners': ['/html']\n    });\n*/\n\n(function() {\n\n    // function trim(s) {\n    //     return s.replace(/^\\s+|\\s+$/g, '');\n    // }\n\n    function ltrim(s) {\n        return s.replace(/^\\s+/g, '');\n    }\n\n    function rtrim(s) {\n        return s.replace(/\\s+$/g, '');\n    }\n\n    function mergeOpts(allOptions, targetType) {\n        var finalOpts = {};\n        var name;\n\n        for (name in allOptions) {\n            if (name !== targetType) {\n                finalOpts[name] = allOptions[name];\n            }\n        }\n\n        //merge in the per type settings for the targetType\n        if (targetType in allOptions) {\n            for (name in allOptions[targetType]) {\n                finalOpts[name] = allOptions[targetType][name];\n            }\n        }\n        return finalOpts;\n    }\n\n    var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/;\n    var allLineBreaks = new RegExp(lineBreak.source, 'g');\n\n    function style_html(html_source, options, js_beautify, css_beautify) {\n        //Wrapper function to invoke all the necessary constructors and deal with the output.\n\n        var multi_parser,\n            indent_inner_html,\n            indent_body_inner_html,\n            indent_head_inner_html,\n            indent_size,\n            indent_character,\n            wrap_line_length,\n            brace_style,\n            unformatted,\n            content_unformatted,\n            preserve_newlines,\n            max_preserve_newlines,\n            indent_handlebars,\n            wrap_attributes,\n            wrap_attributes_indent_size,\n            is_wrap_attributes_force,\n            is_wrap_attributes_force_expand_multiline,\n            is_wrap_attributes_force_aligned,\n            end_with_newline,\n            extra_liners,\n            eol;\n\n        options = options || {};\n\n        // Allow the setting of language/file-type specific options\n        // with inheritance of overall settings\n        options = mergeOpts(options, 'html');\n\n        // backwards compatibility to 1.3.4\n        if ((options.wrap_line_length === undefined || parseInt(options.wrap_line_length, 10) === 0) &&\n            (options.max_char !== undefined && parseInt(options.max_char, 10) !== 0)) {\n            options.wrap_line_length = options.max_char;\n        }\n\n        indent_inner_html = (options.indent_inner_html === undefined) ? false : options.indent_inner_html;\n        indent_body_inner_html = (options.indent_body_inner_html === undefined) ? true : options.indent_body_inner_html;\n        indent_head_inner_html = (options.indent_head_inner_html === undefined) ? true : options.indent_head_inner_html;\n        indent_size = (options.indent_size === undefined) ? 4 : parseInt(options.indent_size, 10);\n        indent_character = (options.indent_char === undefined) ? ' ' : options.indent_char;\n        brace_style = (options.brace_style === undefined) ? 'collapse' : options.brace_style;\n        wrap_line_length = parseInt(options.wrap_line_length, 10) === 0 ? 32786 : parseInt(options.wrap_line_length || 250, 10);\n        unformatted = options.unformatted || [\n            // https://www.w3.org/TR/html5/dom.html#phrasing-content\n            'a', 'abbr', 'area', 'audio', 'b', 'bdi', 'bdo', 'br', 'button', 'canvas', 'cite',\n            'code', 'data', 'datalist', 'del', 'dfn', 'em', 'embed', 'i', 'iframe', 'img',\n            'input', 'ins', 'kbd', 'keygen', 'label', 'map', 'mark', 'math', 'meter', 'noscript',\n            'object', 'output', 'progress', 'q', 'ruby', 's', 'samp', /* 'script', */ 'select', 'small',\n            'span', 'strong', 'sub', 'sup', 'svg', 'template', 'textarea', 'time', 'u', 'var',\n            'video', 'wbr', 'text',\n            // prexisting - not sure of full effect of removing, leaving in\n            'acronym', 'address', 'big', 'dt', 'ins', 'strike', 'tt',\n        ];\n        content_unformatted = options.content_unformatted || [\n            'pre',\n        ];\n        preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines;\n        max_preserve_newlines = preserve_newlines ?\n            (isNaN(parseInt(options.max_preserve_newlines, 10)) ? 32786 : parseInt(options.max_preserve_newlines, 10)) :\n            0;\n        indent_handlebars = (options.indent_handlebars === undefined) ? false : options.indent_handlebars;\n        wrap_attributes = (options.wrap_attributes === undefined) ? 'auto' : options.wrap_attributes;\n        wrap_attributes_indent_size = (isNaN(parseInt(options.wrap_attributes_indent_size, 10))) ? indent_size : parseInt(options.wrap_attributes_indent_size, 10);\n        is_wrap_attributes_force = wrap_attributes.substr(0, 'force'.length) === 'force';\n        is_wrap_attributes_force_expand_multiline = (wrap_attributes === 'force-expand-multiline');\n        is_wrap_attributes_force_aligned = (wrap_attributes === 'force-aligned');\n        end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline;\n        extra_liners = (typeof options.extra_liners === 'object') && options.extra_liners ?\n            options.extra_liners.concat() : (typeof options.extra_liners === 'string') ?\n            options.extra_liners.split(',') : 'head,body,/html'.split(',');\n        eol = options.eol ? options.eol : 'auto';\n\n        if (options.indent_with_tabs) {\n            indent_character = '\\t';\n            indent_size = 1;\n        }\n\n        if (eol === 'auto') {\n            eol = '\\n';\n            if (html_source && lineBreak.test(html_source || '')) {\n                eol = html_source.match(lineBreak)[0];\n            }\n        }\n\n        eol = eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n');\n\n        // HACK: newline parsing inconsistent. This brute force normalizes the input.\n        html_source = html_source.replace(allLineBreaks, '\\n');\n\n        function Parser() {\n\n            this.pos = 0; //Parser position\n            this.token = '';\n            this.current_mode = 'CONTENT'; //reflects the current Parser mode: TAG/CONTENT\n            this.tags = { //An object to hold tags, their position, and their parent-tags, initiated with default values\n                parent: 'parent1',\n                parentcount: 1,\n                parent1: ''\n            };\n            this.tag_type = '';\n            this.token_text = this.last_token = this.last_text = this.token_type = '';\n            this.newlines = 0;\n            this.indent_content = indent_inner_html;\n            this.indent_body_inner_html = indent_body_inner_html;\n            this.indent_head_inner_html = indent_head_inner_html;\n\n            this.Utils = { //Uilities made available to the various functions\n                whitespace: \"\\n\\r\\t \".split(''),\n\n                single_token: options.void_elements || [\n                    // HTLM void elements - aka self-closing tags - aka singletons\n                    // https://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\n                    'area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'keygen',\n                    'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr',\n                    // NOTE: Optional tags - are not understood.\n                    // https://www.w3.org/TR/html5/syntax.html#optional-tags\n                    // The rules for optional tags are too complex for a simple list\n                    // Also, the content of these tags should still be indented in many cases.\n                    // 'li' is a good exmple.\n\n                    // Doctype and xml elements\n                    '!doctype', '?xml',\n                    // ?php tag\n                    '?php',\n                    // other tags that were in this list, keeping just in case\n                    'basefont', 'isindex'\n                ],\n                extra_liners: extra_liners, //for tags that need a line of whitespace before them\n                in_array: function(what, arr) {\n                    for (var i = 0; i < arr.length; i++) {\n                        if (what === arr[i]) {\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n            };\n\n            // Return true if the given text is composed entirely of whitespace.\n            this.is_whitespace = function(text) {\n                for (var n = 0; n < text.length; n++) {\n                    if (!this.Utils.in_array(text.charAt(n), this.Utils.whitespace)) {\n                        return false;\n                    }\n                }\n                return true;\n            };\n\n            this.traverse_whitespace = function() {\n                var input_char = '';\n\n                input_char = this.input.charAt(this.pos);\n                if (this.Utils.in_array(input_char, this.Utils.whitespace)) {\n                    this.newlines = 0;\n                    while (this.Utils.in_array(input_char, this.Utils.whitespace)) {\n                        if (preserve_newlines && input_char === '\\n' && this.newlines <= max_preserve_newlines) {\n                            this.newlines += 1;\n                        }\n\n                        this.pos++;\n                        input_char = this.input.charAt(this.pos);\n                    }\n                    return true;\n                }\n                return false;\n            };\n\n            // Append a space to the given content (string array) or, if we are\n            // at the wrap_line_length, append a newline/indentation.\n            // return true if a newline was added, false if a space was added\n            this.space_or_wrap = function(content) {\n                if (this.line_char_count >= this.wrap_line_length) { //insert a line when the wrap_line_length is reached\n                    this.print_newline(false, content);\n                    this.print_indentation(content);\n                    return true;\n                } else {\n                    this.line_char_count++;\n                    content.push(' ');\n                    return false;\n                }\n            };\n\n            this.get_content = function() { //function to capture regular content between tags\n                var input_char = '',\n                    content = [],\n                    handlebarsStarted = 0;\n\n                while (this.input.charAt(this.pos) !== '<' || handlebarsStarted === 2) {\n                    if (this.pos >= this.input.length) {\n                        return content.length ? content.join('') : ['', 'TK_EOF'];\n                    }\n\n                    if (handlebarsStarted < 2 && this.traverse_whitespace()) {\n                        this.space_or_wrap(content);\n                        continue;\n                    }\n\n                    input_char = this.input.charAt(this.pos);\n\n                    if (indent_handlebars) {\n                        if (input_char === '{') {\n                            handlebarsStarted += 1;\n                        } else if (handlebarsStarted < 2) {\n                            handlebarsStarted = 0;\n                        }\n\n                        if (input_char === '}' && handlebarsStarted > 0) {\n                            if (handlebarsStarted-- === 0) {\n                                break;\n                            }\n                        }\n                        // Handlebars parsing is complicated.\n                        // {{#foo}} and {{/foo}} are formatted tags.\n                        // {{something}} should get treated as content, except:\n                        // {{else}} specifically behaves like {{#if}} and {{/if}}\n                        var peek3 = this.input.substr(this.pos, 3);\n                        if (peek3 === '{{#' || peek3 === '{{/') {\n                            // These are tags and not content.\n                            break;\n                        } else if (peek3 === '{{!') {\n                            return [this.get_tag(), 'TK_TAG_HANDLEBARS_COMMENT'];\n                        } else if (this.input.substr(this.pos, 2) === '{{') {\n                            if (this.get_tag(true) === '{{else}}') {\n                                break;\n                            }\n                        }\n                    }\n\n                    this.pos++;\n                    this.line_char_count++;\n                    content.push(input_char); //letter at-a-time (or string) inserted to an array\n                }\n                return content.length ? content.join('') : '';\n            };\n\n            this.get_contents_to = function(name) { //get the full content of a script or style to pass to js_beautify\n                if (this.pos === this.input.length) {\n                    return ['', 'TK_EOF'];\n                }\n                var content = '';\n                var reg_match = new RegExp('</' + name + '\\\\s*>', 'igm');\n                reg_match.lastIndex = this.pos;\n                var reg_array = reg_match.exec(this.input);\n                var end_script = reg_array ? reg_array.index : this.input.length; //absolute end of script\n                if (this.pos < end_script) { //get everything in between the script tags\n                    content = this.input.substring(this.pos, end_script);\n                    this.pos = end_script;\n                }\n                return content;\n            };\n\n            this.record_tag = function(tag) { //function to record a tag and its parent in this.tags Object\n                if (this.tags[tag + 'count']) { //check for the existence of this tag type\n                    this.tags[tag + 'count']++;\n                    this.tags[tag + this.tags[tag + 'count']] = this.indent_level; //and record the present indent level\n                } else { //otherwise initialize this tag type\n                    this.tags[tag + 'count'] = 1;\n                    this.tags[tag + this.tags[tag + 'count']] = this.indent_level; //and record the present indent level\n                }\n                this.tags[tag + this.tags[tag + 'count'] + 'parent'] = this.tags.parent; //set the parent (i.e. in the case of a div this.tags.div1parent)\n                this.tags.parent = tag + this.tags[tag + 'count']; //and make this the current parent (i.e. in the case of a div 'div1')\n            };\n\n            this.retrieve_tag = function(tag) { //function to retrieve the opening tag to the corresponding closer\n                if (this.tags[tag + 'count']) { //if the openener is not in the Object we ignore it\n                    var temp_parent = this.tags.parent; //check to see if it's a closable tag.\n                    while (temp_parent) { //till we reach '' (the initial value);\n                        if (tag + this.tags[tag + 'count'] === temp_parent) { //if this is it use it\n                            break;\n                        }\n                        temp_parent = this.tags[temp_parent + 'parent']; //otherwise keep on climbing up the DOM Tree\n                    }\n                    if (temp_parent) { //if we caught something\n                        this.indent_level = this.tags[tag + this.tags[tag + 'count']]; //set the indent_level accordingly\n                        this.tags.parent = this.tags[temp_parent + 'parent']; //and set the current parent\n                    }\n                    delete this.tags[tag + this.tags[tag + 'count'] + 'parent']; //delete the closed tags parent reference...\n                    delete this.tags[tag + this.tags[tag + 'count']]; //...and the tag itself\n                    if (this.tags[tag + 'count'] === 1) {\n                        delete this.tags[tag + 'count'];\n                    } else {\n                        this.tags[tag + 'count']--;\n                    }\n                }\n            };\n\n            this.indent_to_tag = function(tag) {\n                // Match the indentation level to the last use of this tag, but don't remove it.\n                if (!this.tags[tag + 'count']) {\n                    return;\n                }\n                var temp_parent = this.tags.parent;\n                while (temp_parent) {\n                    if (tag + this.tags[tag + 'count'] === temp_parent) {\n                        break;\n                    }\n                    temp_parent = this.tags[temp_parent + 'parent'];\n                }\n                if (temp_parent) {\n                    this.indent_level = this.tags[tag + this.tags[tag + 'count']];\n                }\n            };\n\n            this.get_tag = function(peek) { //function to get a full tag and parse its type\n                var input_char = '',\n                    content = [],\n                    comment = '',\n                    space = false,\n                    first_attr = true,\n                    has_wrapped_attrs = false,\n                    tag_start, tag_end,\n                    tag_start_char,\n                    orig_pos = this.pos,\n                    orig_line_char_count = this.line_char_count,\n                    is_tag_closed = false,\n                    tail;\n\n                peek = peek !== undefined ? peek : false;\n\n                do {\n                    if (this.pos >= this.input.length) {\n                        if (peek) {\n                            this.pos = orig_pos;\n                            this.line_char_count = orig_line_char_count;\n                        }\n                        return content.length ? content.join('') : ['', 'TK_EOF'];\n                    }\n\n                    input_char = this.input.charAt(this.pos);\n                    this.pos++;\n\n                    if (this.Utils.in_array(input_char, this.Utils.whitespace)) { //don't want to insert unnecessary space\n                        space = true;\n                        continue;\n                    }\n\n                    if (input_char === \"'\" || input_char === '\"') {\n                        input_char += this.get_unformatted(input_char);\n                        space = true;\n                    }\n\n                    if (input_char === '=') { //no space before =\n                        space = false;\n                    }\n                    tail = this.input.substr(this.pos - 1);\n                    if (is_wrap_attributes_force_expand_multiline && has_wrapped_attrs && !is_tag_closed && (input_char === '>' || input_char === '/')) {\n                        if (tail.match(/^\\/?\\s*>/)) {\n                            space = false;\n                            is_tag_closed = true;\n                            this.print_newline(false, content);\n                            this.print_indentation(content);\n                        }\n                    }\n                    if (content.length && content[content.length - 1] !== '=' && input_char !== '>' && space) {\n                        //no space after = or before >\n                        var wrapped = this.space_or_wrap(content);\n                        var indentAttrs = wrapped && input_char !== '/' && !is_wrap_attributes_force;\n                        space = false;\n\n                        if (is_wrap_attributes_force && input_char !== '/') {\n                            var force_first_attr_wrap = false;\n                            if (is_wrap_attributes_force_expand_multiline && first_attr) {\n                                var is_only_attribute = tail.match(/^\\S*(=\"([^\"]|\\\\\")*\")?\\s*\\/?\\s*>/) !== null;\n                                force_first_attr_wrap = !is_only_attribute;\n                            }\n                            if (!first_attr || force_first_attr_wrap) {\n                                this.print_newline(false, content);\n                                this.print_indentation(content);\n                                indentAttrs = true;\n                            }\n                        }\n                        if (indentAttrs) {\n                            has_wrapped_attrs = true;\n\n                            //indent attributes an auto, forced, or forced-align line-wrap\n                            var alignment_size = wrap_attributes_indent_size;\n                            if (is_wrap_attributes_force_aligned) {\n                                alignment_size = content.indexOf(' ') + 1;\n                            }\n\n                            for (var count = 0; count < alignment_size; count++) {\n                                // only ever further indent with spaces since we're trying to align characters\n                                content.push(' ');\n                            }\n                        }\n                        if (first_attr) {\n                            for (var i = 0; i < content.length; i++) {\n                                if (content[i] === ' ') {\n                                    first_attr = false;\n                                    break;\n                                }\n                            }\n                        }\n                    }\n\n                    if (indent_handlebars && tag_start_char === '<') {\n                        // When inside an angle-bracket tag, put spaces around\n                        // handlebars not inside of strings.\n                        if ((input_char + this.input.charAt(this.pos)) === '{{') {\n                            input_char += this.get_unformatted('}}');\n                            if (content.length && content[content.length - 1] !== ' ' && content[content.length - 1] !== '<') {\n                                input_char = ' ' + input_char;\n                            }\n                            space = true;\n                        }\n                    }\n\n                    if (input_char === '<' && !tag_start_char) {\n                        tag_start = this.pos - 1;\n                        tag_start_char = '<';\n                    }\n\n                    if (indent_handlebars && !tag_start_char) {\n                        if (content.length >= 2 && content[content.length - 1] === '{' && content[content.length - 2] === '{') {\n                            if (input_char === '#' || input_char === '/' || input_char === '!') {\n                                tag_start = this.pos - 3;\n                            } else {\n                                tag_start = this.pos - 2;\n                            }\n                            tag_start_char = '{';\n                        }\n                    }\n\n                    this.line_char_count++;\n                    content.push(input_char); //inserts character at-a-time (or string)\n\n                    if (content[1] && (content[1] === '!' || content[1] === '?' || content[1] === '%')) { //if we're in a comment, do something special\n                        // We treat all comments as literals, even more than preformatted tags\n                        // we just look for the appropriate close tag\n                        content = [this.get_comment(tag_start)];\n                        break;\n                    }\n\n                    if (indent_handlebars && content[1] && content[1] === '{' && content[2] && content[2] === '!') { //if we're in a comment, do something special\n                        // We treat all comments as literals, even more than preformatted tags\n                        // we just look for the appropriate close tag\n                        content = [this.get_comment(tag_start)];\n                        break;\n                    }\n\n                    if (indent_handlebars && tag_start_char === '{' && content.length > 2 && content[content.length - 2] === '}' && content[content.length - 1] === '}') {\n                        break;\n                    }\n                } while (input_char !== '>');\n\n                var tag_complete = content.join('');\n                var tag_index;\n                var tag_offset;\n\n                // must check for space first otherwise the tag could have the first attribute included, and\n                // then not un-indent correctly\n                if (tag_complete.indexOf(' ') !== -1) { //if there's whitespace, thats where the tag name ends\n                    tag_index = tag_complete.indexOf(' ');\n                } else if (tag_complete.indexOf('\\n') !== -1) { //if there's a line break, thats where the tag name ends\n                    tag_index = tag_complete.indexOf('\\n');\n                } else if (tag_complete.charAt(0) === '{') {\n                    tag_index = tag_complete.indexOf('}');\n                } else { //otherwise go with the tag ending\n                    tag_index = tag_complete.indexOf('>');\n                }\n                if (tag_complete.charAt(0) === '<' || !indent_handlebars) {\n                    tag_offset = 1;\n                } else {\n                    tag_offset = tag_complete.charAt(2) === '#' ? 3 : 2;\n                }\n                var tag_check = tag_complete.substring(tag_offset, tag_index).toLowerCase();\n                if (tag_complete.charAt(tag_complete.length - 2) === '/' ||\n                    this.Utils.in_array(tag_check, this.Utils.single_token)) { //if this tag name is a single tag type (either in the list or has a closing /)\n                    if (!peek) {\n                        this.tag_type = 'SINGLE';\n                    }\n                } else if (indent_handlebars && tag_complete.charAt(0) === '{' && tag_check === 'else') {\n                    if (!peek) {\n                        this.indent_to_tag('if');\n                        this.tag_type = 'HANDLEBARS_ELSE';\n                        this.indent_content = true;\n                        this.traverse_whitespace();\n                    }\n                } else if (this.is_unformatted(tag_check, unformatted) ||\n                    this.is_unformatted(tag_check, content_unformatted)) {\n                    // do not reformat the \"unformatted\" or \"content_unformatted\" tags\n                    comment = this.get_unformatted('</' + tag_check + '>', tag_complete); //...delegate to get_unformatted function\n                    content.push(comment);\n                    tag_end = this.pos - 1;\n                    this.tag_type = 'SINGLE';\n                } else if (tag_check === 'script' &&\n                    (tag_complete.search('type') === -1 ||\n                        (tag_complete.search('type') > -1 &&\n                            tag_complete.search(/\\b(text|application|dojo)\\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\\+)?json|method|aspect)/) > -1))) {\n                    if (!peek) {\n                        this.record_tag(tag_check);\n                        this.tag_type = 'SCRIPT';\n                    }\n                } else if (tag_check === 'style' &&\n                    (tag_complete.search('type') === -1 ||\n                        (tag_complete.search('type') > -1 && tag_complete.search('text/css') > -1))) {\n                    if (!peek) {\n                        this.record_tag(tag_check);\n                        this.tag_type = 'STYLE';\n                    }\n                } else if (tag_check.charAt(0) === '!') { //peek for <! comment\n                    // for comments content is already correct.\n                    if (!peek) {\n                        this.tag_type = 'SINGLE';\n                        this.traverse_whitespace();\n                    }\n                } else if (!peek) {\n                    if (tag_check.charAt(0) === '/') { //this tag is a double tag so check for tag-ending\n                        this.retrieve_tag(tag_check.substring(1)); //remove it and all ancestors\n                        this.tag_type = 'END';\n                    } else { //otherwise it's a start-tag\n                        this.record_tag(tag_check); //push it on the tag stack\n                        if (tag_check.toLowerCase() !== 'html') {\n                            this.indent_content = true;\n                        }\n                        this.tag_type = 'START';\n                    }\n\n                    // Allow preserving of newlines after a start or end tag\n                    if (this.traverse_whitespace()) {\n                        this.space_or_wrap(content);\n                    }\n\n                    if (this.Utils.in_array(tag_check, this.Utils.extra_liners)) { //check if this double needs an extra line\n                        this.print_newline(false, this.output);\n                        if (this.output.length && this.output[this.output.length - 2] !== '\\n') {\n                            this.print_newline(true, this.output);\n                        }\n                    }\n                }\n\n                if (peek) {\n                    this.pos = orig_pos;\n                    this.line_char_count = orig_line_char_count;\n                }\n\n                return content.join(''); //returns fully formatted tag\n            };\n\n            this.get_comment = function(start_pos) { //function to return comment content in its entirety\n                // this is will have very poor perf, but will work for now.\n                var comment = '',\n                    delimiter = '>',\n                    matched = false;\n\n                this.pos = start_pos;\n                var input_char = this.input.charAt(this.pos);\n                this.pos++;\n\n                while (this.pos <= this.input.length) {\n                    comment += input_char;\n\n                    // only need to check for the delimiter if the last chars match\n                    if (comment.charAt(comment.length - 1) === delimiter.charAt(delimiter.length - 1) &&\n                        comment.indexOf(delimiter) !== -1) {\n                        break;\n                    }\n\n                    // only need to search for custom delimiter for the first few characters\n                    if (!matched && comment.length < 10) {\n                        if (comment.indexOf('<![if') === 0) { //peek for <![if conditional comment\n                            delimiter = '<![endif]>';\n                            matched = true;\n                        } else if (comment.indexOf('<![cdata[') === 0) { //if it's a <[cdata[ comment...\n                            delimiter = ']]>';\n                            matched = true;\n                        } else if (comment.indexOf('<![') === 0) { // some other ![ comment? ...\n                            delimiter = ']>';\n                            matched = true;\n                        } else if (comment.indexOf('<!--') === 0) { // <!-- comment ...\n                            delimiter = '-->';\n                            matched = true;\n                        } else if (comment.indexOf('{{!--') === 0) { // {{!-- handlebars comment\n                            delimiter = '--}}';\n                            matched = true;\n                        } else if (comment.indexOf('{{!') === 0) { // {{! handlebars comment\n                            if (comment.length === 5 && comment.indexOf('{{!--') === -1) {\n                                delimiter = '}}';\n                                matched = true;\n                            }\n                        } else if (comment.indexOf('<?') === 0) { // {{! handlebars comment\n                            delimiter = '?>';\n                            matched = true;\n                        } else if (comment.indexOf('<%') === 0) { // {{! handlebars comment\n                            delimiter = '%>';\n                            matched = true;\n                        }\n                    }\n\n                    input_char = this.input.charAt(this.pos);\n                    this.pos++;\n                }\n\n                return comment;\n            };\n\n            function tokenMatcher(delimiter) {\n                var token = '';\n\n                var add = function(str) {\n                    var newToken = token + str.toLowerCase();\n                    token = newToken.length <= delimiter.length ? newToken : newToken.substr(newToken.length - delimiter.length, delimiter.length);\n                };\n\n                var doesNotMatch = function() {\n                    return token.indexOf(delimiter) === -1;\n                };\n\n                return {\n                    add: add,\n                    doesNotMatch: doesNotMatch\n                };\n            }\n\n            this.get_unformatted = function(delimiter, orig_tag) { //function to return unformatted content in its entirety\n                if (orig_tag && orig_tag.toLowerCase().indexOf(delimiter) !== -1) {\n                    return '';\n                }\n                var input_char = '';\n                var content = '';\n                var space = true;\n\n                var delimiterMatcher = tokenMatcher(delimiter);\n\n                do {\n\n                    if (this.pos >= this.input.length) {\n                        return content;\n                    }\n\n                    input_char = this.input.charAt(this.pos);\n                    this.pos++;\n\n                    if (this.Utils.in_array(input_char, this.Utils.whitespace)) {\n                        if (!space) {\n                            this.line_char_count--;\n                            continue;\n                        }\n                        if (input_char === '\\n' || input_char === '\\r') {\n                            content += '\\n';\n                            /*  Don't change tab indention for unformatted blocks.  If using code for html editing, this will greatly affect <pre> tags if they are specified in the 'unformatted array'\n                for (var i=0; i<this.indent_level; i++) {\n                  content += this.indent_string;\n                }\n                space = false; //...and make sure other indentation is erased\n                */\n                            this.line_char_count = 0;\n                            continue;\n                        }\n                    }\n                    content += input_char;\n                    delimiterMatcher.add(input_char);\n                    this.line_char_count++;\n                    space = true;\n\n                    if (indent_handlebars && input_char === '{' && content.length && content.charAt(content.length - 2) === '{') {\n                        // Handlebars expressions in strings should also be unformatted.\n                        content += this.get_unformatted('}}');\n                        // Don't consider when stopping for delimiters.\n                    }\n                } while (delimiterMatcher.doesNotMatch());\n\n                return content;\n            };\n\n            this.get_token = function() { //initial handler for token-retrieval\n                var token;\n\n                if (this.last_token === 'TK_TAG_SCRIPT' || this.last_token === 'TK_TAG_STYLE') { //check if we need to format javascript\n                    var type = this.last_token.substr(7);\n                    token = this.get_contents_to(type);\n                    if (typeof token !== 'string') {\n                        return token;\n                    }\n                    return [token, 'TK_' + type];\n                }\n                if (this.current_mode === 'CONTENT') {\n                    token = this.get_content();\n                    if (typeof token !== 'string') {\n                        return token;\n                    } else {\n                        return [token, 'TK_CONTENT'];\n                    }\n                }\n\n                if (this.current_mode === 'TAG') {\n                    token = this.get_tag();\n                    if (typeof token !== 'string') {\n                        return token;\n                    } else {\n                        var tag_name_type = 'TK_TAG_' + this.tag_type;\n                        return [token, tag_name_type];\n                    }\n                }\n            };\n\n            this.get_full_indent = function(level) {\n                level = this.indent_level + level || 0;\n                if (level < 1) {\n                    return '';\n                }\n\n                return Array(level + 1).join(this.indent_string);\n            };\n\n            this.is_unformatted = function(tag_check, unformatted) {\n                //is this an HTML5 block-level link?\n                if (!this.Utils.in_array(tag_check, unformatted)) {\n                    return false;\n                }\n\n                if (tag_check.toLowerCase() !== 'a' || !this.Utils.in_array('a', unformatted)) {\n                    return true;\n                }\n\n                //at this point we have an  tag; is its first child something we want to remain\n                //unformatted?\n                var next_tag = this.get_tag(true /* peek. */ );\n\n                // test next_tag to see if it is just html tag (no external content)\n                var tag = (next_tag || \"\").match(/^\\s*<\\s*\\/?([a-z]*)\\s*[^>]*>\\s*$/);\n\n                // if next_tag comes back but is not an isolated tag, then\n                // let's treat the 'a' tag as having content\n                // and respect the unformatted option\n                if (!tag || this.Utils.in_array(tag[1], unformatted)) {\n                    return true;\n                } else {\n                    return false;\n                }\n            };\n\n            this.printer = function(js_source, indent_character, indent_size, wrap_line_length, brace_style) { //handles input/output and some other printing functions\n\n                this.input = js_source || ''; //gets the input for the Parser\n\n                // HACK: newline parsing inconsistent. This brute force normalizes the input.\n                this.input = this.input.replace(/\\r\\n|[\\r\\u2028\\u2029]/g, '\\n');\n\n                this.output = [];\n                this.indent_character = indent_character;\n                this.indent_string = '';\n                this.indent_size = indent_size;\n                this.brace_style = brace_style;\n                this.indent_level = 0;\n                this.wrap_line_length = wrap_line_length;\n                this.line_char_count = 0; //count to see if wrap_line_length was exceeded\n\n                for (var i = 0; i < this.indent_size; i++) {\n                    this.indent_string += this.indent_character;\n                }\n\n                this.print_newline = function(force, arr) {\n                    this.line_char_count = 0;\n                    if (!arr || !arr.length) {\n                        return;\n                    }\n                    if (force || (arr[arr.length - 1] !== '\\n')) { //we might want the extra line\n                        if ((arr[arr.length - 1] !== '\\n')) {\n                            arr[arr.length - 1] = rtrim(arr[arr.length - 1]);\n                        }\n                        arr.push('\\n');\n                    }\n                };\n\n                this.print_indentation = function(arr) {\n                    for (var i = 0; i < this.indent_level; i++) {\n                        arr.push(this.indent_string);\n                        this.line_char_count += this.indent_string.length;\n                    }\n                };\n\n                this.print_token = function(text) {\n                    // Avoid printing initial whitespace.\n                    if (this.is_whitespace(text) && !this.output.length) {\n                        return;\n                    }\n                    if (text || text !== '') {\n                        if (this.output.length && this.output[this.output.length - 1] === '\\n') {\n                            this.print_indentation(this.output);\n                            text = ltrim(text);\n                        }\n                    }\n                    this.print_token_raw(text);\n                };\n\n                this.print_token_raw = function(text) {\n                    // If we are going to print newlines, truncate trailing\n                    // whitespace, as the newlines will represent the space.\n                    if (this.newlines > 0) {\n                        text = rtrim(text);\n                    }\n\n                    if (text && text !== '') {\n                        if (text.length > 1 && text.charAt(text.length - 1) === '\\n') {\n                            // unformatted tags can grab newlines as their last character\n                            this.output.push(text.slice(0, -1));\n                            this.print_newline(false, this.output);\n                        } else {\n                            this.output.push(text);\n                        }\n                    }\n\n                    for (var n = 0; n < this.newlines; n++) {\n                        this.print_newline(n > 0, this.output);\n                    }\n                    this.newlines = 0;\n                };\n\n                this.indent = function() {\n                    this.indent_level++;\n                };\n\n                this.unindent = function() {\n                    if (this.indent_level > 0) {\n                        this.indent_level--;\n                    }\n                };\n            };\n            return this;\n        }\n\n        /*_____________________--------------------_____________________*/\n\n        multi_parser = new Parser(); //wrapping functions Parser\n        multi_parser.printer(html_source, indent_character, indent_size, wrap_line_length, brace_style); //initialize starting values\n\n        while (true) {\n            var t = multi_parser.get_token();\n            multi_parser.token_text = t[0];\n            multi_parser.token_type = t[1];\n\n            if (multi_parser.token_type === 'TK_EOF') {\n                break;\n            }\n\n            switch (multi_parser.token_type) {\n                case 'TK_TAG_START':\n                    multi_parser.print_newline(false, multi_parser.output);\n                    multi_parser.print_token(multi_parser.token_text);\n                    if (multi_parser.indent_content) {\n                        if ((multi_parser.indent_body_inner_html || !multi_parser.token_text.match(/<body(?:.*)>/)) &&\n                            (multi_parser.indent_head_inner_html || !multi_parser.token_text.match(/<head(?:.*)>/))) {\n\n                            multi_parser.indent();\n                        }\n\n                        multi_parser.indent_content = false;\n                    }\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_STYLE':\n                case 'TK_TAG_SCRIPT':\n                    multi_parser.print_newline(false, multi_parser.output);\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_END':\n                    //Print new line only if the tag has no content and has child\n                    if (multi_parser.last_token === 'TK_CONTENT' && multi_parser.last_text === '') {\n                        var tag_name = (multi_parser.token_text.match(/\\w+/) || [])[0];\n                        var tag_extracted_from_last_output = null;\n                        if (multi_parser.output.length) {\n                            tag_extracted_from_last_output = multi_parser.output[multi_parser.output.length - 1].match(/(?:<|{{#)\\s*(\\w+)/);\n                        }\n                        if (tag_extracted_from_last_output === null ||\n                            (tag_extracted_from_last_output[1] !== tag_name && !multi_parser.Utils.in_array(tag_extracted_from_last_output[1], unformatted))) {\n                            multi_parser.print_newline(false, multi_parser.output);\n                        }\n                    }\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_SINGLE':\n                    // Don't add a newline before elements that should remain unformatted.\n                    var tag_check = multi_parser.token_text.match(/^\\s*<([a-z-]+)/i);\n                    if (!tag_check || !multi_parser.Utils.in_array(tag_check[1], unformatted)) {\n                        multi_parser.print_newline(false, multi_parser.output);\n                    }\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_HANDLEBARS_ELSE':\n                    // Don't add a newline if opening {{#if}} tag is on the current line\n                    var foundIfOnCurrentLine = false;\n                    for (var lastCheckedOutput = multi_parser.output.length - 1; lastCheckedOutput >= 0; lastCheckedOutput--) {\n                        if (multi_parser.output[lastCheckedOutput] === '\\n') {\n                            break;\n                        } else {\n                            if (multi_parser.output[lastCheckedOutput].match(/{{#if/)) {\n                                foundIfOnCurrentLine = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (!foundIfOnCurrentLine) {\n                        multi_parser.print_newline(false, multi_parser.output);\n                    }\n                    multi_parser.print_token(multi_parser.token_text);\n                    if (multi_parser.indent_content) {\n                        multi_parser.indent();\n                        multi_parser.indent_content = false;\n                    }\n                    multi_parser.current_mode = 'CONTENT';\n                    break;\n                case 'TK_TAG_HANDLEBARS_COMMENT':\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'TAG';\n                    break;\n                case 'TK_CONTENT':\n                    multi_parser.print_token(multi_parser.token_text);\n                    multi_parser.current_mode = 'TAG';\n                    break;\n                case 'TK_STYLE':\n                case 'TK_SCRIPT':\n                    if (multi_parser.token_text !== '') {\n                        multi_parser.print_newline(false, multi_parser.output);\n                        var text = multi_parser.token_text,\n                            _beautifier,\n                            script_indent_level = 1;\n                        if (multi_parser.token_type === 'TK_SCRIPT') {\n                            _beautifier = typeof js_beautify === 'function' && js_beautify;\n                        } else if (multi_parser.token_type === 'TK_STYLE') {\n                            _beautifier = typeof css_beautify === 'function' && css_beautify;\n                        }\n\n                        if (options.indent_scripts === \"keep\") {\n                            script_indent_level = 0;\n                        } else if (options.indent_scripts === \"separate\") {\n                            script_indent_level = -multi_parser.indent_level;\n                        }\n\n                        var indentation = multi_parser.get_full_indent(script_indent_level);\n                        if (_beautifier) {\n\n                            // call the Beautifier if avaliable\n                            var Child_options = function() {\n                                this.eol = '\\n';\n                            };\n                            Child_options.prototype = options;\n                            var child_options = new Child_options();\n                            text = _beautifier(text.replace(/^\\s*/, indentation), child_options);\n                        } else {\n                            // simply indent the string otherwise\n                            var white = text.match(/^\\s*/)[0];\n                            var _level = white.match(/[^\\n\\r]*$/)[0].split(multi_parser.indent_string).length - 1;\n                            var reindent = multi_parser.get_full_indent(script_indent_level - _level);\n                            text = text.replace(/^\\s*/, indentation)\n                                .replace(/\\r\\n|\\r|\\n/g, '\\n' + reindent)\n                                .replace(/\\s+$/, '');\n                        }\n                        if (text) {\n                            multi_parser.print_token_raw(text);\n                            multi_parser.print_newline(true, multi_parser.output);\n                        }\n                    }\n                    multi_parser.current_mode = 'TAG';\n                    break;\n                default:\n                    // We should not be getting here but we don't want to drop input on the floor\n                    // Just output the text and move on\n                    if (multi_parser.token_text !== '') {\n                        multi_parser.print_token(multi_parser.token_text);\n                    }\n                    break;\n            }\n            multi_parser.last_token = multi_parser.token_type;\n            multi_parser.last_text = multi_parser.token_text;\n        }\n        var sweet_code = multi_parser.output.join('').replace(/[\\r\\n\\t ]+$/, '');\n\n        // establish end_with_newline\n        if (end_with_newline) {\n            sweet_code += '\\n';\n        }\n\n        if (eol !== '\\n') {\n            sweet_code = sweet_code.replace(/[\\n]/g, eol);\n        }\n\n        return sweet_code;\n    }\n\n    if (typeof define === \"function\" && define.amd) {\n        // Add support for AMD ( https://github.com/amdjs/amdjs-api/wiki/AMD#defineamd-property- )\n        define([\"require\", \"./beautify\", \"./beautify-css\"], function(requireamd) {\n            var js_beautify = requireamd(\"./beautify\");\n            var css_beautify = requireamd(\"./beautify-css\");\n\n            return {\n                html_beautify: function(html_source, options) {\n                    return style_html(html_source, options, js_beautify.js_beautify, css_beautify.css_beautify);\n                }\n            };\n        });\n    } else if (typeof exports !== \"undefined\") {\n        // Add support for CommonJS. Just put this file somewhere on your require.paths\n        // and you will be able to `var html_beautify = require(\"beautify\").html_beautify`.\n        var js_beautify = require('./beautify.js');\n        var css_beautify = require('./beautify-css.js');\n\n        exports.html_beautify = function(html_source, options) {\n            return style_html(html_source, options, js_beautify.js_beautify, css_beautify.css_beautify);\n        };\n    } else if (typeof window !== \"undefined\") {\n        // If we're running a web page and don't have either of the above, add our one global\n        window.html_beautify = function(html_source, options) {\n            return style_html(html_source, options, window.js_beautify, window.css_beautify);\n        };\n    } else if (typeof global !== \"undefined\") {\n        // If we don't even have window, try global.\n        global.html_beautify = function(html_source, options) {\n            return style_html(html_source, options, global.js_beautify, global.css_beautify);\n        };\n    }\n\n}());","'use strict';\n\n/**\n * An editor for displaying Media objects\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass MediaViewer extends Crisp.View {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(this.model instanceof HashBrown.Models.Media === false) {\n            this.model = new HashBrown.Models.Media(this.model);        \n        }\n\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        let mediaSrc = '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + this.model.id + '?width=800&t=' + Date.now();\n\n        return _.div({class: 'editor editor--media'},\n            _.div({class: 'editor__header'},\n                _.span({class: 'editor__header__icon fa fa-file-image-o'}),\n                _.h4({class: 'editor__header__title'},\n                    this.model.name,\n                    _.span({class: 'editor__header__title__appendix'},\n                        this.model.getContentTypeHeader()    \n                    )\n                )\n            ),\n            _.div({class: 'editor__body'},\n                _.if(this.model.isImage(),\n                    _.img({class: 'editor--media__preview', src: mediaSrc})\n                ),\n                _.if(this.model.isVideo(),\n                    _.video({class: 'editor--media__preview', controls: true},\n                        _.source({src: mediaSrc, type: this.model.getContentTypeHeader()})\n                    )\n                ),\n                _.if(this.model.isAudio(),\n                    _.audio({class: 'editor--media__preview', controls: true},\n                        _.source({src: mediaSrc, type: this.model.getContentTypeHeader()})\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = MediaViewer;\n","'use strict';\n\n/**\n * An editor for Users\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass UserEditor extends HashBrown.Views.Modals.Modal {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        params.title = 'Settings for \"' + (params.model.fullName || params.model.username || params.model.email || params.model.id) + '\"';\n        params.actions = [\n            {\n                label: 'Save',\n                onClick: () => { this.onClickSave(); }\n            }\n        ];\n\n        params.autoFetch = false;\n\n        super(params);\n\n        HashBrown.Helpers.RequestHelper.customRequest('get', '/api/server/projects')\n        .then((projects) => {\n            this.projects = projects;\n\n            this.fetch();\n        });\n    }\n    \n    /**\n     * Event: Click save.\n     */\n    onClickSave() {\n        let newUserObject = this.model.getObject();\n\n        if(this.newPassword) {\n            newUserObject.password = this.newPassword;\n        }\n\n        HashBrown.Helpers.RequestHelper.request('post', 'user/' + this.model.id, newUserObject)\n        .then(() => {\n            this.close();\n\n            this.trigger('save', this.model);\n        })\n        .catch(UI.errorModal);\n    }\n     \n    /**\n     * Renders the username editor\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderUserNameEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.username,\n            placeholder: 'Input the username here',\n            onChange: (newValue) => {\n                this.model.username = newValue;\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders the scopes editor\n     *\n     * @param {String} project\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderScopesEditor(project) {\n        return new HashBrown.Views.Widgets.Dropdown({\n            value: this.model.getScopes(project),\n            useMultiple: true,\n            placeholder: '(no scopes)',\n            options: [\n                'connections',\n                'schemas'\n            ],\n            onChange: (newValue) => {\n                this.model.scopes[project] = newValue;\n\n                this.fetch();\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders the full name editor\n     *\n     * @return {HTMLElement} Element\n     */\n    renderFullNameEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.fullName,\n            onChange: (newValue) => {\n                this.model.fullName = newValue;\n            }\n        }).$element;\n    }\n    \n    /**\n     * Renders the email editor\n     *\n     * @return {HTMLElement} Element\n     */\n    renderEmailEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            value: this.model.email,\n            onChange: (newValue) => {\n                this.model.email = newValue;\n            }\n        }).$element;\n    }\n    \n    /**\n     * Renders the password\n     *\n     * @return {HTMLElement} Element\n     */\n    renderPasswordEditor() {\n        let password1;\n        let password2;\n\n        let onChange = () => {\n            let isMatch = password1 == password2;\n            let isLongEnough = password1 && password1.length > 3;\n            let isValid = isMatch && isLongEnough;\n\n            this.$element.find('.modal__footer .widget--button').toggleClass('disabled', !isValid);\n\n            let $passwordWarning = this.$element.find('.editor--user__password-warning');\n\n            if(isValid) {\n                this.newPassword = password1;\n\n                $passwordWarning.hide();\n            \n            } else {\n                $passwordWarning.show();\n                \n                this.newPassword = null;\n\n                if(!isMatch) {\n                    $passwordWarning.html('Passwords do not match');\n                } else if(!isLongEnough) {\n                    $passwordWarning.html('Passwords are too short');\n                }\n            }\n        }\n\n        return _.div({class: 'widget-group'},\n            new HashBrown.Views.Widgets.Input({\n                placeholder: 'Type new password',\n                type: 'password',\n                onChange: (newValue) => {\n                    password1 = newValue;\n\n                    onChange();\n                }\n            }).$element,\n            new HashBrown.Views.Widgets.Input({\n                placeholder: 'Confirm new password',\n                type: 'password',\n                onChange: (newValue) => {\n                    password2 = newValue;\n\n                    onChange();\n                }\n            }).$element\n        );\n    }\n    \n    /**\n     * Renders the admin editor\n     *\n     * @return {HTMLElement} Element\n     */\n    renderAdminEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            type: 'checkbox',\n            value: this.model.isAdmin == true,\n            onChange: (newValue) => {\n                this.model.isAdmin = newValue;\n\n                setTimeout(() => {\n                    this.fetch();\n                }, 300);\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders a single field\n     *\n     * @return {HTMLElement} Element\n     */\n    renderField(label, $content) {\n        return _.div({class: 'widget-group'},\n            _.div({class: 'widget widget--label'},\n                label\n            ),\n            $content\n        );\n    }\n    \n    /**\n     * Renders this editor\n     */\n    renderBody() {\n        return [\n            this.renderField('Username', this.renderUserNameEditor()),\n            this.renderField('Full name', this.renderFullNameEditor()),\n            this.renderField('Email', this.renderEmailEditor()),\n            this.renderField('Password', this.renderPasswordEditor()),\n            _.div({class: 'widget widget--label warning hidden editor--user__password-warning'}),\n\n            _.if(currentUserIsAdmin() && !this.hidePermissions,\n                this.renderField('Is admin', this.renderAdminEditor()),\n\n                _.if(!this.model.isAdmin,\n                    _.div({class: 'widget widget--separator'}, 'Projects'),\n                    _.each(this.projects, (i, project) => {\n                        return _.div({class: 'widget-group'},\n                            new HashBrown.Views.Widgets.Input({\n                                type: 'checkbox',\n                                value: this.model.hasScope(project.id),\n                                onChange: (newValue) => {\n                                    if(newValue) {\n                                        this.model.giveScope(project.id);\n                                    } else {\n                                        this.model.removeScope(project.id);\n                                    }\n                                }\n                            }).$element,\n                            _.div({class: 'widget widget--label'}, project.settings.info.name),\n                            this.renderScopesEditor(project.id)\n                        );\n                    })\n                )\n            )\n        ];\n    }\n}\n\nmodule.exports = UserEditor;\n","'use strict';\n\n// Icons\nlet icons = require('../../icons.json').icons;\n\n/**\n * The editor for schemas\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass SchemaEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n        \n        this.fetch();\n    }\n    \n    /**\n     * Event: Click advanced. Routes to the JSON editor\n     */\n    onClickAdvanced() {\n        location.hash = location.hash.replace('/schemas/', '/schemas/json/');\n    }\n    \n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        if(this.jsonEditor && this.jsonEditor.isValid == false) {\n            return;\n        }\n\n        this.$saveBtn.toggleClass('working', true);\n\n        HashBrown.Helpers.RequestHelper.request('post', 'schemas/' + Crisp.Router.params.id, this.model)\n        .then(() => {\n            this.$saveBtn.toggleClass('working', false);\n        \n            return HashBrown.Helpers.RequestHelper.reloadResource('schemas');\n        })\n        .then(() => {\n            Crisp.View.get('NavbarMain').reload();\n\n            // If id changed, change the hash\n            if(Crisp.Router.params.id != this.model.id) {\n                location.hash = '/schemas/' + this.model.id;\n            }\n        })\n        .catch((e) => {\n            UI.errorModal(e);\n        \n            this.$saveBtn.toggleClass('working', false);\n        });\n    }\n\n    /**\n     * Renders the icon editor\n     *  \n     * @return {Object} element\n     */\n    renderIconEditor() {\n        return _.button({class: 'widget small widget--button fa fa-' + this.getIcon()})\n            .click((e) => {\n                let modal = new HashBrown.Views.Modals.IconModal();\n\n                modal.on('change', (newIcon) => {\n                    this.model.icon = newIcon;\n\n                    e.currentTarget.className = 'widget small widget--button fa fa-' + this.model.icon;\n                });\n            });\n    }\n\n    /**\n     * Renders a single field\n     *\n     * @param {String} label\n     * @param {HTMLElement} content\n     * @param {Boolean} isVertical\n     * @param {Boolean} isLocked\n     *\n     * @return {HTMLElement} Editor element\n     */\n    renderField(label, $content, isVertical, isLocked) {\n        if(!$content) { return; }\n\n        return _.div({class: 'editor__field ' + (isVertical ? 'vertical' : '')},\n            _.div({class: 'editor__field__key'},\n                label\n            ),\n            _.div({class: 'editor__field__value'},\n                _.if(isLocked,\n                    _.input({class: 'editor__field__value__lock', title: 'Only edit this field if you know what you\\'re doing', type: 'checkbox', checked: true})\n                ),\n                $content\n            )\n        );\n    }\n\n    /**\n     * Renders all fields\n     *\n     * @return {Object} element\n     */\n    renderFields() {\n        let id = parseInt(this.model.id);\n\n        let $element = _.div({class: 'editor__body'});\n        \n        $element.empty();\n        \n        $element.append(this.renderField('Id', new HashBrown.Views.Widgets.Input({\n            value: this.model.id,\n            onChange: (newValue) => { this.model.id = newValue; }\n        }).$element, false, true)); \n\n        $element.append(this.renderField('Name', new HashBrown.Views.Widgets.Input({\n            value: this.model.name,\n            onChange: (newValue) => { this.model.name = newValue; }\n        }).$element)); \n\n        $element.append(this.renderField('Icon', this.renderIconEditor()));   \n\n        $element.append(this.renderField('Parent', new HashBrown.Views.Widgets.Dropdown({\n            value: this.model.parentSchemaId,\n            options: resources.schemas,\n            valueKey: 'id',\n            labelKey: 'name',\n            disabledOptions: [ { id: this.model.id, name: this.model.name } ],\n            onChange: (newParent) => {\n                this.model.parentSchemaId = newParent;\n\n                this.fetch();\n            }\n        }).$element));\n        \n\n        return $element;\n    }\n\n    /**\n     * Gets the schema icon\n     *\n     * @returns {String} Icon\n     */\n    getIcon() {\n        if(this.model.icon) {\n            return this.model.icon;\n        }\n\n        if(this.parentSchema && this.parentSchema.icon) {\n            return this.parentSchema.icon;\n        }\n\n        return 'cogs';\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor editor--schema' + (this.model.isLocked ? ' locked' : '')},\n            _.div({class: 'editor__header'},\n                _.span({class: 'editor__header__icon fa fa-' + this.getIcon()}),\n                _.h4({class: 'editor__header__title'}, this.model.name)\n            ),\n            this.renderFields(),\n            _.div({class: 'editor__footer'}, \n                _.div({class: 'editor__footer__buttons'},\n                    _.button({class: 'widget widget--button embedded'},\n                        'Advanced'\n                    ).click(() => { this.onClickAdvanced(); }),\n                    _.if(!this.model.isLocked,\n                        this.$saveBtn = _.button({class: 'widget widget--button editor__footer__buttons__save'},\n                            _.span({class: 'widget--button__text-default'}, 'Save '),\n                            _.span({class: 'widget--button__text-working'}, 'Saving ')\n                        ).click(() => { this.onClickSave(); })\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = SchemaEditor;\n","'use strict';\n\n/**\n * The editor for Content Schemas\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass ContentSchemaEditor extends HashBrown.Views.Editors.SchemaEditor {\n    /**\n     * Gets parent tabs\n     *\n     * @returns {Object} Parent tabs\n     */\n    getParentTabs() {\n        if(!this.parentSchema) {\n            return {};\n        }\n\n        return this.parentSchema.tabs;\n    }\n\n    /**\n     * Gets all tabs\n     *\n     * @returns {Object} All tabs\n     */\n    getAllTabs() {\n        let allTabs = {};\n        let parentTabs = this.getParentTabs();\n\n        for(let tabId in parentTabs) {\n            allTabs[tabId] = parentTabs[tabId];\n        }\n        \n        for(let tabId in this.model.tabs) {\n            allTabs[tabId] = this.model.tabs[tabId];\n        }\n\n        return allTabs;\n    }\n    \n    /**\n     * Gets parent properties\n     *\n     * @param {String} tabId\n     *\n     * @returns {Object} Parent properties\n     */\n    getParentProperties(tabId) {\n        let parentProperties = {};\n        \n        if(!this.parentSchema) { return parentProperties; }\n\n        for(let key in this.parentSchema.fields.properties) {\n            // If a tab is specified, we only want properties in this tab\n            if(tabId && this.parentSchema.fields.properties[key].tabId !== tabId) { continue; }\n\n            parentProperties[key] = this.parentSchema.fields.properties[key];\n        }\n\n        return parentProperties;\n    }\n\n    /**\n     * Renders the editor fields\n     */\n    renderFields() {\n        let $element = super.renderFields();\n\n        // Allowed child Schemas\n        $element.append(this.renderField('Allowed child Schemas', new HashBrown.Views.Widgets.Dropdown({\n            options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('content'),\n            value: this.model.allowedChildSchemas,\n            labelKey: 'name',\n            valueKey: 'id',\n            useMultiple: true,\n            useClearButton: true,\n            useTypeAhead: true,\n            onChange: (newValue) => {\n                this.model.allowedChildSchemas = newValue;\n            }\n        }).$element));\n        \n        // Default tab\n        let defaultTabEditor = new HashBrown.Views.Widgets.Dropdown({\n            options: this.getAllTabs(),\n            useClearButton: true,\n            value: this.model.defaultTabId,\n            onChange: (newValue) => {\n                this.model.defaultTabId = newValue;\n            }\n        });\n\n        if(!this.model.defaultTabId && this.parentSchema) {\n            this.model.defaultTabId = this.parentSchema.defaultTabId;\n        }\n        \n        $element.append(this.renderField('Default tab', defaultTabEditor.$element));\n        \n        // Tabs\n        $element.append(this.renderField('Tabs', new HashBrown.Views.Widgets.Chips({\n            disabledValue: Object.values(this.getParentTabs()),\n            value: Object.values(this.model.tabs),\n            placeholder: 'New tab',\n            onChange: (newValue) => {\n                let newTabs = {};\n\n                for(let tab of newValue) {\n                    newTabs[tab.toLowerCase().replace(/[^a-zA-Z]/g, '')] = tab;\n                }\n                \n                this.model.tabs = newTabs;\n\n                defaultTabEditor.options = this.getAllTabs();\n                defaultTabEditor.fetch();\n\n                renderFieldProperties();\n            }\n        }).$element));\n       \n        // Field properties\n        let $tabs = _.div({class: 'editor--schema__tabs'});\n        let $fieldProperties = _.div({class: 'editor__field'});\n        let $parentFieldProperties = _.div({class: 'editor__field editor--schema__parent-field-properties'});\n        \n        $element.append($tabs);\n        $element.append($parentFieldProperties);\n        $element.append($fieldProperties);\n\n        let renderFieldProperties = () => {\n            // Render tabs\n            if(!this.currentTab) {\n                this.currentTab = Object.keys(this.getAllTabs())[0] || 'meta';\n            }\n       \n            _.append($tabs.empty(),\n                _.each(this.getAllTabs(), (id, name) => {\n                    return _.button({class: 'editor--schema__tab' + (this.currentTab === id ? ' active' : '')}, name)\n                        .click(() => {\n                            this.currentTab = id;\n                    \n                            renderFieldProperties();\n                        });\n                }),\n                _.button({class: 'editor--schema__tab' + (this.currentTab === 'meta' ? ' active' : '')}, 'meta')\n                    .click(() => {\n                        this.currentTab = 'meta';\n                    \n                        renderFieldProperties();\n                    })\n            );\n\n            // Render parent Schema's field properties\n            _.append($parentFieldProperties.empty(),\n                _.if(Object.keys(this.getParentProperties(this.currentTab)).length > 0,\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Parent properties'),\n                        _.div({class: 'editor__field__key__description'}, 'Properties that are inherited and can be changed if you add them to this Schema')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        _.each(this.getParentProperties(this.currentTab), (fieldKey, fieldValue) => {\n                            if(this.model.fields.properties[fieldKey]) { return; }\n\n                            return _.button({class: 'widget widget--button condensed', title: 'Change the \"' + (fieldValue.label || fieldKey) + '\" property for this Schema'}, _.span({class: 'fa fa-plus'}), fieldValue.label || fieldKey)\n                                .click(() => {\n                                    let newProperties = {};\n\n                                    newProperties[fieldKey] = JSON.parse(JSON.stringify(fieldValue));\n\n                                    for(let key in this.model.fields.properties) {\n                                        newProperties[key] = this.model.fields.properties[key];\n                                    }\n\n                                    this.model.fields.properties = newProperties;\n\n                                    renderFieldProperties();\n                                });\n                        })\n                    )\n                )\n            );\n\n            // Render this Schema's fields\n            _.append($fieldProperties.empty(),\n                _.div({class: 'editor__field__key'},\n                    _.div({class: 'editor__field__key__label'}, 'Properties'),\n                    _.div({class: 'editor__field__key__description'}, 'This Schema\\'s own properties'),\n                    _.div({class: 'editor__field__key__actions'},\n                        _.button({class: 'editor__field__key__action editor__field__key__action--sort'})\n                            .click((e) => {\n                                HashBrown.Helpers.UIHelper.fieldSortableObject(\n                                    this.model.fields.properties,\n                                    $(e.currentTarget).parents('.editor__field')[0],\n                                    (newProperties) => {\n                                        this.model.fields.properties = newProperties;\n                                    }\n                                );\n                            })\n                    )\n                ),\n                _.div({class: 'editor__field__value segmented'},\n                    _.each(this.model.fields.properties, (fieldKey, fieldValue) => {\n                        if(!fieldValue) { return; }\n\n                        let isValidTab = !!this.getAllTabs()[fieldValue.tabId];\n\n                        if(isValidTab && fieldValue.tabId !== this.currentTab) { return; }\n                        if(!isValidTab && this.currentTab !== 'meta') { return; }\n\n                        let $field = _.div({class: 'editor__field'});\n\n                        // Sanity check\n                        fieldValue.config = fieldValue.config || {};\n                        fieldValue.schemaId = fieldValue.schemaId || 'array';\n\n                        let renderField = () => {\n                            _.append($field.empty(),\n                                _.div({class: 'editor__field__sort-key'},\n                                    fieldKey\n                                ),\n                                _.div({class: 'editor__field__value'},\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Tab'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Dropdown({\n                                                useClearButton: true,\n                                                options: this.getAllTabs(),\n                                                value: fieldValue.tabId,\n                                                onChange: (newValue) => {\n                                                    fieldValue.tabId = newValue;\n\n                                                    renderFieldProperties();\n                                                }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Key'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Input({\n                                                type: 'text',\n                                                placeholder: 'A variable name, e.g. \"myField\"',\n                                                tooltip: 'The field variable name',\n                                                value: fieldKey,\n                                                onChange: (newKey) => {\n                                                    if(!newKey) { return; }\n\n                                                    let newProperties = {};\n\n                                                    // Insert the changed key into the correct place in the object\n                                                    for(let key in this.model.fields.properties) {\n                                                        if(key === fieldKey) {\n                                                            newProperties[newKey] = this.model.fields.properties[fieldKey];\n                                                        \n                                                        } else {\n                                                            newProperties[key] = this.model.fields.properties[key];\n\n                                                        }\n                                                    }\n\n                                                    // Change internal reference to new key\n                                                    fieldKey = newKey;\n\n                                                    // Reassign the properties object\n                                                    this.model.fields.properties = newProperties;\n\n                                                    // Update the sort key\n                                                    $field.find('.editor__field__sort-key').html(fieldKey);\n                                                }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Label'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Input({\n                                                type: 'text',\n                                                placeholder: 'A label, e.g. \"My field\"',\n                                                tooltip: 'The field label',\n                                                value: fieldValue.label,\n                                                onChange: (newValue) => { fieldValue.label = newValue; }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Description'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Input({\n                                                type: 'text',\n                                                placeholder: 'A description',\n                                                tooltip: 'The field description',\n                                                value: fieldValue.description,\n                                                onChange: (newValue) => { fieldValue.description = newValue; }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Multilingual'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Input({\n                                                type: 'checkbox',\n                                                tooltip: 'Whether or not this field should support multiple languages',\n                                                value: fieldValue.multilingual || false,\n                                                onChange: (newValue) => { fieldValue.multilingual = newValue; }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.div({class: 'editor__field'},\n                                        _.div({class: 'editor__field__key'}, 'Schema'),\n                                        _.div({class: 'editor__field__value'},\n                                            new HashBrown.Views.Widgets.Dropdown({\n                                                useTypeAhead: true,\n                                                options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('field'),\n                                                value: fieldValue.schemaId,\n                                                labelKey: 'name',\n                                                valueKey: 'id',\n                                                onChange: (newValue) => {\n                                                    fieldValue.schemaId = newValue;\n\n                                                    renderField();\n                                                }\n                                            }).$element\n                                        )\n                                    ),\n                                    _.do(() => {\n                                        let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(fieldValue.schemaId);\n\n                                        if(!schema) { return; }\n\n                                        let editor = HashBrown.Views.Editors.FieldEditors[schema.editorId];\n\n                                        if(!editor) { return; }\n\n                                        fieldValue.config = fieldValue.config || {};\n\n                                        return editor.renderConfigEditor(fieldValue.config);\n                                    })\n                                ),\n                                _.div({class: 'editor__field__actions'},\n                                    _.button({class: 'editor__field__action editor__field__action--remove', title: 'Remove field'})\n                                        .click(() => {\n                                            delete this.model.fields.properties[fieldKey];\n\n                                            renderFieldProperties();\n                                        })\n                                )\n                            );\n                        };\n\n                        renderField();\n\n                        return $field;\n                    }),\n                    _.button({title: 'Add a Content property', class: 'editor__field__add widget widget--button round fa fa-plus'})\n                        .click(() => {\n                            if(this.model.fields.properties.newField) { return; }\n\n                            this.model.fields.properties.newField = {\n                                label: 'New field',\n                                schemaId: 'array',\n                                tabId: this.currentTab\n\n                            };\n\n                            renderFieldProperties();\n                        })\n                )\n            );\n        };\n\n        renderFieldProperties();\n\n        return $element;\n    }\n}\n\nmodule.exports = ContentSchemaEditor;\n","'use strict';\n\n/**\n * The editor for field Schemas\n *\n * @memberof HashBrown.Client.Views.Editors\n */\nclass FieldSchemaEditor extends HashBrown.Views.Editors.SchemaEditor {\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(!this.model.editorId && this.parentSchema) { \n            this.model.editorId = this.parentSchema.editorId;\n        }\n    }\n\n    /**\n     * Renders the field config editor\n     *\n     * @returns {HTMLElement} Editor element\n     */\n    renderFieldConfigEditor() {\n        let editor = HashBrown.Views.Editors.FieldEditors[this.model.editorId];\n\n        if(!editor) { return; }\n\n        return _.div({class: 'config'},\n            editor.renderConfigEditor(this.model.config, this.model.id)\n        );\n    }\n\n    /**\n     * Renders the editor fields\n     */\n    renderFields() {\n        let $element = super.renderFields();\n        \n        $element.append(this.renderField('Field editor', new HashBrown.Views.Widgets.Dropdown({\n            useTypeahead: true,\n            value: this.model.editorId,\n            options: HashBrown.Views.Editors.FieldEditors,\n            valueKey: 'name',\n            labelKey: 'name',\n            onChange: (newEditor) => {\n                this.model.editorId = newEditor;\n\n                this.fetch();\n            }\n        }).$element));\n        \n        $element.append(this.renderField('Config', this.renderFieldConfigEditor(), true));\n\n        return $element;\n    }\n}\n\nmodule.exports = FieldSchemaEditor;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Editors.FieldEditors\n */\nnamespace('Views.Editors.FieldEditors')\n.add(require('./FieldEditor'))\n.add(require('./ArrayEditor'))\n.add(require('./BooleanEditor'))\n.add(require('./ContentReferenceEditor'))\n.add(require('./ContentSchemaReferenceEditor'))\n.add(require('./DateEditor'))\n.add(require('./DropdownEditor'))\n.add(require('./LanguageEditor'))\n.add(require('./MediaReferenceEditor'))\n.add(require('./NumberEditor'))\n.add(require('./ResourceReferenceEditor'))\n.add(require('./RichTextEditor'))\n.add(require('./StringEditor'))\n.add(require('./StructEditor'))\n.add(require('./TagsEditor'))\n.add(require('./UrlEditor'));\n","'use strict';\n\n/**\n * The base for all field editors\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass FieldEditor extends Crisp.View {\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        return null;\n    }\n\n    /**\n     * Renders key actions\n     *\n     * @returns {HTMLElement} Actions\n     */\n    renderKeyActions() {}\n\n    /**\n     * Post render\n     */\n    postrender() {\n        if(!this.$keyActions) { return; }\n\n        _.append(this.$keyActions.empty(),\n            this.renderKeyActions()\n        );\n    }\n}\n\nmodule.exports = FieldEditor;\n","'use strict';\n\n/**\n * An array editor for editing a list of other field values\n *\n * @description Example:\n * <pre>\n * {\n *     \"myArray\": {\n *         \"label\": \"My array\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"array\",\n *         \"config\": {\n *             \"allowedSchemas\": [ \"string\", \"mediaReference\", \"myCustomSchema\" ],\n *             \"minItems\": 5,\n *             \"maxItems\": 5\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass ArrayEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n   \n    /**\n     * Render key actions\n     *\n     * @returns {HTMLElement} Actions\n     */\n    renderKeyActions() {\n        if(!this.value || this.value.length < 1 || this.config.useGrid) { return; }\n\n        return [\n            _.button({class: 'editor__field__key__action editor__field__key__action--sort'})\n                .click((e) => {\n                    HashBrown.Helpers.UHashBrown.Helpers.IHelper.fieldSortableArray(\n                        this.value,\n                        $(e.currentTarget).parents('.editor__field')[0],\n                        (newArray) => {\n                            this.value = newArray;\n\n                            this.trigger('change', this.value);\n                        }\n                    );\n                }),\n            _.button({class: 'editor__field__key__action editor__field__key__action--collapse'}, 'Collapse all')\n                .click((e) => {\n                    Array.from(this.element.children).forEach((field) => {\n                        field.classList.toggle('collapsed', true);\n                    });\n                }),\n            _.button({class: 'editor__field__key__action editor__field__key__action--expand'}, 'Expand all')\n                .click((e) => {\n                    Array.from(this.element.children).forEach((field) => {\n                        field.classList.toggle('collapsed', false);\n                    });\n                })\n        ];\n    }\n\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Min items'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'number',\n                        min: 0,\n                        step: 1,\n                        tooltip: 'How many items are required in this array (0 is unlimited)',\n                        value: config.minItems || 0,\n                        onChange: (newValue) => { config.minItems = newValue; }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Max items'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'number',\n                        min: 0,\n                        step: 1,\n                        tooltip: 'How many items are allowed in this array (0 is unlimited)',\n                        value: config.maxItems || 0,\n                        onChange: (newValue) => { config.maxItems = newValue; }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Allowed Schemas'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Dropdown({\n                        useMultiple: true,\n                        useTypeAhead: true,\n                        labelKey: 'name',\n                        valueKey: 'id',\n                        value: config.allowedSchemas,\n                        useClearButton: true,\n                        options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('field'),\n                        onChange: (newValue) => { config.allowedSchemas = newValue; }\n                    }).$element\n                )\n            )\n        ];\n    }\n\n    /**\n     * Sanity check\n     */\n    sanityCheck() {\n        // The value was null\n        if(!this.value) { this.value = []; }\n\n        // Config\n        this.config = this.config || {};\n\n        // Sanity check for allowed Schemas array\n        this.config.allowedSchemas = this.config.allowedSchemas || [];\n        \n        // The value was not an array, recover the items\n        if(!Array.isArray(this.value)) {\n            debug.log('Restructuring array from old format...', this);\n\n            // If this value isn't using the old system, we can't recover it\n            if(!Array.isArray(this.value.items) || !Array.isArray(this.value.schemaBindings)) {\n                return UI.errorModal(new Error('The type \"' + typeof this.value + '\" of the value is incorrect or corrupted'));\n            }\n\n            let newItems = [];\n\n            // Restructure \"items\" array into objects\n            for(let i in this.value.items) {\n                newItems[i] = {\n                    value: this.value.items[i]\n                };\n            \n                // Try to get the Schema id\n                if(this.value.schemaBindings[i]) {\n                    newItems[i].schemaId = this.value.schemaBindings[i];\n\n                // If we couldn't find it, just use the first allowed Schema\n                } else {\n                    newItems[i].schemaId = this.config.allowedSchemas[0];\n\n                }\n            }\n\n            this.value = newItems;\n    \n            setTimeout(() => {\n                this.trigger('silentchange', this.value);\n            }, 500);\n        }\n\n        // The value was below the required amount\n        if(this.value.length < this.config.minItems) {\n            let diff = this.config.minItems - this.value.length;\n\n            for(let i = 0; i < diff; i++) {\n                this.value.push({ value: null, schemaId: null });\n            }\n        }\n\n        // The value was above the required amount\n        if(this.value.length > this.config.maxItems) {\n            for(let i = this.config.maxItems; i < this.value.length; i++) {\n                delete this.value[i];\n            }\n        }\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        this.sanityCheck();\n    }\n\n    /**\n     * Gets the label of an item\n     *\n     * @param {Object} item\n     * @param {Schema} schema\n     *\n     * @return {String} Label\n     */\n    getItemLabel(item, schema) {\n        if(schema.config) {\n            if(schema.config.label && item.value && item.value[schema.config.label]) {\n                return item.value[schema.config.label];\n            }\n        }\n\n        if(item.value !== null && item.value !== undefined && typeof item.value === 'string' || typeof item.value === 'number') {\n            return item.value;\n        }\n\n        return schema.name;\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value segmented ' + (this.config.useGrid ? 'grid' : '')},\n            _.each(this.value, (i, item) => {\n                // Render field\n                let $field = _.div({class: 'editor__field'});\n\n                let renderField = () => {\n                    let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(item.schemaId);\n\n                    // Schema could not be found, assign first allowed Schema\n                    if(!schema || this.config.allowedSchemas.indexOf(item.schemaId) < 0) {\n                        item.schemaId = this.config.allowedSchemas[0];\n                    \n                        schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(item.schemaId);\n                    }\n\n                    if(!schema) {\n                        UI.errorModal(new Error('Item #' + i + ' has no available Schemas'));\n                        $field = null;\n                        return;\n                    }\n\n                    // Obtain the field editor\n                    if(schema.editorId.indexOf('Editor') < 0) {\n                        schema.editorId = schema.editorId[0].toUpperCase() + schema.editorId.substring(1) + 'Editor';\n                    }\n                    \n                    let editorClass = HashBrown.Views.Editors.FieldEditors[schema.editorId];\n\n                    if(!editorClass) {\n                        UI.errorModal(new Error('The field editor \"' + schema.editorId + '\" for Schema \"' + schema.name + '\" was not found'));    \n                        $field = null;\n                        return;\n                    }\n                    \n                    // Perform sanity check on item value\n                    item.value = HashBrown.Helpers.ContentHelper.fieldSanityCheck(item.value, schema);\n\n                    // Init the field editor\n                    let editorInstance = new editorClass({\n                        value: item.value,\n                        config: schema.config,\n                        schema: schema\n                    });\n\n                    // Hook up the change event\n                    editorInstance.on('change', (newValue) => {\n                        item.value = newValue;\n                    });\n                    \n                    editorInstance.on('silentchange', (newValue) => {\n                        item.value = newValue;\n                    });\n\n                    // Render Schema picker\n                    if(this.config.allowedSchemas.length > 1) {\n                        editorInstance.$element.prepend(\n                            _.div({class: 'editor__field'},\n                                _.div({class: 'editor__field__key'}, 'Schema'),\n                                _.div({class: 'editor__field__value'},\n                                    new HashBrown.Views.Widgets.Dropdown({\n                                        value: item.schemaId,\n                                        placeholder: 'Schema',\n                                        valueKey: 'id',\n                                        labelKey: 'name',\n                                        iconKey: 'icon',\n                                        options: resources.schemas.filter((schema) => {\n                                            return this.config.allowedSchemas.indexOf(schema.id) > -1;\n                                        }),\n                                        onChange: (newSchemaId) => {\n                                            item.schemaId = newSchemaId;\n                                            item.value = null;\n                                            \n                                            renderField();\n\n                                            this.trigger('change', this.value);\n                                        }\n                                    }).$element\n                                )\n                            )\n                        );\n                    }\n                \n                    _.append($field.empty(),\n                        _.div({class: 'editor__field__sort-key'}, this.getItemLabel(item, schema)),\n                        editorInstance.$element,\n                        _.div({class: 'editor__field__actions'},\n                            _.if(!this.config.useGrid,\n                                _.button({class: 'editor__field__action editor__field__action--collapse', title: 'Collapse/expand item'})\n                                    .click(() => {\n                                        $field.toggleClass('collapsed');\n                                    })\n                            ),\n                            _.button({class: 'editor__field__action editor__field__action--remove', title: 'Remove item'})\n                                .click(() => {\n                                    this.value.splice(i, 1);\n                            \n                                    this.trigger('change', this.value);\n\n                                    this.fetch();\n                                })\n                        )\n                    );\n                };\n\n                renderField();\n\n                return $field;\n            }),\n            _.button({title: 'Add an item', class: 'editor__field__add widget widget--button round fa fa-plus'})\n                .click(() => {\n                    let index = this.value.length;\n\n                    if(this.config.maxItems && index >= this.config.maxItems) {\n                        UI.messageModal('Item maximum reached', 'You  can maximum add ' + this.config.maxItems + ' items here');\n                        return;\n                    }\n\n                    this.value[index] = { value: null, schemaId: null };\n\n                    this.trigger('change', this.value);\n\n                    // Restore the scroll position with 100ms delay\n                    HashBrown.Views.Editors.ContentEditor.restoreScrollPos(100);\n                    \n                    this.fetch();\n                })\n        );\n    }    \n}\n\nmodule.exports = ArrayEditor;\n","'use strict';\n\n/**\n * A simple boolean editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myBoolean\": {\n *         \"label\": \"My boolean\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"boolean\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass BooleanEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        // Sanity check\n        if(typeof this.value === 'undefined') {\n            this.value = false;\n        \n        } else if(typeof this.value === 'string') {\n            this.value = this.value == 'true';\n\n        } else if(typeof this.value !== 'boolean') {\n            this.value = false\n\n        }\n\n        // Just to make sure the model has the right type of value\n        setTimeout(() => {\n            this.trigger('silentchange', this.value);\n        }, 20);\n        \n        this.fetch();\n    }\n\n    /**\n     * Render this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value field-editor--boolean'},\n            new HashBrown.Views.Widgets.Input({\n                type: 'checkbox',\n                value: this.value,\n                tooltip: this.description || '',\n                onChange: (newValue) => {\n                    this.value = newValue;\n                    \n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = BooleanEditor;\n","'use strict';\n\n/**\n * An editor for referring to other Content\n *\n * @description Example:\n * <pre>\n * {\n *     \"myContentReference\": {\n *         \"label\": \"My content reference\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"contentReference\",\n *         \"config\": {\n *            \"allowedSchemas\": [ \"page\", \"myCustomSchema\" ]\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass ContentReferenceEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Change value\n     */\n    onChange(newValue) {\n        this.value = newValue;\n\n        this.trigger('change', this.value);\n    }\n\n    /**\n     * Gets a list of allowed Content options\n     *\n     * @returns {Array} List of options\n     */\n    getDropdownOptions() {\n        let allowedContent = [];\n        let areRulesDefined = this.config && Array.isArray(this.config.allowedSchemas) && this.config.allowedSchemas.length > 0;\n\n        for(let content of resources.content) {\n            if(areRulesDefined) {\n                let isContentAllowed = this.config.allowedSchemas.indexOf(content.schemaId) > -1;\n                \n                if(!isContentAllowed) { continue; }\n            }\n\n            allowedContent[allowedContent.length] = {\n                title: content.prop('title', window.language) || content.id,\n                id: content.id\n            };\n        }\n\n        return allowedContent;\n    }\n\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        config.allowedSchemas = config.allowedSchemas || [];\n        \n        return _.div({class: 'editor__field'},\n            _.div({class: 'editor__field__key'}, 'Allowed Schemas'),\n            _.div({class: 'editor__field__value'},\n                new HashBrown.Views.Widgets.Dropdown({\n                    options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('content'),\n                    useMultiple: true,\n                    value: config.allowedSchemas,\n                    useClearButton: true,\n                    valueKey: 'id',\n                    labelKey: 'name',\n                    onChange: (newValue) => {\n                        config.allowedSchemas = newValue;\n                    }\n                }).$element\n            )\n        );\n    }\n\n    /**\n     * Render this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'}, [\n            new HashBrown.Views.Widgets.Dropdown({\n                value: this.value,\n                options: this.getDropdownOptions(),\n                useTypeAhead: true,\n                valueKey: 'id',\n                useClearButton: true,\n                tooltip: this.description || '',\n                labelKey: 'title',\n                onChange: (newValue) => {\n                    this.value = newValue;\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        ]);\n    }\n}\n\nmodule.exports = ContentReferenceEditor;\n","'use strict';\n\n/**\n * An editor for referencing Content Schemas\n *\n * @descripton Example:\n * <pre>\n * {\n *     \"myContentSchemaReference\": {\n *         \"label\": \"My content schema reference\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"contentSchemaReference\",\n *         \"config\": {\n *             \"allowedSchemas\": \"fromParent\" || [ \"myCustomSchema\" ]\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass ContentSchemaReferenceEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n       \n        // Adopt allowed Schemas from parent if applicable\n        let parentSchema = this.getParentSchema();\n\n        if(parentSchema && this.config && this.config.allowedSchemas == 'fromParent') {\n            this.config.allowedSchemas = parentSchema.allowedChildSchemas;                            \n        }\n\n        this.fetch();\n    }\n\n    /**\n     * Gets the parent Schema\n     *\n     * @returns {Schema} Parentn Schema\n     */\n    getParentSchema() {\n        // Return config parent Schema if available\n        if(this.config.parentSchema) { return this.config.parentSchema; }\n\n        // Fetch current ContentEditor\n        let contentEditor = Crisp.View.get('ContentEditor');\n\n        if(!contentEditor) { return null; }\n\n        // Fetch current Content model\n        let thisContent = contentEditor.model;\n\n        if(!thisContent) { return null; }\n        \n        // Fetch parent Content\n        if(!thisContent.parentId) { return null; }\n        \n        let parentContent = HashBrown.Helpers.ContentHelper.getContentByIdSync(thisContent.parentId);\n\n        if(!parentContent) {\n            UI.errorModal(new Error('Content by id \"' + thisContent.parentId + '\" not found'));\n            return null;\n        }\n\n        // Fetch parent Schema\n        let parentSchema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(parentContent.schemaId);\n            \n        if(!parentSchema) {\n            UI.errorModal(new Error('Schema by id \"' + parentContent.schemaId + '\" not found'));\n            return null;\n        }\n\n        // Return parent Schema\n        return parentSchema;\n    }\n\n    /**\n     * Gets schema types\n     *\n     * @returns {Array} List of options\n     */\n    getDropdownOptions() {\n        let contentSchemas = [];\n\n        for(let i in window.resources.schemas) {\n            let schema = window.resources.schemas[i];\n            let isNative = schema.id == 'page' || schema.id == 'contentBase';\n\n            if(\n                schema.type == 'content' &&\n                !isNative &&\n                (\n                    !this.config ||\n                    !this.config.allowedSchemas ||\n                    !Array.isArray(this.config.allowedSchemas) ||\n                    this.config.allowedSchemas.indexOf(schema.id) > -1\n                )\n            ) {\n                contentSchemas[contentSchemas.length] = {\n                    name: schema.name,\n                    id: schema.id\n                };\n            }\n        }\n\n        return contentSchemas;\n    }\n    \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        config.allowedSchemas = config.allowedSchemas || [];\n        \n        return _.div({class: 'editor__field'},\n            _.div({class: 'editor__field__key'}, 'Allowed Schemas'),\n            _.div({class: 'editor__field__value'},\n                new HashBrown.Views.Widgets.Dropdown({\n                    options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('content'),\n                    useMultiple: true,\n                    value: config.allowedSchemas,\n                    useClearButton: true,\n                    valueKey: 'id',\n                    labelKey: 'name',\n                    iconKey: 'icon',\n                    onChange: (newValue) => {\n                        config.allowedSchemas = newValue;\n                    }\n                }).$element\n            )\n        );\n    }\n\n    /**\n     * Picks the first available Schema\n     */\n    pickFirstSchema() {\n        let options = this.getDropdownOptions();\n\n        if(options.length < 1) { return; }\n\n        this.value = options[0].id;\n\n        this.trigger('change', this.value);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'}, \n            new HashBrown.Views.Widgets.Dropdown({\n                value: this.value,\n                options: this.getDropdownOptions(),\n                valueKey: 'id',\n                tooltip: this.description || '',\n                labelKey: 'name',\n                iconKey: 'icon',\n                useClearButton: true,\n                onChange: (newValue) => {\n                    this.value = newValue;\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = ContentSchemaReferenceEditor;\n","'use strict';\n\n/**\n * An editor for date values\n *\n * @description Example:\n * <pre>\n * {\n *     \"myDate\": {\n *         \"label\": \"My date\",\n *         \"schemaId\": \"date\",\n *         \"tabId\": \"content\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass DateEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: On click remove\n     */\n    onClickRemove() {\n        this.value = null;\n\n        this.trigger('change', this.value);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click open\n     */\n    onClickOpen() {\n        let modal = new HashBrown.Views.Modals.DateModal({\n            value: this.value\n        });\n\n        modal.on('change', (newValue) => {\n            this.value = newValue.toISOString();\n\n            this.trigger('change', this.value);\n\n            this.fetch();\n        });\n    }\n\n    /**\n     * Format a date string\n     *\n     * @param {String} input\n     *\n     * @returns {String} Formatted date string\n     */\n    formatDate(input) {\n        let output = '(none)';\n        let date = new Date(input);\n\n        if(input && !isNaN(date.getTime())) {\n            let day = date.getDate();\n            let month = date.getMonth() + 1;\n            let hours = date.getHours();\n            let minutes = date.getMinutes();\n\n            if(day < 10) {\n                day = '0' + day;\n            }\n\n            if(month < 10) {\n                month = '0' + month;\n            }\n            \n            if(hours < 10) {\n                hours = '0' + hours;\n            }\n            \n            if(minutes < 10) {\n                minutes = '0' + minutes;\n            }\n\n            output = date.getFullYear() + '.' + month + '.' + day + ' - ' + hours + ':' + minutes;\n        } \n\n        return output;\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            _.do(() => {\n                if(this.disabled) {\n                    return this.formatDate(this.value);\n                }\n                \n                return _.div({class: 'widget widget-group', title: this.description || ''},\n                    _.button({class: 'widget widget--button low'}, this.formatDate(this.value))\n                        .click(() => { this.onClickOpen(); }),\n                    _.div({class: 'widget widget--button small fa fa-remove'})\n                        .click(() => { this.onClickRemove(); })\n                );\n            })\n        );\n    }\n}\n\nmodule.exports = DateEditor;\n","'use strict';\n\n/**\n * A simple list picker\n *\n * @description Example:\n * <pre>\n * {\n *     \"myDropdown\": {\n *         \"label\": \"My dropdown\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"dropdown\",\n *         \"config\": {\n *             \"options\": [\n *                 {\n *                     \"label\": \"Option #1\",\n *                     \"value\": \"option-1\"\n *                 },\n *                 {\n *                     \"label\": \"Option #2\",\n *                     \"value\": \"option-2\"\n *                 }\n *             ]\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass DropdownEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        if(!this.config.options) {\n            this.config.options = [];\n        }\n        \n        this.fetch();\n    }\n   \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        config.options = config.options || [];\n\n        return _.div({class: 'editor__field'},\n            _.div({class: 'editor__field__key'}, 'Options'),\n            _.div({class: 'editor__field__value'},\n                new HashBrown.Views.Widgets.Chips({\n                    value: config.options,\n                    valueKey: 'value',\n                    labelKey: 'label',\n                    placeholder: 'New option',\n                    onChange: (newValue) => {\n                        config.options = newValue;\n                    }\n                }).$element\n            )\n        );\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            _.if(this.config.options.length < 1,\n                _.span({class: 'editor__field__value__warning'}, 'No options configured')\n            ),\n            _.if(this.config.options.length > 0,\n                new HashBrown.Views.Widgets.Dropdown({\n                    value: this.value,\n                    useClearButton: true,\n                    options: this.config.options,\n                    valueKey: 'value',\n                    tooltip: this.description || '',\n                    labelKey: 'label',\n                    onChange: (newValue) => {\n                        this.value = newValue;\n\n                        this.trigger('change', this.value);\n                    }\n                }).$element\n            )\n        );\n    }\n}\n\nmodule.exports = DropdownEditor;\n","'use strict';\n\n/**\n * A field editor for specifying one of the selected languages\n *\n * @description Example:\n * <pre>\n * {\n *     \"myLanguage\": {\n *         \"label\": \"My language\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"language\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass LanguageEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Prerender\n     */\n    prerender() {\n        let options = HashBrown.Helpers.LanguageHelper.getLanguagesSync();\n\n        if(!this.value || options.indexOf(this.value) < 0) {\n            this.value = options[0];\n        }\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Dropdown({\n                value: this.value,\n                options: HashBrown.Helpers.LanguageHelper.getLanguagesSync(),\n                tooltip: this.description || '',\n                onChange: (newValue) => {\n                    this.value = newValue;\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = LanguageEditor;\n","'use strict';\n\n/**\n * A picker for referencing Media \n *\n * @description Example:\n * <pre>\n * {\n *     \"myMediaReference\": {\n *         \"label\": \"My medie reference\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"mediaReference\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass MediaReferenceEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        let media = HashBrown.Helpers.MediaHelper.getMediaByIdSync(this.value);\n\n        return _.div({class: 'editor__field__value editor__field--media-reference', title: this.description || ''},\n            _.button({class: 'editor__field--media-reference__pick'},\n                _.do(()=> {\n                    if(!media) { return _.div({class: 'editor__field--media-reference__empty'}); }\n            \n                    if(media.isAudio()) {\n                        return _.div({class: 'editor__field--media-reference__preview fa fa-file-audio-o'});\n                    }\n\n                    if(media.isVideo()) {\n                        return _.div({class: 'editor__field--media-reference__preview fa fa-file-video-o'});\n                    }\n\n                    if(media.isImage()) {\n                        return _.img({class: 'editor__field--media-reference__preview', src: '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + media.id + '?width=200'});\n                    }\n                })\n            ).click(() => {\n                new HashBrown.Views.Modals.MediaBrowser({\n                    value: this.value\n                })\n                .on('select', (id) => {\n                    this.value = id;\n\n                    this.trigger('change', this.value);\n\n                    this.fetch();\n                });\n            }),\n            _.div({class: 'editor__field--media-reference__footer'},\n                _.label({class: 'editor__field--media-reference__name'}, media ? media.name : ''),\n                _.button({class: 'editor__field--media-reference__remove', title: 'Clear the Media selection'})\n                    .click(() => {\n                        this.value = null;\n\n                        this.trigger('change', this.value);\n\n                        this.fetch();\n                    })\n            )\n        );\n    }\n}\n\nmodule.exports = MediaReferenceEditor;\n","'use strict';\n\n/**\n * A simple number editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myNumber\": {\n *         \"label\": \"My number\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"number\",\n *         \"config\": {\n *             \"step\": 0.5\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass NumberEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Change\n     */\n    onChange() {\n        this.value = parseFloat(this.$input.val());\n\n        this.trigger('change', this.value);\n    }\n   \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config)\n    {\n        config.step = config.step || 'any';\n\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Step'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'number',\n                        step: 'any',\n                        tooltip: 'The division by which the input number is allowed (0 is any division)',\n                        value: config.step === 'any' ? 0 : config.step,\n                        onChange: (newValue) => {\n                            if(newValue == 0) { newValue = 'any'; }\n\n                            config.step = newValue;\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Min value'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        tooltip: 'The minimum required value',\n                        type: 'number',\n                        step: 'any',\n                        value: config.min || 0,\n                        onChange: (newValue) => {\n                            config.min = newValue;\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Max value'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        tooltip: 'The maximum allowed value (0 is infinite)',\n                        type: 'number',\n                        step: 'any',\n                        value: config.max || 0,\n                        onChange: (newValue) => {\n                            config.max = newValue;\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Is slider'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        tooltip: 'Whether or not this number should be edited as a range slider',\n                        type: 'checkbox',\n                        value: config.isSlider || false,\n                        onChange: (newValue) => {\n                            config.isSlider = newValue;\n                        }\n                    }).$element\n                )\n            )\n        ];\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Input({\n                value: this.value || '0',\n                type: this.config.isSlider ? 'range' : 'number',\n                step: this.config.step || 'any',\n                tooltip: this.description || '',\n                min: this.config.min || '0',\n                max: this.config.max || '0',\n                onChange: (newValue) => {\n                    this.value = parseFloat(newValue);\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = NumberEditor;\n","'use strict';\n\n/**\n * A simple string editor\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass ResourceReferenceEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        config.resourceKeys = config.resourceKeys || [];\n\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Resource'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Dropdown({\n                        value: config.resource,\n                        options: Object.keys(resources),\n                        onChange: (newValue) => {\n                            config.resource = newValue\n                        }\n                    }).$element\n                )\n            ),\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Resource keys'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Chips({\n                        value: config.resourceKeys,\n                        placeholder: 'keyName',\n                        onChange: (newValue) => {\n                            config.resourceKeys = newValue;\n                        }\n                    }).$element\n                )\n            )\n        ];\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        let resource = resources[this.config.resource];\n        let value;\n\n        if(resource) {\n            value = resource[this.value];\n\n            if(!value) {\n                for(let i in resource) {\n                    if(resource[i].id == this.value) {\n                        value = resource[i];\n                        break;\n                    }\n                }\n            }\n\n            if(value) {\n                for(let key of (this.config.resourceKeys || [])) {\n                    if(value[key]) {\n                        value = value[key];\n                        break;    \n                    }\n                }\n\n            } else if(this.value) {\n                let singularResourceName = this.config.resource;\n\n                if(singularResourceName[singularResourceName.length - 1] == 's') {\n                    singularResourceName = singularResourceName.substring(0, singularResourceName.length - 1);\n                }\n\n                value = '(' + singularResourceName + ' not found)';\n\n            }\n        }\n        \n        return _.div({class: 'editor__field__value'},\n            value || '(none)'\n        );\n    }\n}\n\nmodule.exports = ResourceReferenceEditor;\n","'use strict';\n\n/**\n * A rich text editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myRichText\": {\n *         \"label\": \"My rich text\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"richText\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass RichTextEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        // Sanity check of value\n        if(typeof this.value !== 'string') {\n            this.value = this.value || '';\n        }\n\n        // Make sure the string is HTML\n        try {\n            this.value = marked(this.value);\n        } catch(e) {\n            // Catch this silly exception that marked does sometimes\n        }\n        \n        this.fetch();\n    }\n    \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Disable markdown'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'checkbox',\n                        tooltip: 'Hides the markdown tab if enabled',\n                        value: config.isMarkdownDisabled || false,\n                        onChange: (newValue) => { config.isMarkdownDisabled = newValue; }\n                    }).$element\n                )\n            )\n        ];\n    }\n\n    /**\n     * Event: Change input\n     *\n     * @param {String} value\n     */\n    onChange(value) {\n        value = value || '';\n\n        this.value = value;\n\n        if(this.silentChange === true) {\n            this.silentChange = false;\n\n            this.trigger('silentchange', this.value);\n        \n        } else {\n            this.trigger('change', this.value);\n\n        }\n    }\n\n    /**\n     * Event: On click tab\n     *\n     * @param {String} source\n     */\n    onClickTab(source) {\n        this.silentChange = true;\n\n        this.activeView = source;\n\n        this.fetch();\n    }\n\n    /**\n     * Event: Click insert media\n     */\n    onClickInsertMedia() {\n        let mediaBrowser = new HashBrown.Views.Modals.MediaBrowser();\n\n        mediaBrowser.on('select', (id) => {\n            HashBrown.Helpers.MediaHelper.getMediaById(id)\n            .then((media) => {\n                let html = '';\n\n                if(media.isImage()) {\n                    html = '<img data-id=\"' + id + '\" alt=\"' + media.name + '\" src=\"/' + media.url + '\">';\n                } else if(media.isVideo()) {\n                    html = '<video data-id=\"' + id + '\" alt=\"' + media.name + '\" src=\"/' + media.url + '\">';\n                }\n\n                let activeView = this.activeView || 'wysiwyg';\n\n                switch(activeView) {\n                    case 'wysiwyg':\n                        this.wysiwyg.insertHtml(html);\n                        break;\n                    \n                    case 'html':\n                        this.html.replaceSelection(html, 'end');\n                        break;\n                    \n                    case 'markdown':\n                        this.markdown.replaceSelection(toMarkdown(html), 'end');\n                        break;\n                }\n            })\n            .catch(UI.errorModal);\n        });\n    }\n    \n    /**\n     * Gets the tab content\n     *\n     * @returns {HTMLElement} Tab content\n     */\n    getTabContent() {\n        return this.element.querySelector('.editor__field--rich-text-editor__tab__content');\n    }\n\n    /**\n     * Initialises the HTML editor\n     */\n    initHtmlEditor() {\n        setTimeout(() => {\n            // Kepp reference to editor\n            this.html = CodeMirror.fromTextArea(this.getTabContent(), {\n                lineNumbers: false,\n                mode: {\n                    name: 'xml'\n                },\n                viewportMargin: Infinity,\n                tabSize: 4,\n                indentUnit: 4,\n                indentWithTabs: true,\n                theme: 'default',\n                value: this.value\n            });\n\n            // Change event\n            this.html.on('change', () => {\n                this.onChange(this.html.getDoc().getValue());\n            });\n\n            // Set value initially\n            this.silentChange = true;\n            this.html.getDoc().setValue(this.value);\n        }, 1);\n    }\n    \n    /**\n     * Initialises the markdown editor\n     */\n    initMarkdownEditor() {\n        setTimeout(() => {\n            // Keep reference to editor\n            this.markdown = CodeMirror.fromTextArea(this.getTabContent(), {\n                lineNumbers: false,\n                mode: {\n                    name: 'markdown'\n                },\n                viewportMargin: Infinity,\n                tabSize: 4,\n                indentUnit: 4,\n                indentWithTabs: true,\n                theme: 'default',\n                value: toMarkdown(this.value)\n            });\n\n            // Change event\n            this.markdown.on('change', () => {\n                this.onChange(marked(this.markdown.getDoc().getValue()));\n            });\n\n            // Set value initially\n            this.silentChange = true;\n            this.markdown.getDoc().setValue(toMarkdown(this.value));\n        }, 1);\n    }\n\n    /**\n     * Initialises the WYSIWYG editor\n     */\n    initWYSIWYGEditor() {\n        this.wysiwyg = CKEDITOR.replace(\n            this.getTabContent(),\n            {\n                removePlugins: 'contextmenu,liststyle,tabletools',\n                allowedContent: true,\n                height: 400,\n                toolbarGroups: [\n                    { name: 'styles' },\n                    { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },\n                    { name: 'paragraph',   groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ] },\n                    { name: 'links' },\n                    { name: 'insert' },\n                    { name: 'forms' },\n                    { name: 'tools' },\n                    { name: 'document',\t   groups: [ 'mode', 'document', 'doctools' ] },\n                    { name: 'others' },\n                ],\n           \n                extraPlugins: 'justify,divarea',\n\n                removeButtons: 'Image,Styles,Underline,Subscript,Superscript,Source,SpecialChar,HorizontalRule,Maximize,Table',\n\n                removeDialogTabs: 'image:advanced;link:advanced'\n            }\n        );\n\n        this.wysiwyg.on('change', () => {\n            this.onChange(this.wysiwyg.getData());\n        });\n\n        this.wysiwyg.on('instanceReady', () => {\n            // Strips the style information\n            let stripStyle = (element) => {\n                delete element.attributes.style;\n            };\n\n            // Filtering rules\n            this.wysiwyg.dataProcessor.dataFilter.addRules({\n                elements: {\n                    // Strip styling from these elements\n                    p: stripStyle,\n                    h1: stripStyle,\n                    h2: stripStyle,\n                    h3: stripStyle,\n                    h4: stripStyle,\n                    h5: stripStyle,\n                    h6: stripStyle,\n                    span: stripStyle,\n                    div: stripStyle,\n                    section: stripStyle,\n                    hr: stripStyle,\n                    header: stripStyle,\n                    aside: stripStyle,\n                    footer: stripStyle,\n                    ul: stripStyle,\n                    li: stripStyle,\n                    blockquote: stripStyle,\n\n                    // Refactor image src url to fit MediaController\n                    img: (element) => {\n                        stripStyle(element);\n\n                        // Fetch from data attribute\n                        if(element.attributes['data-id']) {\n                            element.attributes.src = '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + element.attributes['data-id'];\n                        \n                        // Failing that, use regex\n                        } else {\n                            element.attributes.src = element.attributes.src.replace(/.+media\\/([0-9a-z]+)\\/.+/g, '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/$1');\n                        \n                        }\n                        \n                    },\n                    \n                    // Refactor video src url to fit MediaController\n                    video: (element) => {\n                        stripStyle(element);\n\n                        // Fetch from data attribute\n                        if(element.attributes['data-id']) {\n                            element.attributes.src = '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + element.attributes['data-id'];\n                        \n                        // Failing that, use regex\n                        } else {\n                            element.attributes.src = element.attributes.src.replace(/.+media\\/([0-9a-z]+)\\/.+/g, '/media/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/$1');\n                        \n                        }\n                        \n                    }\n                }\n            });\n\n            // Set value initially\n            this.silentChange = true;\n            this.wysiwyg.setData(this.value);\n        });\n    }\n\n    /**\n     * Prerender\n     */\n    prerender() {\n        this.markdown = null;\n        this.wysiwyg = null;\n        this.html = null;\n    }\n\n    /** \n     * Renders this editor\n     */\n    template() {\n        let activeView = this.activeView || 'wysiwyg';\n\n        return _.div({class: 'editor__field__value editor__field--rich-text-editor', title: this.description || ''},\n            _.div({class: 'editor__field--rich-text-editor__header'},\n                _.each({wysiwyg: 'Visual', markdown: 'Markdown', html: 'HTML'}, (alias, label) => {\n                    return _.button({class: (activeView === alias ? 'active ' : '') + 'editor__field--rich-text-editor__header__tab'}, label)\n                        .click(() => { this.onClickTab(alias); })\n                }),\n                _.button({class: 'editor__field--rich-text-editor__header__add-media'},\n                    'Add media'\n                ).click(() => { this.onClickInsertMedia(); })\n            ),\n            _.div({class: 'editor__field--rich-text-editor__body'},\n                _.if(activeView === 'wysiwyg',\n                    _.div({class: 'editor__field--rich-text-editor__tab wysiwyg'},\n                        _.div({class: 'editor__field--rich-text-editor__tab__content', 'contenteditable': true})\n                    )\n                ),\n                _.if(activeView === 'markdown',\n                    _.div({class: 'editor__field--rich-text-editor__tab markdown'},\n                        _.textarea({class: 'editor__field--rich-text-editor__tab__content'})\n                    )\n                ),\n                _.if(activeView === 'html',\n                    _.div({class: 'editor__field--rich-text-editor__tab html'},\n                        _.textarea({class: 'editor__field--rich-text-editor__tab__content'})\n                    )\n                )\n            )\n        );\n    }\n     \n    /**\n     * Post render\n     */\n    postrender() {\n        let activeView = this.activeView || 'wysiwyg';\n       \n        switch(activeView) {\n            case 'html':\n                this.initHtmlEditor();\n                break;\n\n            case 'markdown':\n                this.initMarkdownEditor();\n                break;\n\n            case 'wysiwyg':\n                this.initWYSIWYGEditor();\n                break;\n        }\n    }\n}\n\nmodule.exports = RichTextEditor;\n","'use strict';\n\n/**\n * A simple string editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myString\": {\n *         \"label\": \"My string\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"string\",\n *         \"config\": {\n *             \"isMultiLine\": false\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass StringEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n    \n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config) {\n        return [\n            _.div({class: 'editor__field'},\n                _.div({class: 'editor__field__key'}, 'Is multi-line'),\n                _.div({class: 'editor__field__value'},\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'checkbox',\n                        tooltip: 'Whether or not this string uses line breaks',\n                        value: config.isMultiLine || false,\n                        onChange: (newValue) => { config.isMultiLine = newValue; }\n                    }).$element\n                )\n            )\n        ];\n    }\n    \n    /**\n     * Render this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Input({\n                type: this.config.isMultiLine ? 'textarea' : 'text',\n                value: this.value,\n                tooltip: this.description || '',\n                onChange: (newValue) => {\n                    this.value = newValue;\n\n                    this.trigger('change', this.value);\n                }\n            })\n        );\n    }\n}\n\nmodule.exports = StringEditor;\n","'use strict';\n\n/**\n * A struct editor for editing any arbitrary object value\n *\n * @description Example:\n * <pre>\n * {\n *     \"myStruct\": {\n *         \"label\": \"My struct\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"struct\",\n *         \"config\": {\n *             \"label\": \"myString\",\n *             \"struct\": {\n *                 \"myString\": {\n *                     \"label\": \"My string\",\n *                     \"schemaId\": \"string\"\n *                 },\n *                 \"myArray\": {\n *                     \"label\": \"My array\",\n *                     \"schemaId\": \"array\",\n *                     \"config\": {\n *                         \"allowedSchemas\": [ \"string\", \"mediaReference\", \"myCustomSchema\" ]\n *                     }\n *                 }\n *             }\n *         }\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass StructEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        // A sanity check to make sure we're working with an object\n        if(!this.value || typeof this.value !== 'object') {\n            this.value = {};\n        }\n        \n        this.fetch();\n    }\n\n    /**\n     * Event: Change value\n     *\n     * @param {Object} newValue\n     * @param {String} key\n     * @param {Object} keySchema\n     * @param {Boolean} isSilent\n     */\n    onChange(newValue, key, keySchema, isSilent) {\n        if(keySchema.multilingual) {\n            // Sanity check to make sure multilingual fields are accomodated for\n            if(!this.value[key] || typeof this.value[key] !== 'object') {\n                this.value[key] = {};\n            }\n            \n            this.value[key]._multilingual = true;\n            this.value[key][window.language] = newValue;\n\n        } else {\n            this.value[key] = newValue;\n        }\n\n        this.trigger(isSilent ? 'silentchange' : 'change', this.value);\n    }\n\n    /**\n     * Renders the config editor\n     *\n     * @param {Object} config\n     * @param {String} fieldSchemaId\n     *\n     * @returns {HTMLElement} Element\n     */\n    static renderConfigEditor(config, fieldSchemaId) {\n        config.struct = config.struct || {};\n\n        let $element = _.div({class: 'editor--schema__struct'});\n\n        let compiledFieldSchema = HashBrown.Helpers.SchemaHelper.getFieldSchemaWithParentConfigs(fieldSchemaId);\n        \n        let renderEditor = () => {\n            // Get the parent struct fields\n            let parentStruct = {};\n\n            if(compiledFieldSchema && compiledFieldSchema.config && compiledFieldSchema.config.struct) {\n                for(let key in compiledFieldSchema.config.struct) {\n                    // We only want parent struct values\n                    if(config.struct[key]) { continue; }\n\n                    parentStruct[key]  = compiledFieldSchema.config.struct[key];\n                }\n            }\n           \n            // Compile the label options\n            let labelOptions = {};\n            \n            for(let key in parentStruct) {\n                if(!parentStruct[key]) { continue; }\n\n                labelOptions[key] = parentStruct[key].label;\n            }\n\n            for(let key in config.struct) {\n                if(!config.struct[key]) { continue; }\n\n                labelOptions[key] = config.struct[key].label;\n            }\n\n            // Render everything\n            _.append($element.empty(),\n                // Render the label picker\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, 'Label'),\n                        _.div({class: 'editor__field__key__description'}, 'The value of the field picked here will represent this struct when collapsed')\n                    ),\n                    _.div({class: 'editor__field__value'},\n                        new HashBrown.Views.Widgets.Dropdown({\n                            options: labelOptions,\n                            value: config.label,\n                            onChange: (newLabel) => {\n                                config.label = newLabel;\n                            }\n                        })\n                    )\n                ),\n\n                // Render the parent struct\n                _.if(Object.keys(parentStruct).length > 0,\n                    _.div({class: 'editor__field'},\n                        _.div({class: 'editor__field__key'},\n                            _.div({class: 'editor__field__key__label'}, 'Parent struct'),\n                            _.div({class: 'editor__field__key__description'}, 'Properties that are inherited and can be changed if you add them to this struct')\n                        ),\n                        _.div({class: 'editor__field__value flex'},\n                            _.each(parentStruct, (fieldKey, fieldValue) => {\n                                return _.button({class: 'widget widget--button condensed', title: 'Change the \"' + (fieldValue.label || fieldKey) + '\" property for this Schema'}, _.span({class: 'fa fa-plus'}), fieldValue.label || fieldKey)\n                                    .click(() => {\n                                        let newProperties = {};\n\n                                        newProperties[fieldKey] = JSON.parse(JSON.stringify(fieldValue));\n\n                                        for(let key in config.struct) {\n                                            newProperties[key] = config.struct[key];\n                                        }\n\n                                        config.struct = newProperties;\n\n                                        renderEditor();\n                                    });\n                            })\n                        )\n                    )\n                ),\n\n                // Render this struct\n                _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        'Struct',\n                        _.div({class: 'editor__field__key__actions'},\n                            _.button({class: 'editor__field__key__action editor__field__key__action--sort'})\n                                .click((e) => {\n                                    HashBrown.Helpers.UIHelper.fieldSortableObject(\n                                        config.struct,\n                                        $(e.currentTarget).parents('.editor__field')[0],\n                                        (newStruct) => {\n                                            config.struct = newStruct;\n                                        }\n                                    );\n                                })\n                        )\n                    ),\n                    _.div({class: 'editor__field__value segmented'},\n                        _.each(config.struct, (fieldKey, fieldValue) => {\n                            // Sanity check\n                            fieldValue.config = fieldValue.config || {};\n                            fieldValue.schemaId = fieldValue.schemaId || 'array';\n\n                            let $field = _.div({class: 'editor__field'});\n\n                            let renderField = () => {\n                                _.append($field.empty(),\n                                    _.div({class: 'editor__field__sort-key'},\n                                        fieldKey\n                                    ),\n                                    _.div({class: 'editor__field__value'},\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Key'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Input({\n                                                    type: 'text',\n                                                    placeholder: 'A variable name, e.g. \"myField\"',\n                                                    tooltip: 'The field variable name',\n                                                    value: fieldKey,\n                                                    onChange: (newKey) => {\n                                                        if(!newKey) { return; }\n\n                                                        let newStruct = {};\n\n                                                        // Insert the changed key into the correct place in the struct\n                                                        for(let key in config.struct) {\n                                                            if(key === fieldKey) {\n                                                                newStruct[newKey] = config.struct[fieldKey];\n                                                            \n                                                            } else {\n                                                                newStruct[key] = config.struct[key];\n\n                                                            }\n                                                        }\n\n                                                        // Change internal reference to new key\n                                                        fieldKey = newKey;\n\n                                                        // Reassign the struct object\n                                                        config.struct = newStruct;\n                                                    \n                                                        // Update the sort key\n                                                        $field.find('.editor__field__sort-key').html(fieldKey);\n                                                    }\n                                                })\n                                            )\n                                        ),\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Label'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Input({\n                                                    type: 'text',\n                                                    placeholder: 'A label, e.g. \"My field\"',\n                                                    tooltip: 'The field label',\n                                                    value: fieldValue.label,\n                                                    onChange: (newValue) => { fieldValue.label = newValue; }\n                                                }).$element\n                                            )\n                                        ),\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Description'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Input({\n                                                    type: 'text',\n                                                    placeholder: 'A description',\n                                                    tooltip: 'The field description',\n                                                    value: fieldValue.description,\n                                                    onChange: (newValue) => { fieldValue.description = newValue; }\n                                                }).$element\n                                            )\n                                        ),\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Multilingual'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Input({\n                                                    type: 'checkbox',\n                                                    tooltip: 'Whether or not this field should support multiple languages',\n                                                    value: fieldValue.multilingual || false,\n                                                    onChange: (newValue) => { fieldValue.multilingual = newValue; }\n                                                }).$element\n                                            )\n                                        ),\n                                        _.div({class: 'editor__field'},\n                                            _.div({class: 'editor__field__key'}, 'Schema'),\n                                            _.div({class: 'editor__field__value'},\n                                                new HashBrown.Views.Widgets.Dropdown({\n                                                    useTypeAhead: true,\n                                                    options: HashBrown.Helpers.SchemaHelper.getAllSchemasSync('field'),\n                                                    value: fieldValue.schemaId,\n                                                    labelKey: 'name',\n                                                    valueKey: 'id',\n                                                    onChange: (newValue) => {\n                                                        fieldValue.schemaId = newValue;\n\n                                                        renderField();\n                                                    }\n                                                }).$element\n                                            )\n                                        ),\n                                        _.do(() => {\n                                            let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(fieldValue.schemaId);\n\n                                            if(!schema) { return; }\n\n                                            let editor = HashBrown.Views.Editors.FieldEditors[schema.editorId];\n\n                                            if(!editor) { return; }\n\n                                            return editor.renderConfigEditor(fieldValue.config);\n                                        })\n                                    ),\n                                    _.div({class: 'editor__field__actions'},\n                                        _.button({class: 'editor__field__action editor__field__action--remove', title: 'Remove field'})\n                                            .click(() => {\n                                                delete config.struct[fieldKey];\n\n                                                renderEditor();\n                                            })\n                                    )\n                                )\n                            };\n\n                            renderField();\n\n                            return $field;\n                        }),\n                        _.button({class: 'editor__field__add widget widget--button round right fa fa-plus', title: 'Add a struct property'},\n                            ).click(() => {\n                                if(config.struct.newField) { return; }\n                            \n                                config.struct.newField = {\n                                    label: 'New field',\n                                    schemaId: 'string'\n                                };\n\n                                renderEditor();\n                            })\n                    )\n                )\n            );\n        };\n\n        renderEditor();\n\n        return $element;\n    }\n\n    /**\n     * Renders this editor\n     */\n   template() {\n        let compiledSchema = HashBrown.Helpers.SchemaHelper.getFieldSchemaWithParentConfigs(this.schema.id);\n           \n        return _.div({class: 'editor__field__value field-editor--struct'},\n            // Loop through each key in the struct\n            _.each(compiledSchema.config.struct, (k, keySchema) => {\n                let value = this.value[k];\n\n                if(!keySchema.schemaId) {\n                    UI.errorModal(new Error('Schema id not set for key \"' + k + '\"'));\n                }\n\n                let fieldSchema = HashBrown.Helpers.SchemaHelper.getFieldSchemaWithParentConfigs(keySchema.schemaId);\n\n                if(!fieldSchema) {\n                    UI.errorModal(new Error('Field schema \"' + keySchema.schemaId + '\" could not be found for key \" + k + \"'));\n                }\n\n                let fieldEditor = HashBrown.Views.Editors.ContentEditor.getFieldEditor(fieldSchema.editorId);\n\n                // Sanity check\n                value = HashBrown.Helpers.ContentHelper.fieldSanityCheck(value, keySchema);\n                this.value[k] = value;\n\n                // Init the field editor\n                let fieldEditorInstance = new fieldEditor({\n                    value: keySchema.multilingual ? value[window.language] : value,\n                    disabled: keySchema.disabled || false,\n                    config: keySchema.config || fieldSchema.config || {},\n                    schema: keySchema\n                });\n\n                // Hook up the change event\n                fieldEditorInstance.on('change', (newValue) => {\n                    this.onChange(newValue, k, keySchema);\n                });\n                \n                fieldEditorInstance.on('silentchange', (newValue) => {\n                    this.onChange(newValue, k, keySchema, true);\n                });\n\n                // Return the DOM element\n                return _.div({class: 'editor__field'},\n                    _.div({class: 'editor__field__key'},\n                        _.div({class: 'editor__field__key__label'}, keySchema.label),\n                        _.if(keySchema.description,\n                            _.div({class: 'editor__field__key__description'}, keySchema.description)\n                        ),\n                        fieldEditorInstance.renderKeyActions()\n                    ),\n                    fieldEditorInstance.$element\n                );\n            })    \n        );\n    }    \n}\n\nmodule.exports = StructEditor;\n","'use strict';\n\n/**\n * A CSV string editor\n *\n * @description Example:\n * <pre>\n * {\n *     \"myTags\": {\n *         \"label\": \"My tags\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"tags\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass TagsEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    /**\n     * Constructor\n     */\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value'},\n            new HashBrown.Views.Widgets.Chips({\n                tooltip: this.description || '',\n                value: (this.value || '').split(','),\n                onChange: (newValue) => {\n                    this.value = newValue.join(',');\n\n                    this.trigger('change', this.value);\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = TagsEditor;\n","'use strict';\n\n/**\n * An editor for content URLs\n *\n * @description Example:\n * <pre>\n * {\n *     \"myUrl\": {\n *         \"label\": \"My URL\",\n *         \"tabId\": \"content\",\n *         \"schemaId\": \"url\"\n *     }\n * }\n * </pre>\n *\n * @memberof HashBrown.Client.Views.Editors.FieldEditors\n */\nclass UrlEditor extends HashBrown.Views.Editors.FieldEditors.FieldEditor {\n    constructor(params) {\n        super(params);\n\n        this.fetch();\n    }\n\n    /**\n     * Get all parent content nodes\n     *\n     * @param {String} contentId\n     *\n     * @return {Array} nodes\n     */\n    static getAllParents(contentId) {\n        let nodes = [];    \n        let contentEditor = Crisp.View.get('ContentEditor');\n\n        function iterate(id) {\n            let node;\n        \n            node = window.resources.content.filter((node) => {\n                return node.id == id;\n            })[0];\n\n            if(node) {\n                nodes.push(node);\n\n                if(node.parentId) {\n                    iterate(node.parentId);\n                }\n\n            } else {\n                debug.log('Content not found: \"' + id + '\"', this);\n            }\n        }\n\n        iterate(contentId);\n\n        nodes.reverse();\n\n        return nodes;\n    }\n\n    /**\n     * Generates a new url based on content id\n     *\n     * @param {String} contentId\n     *\n     * @return {String} url\n     */\n    generateUrl(contentId) {\n        let nodes = UrlEditor.getAllParents(contentId);\n        let url = '/';\n      \n        if(this.multilingual) {\n            url += window.language + '/';\n        }\n\n        for(let node of nodes) {\n            let title = '';\n\n            // If the node equals the currently edited node, take the value directly from the \"title\" field\n            if(node.id == Crisp.Router.params.id) {\n                title = $('.editor__field[data-key=\"title\"] .editor__field__value input').val();\n\n            // If it's not, try to get the title from the model\n            } else {\n                // If title is set directly (unlikely), pass it\n                if(typeof node.title === 'string') {\n                    title = node.title;\n\n                // If title is defined in properties (typical)\n                } else if(node.properties && node.properties.title) {\n                    // If title is multilingual\n                    if(node.properties.title[window.language]) {\n                        title = node.properties.title[window.language];\n                    \n                    // If title is not multilingual\n                    } else if(typeof node.properties.title === 'string') {\n                        title = node.properties.title;\n                    \n                    }\n                }\n            }\n\n            url += HashBrown.Helpers.ContentHelper.getSlug(title) + '/';\n        }\n\n        // Check for duplicate URLs\n        let sameUrls = 0;\n\n        for(let content of window.resources.content) {\n            if(content.id != contentId) {\n                let thatUrl = content.prop('url', window.language);\n                let isMatchWithNumber = new RegExp(url.substring(0, url.lastIndexOf('/')) + '-[0-9]+/').test(thatUrl);\n                let isSameUrl = url == thatUrl || isMatchWithNumber;\n\n                if(isSameUrl) {\n                    sameUrls++;\n                }\n            }\n        }\n\n        // Append a number, if duplidate URLs were found\n        if(sameUrls > 0) {\n            url = url.replace(/\\/$/, '-' + sameUrls + '/');\n        }\n\n        return url;\n    }\n\n    /**\n     * Regenerates the URL\n     */\n    regenerate() {\n        let newUrl = this.generateUrl(Crisp.Router.params.id);\n\n        this.$input.val(newUrl);\n\n        this.trigger('silentchange', this.$input.val());\n    };\n\n    /**\n     * Fetch the URL from the Content title\n     */\n    fetchFromTitle() {\n        this.value = this.$titleInput.val();\n\n        this.regenerate();\n    }\n\n    /**\n     * Event: Change value\n     */\n    onChange() {\n        this.value = this.$input.val();\n\n        if(this.value.length > 0) {\n            if(this.value[0] != '/') {\n                this.value = '/' + this.value;\n                this.$input.val(this.value);\n            }\n            \n            if(this.value.length > 1 && this.value[this.value.length - 1] != '/') {\n                this.value = this.value + '/';\n                this.$input.val(this.value);\n            }\n        } else {\n            this.fetchFromTitle();\n        }\n\n        this.trigger('change', this.value);\n    };\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        return _.div({class: 'editor__field__value field-editor--url'},\n            _.div({class: 'widget-group', title: this.description || ''},\n                this.$input = _.input({class: 'widget widget--input text', type: 'text', value: this.value})\n                    .on('change', () => { this.onChange(); }),\n                _.button({class: 'widget widget--button small fa fa-refresh', title: 'Regenerate URL'})\n                    .click(() => { this.regenerate(); })\n            )\n        );\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        //  Wait a bit before checking for title field\n        setTimeout(() => {\n            this.$titleInput = $('.editor__field[data-key=\"title\"] input[type=\"text\"]');\n\n            if(this.$titleInput.length === 1) {\n                this.$titleInput.on('input', () => {\n                    this.fetchFromTitle();   \n                });\n            }\n\n            if(!this.value) {\n                this.fetchFromTitle();\n            }\n        }, 100);\n    }\n}\n\nmodule.exports = UrlEditor;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Navigation\n */\nnamespace('Views.Navigation')\n.add(require('./NavbarMain'))\n.add(require('./MainMenu'))\n.add(require('./NavbarPane'))\n.add(require('./ConnectionPane'))\n.add(require('./ContentPane'))\n.add(require('./FormsPane'))\n.add(require('./MediaPane'))\n.add(require('./SchemaPane'));\n","'use strict';\n\n/**\n * The main navbar\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass NavbarMain extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        this.template = require('Client/Templates/Navigation/NavbarMain');\n        this.tabPanes = [];\n\n        HashBrown.Views.Navigation.ContentPane.init();\n        HashBrown.Views.Navigation.MediaPane.init();\n        HashBrown.Views.Navigation.FormsPane.init();\n        HashBrown.Views.Navigation.ConnectionPane.init();\n        HashBrown.Views.Navigation.SchemaPane.init();\n\n        this.fetch();\n        \n        $('.page--environment__space--nav').html(this.$element);\n    }\n    \n    /**\n     * Event: Change filter\n     *\n     * @param {HTMLElement} $pane\n     * @param {NavbarPane} pane\n     * @param {String} search\n     */\n    onChangeFilter($pane, pane, search) {\n        search = search.toLowerCase();\n\n        $pane.find('.navbar-main__pane__item').each((i, item) => {\n            let label = item.querySelector('.navbar-main__pane__item__label').innerText.toLowerCase();\n\n            item.classList.toggle('filter-not-matched', label.indexOf(search) < 0);\n        });\n    }\n\n    /**\n     * Event: Change sorting\n     *\n     * @param {HTMLElement} $pane\n     * @param {NavbarPane} pane\n     * @param {String} sortingMethod\n     */\n    onChangeSorting($pane, pane, sortingMethod) {\n        this.applySorting($pane, pane, sortingMethod);\n    }\n\n    /**\n     * Event: Error was returned\n     */\n    onError(err) {\n        UI.errorModal(err);\n    }\n    \n    /**\n     * Event: Click copy item id\n     */\n    onClickCopyItemId() {\n        let id = $('.context-menu-target').data('id');\n\n        copyToClipboard(id);\n    }\n\n    /**\n     * Event: Click tab\n     */\n    onClickTab(e) {\n        e.preventDefault();\n        \n        location.hash = e.currentTarget.dataset.route;\n        \n        $('.navbar-main__pane__item.active').toggleClass('active', false);\n        $('.page--environment__space--nav').toggleClass('expanded', true);\n    }\n\n    /**\n     * Event: Toggle children\n     */\n    onClickToggleChildren(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        e.currentTarget.parentElement.parentElement.classList.toggle('open');\n    }\n\n    /**\n     * Toggles the tab buttons\n     *\n     * @param {Boolean} isActive\n     */\n    toggleTabButtons(isActive) {\n        this.$element.toggleClass('hide-tabs', !isActive);\n    }\n\n    /**\n     * Shows a tab\n     *\n     * @param {String} tabName\n     */\n    showTab(tabRoute) {\n        this.$element.find('.navbar-main__pane').each(function(i) {\n            $(this).toggleClass('active', $(this).attr('data-route') == tabRoute);\n        });\n        \n        this.$element.find('.navbar-main__tab').each(function(i) {\n            $(this).toggleClass('active', $(this).attr('data-route') == tabRoute);\n        });\n    }\n\n    /**\n     * Saves the navbar state\n     */\n    save() {\n        this.state = {\n            buttons: {},\n            panes: {},\n            items: {},\n            scroll: $('.navbar-main__pane.active .navbar-main__pane__items').scrollTop() || 0\n        };\n        \n        this.$element.find('.navbar-main__tab').each((i, element) => {\n            let key = element.dataset.route;\n\n            if(!key) { return; }\n\n            this.state.buttons[key] = element.className;\n        });\n        \n        this.$element.find('.navbar-main__pane').each((i, element) => {\n            let key = element.dataset.route;\n\n            this.state.panes[key] = element.className;\n        });\n\n        this.$element.find('.navbar-main__pane__item').each((i, element) => {\n            let key = element.dataset.routingPath || element.dataset.mediaFolder;\n\n            this.state.items[key] = element.className.replace('loading', '');\n        });\n    }\n\n    /**\n     * Restores the navbar state\n     */\n    restore() {\n        if(!this.state) { return; }\n\n        // Restore tab buttons\n        this.$element.find('.navbar-main__tab').each((i, element) => {\n            let key = element.dataset.route;\n\n            if(key && this.state.buttons[key]) {\n                element.className = this.state.buttons[key];\n            }\n        });\n        \n        // Restore pane containers\n        this.$element.find('.navbar-main__pane').each((i, element) => {\n            let key = element.dataset.route;\n\n            if(key && this.state.panes[key]) {\n                element.className = this.state.panes[key];\n            }\n        });\n\n        // Restore pane items\n        this.$element.find('.navbar-main__pane__item').each((i, element) => {\n            let key = element.dataset.routingPath || element.dataset.mediaFolder;\n\n            if(key && this.state.items[key]) {\n                element.className = this.state.items[key];\n            }\n        });\n\n        // Restore scroll position\n        $('.navbar-main__pane.active .navbar-main__pane__items').scrollTop(this.state.scroll || 0);\n\n        this.state = null;\n    }\n\n    /**\n     * Reloads this view\n     */\n    reload() {\n        this.save();\n        \n        this.fetch();\n\n        this.restore();\n    }\n    \n    /**\n     * Static version of the reload method\n     */\n    static reload() {\n        Crisp.View.get('NavbarMain').reload();\n    }\n\n    /**\n     * Adds a tab pane\n     *\n     * @param {String} route\n     * @param {Object} settings\n     */\n    static addTabPane(route, label, icon, settings) {\n        Crisp.View.get('NavbarMain').tabPanes.push({\n            label: label,\n            route: route,\n            icon: icon,\n            settings: settings\n        });\n    }\n\n    /**\n     * Gets the icons of an item\n     *\n     * @param {Object} item\n     * @param {Object} settings\n     *\n     * @returns {String} Icon name\n     */\n    getItemIcon(item, settings) {\n        // If this item has a Schema id, fetch the appropriate icon\n        if(item.schemaId) {\n            let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(item.schemaId);\n\n            if(schema) {\n                return schema.icon;\n            }\n        }\n\n        return item.icon || settings.icon || 'file';\n    }\n\n    /**\n     * Gets whether the item is a directory\n     *\n     * @param {Object} item\n     *\n     * @return {Boolean} Is directory\n     */\n    isItemDirectory(item) {\n        if(item.properties && item.createDate) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Gets the routing path for an item\n     *\n     * @param {Object} item\n     * @param {Object} settings\n     *\n     * @returns {String} Routing path\n     */\n    getItemRoutingPath(item, settings) {\n        if(typeof settings.itemPath === 'function') {\n            return settings.itemPath(item);\n        }\n\n        return item.shortPath || item.path || item.id || null;\n    }\n\n    /**\n     * Gets the name of an item\n     *\n     * @param {Object} item\n     *\n     * @returns {String} Item name\n     */\n    getItemName(item) {\n        let name = '';\n\n        // This is a Content node\n        if(item.properties && item.createDate) {\n            // Use title directly if available\n            if(typeof item.properties.title === 'string') {\n                name = item.properties.title;\n\n            } else if(item.properties.title && typeof item.properties.title === 'object') {\n                // Use the current language title\n                if(item.properties.title[window.language]) {\n                    name = item.properties.title[window.language];\n\n                // If no title was found, search in other languages\n                } else {\n                    name = 'Untitled';\n\n                    for(let language in item.properties.title) {\n                        let languageTitle = item.properties.title[language];\n\n                        if(languageTitle) {\n                            name += ' - (' + language + ': ' + languageTitle + ')';\n                            break;\n                        }\n                    }\n                }\n            }\n\n            if(!name || name === 'Untitled') {\n                name = 'Untitled (id: ' + item.id.substring(0, 6) + '...)';\n            }\n        \n        } else if(item.title && typeof item.title === 'string') {\n            name = item.title;\n\n        } else if(item.name && typeof item.name === 'string') {\n            name = item.name;\n\n        } else {\n            name = item.id;\n\n        }\n\n        return name;\n    }\n\n    /**\n     * Highlights an item\n     */\n    highlightItem(tab, route) {\n        this.showTab(tab);\n\n        this.$element.find('.navbar-main__pane.active .navbar-main__pane__item').each((i, element) => {\n            let $item = $(element);\n            let id = ($item.children('a').attr('data-id') || '').toLowerCase();\n            let routingPath = ($item.attr('data-routing-path') || '').toLowerCase();\n\n            $item.toggleClass('active', false);\n            \n            if(\n                id == route.toLowerCase() ||\n                routingPath == route.toLowerCase()\n            ) {\n                $item.toggleClass('active', true);\n                $item.parents('.navbar-main__pane__item').toggleClass('open', true);\n            }\n        });\n    }\n\n    /**\n     * Clears all content within the navbar\n     */\n    clear() {\n        this.$element.find('.navbar-main__tabs').empty();\n        this.$element.find('.navbar-main__panes').empty();\n    }\n\n    /**\n     * Applies item sorting\n     *\n     * @param {HTMLElement} $pane\n     * @param {Object} pane\n     * @param {String} sortingMethod\n     */\n    applySorting($pane, pane, sortingMethod) {\n        let performSort = (a, b) => {\n            switch(sortingMethod) {\n                case 'alphaAsc':\n                    return a.querySelector('.navbar-main__pane__item__label').innerText > b.querySelector('.navbar-main__pane__item__label').innerText ? 1 : -1;\n                \n                case 'alphaDesc':\n                    return a.querySelector('.navbar-main__pane__item__label').innerText < b.querySelector('.navbar-main__pane__item__label').innerText ? 1 : -1;\n                \n                case 'dateAsc':\n                    return new Date(a.dataset.updateDate) > new Date(b.dataset.updateDate) ? 1 : -1;\n                \n                case 'dateDesc':\n                    return new Date(a.dataset.updateDate) < new Date(b.dataset.updateDate) ? 1 : -1;\n\n                default:\n                    return parseInt(a.dataset.sort) > parseInt(b.dataset.sort) ? 1 : -1;\n            }\n        };\n\n        // Sort direct and nested children\n        $pane.find('.navbar-main__pane__items, .navbar-main__pane__item .navbar-main__pane__item__children').each((i, container) => {\n            let $nestedChildren = $(container).find('>.navbar-main__pane__item');\n            $nestedChildren.sort(performSort);\n            $nestedChildren.appendTo($(container));\n        });\n    }\n\n    /**\n     * Applies item hierarchy\n     *\n     * @param {HTMLElement} $pane\n     * @param {Object} pane\n     * @param {Array} queue\n     */\n    applyHierarchy($pane, pane, queue) {\n        for(let queueItem of queue) {\n            if(!queueItem.parentDirAttr) { continue; } \n\n            // Find parent item\n            let parentDirAttrKey = Object.keys(queueItem.parentDirAttr)[0];\n            let parentDirAttrValue = queueItem.parentDirAttr[parentDirAttrKey];\n            let parentDirSelector = '.navbar-main__pane__item[' + parentDirAttrKey + '=\"' + parentDirAttrValue + '\"]';\n            let $parentDir = $pane.find(parentDirSelector);\n\n            // If parent element already exists, just append the queue item element\n            if(parentDirAttrKey && parentDirAttrValue && $parentDir.length > 0) {\n                $parentDir.children('.navbar-main__pane__item__children').append(queueItem.$element);\n            \n            // If not, create parent elements if specified\n            } else if(queueItem.createDir) {\n                let dirNames = parentDirAttrValue.split('/').filter((item) => { return item != ''; });\n                let finalDirName = '/';\n\n                // Create a folder for each directory name in the path\n                for(let i in dirNames) {\n                    let dirName = dirNames[i];\n\n                    let prevFinalDirName = finalDirName;\n                    finalDirName += dirName + '/';\n\n                    // Look for an existing directory element\n                    let $dir = $pane.find('[' + parentDirAttrKey + '=\"' + finalDirName + '\"]');\n\n                    // Create it if not found\n                    if($dir.length < 1) {\n                        $dir = _.div({class: 'navbar-main__pane__item', 'data-is-directory': true},\n                            _.a({\n                                class: 'navbar-main__pane__item__content'\n                            },\n                                _.span({class: 'navbar-main__pane__item__icon fa fa-folder'}),\n                                _.span({class: 'navbar-main__pane__item__label'}, dirName),\n                                \n                                // Toggle button\n                                _.button({class: 'navbar-main__pane__item__toggle-children'})\n                                    .click((e) => { this.onClickToggleChildren(e); })\n                            ),\n                            _.div({class: 'navbar-main__pane__item__children'})\n                        );\n                        \n                        $dir.attr(parentDirAttrKey, finalDirName);\n\n                        // Extra parent dir attributes\n                        if(queueItem.parentDirExtraAttr) {\n                            for(let k in queueItem.parentDirExtraAttr) {\n                                let v = queueItem.parentDirExtraAttr[k];\n\n                                $dir.attr(k, v);\n                            }\n                        }\n               \n                        // Append to previous dir \n                        let $prevDir = $pane.find('[' + parentDirAttrKey + '=\"' + prevFinalDirName + '\"]');\n                        \n                        if($prevDir.length > 0) {\n                            $prevDir.children('.navbar-main__pane__item__children').prepend($dir);\n\n                        // If no previous dir was found, append directly to pane\n                        } else {\n                            $pane.children('.navbar-main__pane__items').prepend($dir); \n                        }\n                        \n                        // Attach item context menu\n                        if(pane.settings.dirContextMenu) {\n                            UI.context($dir[0], pane.settings.dirContextMenu);\n                        }\n                    }\n                   \n                    // Only append the queue item to the final parent element\n                    if(i >= dirNames.length - 1) {\n                        $parentDir = $dir;\n                    } \n                }\n\n                $parentDir.children('.navbar-main__pane__item__children').append(queueItem.$element);\n            }\n\n            // Add expand/collapse buttons\n            if($parentDir.children('.navbar-main__pane__item__content').children('.navbar-main__pane__item__toggle-children').length < 1) {\n                $parentDir.children('.navbar-main__pane__item__content').append(\n                    _.button({class: 'navbar-main__pane__item__toggle-children'})\n                        .click((e) => { this.onClickToggleChildren(e); })\n                );\n            }\n        }\n    }\n}\n\nmodule.exports = NavbarMain;\n","module.exports = function() {\n    let currentUser = HashBrown.Models.User.current;\n    let currentProject = HashBrown.Helpers.ProjectHelper.currentProject;\n\n    let hasConnectionsScope = currentUser.hasScope(currentProject, 'connections');\n    let hasSchemasScope = currentUser.hasScope(currentProject, 'schemas');\n    let hasSettingsScope = currentUser.hasScope(currentProject, 'settings');\n     \n    return _.nav({class: 'navbar-main'},\n        // Buttons\n        _.div({class: 'navbar-main__tabs'},\n            _.a({href: '/', class: 'navbar-main__tab'},\n                _.img({src: '/svg/logo_white.svg', class: 'navbar-main__tab__icon'}),\n                _.div({class: 'navbar-main__tab__label'}, 'Dashboard')\n            ),            \n            _.each(this.tabPanes, (i, pane) => {\n                return _.button({class: 'navbar-main__tab', 'data-route': pane.route, title: pane.label},\n                    _.div({class: 'navbar-main__tab__icon fa fa-' + pane.icon}),\n                    _.div({class: 'navbar-main__tab__label'}, pane.label)\n                ).on('click', (e) => { this.onClickTab(e); });\n            })\n        ),\n\n        // Panes\n        _.div({class: 'navbar-main__panes'},\n            _.each(this.tabPanes, (i, pane) => {\n                let queue = [];\n\n                let sortingOptions = {\n                    default: 'Default',\n                    alphaAsc: 'A  Z',\n                    alphaDesc: 'Z  A'\n                };\n\n                if(pane.label === 'Content') {\n                    sortingOptions.dateAsc = 'Old  new';\n                    sortingOptions.dateDesc = 'New  old';\n                }\n\n                let $pane = _.div({class: 'navbar-main__pane', 'data-route': pane.route},\n                    // Filter/sort bar\n                    _.div({class: 'navbar-main__pane__filter-sort-bar'},\n                        _.div({class: 'widget-group'},\n                            new HashBrown.Views.Widgets.Input({\n                                placeholder: 'Filter',\n                                onChange: (newValue) => { this.onChangeFilter($pane, pane, newValue); },\n                                type: 'text'\n                            }),\n                            new HashBrown.Views.Widgets.Dropdown({\n                                placeholder: 'Sort',\n                                options: sortingOptions,\n                                onChange: (newValue) => { this.onChangeSorting($pane, pane, newValue); }\n                            })\n                        )\n                    ),\n\n                    // Move buttons\n                    _.div({class: 'navbar-main__pane__move-buttons widget-group'},\n                        _.button({class: 'widget widget--button low expanded navbar-main__pane__move-button navbar-main__pane__move-button--root-dir'}, 'Move to root'),\n                        _.button({class: 'widget widget--button low expanded navbar-main__pane__move-button navbar-main__pane__move-button--new-dir'}, 'New folder')\n                    ),\n\n                    // Items\n                    _.div({class: 'navbar-main__pane__items'},\n                        _.each(pane.settings.items || pane.settings.getItems(), (i, item) => {\n                            let id = item.id || i;\n                            let name = this.getItemName(item);\n                            let icon = this.getItemIcon(item, pane.settings);\n                            let routingPath = this.getItemRoutingPath(item, pane.settings);\n                            let isDirectory = this.isItemDirectory(item);\n                            let queueItem = {};\n                            let hasRemote = item.sync ? item.sync.hasRemote : false;\n                            let isRemote = item.sync ? item.sync.isRemote : false;\n\n                            let $item = _.div(\n                                {\n                                    class: 'navbar-main__pane__item',\n                                    'data-routing-path': routingPath,\n                                    'data-locked': item.isLocked,\n                                    'data-remote': isRemote,\n                                    'data-local': hasRemote,\n                                    'data-is-directory': isDirectory,\n                                    'data-sort': item.sort || 0,\n                                    'data-update-date': item.updateDate || item.createDate\n                                },\n                                _.a({\n                                    'data-id': id,\n                                    'data-name': name,\n                                    href: '#' + (routingPath ? pane.route + routingPath : pane.route),\n                                    class: 'navbar-main__pane__item__content'\n                                },\n                                    _.div({class: 'navbar-main__pane__item__icon fa fa-' + icon}),\n                                    _.div({class: 'navbar-main__pane__item__label'}, name)\n                                ),\n                                _.div({class: 'navbar-main__pane__item__children'}),\n                                _.div({class: 'navbar-main__pane__item__insert-below'})\n                            );\n\n                            // Attach item context menu\n                            if(pane.settings.getItemContextMenu) {\n                                UI.context($item.find('a')[0], pane.settings.getItemContextMenu(item));\n\n                            } else if(pane.settings.itemContextMenu) {\n                                UI.context($item.find('a')[0], pane.settings.itemContextMenu);\n\n                            }\n                            \n                            // Add element to queue item\n                            queueItem.$element = $item;\n\n                            // Use specific hierarchy behaviours\n                            if(pane.settings.hierarchy) {\n                                pane.settings.hierarchy(item, queueItem);\n                            }\n\n                            // Add queue item to sorting queue\n                            queue.push(queueItem);\n\n                            return $item;\n                        })\n                    )\n                );\n\n                this.applyHierarchy($pane, pane, queue);\n                this.applySorting($pane, pane);\n\n                // Attach pane context menu\n                if(pane.settings.paneContextMenu) {\n                    UI.context($pane[0], pane.settings.paneContextMenu);\n                }\n                \n                return $pane;\n            })\n        ),\n\n        // Toggle button (mobile only)\n        _.button({class: 'navbar-main__toggle'})\n            .click((e) => {\n                $('.page--environment__space--nav').toggleClass('expanded');\n            })\n    );\n};\n","'use strict';\n\n/**\n * The main menu\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass MainMenu extends Crisp.View {\n    constructor(params) {\n        super(params);\n        \n        this.fetch();\n        \n        $('.page--environment__space--menu').html(this.$element);\n    }\n    \n    /**\n     * Event: On change language\n     *\n     * @param {String} newLanguage\n     */\n    onChangeLanguage(newLanguage) {\n        localStorage.setItem('language', newLanguage);\n\n        window.language = newLanguage;\n\n        HashBrown.Helpers.RequestHelper.reloadResource('content')\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            let contentEditor = Crisp.View.get('ContentEditor');\n\n            if(contentEditor) {\n                contentEditor.model = null;\n                contentEditor.fetch();\n            }\n\n            this.fetch();\n        });\n    }\n    \n    /**\n     * Event: Click question\n     *\n     * @param {String} topic\n     */\n    onClickQuestion(topic) {\n        switch(topic) {\n            case 'content':\n                let modal = UI.messageModal('Content', [ \n                    _.p('This section contains all of your authored work. The content is a hierarchical tree of nodes that can contain text and media, in simple or complex structures.')\n                ]);\n                break;\n\n            case 'media':\n                UI.messageModal('Media', [\n                    _.p('This is a gallery of your statically hosted files, such as images, videos and PDFs.'),\n                    _.p('The contents of this gallery depends on which <a href=\"#/connections\">Connection</a> has been set up as the Media provider')\n                ]);\n                break;\n\n            case 'forms':\n                UI.messageModal('Forms', 'If you need an input form on your website, you can create the model for it here and see a list of the user submitted input.');\n                break;\n\n            case 'connections':\n                UI.messageModal('Connections', [\n                    _.p('Connections are endpoints and resources for your content. Connections can be set up to publish your Content and Media to remote servers.'),\n                    _.p('They can also be set up to provide statically hosted media.')\n                ]);\n                break;\n\n            case 'schemas':\n                UI.messageModal('Schemas', 'This is a library of content structures. Here you define how your editable content looks and behaves. You can define schemas for both content nodes and property fields.');\n                break;\n        }\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        this.languages = HashBrown.Helpers.LanguageHelper.getLanguagesSync() || [];\n    }\n\n    /**\n     * Post render\n     */\n    postrender() {\n        this.languageDropdown.notify(window.language);\n    }\n\n    /**\n     * Renders this menu\n     */\n    template() {\n        return _.div({class: 'main-menu widget-group'},\n            // Language picker\n            _.if(Array.isArray(this.languages) && this.languages.length > 1,\n                this.languageDropdown = new HashBrown.Views.Widgets.Dropdown({\n                    tooltip: 'Language',\n                    icon: 'flag',\n                    value: window.language,\n                    options: this.languages,\n                    onChange: (newValue) => {\n                        this.onChangeLanguage(newValue);\n                    }\n                })\n            ),\n\n            // User dropdown\n            this.userDropdown = new HashBrown.Views.Widgets.Dropdown({\n                tooltip: 'Logged in as \"' + (HashBrown.Models.User.current.fullName || HashBrown.Models.User.current.username) + '\"',\n                icon: 'user',\n                reverseKeys: true,\n                options: {\n                    'User settings': () => { new HashBrown.Views.Editors.UserEditor({ hidePermissions: true, model: HashBrown.Models.User.current }); },\n                    'Log out': () => {\n                        HashBrown.Helpers.RequestHelper.customRequest('post', '/api/user/logout')\n                        .then(() => {\n                            location = '/';\n                        });\n                    }\n                }\n            }),\n\n            // Help\n            this.helpDropdown = new HashBrown.Views.Widgets.Dropdown({\n                tooltip: 'Get help',\n                icon: 'question-circle',\n                reverseKeys: true,\n                options: {\n                    'Connections': () => { this.onClickQuestion('connections'); },\n                    'Content': () => { this.onClickQuestion('content'); },\n                    'Forms': () => { this.onClickQuestion('forms'); },\n                    'Media': () => { this.onClickQuestion('media'); },\n                    'Schemas': () => { this.onClickQuestion('schemas'); }\n                }\n            })\n        );\n    }\n}\n\nmodule.exports = MainMenu;\n","'use strict';\n\n/**\n * A navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass NavbarPane {\n    /**\n     * Init\n     */\n    static init() {\n        HashBrown.Views.Navigation.NavbarMain.addTabButton('My pane', '/my-route', 'question');\n    }\n\n    /**\n     * Event: Click copy item id\n     */\n    static onClickCopyItemId() {\n        let id = $('.context-menu-target').data('id');\n\n        copyToClipboard(id);\n    }\n    \n    /**\n     * Event: Click open in new tab\n     */\n    static onClickOpenInNewTab() {\n        let href = $('.context-menu-target').attr('href');\n\n        window.open(location.protocol + '//' + location.host + '/' + HashBrown.Helpers.ProjectHelper.currentProject + '/' + HashBrown.Helpers.ProjectHelper.currentEnvironment + '/' + href);\n    }\n\n    /**\n     * Event: Click refresh resource\n     *\n     * @param {String} resource\n     */\n    static onClickRefreshResource(resource) {\n        HashBrown.Helpers.RequestHelper.reloadResource(resource)\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        });\n    }\n\n    /**\n     * Event: Change directory\n     *\n     * @param {String} id\n     * @param {String} newParent\n     */\n    static onChangeDirectory(id, newParent) {\n\n    }\n    \n    /**\n     * Event: Change sort index\n     *\n     * @param {String} id\n     * @param {Number} newIndex\n     * @param {String} newParent\n     */\n    static onChangeSortIndex(id, newIndex, newParent) {\n\n    }\n\n    /**\n     * Event: Click move item\n     */\n    static onClickMoveItem() {\n        let id = $('.context-menu-target').data('id');\n        let navbar = Crisp.View.get('NavbarMain');\n        let $pane = navbar.$element.find('.navbar-main__pane.active');\n\n        $pane.find('.navbar-main__pane__item a[data-id=\"' + id + '\"]').parent().toggleClass('moving-item', true);\n        $pane.toggleClass('select-dir', true);\n        \n        // Reset\n        function reset(newPath) {\n            $pane.find('.navbar-main__pane__item[data-id=\"' + id + '\"]').toggleClass('moving-item', false);\n            $pane.toggleClass('select-dir', false);\n            $pane.find('.navbar-main__pane__move-button').off('click');\n            $pane.find('.navbar-main__pane__item__content').off('click');\n            $pane.find('.moving-item').toggleClass('moving-item', false);\n        }\n        \n        // Cancel by escape key\n        $(document).on('keyup', (e) => {\n            if(e.which == 27) {\n                reset();\n            }\n        });\n\n        // Click existing directory\n        $pane.find('.navbar-main__pane__item[data-is-directory=\"true\"]:not(.moving-item)').each((i, element) => {\n            $(element).children('.navbar-main__pane__item__content').on('click', (e) => {\n                e.preventDefault();\n                e.stopPropagation();\n\n                let newPath = $(element).attr('data-media-folder') || $(element).attr('data-content-id');\n\n                reset(newPath);\n\n                this.onChangeDirectory(id, newPath);\n            });\n        }); \n\n        // Click below item\n        $pane.find('.navbar-main__pane__item__insert-below').click((e) => {\n            e.preventDefault();\n            e.stopPropagation();\n\n            // Create new sort index based on the container we clicked below\n            let $container = $(e.target).parent();\n            let containerIndex = parseInt($container.data('sort') || 0)\n\n            let newIndex = containerIndex + 1;\n\n            // Reset the move state\n            reset();\n\n            // Fetch the parent id as well, in case that changed\n            let $parentItem = $container.parents('.navbar-main__pane__item');\n            let newPath = $parentItem.length > 0 ? ($parentItem.attr('data-media-folder') || $parentItem.attr('data-content-id')) : null;\n\n            // Trigger sort change event\n            this.onChangeSortIndex(id, newIndex, newPath);\n        });\n\n        // Click \"move to root\" button\n        $pane.find('.navbar-main__pane__move-button--root-dir').on('click', (e) => {\n            let newPath = '/';\n\n            reset(newPath);\n\n            this.onChangeDirectory(id, newPath);\n        });\n        \n        $pane.find('.navbar-main__pane__move-button--new-dir').toggle(this.canCreateDirectory == true);\n\n        if(this.canCreateDirectory) {\n            $pane.find('.navbar-main__pane__move-button--new-dir').on('click', () => {\n                HashBrown.Helpers.MediaHelper.getMediaById(id)\n                .then((item) => {\n                    let messageModal = new HashBrown.Views.Modals.Modal({\n                        title: 'Move item',\n                        body: _.div({class: 'widget-group'},\n                            _.input({class: 'widget widget--input text', value: (item.folder || item.parentId || ''), placeholder: '/path/to/media/'}),\n                            _.div({class: 'widget widget--label'}, (item.name || item.title || item.id))\n                        ),\n                        actions: [\n                            {\n                                label: 'OK',\n                                onClick: () => {\n                                    let newPath = messageModal.$element.find('.widget--input').val();\n                                    \n                                    reset(newPath);\n\n                                    this.onChangeDirectory(item.id, newPath);\n                                }\n                            }\n                        ]\n                    });\n                })\n                .catch(UI.errorModal);\n            });\n        }\n    }\n}\n\nmodule.exports = NavbarPane;\n","'use strict';\n\n/**\n * The Connection navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass ConnectionPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: Click new connection\n     */\n    static onClickNewConnection() {\n        let newConnection;\n\n        HashBrown.Helpers.RequestHelper.request('post', 'connections/new')\n        .then((connection) => {\n            newConnection = connection;\n\n            return HashBrown.Helpers.RequestHelper.reloadResource('connections');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            location.hash = '/connections/' + newConnection.id;\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: On click remove connection\n     */\n    static onClickRemoveConnection() {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let name = $element.data('name');\n        \n        new UI.confirmModal('delete', 'Delete connection', 'Are you sure you want to remove the connection \"' + name + '\"?', () => {\n            HashBrown.Helpers.RequestHelper.request('delete', 'connections/' + id)\n            .then(() => {\n                debug.log('Removed connection with alias \"' + id + '\"', this); \n\n                return HashBrown.Helpers.RequestHelper.reloadResource('connections');\n            })\n            .then(() => {\n                HashBrown.Views.Navigation.NavbarMain.reload();\n\n                // Cancel the ConnectionEditor view if it was displaying the deleted connection\n                if(location.hash == '#/connections/' + id) {\n                    location.hash = '/connections/';\n                }\n            })\n            .catch(UI.errorModal);\n        });\n    }\n    \n    /**\n     * Event: Click pull connection\n     */\n    static onClickPullConnection() {\n        let connectionEditor = Crisp.View.get('ConnectionEditor');\n        let pullId = $('.context-menu-target').data('id');\n\n        // API call to pull the Connection by id\n        HashBrown.Helpers.RequestHelper.request('post', 'connections/pull/' + pullId, {})\n        \n        // Upon success, reload all Connection models    \n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('connections');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n\t\t\tlocation.hash = '/connections/' + pullId;\n\t\t\n\t\t\tlet editor = Crisp.View.get('ConnectionEditor');\n\n\t\t\tif(editor && editor.model.id == pullId) {\n                editor.model = null;\n\t\t\t\teditor.fetch();\n\t\t\t}\n        }) \n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click push connection\n     */\n    static onClickPushConnection() {\n\t\tlet $element = $('.context-menu-target');\n        let pushId = $element.data('id');\n\n\t\t$element.parent().addClass('loading');\n\n        // API call to push the Connection by id\n        HashBrown.Helpers.RequestHelper.request('post', 'connections/push/' + pushId)\n\n        // Upon success, reload all Connection models\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('connections');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        }) \n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Init\n     */\n    static init() {\n        if(!currentUserHasScope('connections')) { return; }\n\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/connections/', 'Connections', 'exchange', {\n            icon: 'exchange',\n            \n            getItems: () => { return resources.connections; },\n\n            // Item context menu\n            getItemContextMenu: (item) => {\n                let menu = {};\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n                \n                menu['This connection'] = '---';\n\n                menu['Open in new tab'] = () => { this.onClickOpenInNewTab(); };\n\n                if(!item.sync.hasRemote && !item.sync.isRemote && !item.isLocked) {\n                    menu['Remove'] = () => { this.onClickRemoveConnection(); };\n                }\n                \n                menu['Copy id'] = () => { this.onClickCopyItemId(); };\n\n                if(item.isLocked && !item.sync.isRemote) { isSyncEnabled = false; }\n\n                if(isSyncEnabled) {\n                    menu['Sync'] = '---';\n\n                    if(!item.sync.isRemote) {\n                        menu['Push to remote'] = () => { this.onClickPushConnection(); };\n                    }\n\n                    if(item.sync.hasRemote) {\n                        menu['Remove local copy'] = () => { this.onClickRemoveConnection(); };\n                    }\n                    \n                    if(item.sync.isRemote) {\n                        menu['Pull from remote'] = () => { this.onClickPullConnection(); };\n                    }\n                }\n                \n                menu['General'] = '---';\n                menu['New connection'] = () => { this.onClickNewConnection(); };\n                menu['Refresh'] = () => { this.onClickRefreshResource('connections'); };\n\n                return menu;\n            },\n            \n            // General context menu\n            paneContextMenu: {\n                'Connections': '---',\n                'New connection': () => { this.onClickNewConnection(); },\n                'Refresh': () => { this.onClickRefreshResource('connections'); }\n            }\n        });\n    }\n}\n\nmodule.exports = ConnectionPane;\n","'use strict';\n\n/**\n * The Content navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass ContentPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: Change parent\n     */\n    static onChangeDirectory(id, parentId) {\n        if(parentId == '/') {\n            parentId = '';\n        }\n\n        // Get the Content model\n        HashBrown.Helpers.ContentHelper.getContentById(id)\n\n        // API call to apply changes to Content parent\n        .then((content) => {\n            content.parentId = parentId;\n         \n            return HashBrown.Helpers.RequestHelper.request('post', 'content/' + id, content);\n        })\n\n        // Reload all Content models\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n\n        // Reload UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Change sort index\n     */\n    static onChangeSortIndex(id, newIndex, parentId) {\n        if(parentId == '/') {\n            parentId = '';\n        }\n        \n        // Get the Content model\n        HashBrown.Helpers.ContentHelper.getContentById(id)\n\n        // API call to apply changes to Content parent\n        .then((content) => {\n            content.sort = newIndex;\n            content.parentId = parentId;\n         \n            return HashBrown.Helpers.RequestHelper.request('post', 'content/' + id, content);\n        })\n\n        // Reload all Content models\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n\n        // Reload UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click pull content\n     */\n    static onClickPullContent() {\n        let contentEditor = Crisp.View.get('ContentEditor');\n        let pullId = $('.context-menu-target').data('id');\n\n        // API call to pull the Content by id\n        HashBrown.Helpers.RequestHelper.request('post', 'content/pull/' + pullId, {})\n        \n        // Upon success, reload all Content models    \n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n\t\t\tlocation.hash = '/content/' + pullId;\n\t\t\n\t\t\tlet editor = Crisp.View.get('ContentEditor');\n\n\t\t\tif(editor && editor.model && editor.model.id == pullId) {\n                editor.model = null;\n\t\t\t\teditor.fetch();\n\t\t\t}\n        }) \n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click push content\n     */\n    static onClickPushContent() {\n\t\tlet $element = $('.context-menu-target');\n        let pushId = $element.data('id');\n\n\t\t$element.parent().addClass('loading');\n\n        // API call to push the Content by id\n        HashBrown.Helpers.RequestHelper.request('post', 'content/push/' + pushId)\n\n        // Upon success, reload all Content models\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        }) \n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click new content\n     *\n     * @param {String} parentId\n     */\n    static onClickNewContent(parentId, asSibling) {\n        // Try to get a parent Schema if it exists\n        return function getParentSchema() {\n            if(parentId) {\n                return HashBrown.Helpers.ContentHelper.getContentById(parentId)\n                .then((parentContent) => {\n                    return HashBrown.Helpers.SchemaHelper.getSchemaById(parentContent.schemaId);\n                });\n            } else {\n                return Promise.resolve();\n            }\n        }()\n\n        // Parent Schema logic resolved, move on\n        .then((parentSchema) => {\n            let allowedSchemas = parentSchema ? parentSchema.allowedChildSchemas : null;\n\n            // If allowed child Schemas were found, but none were provided, don't create the Content node\n            if(allowedSchemas && allowedSchemas.length < 1) {\n                return Promise.reject(new Error('No child content schemas are allowed under this parent'));\n            \n            // Some child Schemas were provided, or no restrictions were defined\n            } else {\n                let schemaId;\n                let sortIndex = HashBrown.Helpers.ContentHelper.getNewSortIndex(parentId);\n              \n                // Instatiate a new Content Schema reference editor\n                let schemaReference = new HashBrown.Views.Editors.FieldEditors.ContentSchemaReferenceEditor({\n                    config: {\n                        allowedSchemas: allowedSchemas,\n                        parentSchema: parentSchema\n                    }\n                });\n\n                schemaReference.on('change', (newValue) => {\n                    schemaId = newValue;\n                });\n\n                schemaReference.pickFirstSchema();\n\n                schemaReference.$element.addClass('widget');\n\n                // Render the confirmation modal\n                UI.confirmModal(\n                    'OK',\n                    'Create new content',\n                    _.div({class: 'widget-group'},\n                        _.label({class: 'widget widget--label'},'Schema'),\n                        schemaReference.$element\n                    ),\n\n                    // Event fired when clicking \"OK\"\n                    () => {\n                        if(!schemaId) { return false; }\n                       \n                        let apiUrl = 'content/new/' + schemaId + '?sort=' + sortIndex;\n\n                        let newContent;\n\n                        // Append parent Content id to request URL\n                        if(parentId) {\n                            apiUrl += '&parent=' + parentId;\n                        }\n\n                        // API call to create new Content node\n                        HashBrown.Helpers.RequestHelper.request('post', apiUrl)\n                        \n                        // Upon success, reload resource and UI elements    \n                        .then((result) => {\n                            newContent = result;\n\n                            return HashBrown.Helpers.RequestHelper.reloadResource('content');\n                        })\n                        .then(() => {\n                            HashBrown.Views.Navigation.NavbarMain.reload();\n                            \n                            location.hash = '/content/' + newContent.id;\n                        })\n                        .catch(UI.errorModal);\n                    }\n                );\n            }\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Render Content publishing modal\n     *\n     * @param {Content} content\n     */\n    static renderPublishingModal(content) {\n        let modal = new HashBrown.Views.Modals.PublishingSettingsModal({\n            model: content\n        });\n\n        modal.on('change', (newValue) => {\n            if(newValue.governedBy) { return; }\n           \n            // Commit publishing settings to Content model\n            content.settings.publishing = newValue;\n    \n            // API call to save the Content model\n            HashBrown.Helpers.RequestHelper.request('post', 'content/' + content.id, content)\n            \n            // Upon success, reload the UI    \n            .then(() => {\n                HashBrown.Views.Navigation.NavbarMain.reload();\n\n                if(Crisp.Router.params.id == content.id) {\n                    let contentEditor = Crisp.View.get('ContentEditor');\n\n                    contentEditor.model = content;\n                    return contentEditor.fetch();\n                \n                } else {\n                    return Promise.resolve();\n\n                }\n            })\n            .catch(UI.errorModal);\n        });\n    }\n\n    /**\n     * Event: Click Content settings\n     */\n    static onClickContentPublishing() {\n        let id = $('.context-menu-target').data('id');\n\n        // Get Content model\n        let content = HashBrown.Helpers.ContentHelper.getContentByIdSync(id);\n\n        this.renderPublishingModal(content);\n    }\n\n    /**\n     * Event: Click remove content\n     *\n     * @param {Boolean} shouldUnpublish\n     */\n    static onClickRemoveContent(shouldUnpublish) {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let name = $element.data('name');\n    \n        HashBrown.Helpers.ContentHelper.getContentById(id)\n        .then((content) => {\n            content.settingsSanityCheck('publishing');\n\n            function unpublishConnection() {\n                return HashBrown.Helpers.RequestHelper.request('post', 'content/unpublish', content)\n                .then(() => {\n                    return onSuccess();\n                });\n            }\n            \n            function onSuccess() {\n                return HashBrown.Helpers.RequestHelper.reloadResource('content')\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n                            \n                    let contentEditor = Crisp.View.get('ContentEditor');\n                   \n                    // Change the ContentEditor view if it was displaying the deleted content\n                    if(contentEditor && contentEditor.model && contentEditor.model.id == id) {\n                        // The Content was actually deleted\n                        if(shouldUnpublish) {\n                            location.hash = '/content/';\n                        \n                        // The Content still has a synced remote\n                        } else {\n                            contentEditor.model = null;\n                            contentEditor.fetch();\n\n                        }\n                    }\n                    \n                    $element.parent().toggleClass('loading', false);\n\n                    return Promise.resolve();\n                });\n            }\n\n            let shouldDeleteChildren = false;\n            \n            UI.confirmModal(\n                'Remove',\n                'Remove the content \"' + name + '\"?',\n                _.div({class: 'widget-group'},\n                    _.label({class: 'widget widget--label'}, 'Remove child Content too'),\n                    new HashBrown.Views.Widgets.Input({\n                        value: shouldDeleteChildren,\n                        type: 'checkbox',\n                        onChange: (newValue) => {\n                            shouldDeleteChildren = newValue;\n                        }\n                    }).$element\n                ),\n                () => {\n                    $element.parent().toggleClass('loading', true);\n\n                    HashBrown.Helpers.RequestHelper.request('delete', 'content/' + id + '?removeChildren=' + shouldDeleteChildren)\n                    .then(() => {\n                        if(shouldUnpublish && content.getSettings('publishing').connectionId) {\n                            return unpublishConnection();\n                        } else {\n                            return onSuccess();\n                        }\n                    })\n                    .catch((e) => {\n                        $element.parent().toggleClass('loading', false);\n                        UI.errorModal(e);\n                    });\n                }\n            );\n        });\n    }\n\n    /**\n     * Event: Click rename\n     */\n    static onClickRename() {\n        let id = $('.context-menu-target').data('id');\n        let content = HashBrown.Helpers.ContentHelper.getContentByIdSync(id);\n\n        UI.messageModal(\n            'Rename \"' + content.getPropertyValue('title', window.language) + '\"', \n            _.div({class: 'widget-group'}, \n                _.label({class: 'widget widget--label'}, 'New name'),\n                new HashBrown.Views.Widgets.Input({\n                    value: content.getPropertyValue('title', window.language), \n                    onChange: (newValue) => {\n                        content.setPropertyValue('title', newValue, window.language);\n                    }\n                })\n            ),\n            () => {\n                HashBrown.Helpers.ContentHelper.setContentById(id, content)\n                .then(() => {\n                    return HashBrown.Helpers.RequestHelper.reloadResource('content');\n                })\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n\n                    // Update ContentEditor if needed\n                    let contentEditor = Crisp.View.get('ContentEditor');\n\n                    if(!contentEditor || contentEditor.model.id !== id) { return; }\n\n                    contentEditor.model = null;\n                    contentEditor.fetch();\n                })\n                .catch(UI.errorModal);\n            }\n        );\n    }\n\n    /**\n     * Init\n     */\n    static init() {\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/content/', 'Content', 'file', {\n            getItems: () => { return resources.content; },\n\n            // Item context menu\n            getItemContextMenu: (item) => {\n                let menu = {};\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n                \n                menu['This content'] = '---';\n                \n                menu['Open in new tab'] = () => { this.onClickOpenInNewTab(); };\n                \n                menu['Rename'] = () => { this.onClickRename(); };\n\n                menu['New child content'] = () => {\n                    this.onClickNewContent($('.context-menu-target').data('id'));\n                };\n                                \n                if(!item.sync.isRemote && !item.isLocked) {\n                    menu['Move'] = () => { this.onClickMoveItem(); };\n                }\n\n                if(!item.sync.hasRemote && !item.isLocked) {\n                    menu['Remove'] = () => { this.onClickRemoveContent(true); };\n                }\n                \n                menu['Copy id'] = () => { this.onClickCopyItemId(); };\n                \n                if(!item.sync.isRemote && !item.isLocked) {\n                    menu['Settings'] = '---';\n                    menu['Publishing'] = () => { this.onClickContentPublishing(); };\n                }\n                \n                if(item.isLocked && !item.sync.isRemote) { isSyncEnabled = false; }\n               \n                if(isSyncEnabled) {\n                    menu['Sync'] = '---';\n                    \n                    if(!item.sync.isRemote) {\n                        menu['Push to remote'] = () => { this.onClickPushContent(); };\n                    }\n\n                    if(item.sync.hasRemote) {\n                        menu['Remove local copy'] = () => { this.onClickRemoveContent(); };\n                    }\n                    \n                    if(item.sync.isRemote) {\n                        menu['Pull from remote'] = () => { this.onClickPullContent(); };\n                    }\n                }\n\n                menu['General'] = '---';\n                menu['New content'] = () => { this.onClickNewContent(); };  \n                menu['Refresh'] = () => { this.onClickRefreshResource('content'); };\n\n                return menu;\n            },\n\n            // Set general context menu items\n            paneContextMenu: {\n                'Content': '---',\n                'New content': () => { this.onClickNewContent(); },\n                'Refresh': () => { this.onClickRefreshResource('content'); }\n            },\n\n            // Hierarchy logic\n            hierarchy: function(item, queueItem) {\n                // Set id data attributes\n                queueItem.$element.attr('data-content-id', item.id);\n                queueItem.parentDirAttr = {'data-content-id': item.parentId };\n            }\n        });\n    }\n}\n\nmodule.exports = ContentPane;\n","'use strict';\n\n/**\n * The Forms navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass FormsPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: Click create new form\n     */\n    static onClickNewForm() {\n        HashBrown.Helpers.RequestHelper.request('post', 'forms/new')\n        .then((newFormId) => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('forms')\n            .then(() => {\n                HashBrown.Views.Navigation.NavbarMain.reload();\n                \n                location.hash = '/forms/' + newFormId;\n            });\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: On click remove\n     */\n    static onClickRemoveForm() {\n        let view = this;\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let form = resources.forms.filter((form) => { return form.id == id; })[0];\n\n        UI.confirmModal(\n            'delete',\n            'Delete form',\n            'Are you sure you want to delete the form \"' + form.title + '\"?',\n            () => {\n                HashBrown.Helpers.RequestHelper.request('delete', 'forms/' + form.id)\n                .then(() => {\n                    debug.log('Removed Form with id \"' + form.id + '\"', view); \n\n                    return HashBrown.Helpers.RequestHelper.reloadResource('forms');\n                })\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n\n                    // Cancel the FormEditor view\n                    location.hash = '/forms/';\n                })\n                .catch(UI.errorModal);\n            }\n        );\n    }\n    \n    /**\n     * Event: Click pull Form\n     */\n    static onClickPullForm() {\n        let pullId = $('.context-menu-target').data('id');\n\n        // API call to pull the Form by id\n        HashBrown.Helpers.RequestHelper.request('post', 'forms/pull/' + pullId, {})\n        \n        // Upon success, reload all Form models    \n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('forms');\n        })\n\n        // Reload the UI\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n\t\t\tlocation.hash = '/forms/' + pullId;\n\t\t\n\t\t\tlet editor = Crisp.View.get('FormEditor');\n\n\t\t\tif(editor && editor.model.id == pullId) {\n                editor.model = null;\n\t\t\t\teditor.fetch();\n\t\t\t}\n        }) \n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click push Form\n     */\n    static onClickPushForm() {\n\t\tlet $element = $('.context-menu-target');\n        let pushId = $element.data('id');\n\n\t\t$element.parent().addClass('loading');\n\n        HashBrown.Helpers.RequestHelper.request('post', 'forms/push/' + pushId)\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('forms');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        }) \n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Init\n     */\n    static init() {\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/forms/', 'Forms', 'wpforms', {\n            icon: 'wpforms',\n            \n            getItems: () => { return resources.forms; },\n\n            // Hierarchy logic\n            hierarchy: function(item, queueItem) {\n                queueItem.$element.attr('data-form-id', item.id);\n               \n                if(item.folder) {\n                    queueItem.createDir = true;\n                    queueItem.parentDirAttr = {'data-form-folder': item.folder };\n                }\n            },\n            \n            // Item context menu\n            getItemContextMenu: (item) => {\n                let menu = {};\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n                \n                menu['This form'] = '---';\n\n                menu['Open in new tab'] = () => { this.onClickOpenInNewTab(); };\n\n                if(!item.sync.hasRemote && !item.sync.isRemote && !item.isLocked) {\n                    menu['Remove'] = () => { this.onClickRemoveForm(); };\n                }\n                \n                menu['Copy id'] = () => { this.onClickCopyItemId(); };\n\n                if(item.isLocked && !item.sync.isRemote) { isSyncEnabled = false; }\n\n                if(isSyncEnabled) {\n                    menu['Sync'] = '---';\n\n                    if(!item.sync.isRemote) {\n                        menu['Push to remote'] = () => { this.onClickPushForm(); };\n                    }\n\n                    if(item.sync.hasRemote) {\n                        menu['Remove local copy'] = () => { this.onClickRemoveForm(); };\n                    }\n                    \n                    if(item.sync.isRemote) {\n                        menu['Pull from remote'] = () => { this.onClickPullForm(); };\n                    }\n                }\n                \n                menu['General'] = '---';\n                menu['New form'] = () => { this.onClickNewForm(); };\n                menu['Refresh'] = () => { this.onClickRefreshResource('forms'); };\n\n                return menu;\n            },\n            \n            // General context menu\n            paneContextMenu: {\n                'Forms': '---',\n                'New form': () => { this.onClickNewForm(); },\n                'Refresh': () => { this.onClickRefreshResource('forms'); }\n            }\n        });\n    }\n}\n\nmodule.exports = FormsPane;\n","'use strict';\n\n/**\n * The Media navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass MediaPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: On change folder path\n     *\n     * @param {String} newFolder\n     */\n    static onChangeDirectory(id, newFolder) {\n        HashBrown.Helpers.RequestHelper.request(\n            'post',\n            'media/tree/' + id,\n            newFolder ? {\n                id: id,\n                folder: newFolder\n            } : null\n        )\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('media');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n\n            location.hash = '/media/' + id;\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click rename media\n     */\n    static onClickRenameMedia() {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let name = $element.data('name');\n\n        let modal = UI.messageModal(\n            'Rename ' + name,\n            new HashBrown.Views.Widgets.Input({\n                type: 'text',\n                value: name,\n                onChange: (newValue) => { name = newValue; }\n            }),\n            () => {\n                HashBrown.Helpers.RequestHelper.request('post', 'media/rename/' + id + '?name=' + name)\n                .then(() => {\n                    return HashBrown.Helpers.RequestHelper.reloadResource('media');\n                })\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n\n                    let mediaViewer = Crisp.View.get(HashBrown.Views.Editors.MediaViewer);\n\n                    if(mediaViewer && mediaViewer.model && mediaViewer.model.id === id) {\n                        mediaViewer.model = null;\n\n                        mediaViewer.fetch();\n                    }\n                })\n                .catch(UI.errorModal);\n            }\n        );\n\n        modal.$element.find('input').focus();\n    }\n\n    /**\n     * Event: Click remove media\n     */\n    static onClickRemoveMedia() {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let name = $element.data('name');\n        \n        UI.confirmModal(\n            'delete',\n            'Delete media',\n            'Are you sure you want to delete the media object \"' + name + '\"?',\n            () => {\n                $element.parent().toggleClass('loading', true);\n\n                HashBrown.Helpers.RequestHelper.request('delete', 'media/' + id)\n                .then(() => {\n                    return HashBrown.Helpers.RequestHelper.reloadResource('media');\n                })\n                .then(() => {\n                    HashBrown.Views.Navigation.NavbarMain.reload();\n\n                    // Cancel the MediaViever view if it was displaying the deleted object\n                    if(location.hash == '#/media/' + id) {\n                        location.hash = '/media/';\n                    }\n                })\n                .catch(UI.errorModal);\n            }\n        );\n    }\n\n    /**\n     * Event: Click replace media\n     */\n    static onClickReplaceMedia() {\n        let id = $('.context-menu-target').data('id');\n\n        this.onClickUploadMedia(id);\n    }\n\n    /**\n     * Event: Click upload media\n     */\n    static onClickUploadMedia(replaceId) {\n        let folder = $('.context-menu-target').data('media-folder') || '/';\n\n        new HashBrown.Views.Modals.MediaUploader({\n            onSuccess: (ids) => {\n                // We got one id back\n                if(typeof ids === 'string') {\n                    location.hash = '/media/' + ids;\n\n                // We got several ids back\n                } else if(Array.isArray(ids)) {\n                    location.hash = '/media/' + ids[0];\n                \n                }\n\n                // Refresh on replace\n                if(replaceId) {\n                    let mediaViewer = Crisp.View.get(HashBrown.Views.Editors.MediaViewer);\n\n                    if(mediaViewer) {\n                        mediaViewer.model = null;\n\n                        mediaViewer.fetch();\n                    }\n                }\n            },\n            replaceId: replaceId,\n            folder: folder\n        });\n    }\n    \n    /**\n     * Init\n     */\n    static init() {\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/media/', 'Media', 'file-image-o', {\n            getItems: () => { return resources.media; },\n\n            // Hierarchy logic\n            hierarchy: (item, queueItem) => {\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n\n                queueItem.$element.attr('data-media-id', item.id);\n                queueItem.$element.attr('data-remote', true);\n               \n                if(item.folder) {\n                    queueItem.createDir = true;\n                    queueItem.parentDirAttr = { 'data-media-folder': item.folder };\n                    queueItem.parentDirExtraAttr = { 'data-remote': isSyncEnabled };\n                }\n            },\n            \n            // Item context menu\n            itemContextMenu: {\n                'This media': '---',\n                'Open in new tab': () => { this.onClickOpenInNewTab(); },\n                'Move': () => { this.onClickMoveItem(); },\n                'Rename': () => { this.onClickRenameMedia(); },\n                'Remove': () => { this.onClickRemoveMedia(); },\n                'Replace': () => { this.onClickReplaceMedia(); },\n                'Copy id': () => { this.onClickCopyItemId(); },\n                'General': '---',\n                'Upload new media': () => { this.onClickUploadMedia(); },\n                'Refresh': () => { this.onClickRefreshResource('media'); }\n            },\n\n            // Dir context menu\n            dirContextMenu: {\n                'Directory': '---',\n                'Upload new media': () => { this.onClickUploadMedia(); },\n                'General': '---',\n                'Refresh': () => { this.onClickRefreshResource('media'); }\n            },\n\n            // General context menu\n            paneContextMenu: {\n                'Media': '---',\n                'Upload new media': () => { this.onClickUploadMedia(); },\n                'Refresh': () => { this.onClickRefreshResource('media'); }\n            }\n        });\n    }\n}\n\n// Settings\nMediaPane.canCreateDirectory = true;\n\nmodule.exports = MediaPane;\n","'use strict';\n\n/**\n * The Schema navbar pane\n * \n * @memberof HashBrown.Client.Views.Navigation\n */\nclass SchemaPane extends HashBrown.Views.Navigation.NavbarPane {\n    /**\n     * Event: Click remove schema\n     */\n    static onClickRemoveSchema() {\n        let $element = $('.context-menu-target'); \n        let id = $element.data('id');\n        let schema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(id);\n        \n        if(!schema.isLocked) {\n            UI.confirmModal(\n                'delete',\n                'Delete schema',\n                'Are you sure you want to delete the schema \"' + schema.name + '\"?',\n                () => {\n                    HashBrown.Helpers.RequestHelper.request('delete', 'schemas/' + id)\n                    .then(() => {\n                        debug.log('Removed schema with id \"' + id + '\"', this); \n\n                        return HashBrown.Helpers.RequestHelper.reloadResource('schemas');\n                    })\n                    .then(() => {\n                        HashBrown.Views.Navigation.NavbarMain.reload();\n\n                        // Cancel the SchemaEditor view if it was displaying the deleted content\n                        if(location.hash == '#/schemas/' + id) {\n                            location.hash = '/schemas/';\n                        }\n                    })\n                    .catch(UI.errorModal);\n                }\n            );\n        } else {\n            UI.messageModal(\n                'Delete schema',\n                'The schema \"' + schema.name + '\" is locked and cannot be removed'\n            );\n        }\n    }\n\n    /**\n     * Event: Click new Schema\n     */\n    static onClickNewSchema() {\n        let parentId = $('.context-menu-target').data('id');\n        let parentSchema = HashBrown.Helpers.SchemaHelper.getSchemaByIdSync(parentId);\n\n        HashBrown.Helpers.RequestHelper.request('post', 'schemas/new', parentSchema)\n        .then((newSchema) => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('schemas')\n            .then(() => {\n                HashBrown.Views.Navigation.NavbarMain.reload();\n\n                location.hash = '/schemas/' + newSchema.id;\n            });\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click pull Schema\n     */\n    static onClickPullSchema() {\n        let schemaEditor = Crisp.View.get('SchemaEditor');\n        let pullId = $('.context-menu-target').data('id');\n\n        HashBrown.Helpers.RequestHelper.request('post', 'schemas/pull/' + pullId, {})\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('schemas');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n           \n\t\t\tlocation.hash = '/schemas/' + pullId;\n\t\t\n\t\t\tlet editor = Crisp.View.get('SchemaEditor');\n\n\t\t\tif(editor && editor.model.id == pullId) {\n                editor.model = null;\n\t\t\t\teditor.fetch();\n\t\t\t}\n        }) \n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click push Schema\n     */\n    static onClickPushSchema() {\n\t\tlet $element = $('.context-menu-target');\n        let pushId = $element.data('id');\n\n\t\t$element.parent().addClass('loading');\n\n        HashBrown.Helpers.RequestHelper.request('post', 'schemas/push/' + pushId)\n        .then(() => {\n            return HashBrown.Helpers.RequestHelper.reloadResource('schemas');\n        })\n        .then(() => {\n            HashBrown.Views.Navigation.NavbarMain.reload();\n        }) \n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Init\n     */\n    static init() {\n        if(!currentUserHasScope('schemas')) { return; }\n\n        HashBrown.Views.Navigation.NavbarMain.addTabPane('/schemas/', 'Schemas', 'gears', {\n            getItems: () => { return resources.schemas; },\n\n            // Item context menu\n            getItemContextMenu: (item) => {\n                let menu = {};\n                let isSyncEnabled = HashBrown.Helpers.SettingsHelper.getCachedSettings(HashBrown.Helpers.ProjectHelper.currentProject, null, 'sync').enabled;\n\n                menu['This schema'] = '---';\n                \n                menu['Open in new tab'] = () => { this.onClickOpenInNewTab(); };\n               \n                menu['New child schema'] = () => { this.onClickNewSchema(); };\n                \n                if(!item.sync.hasRemote && !item.sync.isRemote && !item.isLocked) {\n                    menu['Remove'] = () => { this.onClickRemoveSchema(); };\n                }\n                \n                menu['Copy id'] = () => { this.onClickCopyItemId(); };\n                \n                if(item.isLocked && !item.sync.isRemote) { isSyncEnabled = false; }\n\n                if(isSyncEnabled) {\n                    menu['Sync'] = '---';\n                    \n                    if(!item.sync.isRemote) {\n                        menu['Push to remote'] = () => { this.onClickPushSchema(); };\n                    }\n\n                    if(item.sync.hasRemote) {\n                        menu['Remove local copy'] = () => { this.onClickRemoveSchema(); };\n                    }\n\n                    if(item.sync.isRemote) {\n                        menu['Pull from remote'] = () => { this.onClickPullSchema(); };\n                    }\n                }\n\n                menu['General'] = '---';\n                menu['Refresh'] = () => { this.onClickRefreshResource('schemas'); };\n\n                return menu;\n            },\n            \n            // Set general context menu items\n            paneContextMenu: {\n                'Schemas': '---',\n                'Refresh': () => { this.onClickRefreshResource('schemas'); }\n            },\n\n            // Hierarchy logic\n            hierarchy: function(item, queueItem) {\n                queueItem.$element.attr('data-schema-id', item.id);\n              \n                if(item.parentSchemaId) {\n                    queueItem.parentDirAttr = {'data-schema-id': item.parentSchemaId };\n\n                } else {\n                    queueItem.parentDirAttr = {'data-schema-type': item.type};\n                }\n            }\n        });\n    }\n}\n\nmodule.exports = SchemaPane;\n","'use strict';\n\n/**\n * @namespace HashBrown.Client.Views.Dashboard\n */\nnamespace('Views.Dashboard')\n.add(require('./BackupEditor'))\n.add(require('./InfoEditor'))\n.add(require('./LanguageEditor'))\n.add(require('./MigrationEditor'))\n.add(require('./ProjectEditor'))\n.add(require('./SyncEditor'));\n","'use strict';\n\n/**\n * The project backup editor\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass BackupEditor extends HashBrown.Views.Modals.Modal {\n    /**\n     * Event: Click upload button\n     */\n    onClickUploadBackup() {\n        let uploadModal = new HashBrown.Views.Modals.Modal({\n            title: 'Upload a backup file',\n            body: new HashBrown.Views.Widgets.Input({\n                type: 'file',\n                name: 'backup',\n                onSubmit: (formData) => {\n                    let apiPath = 'server/backups/' + this.model.id + '/upload';\n\n                    // TODO: Use the HashBrown.Helpers.ReqestHelper for this\n                    $.ajax({\n                        url: HashBrown.Helpers.RequestHelper.environmentUrl(apiPath),\n                        type: 'POST',\n                        data: formData,\n                        processData: false,\n                        contentType: false,\n                        success: (id) => {\n                            this.model = null;\n                            this.fetch();\n\n                            uploadModal.close();\n                        }\n                    });\n                }\n            }).$element,\n            actions: [\n                {\n                    label: 'OK',\n                    onClick: () => {\n                        uploadModal.$element.find('form').submit();\n                        \n                        return false;\n                    }\n                }\n            ]\n        });\n    }\n\n    /**\n     * Event: Click backup button\n     */\n    onClickCreateBackup() {\n        if(!currentUserIsAdmin()) { return; }\n\n        HashBrown.Helpers.RequestHelper.request('post', 'server/backups/' + this.model.id + '/new')\n        .then((data) => {\n            this.model = null;\n            this.fetch();\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Event: Click restore backup button\n     *\n     * @param {String} timestamp\n     */\n    onClickRestoreBackup(timestamp) {\n        if(!currentUserIsAdmin()) { return; }\n            \n        let label = '\"' + timestamp + '\"';\n        let date = new Date(parseInt(timestamp));\n\n        if(!isNaN(date.getTime())) {\n            label = date.toString();\n        }\n                            \n        let modal = UI.confirmModal('restore', 'Restore backup', 'Are you sure you want to restore the backup ' + label + '? Current content will be replaced.', () => {\n            HashBrown.Helpers.RequestHelper.request('post', 'server/backups/' + this.model.id + '/' + timestamp + '/restore')\n            .then(() => {\n                modal.close();\n                \n                this.trigger('change');\n\n                this.close();\n            })\n            .catch(UI.errorModal);\n        });\n    }\n    \n    /**\n     * Event: Click delete backup button\n     */ \n    onClickDeleteBackup(timestamp) {\n        if(!currentUserIsAdmin()) { return; }\n        \n        let label = timestamp;\n        let date = new Date(parseInt(timestamp));\n\n        if(!isNaN(date.getTime())) {\n            label = date.toString();\n        }\n        \n        let modal = UI.confirmModal('delete', 'Delete backup', 'Are you sure you want to delete the backup \"' + label + '\"?', () => {\n            HashBrown.Helpers.RequestHelper.request('delete', 'server/backups/' + this.model.id + '/' + timestamp)\n            .then(() => {\n                modal.close();\n\n                this.model = null;\n                this.fetch();\n            })\n            .catch(UI.errorModal);\n        });\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(this.model instanceof HashBrown.Models.Project === false) {\n            this.model = new HashBrown.Models.Project(this.model);\n        }\n        \n        this.title = this.model.settings.info.name + ' backups';\n        this.body = _.div(\n            _.if(!this.model.backups || this.model.backups.length < 1,\n                _.label({class: 'widget widget--label'}, 'No backups yet')\n            ),\n            // List existing backups\n            _.each(this.model.backups, (i, backup) => {\n                let label = backup;\n                let date = new Date(parseInt(backup));\n\n                if(!isNaN(date.getTime())) {\n                    label = date.toString();\n                }\n\n                return _.div({class: 'page--dashboard__backup-editor__backup widget-group'},\n                    _.p({class: 'widget widget--label page--dashboard__backup-editor__back__label'}, label),\n                    new HashBrown.Views.Widgets.Dropdown({\n                        icon: 'ellipsis-v',\n                        reverseKeys: true,\n                        options: {\n                            'Restore': () => { this.onClickRestoreBackup(backup); },\n                            'Download': () => { location = HashBrown.Helpers.ReqestHelper.environmentUrl('server/backups/' + this.model.id + '/' + backup + '.hba') },\n                            'Delete': () => { this.onClickDeleteBackup(backup); }\n                        }\n                    }).$element\n                );\n            })\n        );\n\n    }\n\n    /**\n     * Renders the modal footer\n     *\n     * @returns {HTMLElement} Footer\n     */\n    renderFooter() {\n        return [    \n            _.button({class: 'widget widget--button', title: 'Upload backup'}, 'Upload')\n                .click(() => { this.onClickUploadBackup(); }),\n            _.button({class: 'widget widget--button', title: 'Create a new backup'}, 'Create')\n                .click(() => { this.onClickCreateBackup(); })\n        ];\n    }\n}\n\nmodule.exports = BackupEditor;\n","'use strict';\n\n/**\n * The info settings editor\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass InfoEditor extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params.title = 'Project info';\n        params.actions = [\n            {\n                label: 'Save',\n                onClick: () => {\n                    this.onClickSave();\n\n                    return false;\n                }\n            }\n        ];\n\n        params.autoFetch = false;\n\n        super(params);\n\n        this.fetch();\n    }\n    \n    /**\n     * Event: Click save. Posts the model to the modelUrl\n     */\n    onClickSave() {\n        HashBrown.Helpers.SettingsHelper.setSettings(this.model.id, null, 'info', this.model.settings.info)\n        .then(() => {\n            this.close();\n\n            this.trigger('change', this.model);\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        if(!this.model) { return; }\n\n        return _.div({class: 'widget-group'},\n            _.span({class: 'widget widget--label'}, 'Name'),\n            new HashBrown.Views.Widgets.Input({\n                value: this.model.settings.info.name,\n                onChange: (newName) => {\n                    this.model.settings.info.name = newName\n                }\n            })\n        );\n    }\n}\n\nmodule.exports = InfoEditor;\n","'use strict';\n\n/**\n * The language settings editor\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass LanguageEditor extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params.title = 'Languages';\n        params.actions = [\n            {\n                label: 'Save',\n                onClick: () => {\n                    this.onClickSave();\n\n                    return false;\n                }\n            }\n        ];\n\n        params.autoFetch = false;\n\n        super(params);\n        \n        this.fetch();\n    }\n\n    /**\n     * Event: Click save\n     */\n    onClickSave() {\n        HashBrown.Helpers.LanguageHelper.setLanguages(this.model.id, this.model.settings.languages)\n        .then(() => {\n            this.close();\n\n            this.trigger('change');\n        })\n        .catch(UI.errorModal);\n    }\n\n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return _.div({class: 'widget-group'},\n            _.label({class: 'widget widget--label'}, 'Selected languages'),\n            new HashBrown.Views.Widgets.Dropdown({\n                value: this.model.settings.languages,\n                useTypeAhead: true,\n                useMultiple: true,\n                options: HashBown.Helpers.LanguageHelper.getLanguageOptions(this.model.id),\n                onChange: (newValue) => {\n                    this.model.settings.languages = newValue;\n                }\n            }).$element\n        );\n    }\n}\n\nmodule.exports = LanguageEditor;\n","'use strict';\n\n/**\n * The editor for migrating content between environments\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass MigrationEditor extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params.title = 'Migrate content';\n\n        params.actions = [\n            {\n                label: 'Migrate',\n                onClick: () => {\n                    this.onSubmit(); \n\n                    return false;\n                }\n            }\n        ];\n\n        params.data = {\n            from: params.model.environments[0],\n            to: '',\n            settings: {\n                schemas: true,\n                replace: true\n            }\n        };\n\n        super(params);\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(!this.data.to || this.getToOptions().indexOf(this.data.to) < 0) {\n            this.data.to = this.getToOptions()[0];\n        }\n    }\n\n    /**\n     * Renders this modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return [\n            _.div({class: 'widget-group'},\n                new HashBrown.Views.Widgets.Dropdown({\n                    value: this.data.from,\n                    options: this.model.environments,\n                    onChange: (newValue) => {\n                        this.data.from = newValue;\n\n                        this.fetch();\n                    }\n                }).$element,\n                _.div({class: 'widget-group__separator fa fa-arrow-right'}),\n                new HashBrown.Views.Widgets.Dropdown({\n                    value: this.data.to,\n                    options: this.getToOptions(),\n                    onChange: (newValue) => {\n                        this.data.to = newValue;\n                    }\n                }).$element\n            ),\n            _.each({\n                replace: 'Overwrite on target',\n                schemas: 'Schemas',\n                content: 'Content',\n                forms: 'Forms',\n                media: 'Media',\n                connections: 'Connections'\n            }, (key, label) => {\n                return _.div({class: 'widget-group'},      \n                    _.label({class: 'widget widget--label'}, label),\n                    new HashBrown.Views.Widgets.Input({\n                        type: 'checkbox',\n                        value: this.data.settings[key] === true,\n                        onChange: (newValue) => {\n                            this.data.settings[key] = newValue;\n                        }\n                    }).$element\n                );\n            })\n        ];\n    }\n\n    /**\n     * Gets the displayed \"to\" options\n     */\n    getToOptions() {\n        return this.model.environments.filter((environment) => {\n            return environment !== this.data.from;   \n        });\n    }\n\n    /**\n     * Event: Clicked submit\n     */\n    onSubmit() {\n        HashBrown.Helpers.RequestHelper.request('post', 'server/migrate/' + this.model.id, this.data)\n        .then(() => {\n            UI.messageModal('Success', 'Successfully migrated content from \"' + this.data.from + '\" to \"' + this.data.to + '\"', () => {\n                this.trigger('change');\n\n                this.close();\n            });\n        })\n        .catch(UI.errorModal);\n    }\n}\n\nmodule.exports = MigrationEditor;\n","'use strict';\n\n/**\n * The editor for projects as seen on the dashboard\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass ProjectEditor extends Crisp.View {\n    constructor(params) {\n        super(params);\n\n        _.append(this.element,\n            _.div({class: 'widget--spinner embedded'},\n                _.div({class: 'widget--spinner__image fa fa-refresh'})\n            )\n        );\n\n        this.fetch();\n    }\n   \n    /**\n     * Event: Click remove button\n     */ \n    onClickRemove() {\n        if(!currentUserIsAdmin()) { return; }\n\n        let modal = new HashBrown.Views.Modals.Modal({\n            title: 'Delete ' + this.model.settings.info.name,\n            body: _.div({class: 'widget-group'},\n                _.p({class: 'widget widget--label'}, 'Type the project name to confirm'),\n                _.input({class: 'widget widget--input text', type: 'text', placeholder: this.model.settings.info.name})\n                    .on('input', (e) => {\n                        let $btn = modal.$element.find('.widget.warning');\n                        let isMatch = $(e.target).val() == this.model.settings.info.name;\n                        \n                        $btn.toggleClass('disabled', !isMatch);\n                    })\n            ),\n            actions: [\n                {\n                    label: 'Cancel',\n                    class: 'default'\n                },\n                {\n                    label: 'Delete',\n                    class: 'warning disabled',\n                    onClick: () => {\n                        HashBrown.Helpers.RequestHelper.request('delete', 'server/projects/' + this.model.id)\n                        .then(() => {\n                            location.reload();\n                        })\n                        .catch(UI.errorModal);\n                    }\n                }\n            ]\n        });\n    }\n\n    /**\n     * Event: Click remove environment\n     *\n     * @param {String} environmentName\n     */\n    onClickRemoveEnvironment(environmentName) {\n        let modal = UI.confirmModal('Remove', 'Remove environment \"' + environmentName + '\"', 'Are you sure want to remove the environment \"' + environmentName + '\" from the project \"' + (this.model.settings.info.name || this.model.id) + '\"?', () => {\n            HashBrown.Helpers.RequestHelper.request('delete', 'server/projects/' + this.model.id + '/' + environmentName)\n            .then(() => {\n                this.model = null;\n                this.fetch();\n            })\n            .catch(UI.errorModal);\n        });\n    }\n    \n    /**\n     * Event: Click info button */\n    onClickInfo() {\n        if(!currentUserIsAdmin()) { return; }\n        \n        new HashBrown.Views.Dashboard.InfoEditor({\n            modelUrl: '/api/server/projects/' + this.model.id\n        })\n        .on('change', (newInfo) => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n    \n    /**\n     * Event: Click sync button\n     */\n    onClickSync() {\n        if(!currentUserIsAdmin()) { return; }\n\n        new HashBrown.Views.Dashboard.SyncEditor({\n            projectId: this.model.id,\n            modelUrl: '/api/' + this.model.id + '/settings/sync'\n        })\n        .on('change', (newSettings) => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n    \n    /**\n     * Event: Click languages button\n     */\n    onClickLanguages() {\n        if(!currentUserIsAdmin()) { return; }\n        \n        new HashBrown.Views.Dashboard.LanguageEditor({\n            modelUrl: '/api/server/projects/' + this.model.id\n        })\n        .on('change', () => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n\n    /**\n     * Event: Click backups button\n     */\n    onClickBackups() {\n        if(!currentUserIsAdmin()) { return; }\n        \n        new HashBrown.Views.Dashboard.BackupEditor({\n            modelUrl: '/api/server/projects/' + this.model.id\n        })\n        .on('change', () => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n\n    /**\n     * Event: Click migration button\n     */\n    onClickMigrate() {\n        if(!currentUserIsAdmin()) { return; }\n\n        if(this.model.environments.length < 2) {\n            UI.errorModal(new Error('You need at least 2 environments to migrate content'));\n            return;\n        }\n    \n        new HashBrown.Views.Dashboard.MigrationEditor({\n            model: this.model\n        })\n        .on('change', () => {\n            this.model = null;\n            this.fetch();\n        });\n    }\n\n    /**\n     * Event: Click add environment button\n     */\n    onClickAddEnvironment() {\n        let modal = new HashBrown.Views.Modals.Modal({\n            title: 'New environment for \"' + this.model.id + '\"',\n            body: _.div({class: 'widget-group'},\n                _.label({class: 'widget widget--label'}, 'Environment name'),\n                new HashBrown.Views.Widgets.Input({\n                    placeholder: 'i.e. \"testing\" or \"staging\"'\n                })\n            ),\n            actions: [\n                {\n                    label: 'Create',\n                    onClick: () => {\n                        let environmentName = modal.$element.find('input').val();\n\n                        if(!environmentName) { return false; }\n\n                        HashBrown.Helpers.RequestHelper.request('put', 'server/projects/' + this.model.id + '/' + environmentName)\n                        .then(() => {\n                            modal.close();\n\n                            this.model = null;\n                            this.fetch();\n                        })\n                        .catch(UI.errorModal);\n\n                        return false;\n                    }\n                }\n            ]\n        });\n    }\n\n    /**\n     * Pre render\n     */\n    prerender() {\n        if(this.model instanceof HashBrown.Models.Project === false) {\n            this.model = new HashBrown.Models.Project(this.model);\n        }\n    }\n\n    /**\n     * Renders this editor\n     */\n    template() {\n        let languageCount = this.model.settings.languages.length;\n        let userCount = this.model.users.length;\n\n        return _.div({class: 'page--dashboard__project in'},\n            _.div({class: 'page--dashboard__project__body'},\n                _.if(currentUserIsAdmin(),\n                    new HashBrown.Views.Widgets.Dropdown({\n                        icon: 'ellipsis-v',\n                        reverseKeys: true,\n                        options: {\n                            'Info': () => { this.onClickInfo(); },\n                            'Languages': () => { this.onClickLanguages(); },\n                            'Backups': () => { this.onClickBackups(); },\n                            'Sync': () => { this.onClickSync(); },\n                            'Delete': () => { this.onClickRemove(); },\n                            'Migrate content': () => { this.onClickMigrate(); }\n                        }\n                    }).$element.addClass('page--dashboard__project__menu')\n                ),\n                _.div({class: 'page--dashboard__project__info'},\n                    _.h4(this.model.settings.info.name || this.model.id),\n                    _.p(userCount + ' user' + (userCount != 1 ? 's' : '')),\n                    _.p(languageCount + ' language' + (languageCount != 1 ? 's' : '') + ' (' + this.model.settings.languages.join(', ') + ')')\n                ),\n                _.div({class: 'page--dashboard__project__environments'},\n                    _.each(this.model.environments, (i, environment) => {\n                        return _.div({class: 'page--dashboard__project__environment'},\n                            _.a({title: 'Go to \"' + environment + '\" CMS', href: '/' + this.model.id + '/' + environment, class: 'widget widget--button expanded'}, \n                                environment\n                            ),\n                            _.if(currentUserIsAdmin(),\n                                new HashBrown.Views.Widgets.Dropdown({\n                                    icon: 'ellipsis-v',\n                                    reverseKeys: true,\n                                    options: {\n                                        'Delete': () => { this.onClickRemoveEnvironment(environment); }\n                                    }\n                                }).$element.addClass('page--dashboard__project__environment__menu')\n                            )\n                        );\n                    }),\n                    _.if(currentUserIsAdmin(),\n                        _.button({title: 'Add environment', class: 'widget widget--button round right fa fa-plus'})\n                            .click(() => { this.onClickAddEnvironment(); })\n                    )\n                )\n            )\n        );\n    }\n}\n\nmodule.exports = ProjectEditor;\n","'use strict';\n\n/**\n * The sync settings editor\n *\n * @memberof HashBrown.Client.Views.Dashboard\n */\nclass SyncEditor extends HashBrown.Views.Modals.Modal {\n    constructor(params) {\n        params.title = 'Sync';\n        params.actions = [\n            {\n                label: 'Apply',\n                class: 'btn-primary',\n                onClick: () => {\n                    this.onClickApply();\n\n                    return false;\n                }\n            },\n            {\n                label: 'Save',\n                class: 'btn-primary',\n                onClick: () => {\n                    this.onClickSave();\n\n                    return false;\n                }\n            }\n        ];\n\n        params.autoFetch = false;\n\n        super(params);\n        \n        this.fetch();\n    }\n    \n    /**\n     * Event: Click save. Posts the model to the modelUrl and closes\n     */\n    onClickSave() {\n        this.model.url = this.$element.find('input[name=\"url\"]').val();\n\n        HashBrown.Helpers.SettingsHelper.setSettings(this.projectId, '', 'sync', this.model)\n        .then(() => {\n            this.close();\n\n            this.trigger('change', this.model);\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Event: Click apply. Posts the model to the modelUrl\n     */\n    onClickApply() {\n        this.model.url = this.$element.find('input[name=\"url\"]').val();\n\n        HashBrown.Helpers.SettingsHelper.setSettings(this.projectId, '', 'sync', this.model)\n        .then(() => {\n            this.trigger('change', this.model);\n        })\n        .catch(UI.errorModal);\n    }\n    \n    /**\n     * Render enabled switch\n     */\n    renderEnabledSwitch() {\n        return new HashBrown.Views.Widgets.Input({\n            type: 'checkbox',\n            name: 'enabled',\n            value: this.model.enabled === true,\n            onChange: (newValue) => {\n                this.model.enabled = newValue;\n            }\n        }).$element;\n    }\n\n    /**\n     * Renders the URL editor\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderUrlEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            name: 'url',\n            type: 'text',\n            value: this.model.url || '',\n            placeholder: 'e.g. \"https://myserver.com/api/\"'\n        }).$element;\n    }\n    \n    /**\n     * Renders the project id editor\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderProjectIdEditor() {\n        return new HashBrown.Views.Widgets.Input({\n            name: 'name',\n            value: this.model.project,\n            onChange: (newValue) => {\n                this.model.project = newValue;\n            }\n        }).$element;\n    }\n    \n    /**\n     * Renders the token editor\n     *\n     * @returns {HTMLElement} Element\n     */\n    renderTokenEditor() {\n        return [\n            new HashBrown.Views.Widgets.Input({\n                value: this.model.token,\n                name: 'token',\n                placeholder: 'API token',\n                onChange: (newToken) => { this.model.token = newToken; }\n            }).$element,\n            _.button({class: 'widget widget--button small fa fa-refresh'})\n                .on('click', () => {\n                    if(!this.model.url) {\n                        alert('You need to specify a URL. Please do so and apply the settings first.');\n                        return;\n                    }\n                    \n                    let tokenModal = new HashBrown.Views.Modals.Modal({\n                        title: 'Refresh token',\n                        body: [\n                            _.div({class: 'widget-group'},\n                                _.label({class: 'widget widget--label'}, 'Username'),\n                                _.input({class: 'widget widget--input text', type: 'text'})\n                            ),\n                            _.div({class: 'widget-group'},\n                                _.label({class: 'widget widget--label'}, 'Password'),\n                                _.input({class: 'widget widget--input text', type: 'password'})\n                            )\n                        ],\n                        actions: [\n                            {\n                                label: 'Get token',\n                                onClick: () => {\n                                    let username = tokenModal.element.querySelector('input[type=\"text\"]').value;\n                                    let password = tokenModal.element.querySelector('input[type=\"password\"]').value;\n                                    \n                                    HashBrown.Helpers.RequestHelper.request(\n                                        'post',\n                                        this.projectId + '/sync/login',\n                                        {\n                                            username: username,\n                                            password: password\n                                        }\n                                    ).then((token) => {\n                                        this.model.token = token;\n                                        \n                                        this.element.querySelector('input[name=\"token\"]').value = token;\n                                    })\n                                    .catch(UI.errorModal);\n                                }\n                            }\n                        ]\n                    });\n                })\n        ];\n    }\n    \n    /**\n     * Renders a single field\n     *\n     * @param {String} label\n     * @param {HTMLElement} $content\n     *\n     * @return {HTMLElement} Editor element\n     */\n    renderField(label, $content) {\n        return _.div({class: 'widget-group'},\n            _.div({class: 'widget widget--label'},\n                label\n            ),\n            $content\n        );\n    }\n\n    /**\n     * Renders the modal body\n     *\n     * @returns {HTMLElement} Body\n     */\n    renderBody() {\n        return [\n            this.renderField('Enabled', this.renderEnabledSwitch()),\n            this.renderField('API URL', this.renderUrlEditor()),\n            this.renderField('API Token', this.renderTokenEditor()),\n            this.renderField('Project id', this.renderProjectIdEditor())\n        ];\n    }\n}\n\nmodule.exports = SyncEditor;\n"],"sourceRoot":""}